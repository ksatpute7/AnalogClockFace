function SCOBot(a){"use strict";function b(){return y=scorm.initialize(),scorm.debug(x.prefix+": SCO Loaded from window.onload "+y,4),y&&(D.start(),$(D).triggerHandler({type:"load"})),y}function c(){if(scorm.debug("SCO is being asked, *cough* forced to exit ...",3),A){switch($(D).triggerHandler({type:"unload"}),scorm.get("exit_type")){case"finish":D.finish();break;case"suspend":D.suspend();break;case"timeout":D.timeout();break;default:scorm.debug(x.prefix+": unknown exit type",2)}scorm.debug(x.prefix+": SCO is done unloading.",4),A=!1}}function d(a){return scorm.debug(C[a],2),!0}function e(a){$(D).triggerHandler({type:"exception",error:a})}function f(){var a=scorm.getvalue("cmi.success_status");return!("passed"!==a&&"failed"!==a)}function g(){var a=scorm.getvalue("cmi.success_status");"passed"===a&&"finish"===scorm.get("exit_type")&&"false"===scorm.getvalue("cmi.score.scaled")&&"1"===scorm.getvalue("cmi.score.max")&&scorm.setvalue("cmi.score.scaled","1")}function h(a){return B.indexOf("|"+a+"|")>=0}function i(a){var b=/[^\f\r\n\t\v\0\s\S\w\W\d\D\b\\B\\cX\\xhh\\uhhh]/gi;return a.replace(b,"")}function j(a){var b;switch(scorm.get("time_type")){case"UTC":b=/^(\d{4})-0?(\d+)-0?(\d+)[T ]0?(\d+):0?(\d+):0?(\d+)(?:\.(\d+))(|Z)$/;break;case"GMT":b=/^(\d{4})-0?(\d+)-0?(\d+)[T ]0?(\d+):0?(\d+):0?(\d+)(?:\.(\d+))[\+\-]\d{2}:\d{2}$/;break;default:b=/^(\d{4})-0?(\d+)-0?(\d+)[T ]0?(\d+):0?(\d+):0?(\d+)$/}return b.test(a)}function k(a){var b=/^(?:P)([^T]*)(?:T)?(.*)?$/;return b.test(a)}function l(){return scorm.debug(x.prefix+": You didn't call 'start()' yet, or you already terminated, ignoring.",2),"false"}function m(){return(new Date).getTime()}function n(a,b){var c=parseFloat(a);return parseFloat(c.toPrecision(b))}function o(a,b){var c=0;switch(a){case"order_matters":c=/^\{order_matters=.*?\}/;break;case"case_matters":c=/^\{case_matters=.*?\}/;break;case"lang":c=/^\{lang=.*?\}/;break;default:scorm.debug(x.prefix+": Sorry, this is not a valid Response type.",1)}return c.exec(b)}function p(){scorm.debug("Times Up!");var a=scorm.getvalue("cmi.time_limit_action").split(","),b=!("message"!==a[1]);b&&$(D).triggerHandler({type:"message",text:"Time Limit Exceeded"}),scorm.set("exit_type","timeout"),"exit"===a[0]?c():$(D).triggerHandler({type:"continue"})}function q(a,b){var c,d="",e="",f=0,g=[],h=[];switch(a){case"true-false":return b=b.toString(),"true"===b||"false"===b?b:(scorm.debug(x.prefix+": Developer, you're not passing true or false for true-false.  I got "+b+" instead",1),"");case"choice":case"sequencing":if($.isArray(b)){c=0,b.length>36&&x.scorm_strict&&(scorm.debug(x.prefix+": Developer, you're passing a sum of values that exceeds SCORM's limit of 36 for this pattern.",2),b=b.slice(0,36));for(c in b)b.hasOwnProperty(c)&&b[c].length>10&&x.scorm_strict&&(scorm.debug(x.prefix+": Developer, you're passing values that exceed SCORM's limit of 10 characters.  Yours have "+b[c].length+". I will truncate this as not to lose data.",2),b[c]=b[c].substring(0,10));d=b.join("[,]"),b=d}else scorm.debug(x.prefix+": Developer, you're not passing a array type for sequencing/choice.  I got "+typeof b+" instead\n"+JSON.stringify(b),1),b="";return b;case"fill-in":return $.isPlainObject(b)?(void 0!==b.case_matters&&(d+="{case_matters="+b.case_matters+"}"),void 0!==b.order_matters&&(d+="{order_matters="+b.order_matters+"}"),void 0!==b.lang&&(d+="{lang="+b.lang+"}"),d+=b.words.join("[,]"),b=d):(scorm.debug(x.prefix+": Developer, you're not passing a object type for fill in.  I got "+typeof b+" instead",1),b=""),b;case"long-fill-in":return $.isPlainObject(b)?(void 0!==b.case_matters&&(d+="{case_matters="+b.case_matters+"}"),void 0!==b.lang&&(d+="{lang="+b.lang+"}"),d+=b.text,b=d):(scorm.debug(x.prefix+": Developer, you're not passing a object type for long fill in.  I got "+typeof b+" instead",1),b=""),b;case"matching":if($.isArray(b)){for(f=0;f<b.length;f+=1){if(!$.isArray(b[f]))return scorm.debug(x.prefix+": Developer, you're not passing a array type for matching/performance.  I got "+typeof b+" instead",1),"";g.push(b[f].join("[.]"))}d=g.join("[,]"),b=d}else scorm.debug(x.prefix+": Developer, you're not passing a array type for matching/performance.  I got "+typeof b+" instead",1),b="";return b;case"performance":if($.isArray(b)){for(f=0;f<b.length;f+=1){if(!$.isArray(b[f]))return scorm.debug(x.prefix+": Developer, you're not passing a array type for performance learner response.  I got "+typeof b[f]+" instead on "+f,1),scorm.debug(b,1),"";g.push(b[f].join("[.]"))}d=g.join("[,]")}else if(void 0!==b.order_matters&&(d+="{order_matters="+b.order_matters+"}"),$.isArray(b.answers)){for(f=0;f<b.answers.length;f+=1){if(!$.isArray(b.answers[f]))return scorm.debug(x.prefix+": Developer, you're not passing a array type for performance correct response.  I got "+typeof b.answers[f]+" instead on "+f,1),scorm.debug(b,1),"";$.isPlainObject(b.answers[f][1])&&(h=[n(b.answers[f][1].min,7),n(b.answers[f][1].max,7)],e=h.join("[:]"),b.answers[f][1]=e),g.push(b.answers[f].join("[.]"))}d+=g.join("[,]")}else scorm.debug(x.prefix+": Developer, you're not passing a array type for performance correct response.  I got "+typeof b.answers+" instead",1),scorm.debug(b,1);return b=d;case"numeric":return"number"==typeof b?d=b.toString():$.isPlainObject(b)?(g=[n(b.min,7),n(b.max,7)],d=g.join("[:]")):(d=parseFloat(b),"NaN"===d&&scorm.debug(x.prefix+": Developer, your not passing a number for a numeric interaction.  I got "+b+" instead",1),d+=""),d;case"likert":case"other":return b.toString();default:return scorm.debug(x.prefix+": Sorry, invalid interaction type detected for "+a+" on "+b,1),!1}}function r(a,b){var c=0,d=[],e={},f=!1;switch(a){case"true-false":return b;case"choice":case"sequencing":return d=b.split("[,]"),b=d;case"fill-in":return d=o("case_matters",b),null!==d&&-1!==d[0].search(/^\{case_matters=(true|false)\}$/)&&(e.case_matters=d[0].substring("{case_matters=".length,d[0].length-1),b=b.substring(d[0].length,b.length),scorm.debug("=== case matters"+b,4)),d=o("order_matters",b),null!==d&&-1!==d[0].search(/^\{order_matters=(true|false)\}$/)&&(e.order_matters=d[0].substring("{order_matters=".length,d[0].length-1),b=b.substring(d[0].length,b.length),scorm.debug("=== order matters"+b,4)),d=o("lang",b),null!==d&&-1!==d[0].search(/^\{lang=.*?\}$/)&&(e.lang=d[0].substring("{lang=".length,d[0].length-1),b=b.substring(d[0].length,b.length)),e.words=b.split("[,]"),e;case"long-fill-in":return d=o("case_matters",b),null!==d&&-1!==d[0].search(/^\{case_matters=(true|false)\}$/)&&(e.case_matters=d[0].substring("{case_matters=".length,d[0].length-1),b=b.substring(d[0].length,b.length),scorm.debug("=== case matters"+b,4)),d=o("lang",b),null!==d&&-1!==d[0].search(/^\{lang=.*?\}$/)&&(e.lang=d[0].substring("{lang=".length,d[0].length-1),b=b.substring(d[0].length,b.length)),e.text=b,e;case"matching":for(d=b.split("[,]"),c=0;c<d.length;c+=1)d[c]=d[c].split("[.]");return d;case"performance":for(d=o("order_matters",b),null!==d&&-1!==d[0].search(/^\{order_matters=(true|false)\}$/)&&(f=!0,e.order_matters=d[0].substring("{order_matters=".length,d[0].length-1),b=b.substring(d[0].length,b.length),scorm.debug("=== order matters"+b,4)),d=b.split("[,]"),c=0;c<d.length;c+=1)d[c]=d[c].split("[.]");return f?(e.answers=d,e):d;case"numeric":case"likert":case"other":return b;default:return scorm.debug(x.prefix+": Sorry, invalid interaction type detected for "+a+" on "+b,1),!1}}function s(){var a;return a=scorm.setvalue("cmi.suspend_data",i(JSON.stringify(x.suspend_data))),"true"===a?(scorm.debug(x.prefix+": Suspend Data saved",4),scorm.debug(x.suspend_data,4),"true"):(scorm.debug(x.prefix+": Sorry, there was an issue saving your suspend data, please review the SCORM Logs",1),"false")}function t(){if(A){var a,b,c=0,d=0,e=1,f=0,g=0;if(0===x.totalInteractions||0===x.totalObjectives)return scorm.debug(x.prefix+": Sorry, I cannot calculate Progress as the totalInteractions and or Objectives are zero",2),"false";if(b=parseInt(scorm.getvalue("cmi.objectives._count"),10),scorm.debug(x.prefix+" Count is "+b),b>0)for(b-=1,g=b;g>=0;g-=1)d=parseFloat(scorm.getvalue("cmi.objectives."+g+".score.raw")),scorm.debug("Score Raw: "+d),isNaN(d)?scorm.debug(x.prefix+" We got a NaN converting objectives."+g+".score.raw",2):c+=parseFloat(d),"completed"===scorm.getvalue("cmi.objectives."+g+".completion_status")&&(f+=1);return scorm.debug(x.prefix+" Setting score "+scorm.setvalue("cmi.score.raw",c.toString())),x.scoreMax-x.scoreMin===0?(scorm.debug(x.prefix+": Division by Zero for scoreMax - scoreMin "+x.scoreMax,2),scorm.setvalue("cmi.score.scaled",e)):(e=((c-x.scoreMin)/(x.scoreMax-x.scoreMin)).toString(),scorm.debug(x.prefix+": Score Scaled = "+e,3),scorm.setvalue("cmi.score.scaled",n(e,7))),a=(f/x.totalObjectives).toString(),scorm.setvalue("cmi.progress_measure",n(a,7)),x.completion_status=parseFloat(a)>=parseFloat(x.completion_threshold)?"completed":"incomplete",scorm.setvalue("cmi.completion_status",x.completion_status),x.success_status=parseFloat(e)>=parseFloat(x.scaled_passing_score)?"passed":"failed",scorm.setvalue("cmi.success_status",x.success_status),{score_scaled:scorm.getvalue("cmi.score.scaled"),success_status:scorm.getvalue("cmi.success_status"),progress_measure:scorm.getvalue("cmi.progress_measure"),completion_status:scorm.getvalue("cmi.completion_status")}}return l()}function u(){if(A){var a,b="cmi.comments_from_lms.",c=scorm.getvalue(b+"_count"),d=[],e={};if(!h(c))return"false";for(c-=1,a=0;c>=a;a+=1)b+=a+".",e.comment=scorm.getvalue(b+"comment"),e.location=scorm.getvalue(b+"location"),e.timestamp=scorm.getvalue(b+"timestamp"),d.push(e),e={};return d}return l()}function v(){g(),f()||scorm.setvalue("cmi.success_status","unknown"),"passed"===scorm.get("success_status")&&scorm.setvalue("cmi.success_status","passed"),"completed"!==scorm.getvalue("cmi.completion_status")&&scorm.setvalue("cmi.completion_status","incomplete"),"completed"===scorm.get("completion_status")&&scorm.setvalue("cmi.completion_status","completed")}var w={version:"2.0",createDate:"04/07/2011 09:33AM",modifiedDate:"03/05/2013 5:10PM",prefix:"SCOBot",launch_data:{},interaction_mode:"state",launch_data_type:"querystring",initiate_timer:!0,scorm_strict:!0,scorm_edition:"3rd",success_status:"unknown",location:"",completion_status:"",suspend_data:{pages:[]},mode:"",completion_threshold:0,scaled_passing_score:.7,max_time_allowed:"",totalInteractions:0,totalObjectives:0,startTime:0},x=$.extend(w,a),y=!1,z=!1,A=!1,B="|null|undefined|false|NaN|| |",C=scorm.get("error"),D=this;this.start=function(){var a="",b="",c="";return scorm.debug(x.prefix+": I am starting...",3),A?(scorm.debug(x.prefix+": You already called start!  I don't see much point in doing this more than once.",2),!1):(A=!0,x.startTime=m(),c=scorm.getvalue("cmi.launch_data"),"json"===x.launch_data_type?x.launch_data=JSON.parse(c):c.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,b,c,d){x.launch_data[b]=d}),scorm.debug(x.prefix+": Launch Data:",4),scorm.debug(x.launch_data,4),x.mode=scorm.getvalue("cmi.mode"),x.entry=scorm.getvalue("cmi.entry"),""===x.entry||"resume"===x.entry?(x.location=scorm.getvalue("cmi.location"),x.suspend_data=scorm.getvalue("cmi.suspend_data"),x.suspend_data.length>0&&!h(x.suspend_data)?(scorm.debug(x.prefix+": Returning suspend data object from a prior session",4),x.suspend_data=JSON.parse(x.suspend_data),scorm.debug(x.suspend_data,4),""===x.entry&&(x.entry="resume")):scorm.debug(x.prefix+": Creating new suspend data object",4)):(scorm.debug(x.prefix+": First time running this SCO based on LMS entry value.",4),scorm.debug(x.prefix+": Creating new suspend data object",4)),a=scorm.getvalue("cmi.completion_threshold"),h(a)||"-1"===a||(x.completion_threshold=a),b=scorm.getvalue("cmi.scaled_passing_score"),h(b)||"-1"===b||(x.scaled_passing_score=b),x.completion_status=scorm.getvalue("cmi.completion_status"),x.success_status=scorm.getvalue("cmi.success_status"),x.comments_from_lms=u(),"false"!==x.comments_from_lms&&$(D).triggerHandler({type:"comments_lms",data:x.comments_from_lms}),x.max_time_allowed=scorm.getvalue("cmi.max_time_allowed"),k(x.max_time_allowed)?x.initiate_timer&&(scorm.debug(x.prefix+" This SCO has a set time, I am starting the timer for "+x.max_time_allowed+"..."),D.startTimer()):scorm.debug(x.prefix+"This is not ISO8601 time duration. "+x.max_time_allowed),!0)},this.setTotals=function(a){return A?(h(a.totalInteractions)||(x.totalInteractions=a.totalInteractions),h(a.totalObjectives)||(x.totalObjectives=a.totalObjectives),h(a.scoreMin)||(x.scoreMin=n(a.scoreMin,7),scorm.setvalue("cmi.score.min",a.scoreMin.toString())),h(a.scoreMax)||(x.scoreMax=n(a.scoreMax,7),scorm.setvalue("cmi.score.max",a.scoreMax.toString())),"true"):l()},this.startTimer=function(){var a=10*scorm.ISODurationToCentisec(x.max_time_allowed);setTimeout(p,a)},this.debug=scorm.debug,this.getvalue=scorm.getvalue,this.setvalue=scorm.setvalue,this.getMode=function(){return A?x.mode:l()},this.getEntry=function(){return A?x.entry:l()},this.setBookmark=function(a){return A?(x.location=a.toString(),scorm.setvalue("cmi.location",x.location)):l()},this.getBookmark=function(){return A?x.location:l()},this.progress=t,this.setSuspendDataByPageID=function(a,b,c){if(A){var d;for(d=0;d<x.suspend_data.pages.length;d+=1)if(x.suspend_data.pages[d].id===a)return x.suspend_data.pages[d].data=c,scorm.debug(x.prefix+": Suspend Data Set",4),scorm.debug(x.suspend_data,4),s();return x.suspend_data.pages.push({id:a,title:b,data:c}),scorm.debug(x.prefix+": Suspend Data set:",4),scorm.debug(x.suspend_data,4),s()}return l()},this.getSuspendDataByPageID=function(a){if(A){var b;for(b=0;b<x.suspend_data.pages.length;b+=1)if(x.suspend_data.pages[b].id===a)return x.suspend_data.pages[b].data;return"false"}return l()},this.getSecondsFromStart=function(){return x.startTime-m()},this.setInteraction=function(a){if(A){var b,c,d,e,f,g,i,j,k,m,n="cmi.interactions.",o=a.timestamp||scorm.isoStringToDate(scorm.getvalue(n+scorm.getInteractionByID(a.id)+".timestamp"));if(!$.isPlainObject(a))return scorm.debug(x.prefix+": Developer, your not passing a {object} argument!!  Got "+typeof a+" instead.",1),"false";if(h(a.id)){scorm.debug(x.prefix+": Developer, your passing a interaction without a ID\nSee question:\n"+a.description,1);for(m in a)a.hasOwnProperty(m)&&scorm.debug("key: "+m+"\n value: "+a[m]);return"false"}if("date"===$.type(a.timestamp)&&(i=scorm.isoDateToString(a.timestamp)),a.timestamp=i,"date"===$.type(a.latency)?(j=(a.latency.getTime()-o.getTime())/1e3,a.latency=scorm.centisecsToISODuration(100*j,!0)):a.learner_response.length>0&&!h(a.learner_response)&&(a.latency=new Date,j=(a.latency.getTime()-o.getTime())/1e3,a.latency=scorm.centisecsToISODuration(100*j,!0)),g="_count","journaled"===x.interaction_mode?b="-1"===scorm.getvalue(n+g)?"0":scorm.getvalue(n+g):(b=scorm.getInteractionByID(a.id),h(b)&&(b="-1"===scorm.getvalue(n+g)?"0":scorm.getvalue(n+g))),n+=b+".",h(a.id)||(k=scorm.setvalue(n+"id",a.id)),h(a.type)||(k=scorm.setvalue(n+"type",a.type)),g="objectives._count",void 0!==a.objectives)for(d=0;d<a.objectives.length;d+=1)c=scorm.getInteractionObjectiveByID(b,a.objectives[d].id),"false"===c&&(c="-1"===scorm.getvalue(n+g)?"0":scorm.getvalue(n+g)),k=scorm.setvalue(n+"objectives."+c+".id",a.objectives[d].id);if(void 0!==a.timestamp&&(k=scorm.setvalue(n+"timestamp",a.timestamp)),g="correct_responses._count",$.isArray(a.correct_responses))for(e=0;e<a.correct_responses.length;e+=1)f=scorm.getInteractionCorrectResponsesByPattern(b,a.correct_responses[e].pattern),scorm.debug(x.prefix+": Trying to locate pattern "+a.correct_responses[e].pattern+" resulted in "+f,4),"false"===f&&(f="-1"===scorm.getvalue(n+g)?0:scorm.getvalue(n+g),scorm.debug(x.prefix+": p is now "+f,4)),"match"===f?scorm.debug(x.prefix+": Developer, I've already added this correct response type '"+a.correct_responses[e].pattern+"'",2):k=scorm.setvalue(n+"correct_responses."+f+".pattern",q(a.type,a.correct_responses[e].pattern));else scorm.debug(x.prefix+": Something went wrong with Correct Responses, it wasn't an Array.",1);return h(a.weighting)||(k=scorm.setvalue(n+"weighting",a.weighting)),h(a.learner_response)||(k=scorm.setvalue(n+"learner_response",q(a.type,a.learner_response))),h(a.result)||(k=scorm.setvalue(n+"result",a.result)),h(a.latency)||(k=scorm.setvalue(n+"latency",a.latency)),h(a.description)||(k=scorm.setvalue(n+"description",a.description)),k}return l()},this.getInteraction=function(a){if(A){var b,c,d,e,f,g,h,i="cmi.interactions.",k=0,m={};if(b=scorm.getInteractionByID(a),"false"===b)return b;if(i+=b+".",m.id=a,m.type=scorm.getvalue(i+"type"),c=scorm.getvalue(i+"objectives._count"),e=scorm.getvalue(i+"timestamp"),f=scorm.getvalue(i+"latency"),g=j(e)?scorm.isoStringToDate(e):e,h=j(f)?scorm.isoStringToDate(f):f,m.objectives=[],"false"!==c)for(k=0;c>k;k+=1)m.objectives.push({id:scorm.getvalue(i+"objectives."+k+".id")});if(m.timestamp=g,d=scorm.getvalue(i+"correct_responses._count"),m.correct_responses=[],"false"!==d)for(k=0;d>k;k+=1)m.correct_responses.push({pattern:r(m.type,scorm.getvalue(i+"correct_responses."+k+".pattern"))});return m.weighting=scorm.getvalue(i+"weighting"),m.learner_response=r(m.type,scorm.getvalue(i+"learner_response")),m.result=scorm.getvalue(i+"result"),m.latency=h,m.description=scorm.getvalue(i+"description"),m}return l()},this.setObjective=function(a){if(A){var b,c="cmi.objectives.",d=scorm.getObjectiveByID(a.id),e="false",f=!1,g=": Passed no or bad ",i=" ignored.",j=scorm.setvalue;if(scorm.debug(x.prefix+": Setting Objective at "+d+" (This may be false)"),h(d)){if(d=scorm.getvalue(c+"_count"),"false"===d)return scorm.debug(x.prefix+": LMS is return false, can not proceed, check error codes"),d;scorm.debug(x.prefix+": Objective "+a.id+" was not found.  Adding new at "+d+" "+a.description),f=!0}if(c+=d+".",f){if(h(a.id)){scorm.debug(x.prefix+": You did not pass an objective ID!!  What I did get below:",1);for(b in a)a.hasOwnProperty(b)&&scorm.debug("key: "+b+"\n value: "+a[b]);return"false"}j(c+"id",a.id.toString())}return $.isPlainObject(a.score)?(e=h(a.score.scaled)?scorm.debug(x.prefix+g+c+"score.scaled: "+a.score.scaled+i,3):j(c+"score.scaled",n(a.score.scaled,7).toString()),e=h(a.score.raw)?scorm.debug(x.prefix+g+c+"score.raw: "+a.score.raw+i,3):j(c+"score.raw",n(a.score.raw,7).toString()),e=h(a.score.min)?scorm.debug(x.prefix+g+c+"score.min: "+a.score.min+i,3):j(c+"score.min",n(a.score.min,7).toString()),e=h(a.score.max)?scorm.debug(x.prefix+g+c+"score.max: "+a.score.max+i,3):j(c+"score.max",n(a.score.max,7).toString())):scorm.debug(x.prefix+": Did not receive a score object.  May or may not be an issue.",4),e=h(a.success_status)?scorm.debug(x.prefix+g+c+"success_status: "+a.success_status+i,3):j(c+"success_status",a.success_status),e=h(a.completion_status)?scorm.debug(x.prefix+g+c+"completion_status: "+a.completion_status+i,3):j(c+"completion_status",a.completion_status),e=h(a.progress_measure)?scorm.debug(x.prefix+g+c+"progress_measure: "+a.progress_measure+i,3):j(c+"progress_measure",a.progress_measure),e=h(a.description)?scorm.debug(x.prefix+g+c+"description: "+a.description+i,3):j(c+"description",a.description),scorm.debug(x.prefix+": Progress\n"+JSON.stringify(t(),null," "),4),e.toString()}return l()},this.getObjective=function(a){if(A){var b=scorm.getObjectiveByID(a),c="cmi.objectives.";return"false"===b?b:(c+=b+".",{id:scorm.getvalue(c+"id"),score:{scaled:scorm.getvalue(c+"score.scaled"),raw:scorm.getvalue(c+"score.raw"),min:scorm.getvalue(c+"score.min"),max:scorm.getvalue(c+"score.max")},success_status:scorm.getvalue(c+"success_status"),completion_status:scorm.getvalue(c+"completion_status"),progress_measure:scorm.getvalue(c+"progress_measure"),description:scorm.getvalue(c+"description")})}return l()},this.setCommentFromLearner=function(a,b,c){if(A){var d="cmi.comments_from_learner.",e=scorm.getvalue(d+"_count");return"false"===e?(scorm.debug(x.prefix+": Sorry, LMS returned a comments count of 'false'.  Review error logs."),e):((0===a.length||a.length>4e3)&&scorm.debug(x.prefix+": Sorry, message from learner was empty or exceeded the limit. Length:"+a.length,2),d+=e+".",scorm.setvalue(d+"comment",a),scorm.setvalue(d+"location",b),scorm.setvalue(d+"timestamp",scorm.isoDateToString(c)))}return l()},this.gradeIt=function(){var a=1,b=scorm.getvalue("cmi.score.raw"),c=scorm.getvalue("cmi.score.min"),d=scorm.getvalue("cmi.score.max"),e=scorm.getvalue("cmi.progress_measure");return d-c===0?(scorm.debug(x.prefix+": Division by Zero for scoreMax - scoreMin "+d,2),scorm.setvalue("cmi.score.scaled",a)):(a=((b-c)/(d-c)).toString(),scorm.debug(x.prefix+": Score Scaled = "+a,3),scorm.setvalue("cmi.score.scaled",n(a,7))),x.completion_status=parseFloat(e)>=parseFloat(x.completion_threshold)?"completed":"incomplete",scorm.setvalue("cmi.completion_status",x.completion_status),x.success_status=parseFloat(a)>=parseFloat(x.scaled_passing_score)?"passed":"failed",scorm.setvalue("cmi.success_status",x.success_status),"true"},this.happyEnding=function(){return A?(scorm.setvalue("cmi.score.scaled","1"),scorm.setvalue("cmi.score.min","0"),scorm.setvalue("cmi.score.max","1"),scorm.setvalue("cmi.score.raw","1"),scorm.setvalue("cmi.success_status","passed"),scorm.setvalue("cmi.progress_measure","1"),scorm.setvalue("cmi.completion_status","completed")):l()},this.commit=function(){return A?scorm.commit(""):l()},this.suspend=function(){return A?(scorm.debug(x.prefix+": I am suspending...",3),scorm.setvalue("cmi.exit","suspend"),v(),A=!1,scorm.terminate()):l()},this.finish=function(){return A?(scorm.debug(x.prefix+": I am finishing...",3),scorm.setvalue("cmi.exit","normal"),v(),A=!1,scorm.terminate()):l()},this.timeout=function(){return A?(scorm.debug(x.prefix+": I am timing out...",3),scorm.setvalue("cmi.exit","time-out"),v(),A=!1,scorm.terminate()):l()},this.isISO8601=j,this.set=function(a,b){switch(a){case"version":case"createDate":case"modifiedDate":case"prefix":d(405);break;default:x[a]=b}return z===!1},this.get=function(a){return void 0===x[a]?(d(404),!1):x[a]},this.init=b,this.exit=function(){var a=t();scorm.debug("Progress\n"+JSON.stringify(a,null," "),4),c()},$(window).bind("load",b),$(scorm).on("exception",function(a){e(a.error)})}function scobot_local(){var a,b=window.location+"",c=[],d="SCO_Id";c=b.split("/"),d=c[c.length-2];try{if(null!==localStorage.getItem(d))return a=JSON.parse(localStorage.getItem(d)),(void 0===a.exit||""===a.exit)&&(a.exit="suspend",a.entry="resume"),a}catch(e){return null}}function Local_API_1484_11(a){function b(a,b){return p.diganostic="The "+a+" of "+b+" must be a proper vocabulary element.",p.errorCode=406,"false"}function c(a){var b="";if(-1!=window.location.href.indexOf("?")){for(var c,d=[],e=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),f=0;f<e.length;f++)c=e[f].split("="),d.push(c[0]),d[c[0]]=c[1];b="browse"===d[a]||"normal"===d[a]||"review"===d[a]?d[a]:"browse"}else b=PearsonGL.globals.useLocalStorage?"normal":"browse";return b}function d(a){return p.errorCode=402,p.diagnostic="The value for key "+a+" has not been created yet.","false"}function e(a,b,c){return p.errorCode="351",p.diagnostic="The "+a+" element must be unique.  The value '"+b+"' has already been set in #"+c,"false"}function f(a,b,c){var d=a.split(/\./);d.length<2?c[d[0]]=b:(c[d[0]]||(c[d[0]]={}),c=c[d.shift()],f(d.join("."),b,c))}function g(a,b){var c,e=a.split(/\./);if(!(e.length<2))return c=e.shift(),b[c]?String(g(e.join("."),b[c])):(d(a),"false");try{return b[e[0]]}catch(f){return d(a),"false"}}function h(a){var b="false";switch(a){case"cmi.exit":case"cmi.session_time":p.errorCode=405,p.diagnostic="Sorry, this has been specified as a read-only value for "+a;break;default:b=g(a.substr(4,a.length),q),"undefined"===b&&(p.errorCode=401,p.diagnostic="Sorry, there was a undefined response from "+a,b="false"),scorm.debug(p.prefix+": GetValue "+a+" = "+b,4)}return b}function i(a){var b=a.split("."),c=b[b.length-1];return"adl"===b[0]&&"id"===b[4]?!0:"comments_from_lms"===b[1]?!0:"comments_from_learner"===b[1]?!1:s.indexOf("|"+c+"|")>=0}function j(a){var b=a.split("."),c=b[b.length-1];return t.indexOf("|"+c+"|")>=0}function k(a){var b=2;return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}function l(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&(c+=1);return c}function m(){"suspend"===q.exit&&(q.entry="resume")}function n(){return k(q.suspend_data.length/64e3*100)+"%"}var o=(new Utility,{version:"2.2",moddate:"03/05/2013 5:10PM",createdate:"07/17/2010 08:15AM",prefix:"Local_API_1484_11",errorCode:0,diagnostic:"",initialized:0,terminated:0,CMI:{_version:"Local 1.0",comments_from_learner:{_children:"comment,location,timestamp",_count:"0"},comments_from_lms:{_children:"comment,location,timestamp",_count:"0"},completion_status:"unknown",credit:"no-credit",entry:"ab-initio",exit:"",interactions:{_children:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",_count:"0"},launch_data:"?name1=value1&name2=value2&name3=value3",learner_id:"100",learner_name:"Simulated User",learner_preference:{_children:"audio_level,language,delivery_speed,audio_captioning",audio_level:"1",language:"",delivery_speed:"1",audio_captioning:"0"},location:"",max_time_allowed:"",mode:c("cmimode"),objectives:{_children:"id,score,success_status,completion_status,description",_count:"0"},progress_measure:"",score:{_children:"scaled,raw,min,max",scaled:"",raw:"",min:"",max:""},session_time:"PT0H0M0S",success_status:"unknown",suspend_data:"",time_limit_action:"",total_time:"PT0H0M0S"}}),p=$.extend(o,a),q={},r="|completed|incomplete|not attempted|unknown|",s="|_version|completion_threshold|credit|entry|launch_data|learner_id|learner_name|_children|_count|mode|maximum_time_allowed|scaled_passing_score|time_limit_action|total_time|comment|",t="|exit|session_time|",u="|time-out|suspend|logout|normal||",v={0:"No error",101:"General exception",102:"General Initialization Failure",103:"Already Initialized",104:"Content Instance Terminated",111:"General Termination Failure",112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model",402:"Unimplemented Data Model Element",403:"Data Model Element Value Not Initialized",404:"Data Model Element Is Read Only",405:"Data Model Element Is Write Only",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"},w=this;this.isRunning=function(){return 1===p.initialized&&0===p.terminated},this.Initialize=function(){return scorm.debug(p.prefix+":  Initializing...",3),null!==p.cmi?(q=p.cmi,m()):q=p.CMI,p.initialized=1,p.terminated=0,"true"},this.GetValue=function(a){p.errorCode=0;var b="false",c=a.toString(),d=[];if(this.isRunning()){if(j(c))return scorm.debug(p.prefix+": This "+c+" is write only",4),p.errorCode=405,"false";switch(d=c.toLowerCase().split("."),d[0]){case"cmi":b=h(c);break;case"ssp":break;case"adl":}return b}return p.errorCode=123,b},this.SetValue=function(a,c){scorm.debug(p.prefix+": SetValue: "+a+" = "+c,4),p.errorCode=0;var d=[],g=a.toString(),h=c.toString(),j=0,k=0,m=[];if(this.isRunning()){if(i(g))return scorm.debug(p.prefix+": This "+g+" is read only",4),p.errorCode=404,"false";switch(d=g.split("."),d[0]){case"cmi":switch(a){case"cmi.location":h.length>1e3&&scorm.debug(p.prefix+": Some LMS's might truncate your bookmark as you've passed "+h.length+" characters of bookmarking data",2);break;case"cmi.completion_status":if(-1===r.indexOf("|"+h+"|"))return b(a,h);break;case"cmi.exit":if(-1===u.indexOf("|"+h+"|"))return b(a,h);break;default:switch(d[1]){case"comments_from_lms":return p.errorCode="404",p.diagnostic="The cmi.comments_from_lms element is entirely read only.","false";case"comments_from_learner":return-1===q.comments_from_learner._children.indexOf(d[3])?b(a,h):(f(g.substr(4,g.length),h,q),q.comments_from_learner._count=(l(q.comments_from_learner)-2).toString(),"true");case"interactions":if(-1===q.interactions._children.indexOf(d[3]))return b(a,h);if(q.interactions._count=(l(q.interactions)-2).toString(),isNaN(parseInt(d[2],10)))return"false";if(!$.isPlainObject(q.interactions[d[2]]))return"id"===d[3]?(q.interactions[d[2]]={},f(g.substr(4,g.length),h,q),q.interactions._count=(l(q.interactions)-2).toString(),$.isPlainObject(q.interactions[d[2]].objectives)||(scorm.debug(p.prefix+": Constructing objectives object for new interaction",4),q.interactions[d[2]].objectives={},q.interactions[d[2]].objectives._count="-1"),$.isPlainObject(q.interactions[d[2]].correct_responses)||(scorm.debug(p.prefix+": Constructing correct responses object for new interaction",4),q.interactions[d[2]].correct_responses={},q.interactions[d[2]].correct_responses._count="-1"),"true"):(scorm.debug("Can't add interaction without ID first!",3),"false");if("objectives"===d[3]){if("id"!==d[5])return b(a,h);for(k=parseInt(q.interactions[d[2]].objectives._count,10),j=0;k>j;j+=1)if(q.interactions[d[2]].objectives[j].id===h)return e(a,h,j);return f(g.substr(4,g.length),h,q),q.interactions[d[2]].objectives._count=(l(q.interactions[d[2]].objectives)-1).toString(),"true"}return"correct_responses"===d[3]&&(f(g.substr(4,g.length),h,q),q.interactions[d[2]].correct_responses._count=(l(q.interactions[d[2]].correct_responses)-1).toString()),f(g.substr(4,g.length),h,q),q.interactions._count=(l(q.interactions)-2).toString(),"true";case"objectives":if("id"===d[3])for(k=parseInt(q.objectives._count,10),j=0;k>j;j+=1)if(q.objectives[j].id===h)return p.errorCode="351",p.diagnostic="The objectives.id element must be unique.  The value '"+h+"' has already been set in objective #"+j,"false";return"id"!==d[3]&&(m=parseInt(d[2],10),void 0===q.objectives[m])?(p.errorCode="408",p.diagnostic="The objectives.id element must be set before other elements can be set","false"):isNaN(parseInt(d[2],10))?"false":(f(g.substr(4,g.length),h,q),q.objectives._count=(l(q.objectives)-2).toString(),"true")}}f(g.substr(4,g.length),h,q);break;case"ssp":break;case"adl":}return"true"}return p.errorCode=p.terminated?133:132,"false"},this.Commit=function(){return scorm.debug(p.prefix+": Commit CMI Object:",4),scorm.debug(q),scorm.debug(p.prefix+": Suspend Data Usage "+n()),$(w).triggerHandler({type:"StoreData",runtimedata:q}),"true"},this.Terminate=function(){return w.Commit(),p.terminated=1,p.initialized=0,"true"},this.GetErrorString=function(a){if(""!==a){var b=parseInt(a,10);if(void 0!==v[b])return v[b]}return""},this.GetLastError=function(){return p.errorCode},this.GetDiagnostic=function(){return p.diagnostic}}function SCORM_API(a){"use strict";function b(a,b){$(w).triggerHandler({type:"debug",msg:a,lvl:b})}function c(a,c){if(s.debug){switch(window.console||(window.console={},window.console.info=b,window.console.log=b,window.console.warn=b,window.console.error=b,window.console.trace=b),c){case 1:console.error(a);break;case 2:console.warn(a);break;case 4:console.info(a);break;case 3:console.log(a);break;default:return console.log(a),!1}return!0}return 3>c&&s.throw_alerts&&alert(a),!1}function d(a){for(var b=0,c=500;!a.API&&!a.API_1484_11&&a.parent&&a.parent!==a&&c>=b;)b+=1,a=a.parent;if(a.API_1484_11)v.version="2004",v.path=a.API_1484_11;else{if(!a.API)return!1;v.version="1.2",v.path=a.API}return!0}function e(a,b){var c,d,e="P",f=Math.max(a,0),g=0,h=0,i=0;return f=Math.round(f),b===!0?i=Math.floor(f/864e4):(g=Math.floor(f/315576e4),f-=315576e4*g,h=Math.floor(f/26298e4),f-=26298e4*h,i=Math.floor(f/864e4)),f-=864e4*i,c=Math.floor(f/36e4),f-=36e4*c,d=Math.floor(f/6e3),f-=6e3*d,g>0&&(e+=g+"Y"),h>0&&(e+=h+"M"),i>0&&(e+=i+"D"),(c>0||d>0||f>0)&&(e+="T",c>0&&(e+=c+"H"),d>0&&(e+=d+"M"),f>0&&(e+=f/100+"S")),"P"===e&&(e="PT0H0M0S"),e
}function f(a){var b=[0,0,0,0,0,0],c=!(0===a.indexOf("P")),d=!1,e=["Y","M","D","H","M","S"],f=0,g=0;if(!c){for(a=a.substr(1),g=0;g<e.length;g+=1)if(0===a.indexOf("T")&&(a=a.substr(1),g=Math.max(g,3),d=!0),f=a.indexOf(e[g]),f>-1){if(1===g&&a.indexOf("T")>-1&&a.indexOf("T")<f)continue;if(b[g]="S"===e[g]?parseFloat(a.substr(0,f)):parseInt(a.substr(0,f),10),isNaN(b[g])){c=!0;break}if(g>2&&!d){c=!0;break}a=a.substr(f+1)}c=!(c||0===a.length)}return c?0:315576e4*b[0]+26298e4*b[1]+864e4*b[2]+36e4*b[3]+6e3*b[4]+Math.round(100*b[5])}function g(a){return 10>a?"0"+a:a}function h(a){return a.getUTCFullYear()+"-"+g(a.getUTCMonth()+1)+"-"+g(a.getUTCDate())+"T"+g(a.getUTCHours())+":"+g(a.getUTCMinutes())+":"+g(a.getUTCSeconds())+"."+Math.round(a.getUTCMilliseconds()/1e3%1e3)+"Z"}function i(a){var b=a.getTimezoneOffset()>0?"-":"+";return a.getFullYear()+"-"+g(a.getMonth()+1)+"-"+g(a.getDate())+"T"+g(a.getHours())+":"+g(a.getMinutes())+":"+g(a.getSeconds())+"."+Math.round(a.getMilliseconds()/1e3%1e3)+b+g(a.getTimezoneOffset()/60)+":00"}function j(a){var b,c,d,e=["January","February","March","April","May","June","July","August","September","October","November","December"],f=0,g=0;switch(s.time_type){case"UTC":return b=a.replace(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))(|Z)/,function(a,b,c,d,f,g,h){return e[c-1]+" "+d+", "+b+" "+f+":"+g+":"+h}),d=new Date.UTC(b);case"GMT":return b=a.replace(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))([\+|\-]\d+:\d+)/,function(a,b,c,d,h,i,j,k,l){return f=60*parseInt(l.substring(1,l.length),10)*60*60,g=k,e[c-1]+" "+d+", "+b+" "+h+":"+i+":"+j}),d=new Date(b),c=60*d.getTimezoneOffset()*60,c!==f&&(d=new Date(d.getTime()+f+c),d.setMilliseconds(g)),d;default:return b=a.replace(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/,function(a,b,c,d,f,g,h){return e[c-1]+" "+d+", "+b+" "+f+":"+g+":"+h}),d=new Date(b)}}function k(a){var b,c,d,e,f;return a=Math.round(a),c=Math.floor(a/36e4),d=a-36e4*c,e=Math.floor(d/6e3),d-=6e3*e,f=Math.floor(d/100),d-=100*f,b="0000"+c+":",b=b.substr(b.length-5,5),10>e&&(b+="0"),b+=e+":",10>f&&(b+="0"),b+=f,d>0&&(b+=".",10>d&&(b+="0"),b+=d),b}function l(a){if(void 0===a)return c(s.prefix+" : makeBoolean was given empty string, converting to false",2),!1;if(a===!0||a===!1)return Boolean(a);switch(a.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(a)}}function m(a){return c(u[a],2),!0}function n(a){$(w).triggerHandler({type:"exception",error:a})}function o(){var a=v.path,b=0;if(a)switch(v.version){case"1.2":b=parseInt(a.LMSGetLastError(),10);break;case"2004":b=parseInt(a.GetLastError(),10)}return b}function p(a){var b=v.path,c="No LMS Connectivity";if(b)switch(v.version){case"1.2":c=b.LMSGetErrorString(a.toString());break;case"2004":c=b.GetErrorString(a.toString())}return String(c)}function q(a){var b=v.path,c="No LMS Connectivity";if(b)switch(v.version){case"1.2":c=b.LMSGetDiagnostic(a.toString());break;case"2004":c=b.GetDiagnostic(a.toString())}return String(c)}var r={version:"1.5",createDate:"04/05/2011 08:56AM",modifiedDate:"03/05/2013 5:10PM",debug:!1,isActive:!1,throw_alerts:!1,prefix:"SCORM_API",exit_type:"suspend",success_status:"unknown",use_standalone:!0,standalone:!1,completion_status:"unknown",time_type:"GMT",cmi:null},s=$.extend(r,a),t=0,u={0:"No Error",404:"Not Found",405:"Prevented on a read only resource"},v={connection:!1,version:"none",mode:"",path:!1,data:{completion_status:s.completion_status,success_status:s.success_status,exit_type:s.exit_type},isActive:s.isActive},w=this;s.error=u,s.startDate={},this.getvalue=function(a){var b=null,d=v.path,e=0,f=null,g=!1;if($(w).triggerHandler({type:"getvalue",n:a}),v.isActive){switch(v.version){case"1.2":switch(a){case"cmi.location":f="cmi.core.lesson_location";break;case"cmi.completion_threshold":g=!0;break;case"cmi.mode":f="cmi.core.lesson_mode";break;case"cmi.exit":f="cmi.core.exit";break;case"cmi.score.raw":f="cmi.core.score.raw";break;case"cmi.score.min":f="cmi.core.score.min";break;case"cmi.score.max":f="cmi.core.score.max";break;case"cmi.success_status":case"cmi.completion_status":f="cmi.core.lesson_status";break;case"cmi.session_time":f="cmi.core.session_time";break;case"cmi.suspend_data":f=a;break;default:f=a}if(g)return"false";b=d.LMSGetValue(f);break;case"2004":b=d.GetValue(a)}return e=o(),0===e||403===e?(("undefined"===b||null===b||"null"===b)&&(b=""),c(s.prefix+" : getvalue("+a+")='"+b+"' with errorCode="+e,4),String(b)):(c(s.prefix+" : getvalue("+a+")='"+b+"' with errorCode="+e,4),c(s.prefix+": Error\nError Code: "+e+"\nError Message: "+p(e)+"\nDiagnostic: "+q(e),1),"false")}return c(s.prefix+": "+a+" Get Aborted, connection not initialized! "+v.isActive,2),"false"},this.setvalue=function(a,b){var d="false",e=v.path,f=0,g=null,h=!1;if($(w).triggerHandler({type:"setvalue",n:a,v:b}),v.isActive){switch(v.version){case"1.2":if(v.mode=""===v.mode?e.LMSGetValue("cmi.core.lesson_mode"):v.mode,"normal"!==v.mode)return c(s.prefix+": Warning, you are not in normal mode.  Ignoring 'set' requests.",2),"false";switch(a){case"cmi.location":b.length>255&&c(s.prefix+": Warning, your bookmark is over the limit!!",2),g="cmi.core.lesson_location";break;case"cmi.completion_threshold":h=!0;break;case"cmi.mode":g="cmi.core.lesson_mode";break;case"cmi.exit":g="cmi.core.exit",v.exit_type=b;break;case"cmi.score.raw":g="cmi.core.score.raw";break;case"cmi.score.min":g="cmi.core.score.min";break;case"cmi.score.max":g="cmi.core.score.max";break;case"cmi.success_status":case"cmi.completion_status":g="cmi.core.lesson_status",v.data.completion_status=b;break;case"cmi.session_time":g="cmi.core.session_time";break;case"cmi.suspend_data":b.length>4096&&c(s.prefix+": Warning, your suspend data is over the limit!!",2),g=a;break;default:g=a}if(h)return"false";d=e.LMSSetValue(g,b);break;case"2004":if(v.mode=""===v.mode?e.GetValue("cmi.mode"):v.mode,"normal"!==v.mode)return c(s.prefix+": Warning, you are not in normal mode.  Ignoring 'set' requests.",2),"false";switch(a){case"cmi.location":b.length>1e3&&c(s.prefix+": Warning, your bookmark is over the limit!!",2);break;case"cmi.completion_status":v.data.completion_status=b;break;case"cmi.success_status":v.data.success_status=b;break;case"cmi.exit":v.data.exit_type=b;break;case"suspend_data":b.length>64e3&&c(s.prefix+": Warning, your suspend data is over the limit!!",2)}d=e.SetValue(a,b)}return f=o(),c(s.prefix+" : setvalue("+a+",'"+b+"') returned "+d+" with errorCode="+f,4),0===f||403===f?d:(c(s.prefix+": Error\nError Code: "+f+"\nError Message: "+p(f)+" for "+a+"\nDiagnostic: "+q(f),1),d)}return c(s.prefix+": "+a+" Set Aborted, connection not initialized! Locate where you called it after you Terminated.",2),"false"},this.commit=function(){var a,b="false",d=v.path,f=0,g=new Date;if(a=(g.getTime()-s.startDate.getTime())/1e3,v.isActive){switch(c(s.prefix+": Committing data",3),v.version){case"1.2":w.setvalue("cmi.core.session_time",k(100*a)),b=d.LMSCommit("");break;case"2004":w.setvalue("cmi.session_time",e(100*a,!0)),b=d.Commit("")}return f=o(),0===f?b:(c(s.prefix+": Error\nError Code: "+f+"\nError Message: "+p(f)+" for Commit.\nDiagnostic: "+q(f),1),"false")}return c(s.prefix+": Commit Aborted, connection not initialized!",2),"false"},this.initialize=function(){c(s.prefix+": Initialize Called. \n	version: "+s.version+"\n	Modified: "+s.modifiedDate,3);var a=!1,b=v.path,d=0;if(v.isActive)c(s.prefix+": Aborted, connection already initialized!.",2);else if(b){switch(v.version){case"1.2":a=l(b.LMSInitialize(""));break;case"2004":a=l(b.Initialize(""))}if(d=o(),a&&0===d){switch(v.isActive=!0,v.data.completion_status=w.getvalue("cmi.completion_status"),s.startDate=new Date,w.setvalue("cmi.exit",s.exit_type),w.commit(),c(s.prefix+": SCO is initialized.",3),v.data.completion_status){case"not attempted":case"unknown":w.setvalue("cmi.completion_status","incomplete");break;default:""===v.data.completion_status&&n("LMS compatibility issue, Please notify a administrator.  Completion Status is empty.")}return"true"}c(s.prefix+": Error\nError Code: "+d+"\nError Message: "+p(d)+" for Initialize.\nDiagnostic: "+q(d),1)}else c(s.prefix+": Aborted, LMS could not be located!.",2);return"false"},this.terminate=function(){var a=!1,b=v.path,d=0;if(c(s.prefix+": Terminating "+v.isActive+" "+b,4),v.isActive)if(b){switch(c(s.prefix+": completion_status = "+v.data.completion_status+"|| success_status = "+v.data.success_status,3),w.commit(),v.version){case"1.2":a=b.LMSFinish("");break;case"2004":a=b.Terminate("")}l(a)?(c(s.prefix+": Terminated.",3),v.isActive=!1):(d=o(),c(s.prefix+": Error\nError Code: "+d+"\nError Message: "+p(d)+" for Commit.\nDiagnostic: "+q(d),1))}else c(s.prefix+": Lost connection to LMS",2);else c(s.prefix+": Terminate Aborted, connection not initialized!",2);return a},this.getObjectiveByID=function(a){var b,c,d=w.getvalue("cmi.objectives._count");if(scorm.debug(s.prefix+": Set Objective - Begin search, Objective count is "+d,4),""===d||"false"===d||"-1"===d)return"false";for(d=parseInt(d,10)-1,b=d;b>=0;b-=1)if(c=w.getvalue("cmi.objectives."+b+".id"),a===c)return scorm.debug(s.prefix+": Objective ID Match on "+b,4),b;return"false"},this.getInteractionByID=function(a){var b,c,d=w.getvalue("cmi.interactions._count");if(""===d||"false"===d||"-1"===d)return"false";for(d=parseInt(d,10)-1,scorm.debug(s.prefix+": Getting interactions from count "+d,4),b=d;b>=0;b-=1)if(c=this.getvalue("cmi.interactions."+b+".id"),a===c)return scorm.debug(s.prefix+": Interaction By ID Returning "+b),b;return"false"},this.getInteractionObjectiveByID=function(a,b){var c,d,e=w.getvalue("cmi.interactions."+a+".objectives._count");if(""===e||"false"===e)return"0";for(e=parseInt(e,10)-1,scorm.debug(s.prefix+": Getting interaction objectives from count "+e,4),c=e;c>=0;c-=1)if(d=w.getvalue("cmi.interactions."+a+".objectives."+c+".id"),b===d)return scorm.debug(s.prefix+": Interaction Objective By ID Returning "+c),c;return"false"},this.getInteractionCorrectResponsesByPattern=function(a,b){var c,d,e=w.getvalue("cmi.interactions."+a+".correct_responses._count");if(""===e||"false"===e)return scorm.debug(s.prefix+": Correct Responses pattern was empty or false",4),"0";for(e=parseInt(e,10)-1,scorm.debug(s.prefix+": Getting interaction correct responses from count "+e,4),c=e;c>=0;c-=1)if(d=w.getvalue("cmi.interactions."+a+".correct_responses."+c+".pattern"),b===d)return scorm.debug(s.prefix+": Interaction Correct Responses By Pattern Returning "+c),"match";return"false"},this.init=function(){var a;try{a=window.parent,a&&a!==window&&d(window.parent)}catch(b){}if(!v.path)try{a=window.top.opener,d(a)}catch(e){}return v.path?(v.connection=!0,!0):(c(s.prefix+": I was unable to locate an API for communication",2),s.use_standalone?(c(s.prefix+": If you included Local_API_1484_11 I'll mimic the LMS.  If not, all SCORM calls will fail.",4),s.standalone=!0,v.version="2004",v.path="function"==typeof Local_API_1484_11?new Local_API_1484_11({cmi:s.cmi}):null,$(v.path).on("StoreData",function(a){$(w).triggerHandler({type:"StoreData",runtimedata:a.runtimedata})}),!0):!1)},this.getLastError=function(a){return u[a]},this.isLMSConnected=function(){return v.connection},this.set=function(a,b){switch(a){case"version":case"createDate":case"modifiedDate":case"prefix":return m(405),!1;case"isActive":v.isActive=b,s[a]=b;break;case"startDate":s[a]=new Date(b);break;default:s[a]=b}return 0!==t},this.get=function(a){return void 0===s[a]?(m(404),!1):s[a]},this.centisecsToSCORM12Duration=k,this.centisecsToISODuration=e,this.ISODurationToCentisec=f,this.isoDateToStringUTC=h,this.isoDateToString=i,this.isoStringToDate=j,this.makeBoolean=l,this.debug=c,this.init()}function Debug(){console.warn("DEPRECATED: Debug class has been replaced by PearsonGL.logger.")}if(function(){this.MooTools={version:"1.4.3",build:"bc7009653bfa5156129540228449e2901649b026"};var a=this.typeOf=function(a){if(null==a)return"null";if(null!=a.$family)return a.$family();if(a.nodeName){if(1==a.nodeType)return"element";if(3==a.nodeType)return/\S/.test(a.nodeValue)?"textnode":"whitespace"}else if("number"==typeof a.length){if(a.callee)return"arguments";if("item"in a)return"collection"}return typeof a},b=(this.instanceOf=function(a,b){if(null==a)return!1;for(var c=a.$constructor||a.constructor;c;){if(c===b)return!0;c=c.parent}return a instanceof b},this.Function),c=!0;for(var d in{toString:1})c=null;c&&(c=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),b.prototype.overloadSetter=function(a){var b=this;return function(d,e){if(null==d)return this;if(a||"string"!=typeof d){for(var f in d)b.call(this,f,d[f]);if(c)for(var g=c.length;g--;)f=c[g],d.hasOwnProperty(f)&&b.call(this,f,d[f])}else b.call(this,d,e);return this}},b.prototype.overloadGetter=function(a){var b=this;return function(c){var d,e;if(a||"string"!=typeof c?d=c:arguments.length>1&&(d=arguments),d){e={};for(var f=0;f<d.length;f++)e[d[f]]=b.call(this,d[f])}else e=b.call(this,c);return e}},b.prototype.extend=function(a,b){this[a]=b}.overloadSetter(),b.prototype.implement=function(a,b){this.prototype[a]=b}.overloadSetter();var e=Array.prototype.slice;b.from=function(b){return"function"==a(b)?b:function(){return b}},Array.from=function(b){return null==b?[]:f.isEnumerable(b)&&"string"!=typeof b?"array"==a(b)?b:e.call(b):[b]},Number.from=function(a){var b=parseFloat(a);return isFinite(b)?b:null},String.from=function(a){return a+""},b.implement({hide:function(){return this.$hidden=!0,this},protect:function(){return this.$protected=!0,this}});var f=this.Type=function(b,c){if(b){var d=b.toLowerCase(),e=function(b){return a(b)==d};f["is"+b]=e,null!=c&&(c.prototype.$family=function(){return d}.hide())}return null==c?null:(c.extend(this),c.$constructor=f,c.prototype.$constructor=c,c)},g=Object.prototype.toString;f.isEnumerable=function(a){return null!=a&&"number"==typeof a.length&&"[object Function]"!=g.call(a)};var h={},i=function(b){var c=a(b.prototype);return h[c]||(h[c]=[])},j=function(b,c){if(!c||!c.$hidden){for(var d=i(this),f=0;f<d.length;f++){var g=d[f];"type"==a(g)?j.call(g,b,c):g.call(this,b,c)}var h=this.prototype[b];null!=h&&h.$protected||(this.prototype[b]=c),null==this[b]&&"function"==a(c)&&k.call(this,b,function(a){return c.apply(a,e.call(arguments,1))})}},k=function(a,b){if(!b||!b.$hidden){var c=this[a];null!=c&&c.$protected||(this[a]=b)}};f.implement({implement:j.overloadSetter(),extend:k.overloadSetter(),alias:function(a,b){j.call(this,a,this.prototype[b])}.overloadSetter(),mirror:function(a){return i(this).push(a),this}}),new f("Type",f);var l=function(a,b,c){var d=b!=Object,e=b.prototype;d&&(b=new f(a,b));for(var g=0,h=c.length;h>g;g++){var i=c[g],j=b[i],k=e[i];j&&j.protect(),d&&k&&(delete e[i],e[i]=k.protect())}return d&&b.implement(e),l};l("String",String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",b,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]),Object.extend=k.overloadSetter(),Date.extend("now",function(){return+new Date}),new f("Boolean",Boolean),Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide(),Number.extend("random",function(a,b){return Math.floor(Math.random()*(b-a+1)+a)});var m=Object.prototype.hasOwnProperty;Object.extend("forEach",function(a,b,c){for(var d in a)m.call(a,d)&&b.call(c,a[d],d,a)}),Object.each=Object.forEach,Array.implement({forEach:function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)},each:function(a,b){return Array.forEach(this,a,b),this}});var n=function(b){switch(a(b)){case"array":return b.clone();case"object":return Object.clone(b);default:return b}};Array.implement("clone",function(){for(var a=this.length,b=new Array(a);a--;)b[a]=n(this[a]);return b});var o=function(b,c,d){switch(a(d)){case"object":"object"==a(b[c])?Object.merge(b[c],d):b[c]=Object.clone(d);break;case"array":b[c]=d.clone();break;default:b[c]=d}return b};Object.extend({merge:function(b,c,d){if("string"==a(c))return o(b,c,d);for(var e=1,f=arguments.length;f>e;e++){var g=arguments[e];for(var h in g)o(b,h,g[h])}return b},clone:function(a){var b={};for(var c in a)b[c]=n(a[c]);return b},append:function(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b]||{};for(var e in d)a[e]=d[e]}return a}}),["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(a){new f(a)});var p=Date.now();String.extend("uniqueID",function(){return(p++).toString(36)})}(),Array.implement({every:function(a,b){for(var c=0,d=this.length>>>0;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0},filter:function(a,b){for(var c,d=[],e=0,f=this.length>>>0;f>e;e++)e in this&&(c=this[e],a.call(b,c,e,this)&&d.push(c));return d},indexOf:function(a,b){for(var c=this.length>>>0,d=0>b?Math.max(0,c+b):b||0;c>d;d++)if(this[d]===a)return d;return-1},map:function(a,b){for(var c=this.length>>>0,d=Array(c),e=0;c>e;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d},some:function(a,b){for(var c=0,d=this.length>>>0;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1},clean:function(){return this.filter(function(a){return null!=a})},invoke:function(a){var b=Array.slice(arguments,1);return this.map(function(c){return c[a].apply(c,b)})},associate:function(a){for(var b={},c=Math.min(this.length,a.length),d=0;c>d;d++)b[a[d]]=this[d];return b},link:function(a){for(var b={},c=0,d=this.length;d>c;c++)for(var e in a)if(a[e](this[c])){b[e]=this[c],delete a[e];break}return b},contains:function(a,b){return-1!=this.indexOf(a,b)},append:function(a){return this.push.apply(this,a),this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(a){return this.contains(a)||this.push(a),this},combine:function(a){for(var b=0,c=a.length;c>b;b++)this.include(a[b]);return this},erase:function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var a=[],b=0,c=this.length;c>b;b++){var d=typeOf(this[b]);"null"!=d&&(a=a.concat("array"==d||"collection"==d||"arguments"==d||instanceOf(this[b],Array)?Array.flatten(this[b]):this[b]))}return a},pick:function(){for(var a=0,b=this.length;b>a;a++)if(null!=this[a])return this[a];return null},hexToRgb:function(a){if(3!=this.length)return null;var b=this.map(function(a){return 1==a.length&&(a+=a),a.toInt(16)});return a?b:"rgb("+b+")"},rgbToHex:function(a){if(this.length<3)return null;if(4==this.length&&0==this[3]&&!a)return"transparent";for(var b=[],c=0;3>c;c++){var d=(this[c]-0).toString(16);b.push(1==d.length?"0"+d:d)}return a?b:"#"+b.join("")}}),String.implement({test:function(a,b){return("regexp"==typeOf(a)?a:new RegExp(""+a,b)).test(this)},contains:function(a,b){return b?(b+this+b).indexOf(b+a+b)>-1:String(this).indexOf(a)>-1},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(a){return parseInt(this,a||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(a){var b=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return b?b.slice(1).hexToRgb(a):null},rgbToHex:function(a){var b=String(this).match(/\d{1,3}/g);return b?b.rgbToHex(a):null},substitute:function(a,b){return String(this).replace(b||/\\?\{([^{}]+)\}/g,function(b,c){return"\\"==b.charAt(0)?b.slice(1):null!=a[c]?a[c]:""})}}),Function.extend({attempt:function(){for(var a=0,b=arguments.length;b>a;a++)try{return arguments[a]()}catch(c){}return null}}),Function.implement({attempt:function(a,b){try{return this.apply(b,Array.from(a))}catch(c){}return null},bind:function(a){var b=this,c=arguments.length>1?Array.slice(arguments,1):null,d=function(){},e=function(){var f=a,g=arguments.length;this instanceof e&&(d.prototype=b.prototype,f=new d);var h=c||g?b.apply(f,c&&g?c.concat(Array.slice(arguments)):c||arguments):b.call(f);return f==a?h:f};return e},pass:function(a,b){var c=this;return null!=a&&(a=Array.from(a)),function(){return c.apply(b,a||arguments)}},delay:function(a,b,c){return setTimeout(this.pass(null==c?[]:c,b),a)},periodical:function(a,b,c){return setInterval(this.pass(null==c?[]:c,b),a)}}),Number.implement({limit:function(a,b){return Math.min(b,Math.max(a,this))},round:function(a){return a=Math.pow(10,a||0).toFixed(0>a?-a:0),Math.round(this*a)/a},times:function(a,b){for(var c=0;this>c;c++)a.call(b,c,this)},toFloat:function(){return parseFloat(this)},toInt:function(a){return parseInt(this,a||10)}}),Number.alias("each","times"),function(a){var b={};a.each(function(a){Number[a]||(b[a]=function(){return Math[a].apply(null,[this].concat(Array.from(arguments)))})}),Number.implement(b)}(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]),function(){var a=this.Class=new Type("Class",function(d){instanceOf(d,Function)&&(d={initialize:d});var e=function(){if(c(this),e.$prototyping)return this;this.$caller=null;var a=this.initialize?this.initialize.apply(this,arguments):this;return this.$caller=this.caller=null,a}.extend(this).implement(d);return e.$constructor=a,e.prototype.$constructor=e,e.prototype.parent=b,e}),b=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var a=this.$caller.$name,b=this.$caller.$owner.parent,c=b?b.prototype[a]:null;if(!c)throw new Error('The method "'+a+'" has no parent.');return c.apply(this,arguments)},c=function(a){for(var b in a){var d=a[b];switch(typeOf(d)){case"object":var e=function(){};e.prototype=d,a[b]=c(new e);break;case"array":a[b]=d.clone()}}return a},d=function(a,b,c){c.$origin&&(c=c.$origin);var d=function(){if(c.$protected&&null==this.$caller)throw new Error('The method "'+b+'" cannot be called.');var a=this.caller,e=this.$caller;this.caller=e,this.$caller=d;var f=c.apply(this,arguments);return this.$caller=e,this.caller=a,f}.extend({$owner:a,$origin:c,$name:b});return d},e=function(b,c,e){if(a.Mutators.hasOwnProperty(b)&&(c=a.Mutators[b].call(this,c),null==c))return this;if("function"==typeOf(c)){if(c.$hidden)return this;this.prototype[b]=e?c:d(this,b,c)}else Object.merge(this.prototype,b,c);return this},f=function(a){a.$prototyping=!0;var b=new a;return delete a.$prototyping,b};a.implement("implement",e.overloadSetter()),a.Mutators={Extends:function(a){this.parent=a,this.prototype=f(a)},Implements:function(a){Array.from(a).each(function(a){var b=new a;for(var c in b)e.call(this,c,b[c],!0)},this)}}}(),function(){this.Chain=new Class({$chain:[],chain:function(){return this.$chain.append(Array.flatten(arguments)),this},callChain:function(){return this.$chain.length?this.$chain.shift().apply(this,arguments):!1},clearChain:function(){return this.$chain.empty(),this}});var a=function(a){return a.replace(/^on([A-Z])/,function(a,b){return b.toLowerCase()})};this.Events=new Class({$events:{},addEvent:function(b,c,d){return b=a(b),this.$events[b]=(this.$events[b]||[]).include(c),d&&(c.internal=!0),this},addEvents:function(a){for(var b in a)this.addEvent(b,a[b]);return this},fireEvent:function(b,c,d){b=a(b);var e=this.$events[b];return e?(c=Array.from(c),e.each(function(a){d?a.delay(d,this,c):a.apply(this,c)},this),this):this},removeEvent:function(b,c){b=a(b);var d=this.$events[b];if(d&&!c.internal){var e=d.indexOf(c);-1!=e&&delete d[e]}return this},removeEvents:function(b){var c;if("object"==typeOf(b)){for(c in b)this.removeEvent(c,b[c]);return this}b&&(b=a(b));for(c in this.$events)if(!b||b==c)for(var d=this.$events[c],e=d.length;e--;)e in d&&this.removeEvent(c,d[e]);return this}}),this.Options=new Class({setOptions:function(){var a=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var b in a)"function"==typeOf(a[b])&&/^on[A-Z]/.test(b)&&(this.addEvent(b,a[b]),delete a[b]);return this}})}(),window.ActiveXObject&&!window.CanvasRenderingContext2D&&function(h,j){function D(a){this.code=a,this.message=T[a]}function U(a){this.width=a}function E(a){this.id=a.C++}function t(a){this.G=a,this.id=a.C++}function u(a,b){this.canvas=a,this.B=b,this.d=a.uniqueID,this.D(),this.C=0,this.t="";var c=this;setInterval(function(){0===n[c.d]&&c.e()},30)}function A(){if("complete"===j.readyState){j.detachEvent(F,A);for(var a=j.getElementsByTagName(r),b=0,c=a.length;c>b;++b)B.initElement(a[b])}}function G(){var a=event.srcElement,b=a.parentNode;a.blur(),b.focus()}function H(){var a=event.propertyName;if("width"===a||"height"===a){var b=event.srcElement,c=b[a],d=parseInt(c,10);(isNaN(d)||0>d)&&(d="width"===a?300:150),c===d?(b.style[a]=d+"px",b.getContext("2d").I(b.width,b.height)):b[a]=d}}function I(){h.detachEvent(J,I);for(var a in s){var b,c=s[a],d=c.firstChild;for(b in d)"function"==typeof d[b]&&(d[b]=k);for(b in c)"function"==typeof c[b]&&(c[b]=k);d.detachEvent(K,G),c.detachEvent(L,H)}h[M]=k,h[N]=k,h[O]=k,h[C]=k,h[P]=k}function V(){var a=j.getElementsByTagName("script");return a=a[a.length-1],j.documentMode>=8?a.src:a.getAttribute("src",4)}function v(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function W(a){return a.toLowerCase()}function i(a){throw new D(a)}function Q(a){var b=parseInt(a.width,10),c=parseInt(a.height,10);(isNaN(b)||0>b)&&(b=300),(isNaN(c)||0>c)&&(c=150),a.width=b,a.height=c}var k=null,r="canvas",M="CanvasRenderingContext2D",N="CanvasGradient",O="CanvasPattern",C="FlashCanvas",P="G_vmlCanvasManager",K="onfocus",L="onpropertychange",F="onreadystatechange",J="onunload",w=((h[C+"Options"]||{}).swfPath||V().replace(/[^\/]+$/,""))+"flashcanvas.swf",e=new function(a){for(var b=0,c=a.length;c>b;b++)this[a[b]]=b}(["toDataURL","save","restore","scale","rotate","translate","transform","setTransform","globalAlpha","globalCompositeOperation","strokeStyle","fillStyle","createLinearGradient","createRadialGradient","createPattern","lineWidth","lineCap","lineJoin","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","clearRect","fillRect","strokeRect","beginPath","closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","rect","arc","fill","stroke","clip","isPointInPath","font","textAlign","textBaseline","fillText","strokeText","measureText","drawImage","createImageData","getImageData","putImageData","addColorStop","direction","resize"]),x={},n={},s={},y={};u.prototype={save:function(){this.b(),this.c(),this.m(),this.l(),this.z(),this.w(),this.F.push([this.f,this.g,this.A,this.u,this.j,this.h,this.i,this.k,this.p,this.q,this.n,this.o,this.v,this.r,this.s]),this.a.push(e.save)},restore:function(){var a=this.F;a.length&&(a=a.pop(),this.globalAlpha=a[0],this.globalCompositeOperation=a[1],this.strokeStyle=a[2],this.fillStyle=a[3],this.lineWidth=a[4],this.lineCap=a[5],this.lineJoin=a[6],this.miterLimit=a[7],this.shadowOffsetX=a[8],this.shadowOffsetY=a[9],this.shadowBlur=a[10],this.shadowColor=a[11],this.font=a[12],this.textAlign=a[13],this.textBaseline=a[14]),this.a.push(e.restore)},scale:function(a,b){this.a.push(e.scale,a,b)},rotate:function(a){this.a.push(e.rotate,a)},translate:function(a,b){this.a.push(e.translate,a,b)},transform:function(a,b,c,d,f,g){this.a.push(e.transform,a,b,c,d,f,g)},setTransform:function(a,b,c,d,f,g){this.a.push(e.setTransform,a,b,c,d,f,g)},b:function(){var a=this.a;this.f!==this.globalAlpha&&(this.f=this.globalAlpha,a.push(e.globalAlpha,this.f)),this.g!==this.globalCompositeOperation&&(this.g=this.globalCompositeOperation,a.push(e.globalCompositeOperation,this.g))},m:function(){if(this.A!==this.strokeStyle){var a=this.A=this.strokeStyle;this.a.push(e.strokeStyle,"object"==typeof a?a.id:a)}},l:function(){if(this.u!==this.fillStyle){var a=this.u=this.fillStyle;this.a.push(e.fillStyle,"object"==typeof a?a.id:a)}},createLinearGradient:function(a,b,c,d){return isFinite(a)&&isFinite(b)&&isFinite(c)&&isFinite(d)||i(9),this.a.push(e.createLinearGradient,a,b,c,d),new t(this)},createRadialGradient:function(a,b,c,d,f,g){return isFinite(a)&&isFinite(b)&&isFinite(c)&&isFinite(d)&&isFinite(f)&&isFinite(g)||i(9),(0>c||0>g)&&i(1),this.a.push(e.createRadialGradient,a,b,c,d,f,g),new t(this)},createPattern:function(a,b){a||i(17);var c,d=a.tagName,f=this.d;if(d)if(d=d.toLowerCase(),"img"===d)c=a.getAttribute("src",2);else{if(d===r||"video"===d)return;i(17)}else a.src?c=a.src:i(17);return"repeat"===b||"no-repeat"===b||"repeat-x"===b||"repeat-y"===b||""===b||b===k||i(12),this.a.push(e.createPattern,v(c),b),x[f]&&(this.e(),++n[f]),new E(this)},z:function(){var a=this.a;this.j!==this.lineWidth&&(this.j=this.lineWidth,a.push(e.lineWidth,this.j)),this.h!==this.lineCap&&(this.h=this.lineCap,a.push(e.lineCap,this.h)),this.i!==this.lineJoin&&(this.i=this.lineJoin,a.push(e.lineJoin,this.i)),this.k!==this.miterLimit&&(this.k=this.miterLimit,a.push(e.miterLimit,this.k))},c:function(){var a=this.a;this.p!==this.shadowOffsetX&&(this.p=this.shadowOffsetX,a.push(e.shadowOffsetX,this.p)),this.q!==this.shadowOffsetY&&(this.q=this.shadowOffsetY,a.push(e.shadowOffsetY,this.q)),this.n!==this.shadowBlur&&(this.n=this.shadowBlur,a.push(e.shadowBlur,this.n)),this.o!==this.shadowColor&&(this.o=this.shadowColor,a.push(e.shadowColor,this.o))},clearRect:function(a,b,c,d){this.a.push(e.clearRect,a,b,c,d)},fillRect:function(a,b,c,d){this.b(),this.c(),this.l(),this.a.push(e.fillRect,a,b,c,d)},strokeRect:function(a,b,c,d){this.b(),this.c(),this.m(),this.z(),this.a.push(e.strokeRect,a,b,c,d)},beginPath:function(){this.a.push(e.beginPath)},closePath:function(){this.a.push(e.closePath)},moveTo:function(a,b){this.a.push(e.moveTo,a,b)},lineTo:function(a,b){this.a.push(e.lineTo,a,b)},quadraticCurveTo:function(a,b,c,d){this.a.push(e.quadraticCurveTo,a,b,c,d)},bezierCurveTo:function(a,b,c,d,f,g){this.a.push(e.bezierCurveTo,a,b,c,d,f,g)},arcTo:function(a,b,c,d,f){0>f&&isFinite(f)&&i(1),this.a.push(e.arcTo,a,b,c,d,f)},rect:function(a,b,c,d){this.a.push(e.rect,a,b,c,d)},arc:function(a,b,c,d,f,g){0>c&&isFinite(c)&&i(1),this.a.push(e.arc,a,b,c,d,f,g?1:0)},fill:function(){this.b(),this.c(),this.l(),this.a.push(e.fill)},stroke:function(){this.b(),this.c(),this.m(),this.z(),this.a.push(e.stroke)},clip:function(){this.a.push(e.clip)},w:function(){var a=this.a;if(this.v!==this.font)try{var b=y[this.d];b.style.font=this.v=this.font;var c=b.currentStyle;a.push(e.font,[c.fontStyle,c.fontWeight,b.offsetHeight,c.fontFamily].join(" "))}catch(d){}this.r!==this.textAlign&&(this.r=this.textAlign,a.push(e.textAlign,this.r)),this.s!==this.textBaseline&&(this.s=this.textBaseline,a.push(e.textBaseline,this.s)),this.t!==this.canvas.currentStyle.direction&&(this.t=this.canvas.currentStyle.direction,a.push(e.direction,this.t))},fillText:function(a,b,c,d){this.b(),this.l(),this.c(),this.w(),this.a.push(e.fillText,v(a),b,c,void 0===d?1/0:d)},strokeText:function(a,b,c,d){this.b(),this.m(),this.c(),this.w(),this.a.push(e.strokeText,v(a),b,c,void 0===d?1/0:d)},measureText:function(a){var b=y[this.d];try{b.style.font=this.font}catch(c){}return b.innerText=a.replace(/[ \n\f\r]/g,"	"),new U(b.offsetWidth)
},drawImage:function(a,b,c,d,f,g,h,j,k){a||i(17);var l,m=a.tagName,o=arguments.length,p=this.d;if(m)if(m=m.toLowerCase(),"img"===m)l=a.getAttribute("src",2);else{if(m===r||"video"===m)return;i(17)}else a.src?l=a.src:i(17);if(this.b(),this.c(),l=v(l),3===o)this.a.push(e.drawImage,o,l,b,c);else if(5===o)this.a.push(e.drawImage,o,l,b,c,d,f);else{if(9!==o)return;(0===d||0===f)&&i(1),this.a.push(e.drawImage,o,l,b,c,d,f,g,h,j,k)}x[p]&&(this.e(),++n[p])},D:function(){this.globalAlpha=this.f=1,this.globalCompositeOperation=this.g="source-over",this.fillStyle=this.u=this.strokeStyle=this.A="#000000",this.lineWidth=this.j=1,this.lineCap=this.h="butt",this.lineJoin=this.i="miter",this.miterLimit=this.k=10,this.shadowBlur=this.n=this.shadowOffsetY=this.q=this.shadowOffsetX=this.p=0,this.shadowColor=this.o="rgba(0, 0, 0, 0.0)",this.font=this.v="10px sans-serif",this.textAlign=this.r="start",this.textBaseline=this.s="alphabetic",this.a=[],this.F=[]},H:function(){var a=this.a;return this.a=[],a},e:function(){var a=this.H();return a.length>0?eval(this.B.CallFunction('<invoke name="executeCommand" returntype="javascript"><arguments><string>'+a.join("&#0;")+"</string></arguments></invoke>")):void 0},I:function(a,b){this.e(),this.D(),a>0&&(this.B.width=a),b>0&&(this.B.height=b),this.a.push(e.resize,a,b)}},t.prototype={addColorStop:function(a,b){(isNaN(a)||0>a||a>1)&&i(1),this.G.a.push(e.addColorStop,this.id,a,b)}},D.prototype=Error();var T={1:"INDEX_SIZE_ERR",9:"NOT_SUPPORTED_ERR",11:"INVALID_STATE_ERR",12:"SYNTAX_ERR",17:"TYPE_MISMATCH_ERR",18:"SECURITY_ERR"},B={initElement:function(a){if(a.getContext)return a;var b=a.uniqueID,c="external"+b;x[b]=!1,n[b]=1,Q(a),a.innerHTML='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+location.protocol+'//fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" id="'+c+'"><param name="allowScriptAccess" value="always"><param name="flashvars" value="id='+c+'"><param name="wmode" value="transparent"></object><span style="margin:0;padding:0;border:0;display:inline-block;position:static;height:1em;overflow:visible;white-space:nowrap"></span>',s[b]=a;var d=a.firstChild;y[b]=a.lastChild;var f=j.body.contains;if(f(a))d.movie=w;else var g=setInterval(function(){f(a)&&(clearInterval(g),d.movie=w)},0);"BackCompat"!==j.compatMode&&h.XMLHttpRequest||(y[b].style.overflow="hidden");var i=new u(a,d);return a.getContext=function(a){return"2d"===a?i:k},a.toDataURL=function(a,b){return"image/jpeg"===(""+a).replace(/[A-Z]+/g,W)?i.a.push(e.toDataURL,a,"number"==typeof b?b:""):i.a.push(e.toDataURL,a),i.e()},d.attachEvent(K,G),a},saveImage:function(a){a.firstChild.saveImage()},setOptions:function(){},trigger:function(a,b){s[a].fireEvent("on"+b)},unlock:function(a,b){if(n[a]&&--n[a],b){var c,d,e=s[a],f=e.firstChild;Q(e),c=e.width,d=e.height,e.style.width=c+"px",e.style.height=d+"px",c>0&&(f.width=c),d>0&&(f.height=d),f.resize(c,d),e.attachEvent(L,H),x[a]=!0}}};if(j.createElement(r),j.createStyleSheet().cssText=r+"{display:inline-block;overflow:hidden;width:300px;height:150px}","complete"===j.readyState?A():j.attachEvent(F,A),h.attachEvent(J,I),0===w.indexOf(location.protocol+"//"+location.host+"/")){var S=new ActiveXObject("Microsoft.XMLHTTP");S.open("GET",w,!1),S.send(k)}h[M]=u,h[N]=t,h[O]=E,h[C]=B,h[P]={init:function(){},init_:function(){},initElement:B.initElement},keep=u.measureText}(window,document),Class.Mutators.jQuery=function(a){var b=this;jQuery.fn[a]=function(c){var d,e=arguments;return this.each(function(){var f=$(this).data(a);if("string"==typeOf(c)){var g=f[c];if("function"==typeOf(g)){var h=Array.slice(e,1);if("function"==typeOf(h[0]))return f[c]=e[1],d=f[c],f[c];var i=g.apply(f,Array.slice(e,1));return i==f?(d=this,this):(d=i,i)}if(1==e.length)return d=g,g;f[c]=e[1]}else $(this).data(a,new b($(this),c));return d=this,this}),d}},"undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(window.jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');if(a.length){var b=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===b.prop("type")&&a.find(".active").removeClass("active")}this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(window.jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),/bottom|top/.test(b)){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")}else this.replaceArrow(j-f,j,"top");c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery);var _global_labels=[];Utility=new Class({Implements:Options,jQuery:"utility",initialize:function(a){this.selector=a,void 0!==this.selector},getGadgetId:function(a){return a?a.split("_").slice(2)[0]:""},checkforIE6to8:function(){return!jQuery.support.leadingWhitespace},getGlobalizedLabel:function(a,b){var c,d=!0,e=this;for(c=0;c<_global_labels.length;c++)if(_global_labels[c][a]){this.labelOpts=_global_labels[c][a].labelOpts,d=!1;break}if(d){if(this.rootURL=window.location.href,"en"==e.options.runtimejson.lang)return void b();
var f="globalization/"+a+"_"+e.options.runtimejson.lang+".json",g=this.getXmlHttp(f);if(this.wasIE)i=$.parseJSON(h),e.labelOpts=i[a].labelOpts,e._setGlobalLabels(i,a,b,!1);else if(e.options.runtimejson.lang&&(g.open("GET",f,!1),g.send(null),200===g.status||0===g.status)){var h=g.responseText,i=$.parseJSON(h);e.labelOpts=i[a].labelOpts,e._setGlobalLabels(i,a,b,!1)}}else e._setGlobalLabels(null,a,b,!0)},encodeSingleAndDoubleQuotes:function(a){var b,c,d;for(b in a)if("object"==typeof a[b])if(a[b].length)for(c=0,il=a[b].length;il>c;c++)this.encodeSingleAndDoubleQuotes(a[b][c]);else for(d in a[b])"string"==typeof a[b][d]?a[b][d]=this.encodeTheJsonString(a[b][d]):this.encodeSingleAndDoubleQuotes(a[b][d]);else"string"==typeof a[b]&&(a[b]=this.encodeTheJsonString(a[b]));return a},encodeTheJsonString:function(a){if(!/<[a-z][\s\S]*>/i.test(a)){var b=new RegExp('\\"',"g"),c=new RegExp("\\'","g"),d=new RegExp("'","g");a=a.replace(b,"&quot;"),a=a.replace(c,"&#39;"),a=a.replace(d,"&#39;")}return a},getWasIE:function(){return this.wasIE},getXmlHttp:function(a){if(window.XDomainRequest&&this.rootURL.indexOf("http")<0){var b,c,d,e,f=this.rootURL.split("/"),g="";for(e=2;e<f.length-1;e++)g+=f[e]+"/";return a=g+a,a=a.substring(1,a.length),b=new ActiveXObject("Scripting.FileSystemObject"),c=b.OpenTextFile(a,1),d=c.ReadAll(),c.Close(),this.wasIE=!0,d}return window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:window.ActiveXObject&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),null==xmlhttp&&alert("Your browser does not support XMLHTTP."),xmlhttp},_setGlobalLabels:function(a,b,c,d){var e,f=!0;if(!d){for(e=0;e<_global_labels.length;e++)if(_global_labels[e][b]&&JSON.stringify(_global_labels[e][b].labelOpts)===JSON.stringify(this.labelOpts)){f=!1;break}f&&_global_labels.push(a)}c()},initMathJax:function(a){try{MathJax.Hub.Queue(["Typeset",MathJax.Hub,a]),MathJax.Hub.Queue(function(){$(".iphone,.ipad,.mac").find(".math-alt-text").each(function(){var a,b,c=$(this).height();if(c>0)for(a=$(this).parent().height(),b=0;b++<100&&a>c;)$(this).html($(this).html()+" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"),c=$(this).height()})})}catch(b){}},openBrowserPopupWindow:function(){if(!(arguments.length<1)){var a=$("base").attr("href")||"";arguments[0]=arguments[0]||"",a.length>0&&arguments[0].length>0&&$.browser.msie&&!/^http/.test(arguments[0])&&!/^file/.test(arguments[0])&&(arguments[0]="/"!==a.charAt(a.length-1)&&"/"!==arguments[0].charAt(0)?a+"/"+arguments[0]:a+arguments[0]),window.open.apply(window,arguments)}},urlResolver:function(a,b){var c;c=this.options.runtimejson.authoring?this.options.runtimejson.authoring.Domains:void 0;var d,e="",f="",g="",h="";if("URL"===a)return b.indexOf("=")<0?b:b.indexOf("?")<0?(f=b.split("="),f[1].indexOf("&")>-1?(f=f[1].split("&"),h=f[0]):h=b,h):b;if(c)for(d=0;d<c.length;d++)if(f=c[d],a===f.optionValue)for(g=0;g<f.map.length;g++){if(e=f.map[g],e.destination.indexOf("$DOMAIN")>-1){var i=window.location.href.split("/"),j=i[0],k=i[2];e.destination=e.destination.replace("$DOMAIN",j+"//"+k)}if("*"===e.host)return e.destination+b;var l=new RegExp(e.host);if(l.test(window.location.href))return e.destination+b}return null},getQuerystring:function(a,b,c){null===b&&(b="");try{a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+a+"=([^&#]*)"),e=d.exec(c?window.top.location.href:window.location.href);return null===e?b:"undefined"===e[1]||""===e[1]?b:e[1]}catch(f){return b}},addJavascriptFileToDOM:function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("src",a),$("head").append(b)},firePostMessageEvent:function(a){try{$.browser.msie?window.parent.postMessage(JSON.stringify(a),"*"):window.parent.postMessage(a,"*")}catch(b){}},encodeChar:function(a){var b,c,d="";if(void 0!=a&&a.indexOf("&")>-1)return a;for(b=0;b<a.length;++b)c=a.charCodeAt(b),d+=c>=128?"&#"+c+";":a.charAt(b);return d},stripHTML:function(a){return a?jQuery("<div />",{html:a}).text():""},isnot_int:function(a){return isNaN(parseInt(1*a))},randomString:function(a){var b,c,d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e=a,f="";for(void 0===a&&(e=5),c=0;e>c;c++)b=Math.floor(Math.random()*d.length),f+=d.substring(b,b+1);return f},shuffleArray:function(a){for(var b,c,d=a.length;d>0;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a},updateChartData:function(a,b,c,d){var e;for(e=0;e<a.length;e++)$(document).trigger("gadget."+a[e],[b,c,d])},updateGadgetData:function(a,b){$(document).trigger("GadgetTrigger",a,b)},focusItemOn:function(a){$(".text-button-focus").removeClass("text-button-focus"),$(a).addClass("text-button-focus")},focusItemOff:function(a){$(a).removeClass("text-button-focus")},addAccessibility:function(a){try{if(void 0!==this.options.dlink&&this.options.dlink.length>0){var b=this,c=$('<div class="skip-link accessibility-links">'+global_player.utilSkipLinkText+"</div>");c.attr({role:"button",tabindex:"0"}).click(function(a){a.preventDefault(),a.stopPropagation(),b.openDLink()}).keypress(function(a){13==a.which&&(a.preventDefault(),a.stopPropagation(),b.openDLink())}),a.prepend(c)}}catch(d){}},addLongDescription:function(a,b,c,d){try{if(void 0!==b&&b.length>0){var e=this,f=$('<div class="long-desc-link hidden-label">'+global_player.utilLongDescText+"</div>"),g=0,h=0;-1===d&&(h=-1),void 0!==c&&(g=c),f.attr({role:"button",tabindex:h,"data-id":g}).click(function(a){a.preventDefault(),a.stopPropagation(),e.openDLink(b)}).keypress(function(a){13==a.which&&(a.preventDefault(),a.stopPropagation(),e.openDLink(b))}),f.insertAfter(a)}}catch(i){}},openDLink:function(a){var b,c,d=this,e="",f="",g=this.randomString(8)+this.randomString(8),h=$(".description-pop-up"),i=!1,j=$(".dialog-modal");0===j.length?($("body").append('<div class="dialog-modal"></div>'),j.show()):j.show(),void 0!==this.options.dlink&&this.options.dlink.length>0&&(i=!0,this.options.scorm.interactions.length>0&&this.options.scorm.interactions[0].objectives.length>0&&(e='<div class="altActivityPoints hidden-label" role="button" aria-label="'+global_player.utilDlinkPointsText+'" tabindex="0"></div>'),$("body").prepend('<div aria-labelledby="'+g+'" class="description-pop-up"><label id="'+g+'" class="popup-disc hidden-label"></label><div class="popup-header"><div class="dlink-title" aria-hidden="true" role="presentation">'+global_player.utilDlinkWinTitle+'</div></div><div class="dialog-content" tabindex="0"></div>'+e+'<div class="dialog-close-btn" title="'+global_player.utilCloseDlinkText+'" role="button"></div></div>'),b=$(".dialog-content"),b.html(""),b.append(this.options.dlink),b.focus(),f=$(".altActivityPoints"),f.click(function(a){if(a.preventDefault(),d.giveAllPoints=!0,d.options.scorm.interactions.length>0)for(c=0;c<d.options.scorm.interactions.length;c++)d.options.scorm.interactions[c].objectives[0].success_status="passed",d.options.scorm.interactions[c].objectives[0].completion_status="completed",d.options.scorm.interactions[c].objectives[0].score.raw=d.options.scorm.interactions[c].objectives[0].score.max;d.options.scormOn&&d.setScormData()})),this.giveAllPoints=!1,a&&a.length>0&&(i=!1,f&&f.remove(),$("body").prepend('<div aria-labelledby="'+g+'" class="description-pop-up"><label id="'+g+'" class="popup-disc hidden-label"></label><div class="popup-header"><div class="dlink-title" aria-hidden="true" role="presentation">'+global_player.utilLongDescTitle+'</div></div><div class="dialog-content" tabindex="0"></div><div class="dialog-close-btn" title="'+global_player.utilCloseDescText+'" role="button" tabindex="0"></div></div>'),b=$(".dialog-content"),b.html(""),b.append(a),b.focus(),a=""),h.show(),$(".description-pop-up .dialog-close-btn").unbind().click(function(){$(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus()}).keydown(function(a){(13===a.keyCode||9===a.keyCode)&&($(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus())}).sliderbutton({buttonClassName:"dialog-close-btn",slider:!1}),$(".description-pop-up .dialog-close-btn").hover(function(){$(this).toggleClass("dialog-close-btn-over")}).mousedown(function(){$(this).addClass("dialog-close-btn-down")}).mouseup(function(){$(this).removeClass("dialog-close-btn-down"),i?d.skipCurrentGadget():$(".long-desc-link").focus()}),$(".dialog-content").focus(),this._initMathJax()},skipCurrentGadget:function(){var a=this.jObject;0===a.find(".skipGadgetEnd").length&&a.append('<div class="skipGadgetEnd" tabindex="0" aria-hidden="true" role="presentation"></div>'),a.find(".skipGadgetEnd").focus()},rgbColorToHex:function(a){var b;"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var c=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}}];for(b=0;b<c.length;b++){var d=c[b].re,e=c[b].process,f=d.exec(a);f&&(channels=e(f),this.r=channels[0],this.g=channels[1],this.b=channels[2])}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;var g=this.r.toString(16),h=this.g.toString(16),i=this.b.toString(16);return 1==g.length&&(g="0"+g),1==h.length&&(h="0"+h),1==i.length&&(i="0"+i),"#"+g+h+i},browserDetect:function(){var a,b={os:"unknown",osVersion:{major:void 0,minor:void 0,micro:void 0},specialFlags:{isiOS8OrGreater:!1,isIE:!1}};$.each($.browser,function(a){return navigator.userAgent.match(/Trident\/7\./)&&(a="msie"),$("body").addClass(a+" ver"+parseInt($.browser.version,10)),!1});var c=["iphone","ipad","windows","mac","linux","android"],d=navigator.appVersion.toLowerCase().match(new RegExp(c.join("|")));d&&($("body").addClass(d[0]),b.os=d[0],("iphone"===d[0]||"ipad"===d[0])&&(a=navigator.appVersion.match(/OS\s+(\d+)_(\d+)_?(\d+)?/),b.osVersion.major=a&&a[1]?parseInt(a[1],10):void 0,b.osVersion.minor=a&&a[2]?parseInt(a[2],10):void 0,b.osVersion.micro=a&&a[3]?parseInt(a[3],10):void 0,b.specialFlags.isiOS8OrGreater=b.osVersion.major>=8)),b.specialFlags.isIE=window.navigator.userAgent.indexOf("MSIE")>-1||window.navigator.userAgent.indexOf("Trident")>-1,$("body").data("browserData",b)},getScoId:function(){var a=window.location+"",b=[],c="SCO_Id";return b=a.split("/"),c=b[b.length-2]},getFormattedDate:function(a){var b,c,d,e;return e=Math.floor(a/1e3),d=Math.floor(e/60),e%=60,c=Math.floor(d/60),d%=60,b=Math.floor(c/24),c%=24,10>c&&(c="0"+c),10>d&&(d="0"+d),10>e&&(e="0"+e),b+"."+c+":"+d+":"+e},isNumber:function(a,b,c){var d=a.toString().replace(/,/g,"");return b&&b.length>0&&0===d.indexOf(b)&&(d=d.substring(b.length,d.length)),c&&d.indexOf("%")===d.length-1&&(d=d.substring(0,d.length-1)),{isNumber:$.isNumeric(d),value:d}},formatNumber:function(a,b,c,d,e){var f=a,g=this.isNumber(a,d,e);return g.isNumber?(f=g.value,(b||b>-1)&&(f=parseFloat(f).toFixed(b)),c&&(num=f.toString().split("."),num[0]=num[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),f=num.join(".")),d&&d.length>0&&(f=d+f),e&&(f+="%"),f):void 0},formatString:function(){var a,b,c=arguments[0];for(a=0;a<arguments.length-1;a++)b=new RegExp("\\{"+a+"\\}","gi"),c=c.replace(b,arguments[1*a+1]);return c},findAuthAssetUrl:function(a){var b=this;if("object"==typeof a)if(a.length)for(var c=0,d=a.length;d>c;c++)b.findAuthAssetUrl(a[c]);else for(var e in a)"string"==typeof a[e]?-1!==a[e].indexOf("auth/asset/")&&a[e].indexOf("auth/asset/samples/")<0&&(a[e]=global_player.globalScoRootPath+a[e]):b.findAuthAssetUrl(a[e]);return a}}),window.PearsonGL=window.PearsonGL||{},PearsonGL.utils=function(){return{keyCode:{enter:13,space:32,tab:9,left:37,up:38,right:39,down:40},rootURL:window.location.href,getGadgetId:function(a){return a?a.split("_").slice(2)[0]:""},getWasIE:function(){return window.XDomainRequest&&this.rootURL.indexOf("http")<0?!0:!1},checkforIE6to8:function(){return!jQuery.support.leadingWhitespace},encodeSingleAndDoubleQuotes:function(a){var b,c,d;for(b in a)if("object"==typeof a[b])if(a[b].length)for(c=0,il=a[b].length;il>c;c++)this.encodeSingleAndDoubleQuotes(a[b][c]);else for(d in a[b])"string"==typeof a[b][d]?a[b][d]=this.encodeTheJsonString(a[b][d]):this.encodeSingleAndDoubleQuotes(a[b][d]);else"string"==typeof a[b]&&(a[b]=this.encodeTheJsonString(a[b]));return a},encodeTheJsonString:function(a){if(!/<[a-z][\s\S]*>/i.test(a)){var b=new RegExp('\\"',"g"),c=new RegExp("\\'","g"),d=new RegExp("'","g");a=a.replace(b,"&quot;"),a=a.replace(c,"&#39;"),a=a.replace(d,"&#39;")}return a},getXmlHttp:function(a){if(this.wasIE=!1,window.XDomainRequest&&this.rootURL.indexOf("http")<0){var b,c,d,e,f=this.rootURL.split("/"),g="";for(e=2;e<f.length-1;e++)g+=f[e]+"/";return a=g+a,a=a.substring(1,a.length),b=new ActiveXObject("Scripting.FileSystemObject"),c=b.OpenTextFile(a,1),d=c.ReadAll(),c.Close(),this.wasIE=!0,d}return window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:window.ActiveXObject&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),null==xmlhttp&&alert("Your browser does not support XMLHTTP."),xmlhttp},initMathJax:function(a){try{MathJax.Hub.Queue(["Typeset",MathJax.Hub,a]),MathJax.Hub.Queue(function(){$(".iphone,.ipad,.mac").find(".math-alt-text").each(function(){var a,b,c=$(this).height();if(c>0)for(a=$(this).parent().height(),b=0;b++<100&&a>c;)$(this).html($(this).html()+" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"),c=$(this).height()})})}catch(b){}},getQuerystring:function(a,b,c){null===b&&(b="");try{a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+a+"=([^&#]*)"),e=d.exec(c?window.top.location.href:window.location.href);return null===e?b:"undefined"===e[1]||""===e[1]?b:e[1]}catch(f){return b}},addJavascriptFileToDOM:function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("src",a),$("head").append(b)},encodeChar:function(a){var b,c,d="";if(void 0!=a&&a.indexOf("&")>-1)return a;for(b=0;b<a.length;++b)c=a.charCodeAt(b),d+=c>=128?"&#"+c+";":a.charAt(b);return d},stripHTML:function(a){return a?jQuery("<div />",{html:a}).text():""},isnot_int:function(a){return isNaN(parseInt(1*a))},randomString:function(a){var b,c,d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e=a,f="";for(void 0===a&&(e=5),c=0;e>c;c++)b=Math.floor(Math.random()*d.length),f+=d.substring(b,b+1);return f},shuffleArray:function(a){for(var b,c,d=a.length;d>0;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a},updateChartData:function(a,b,c,d){var e;for(e=0;e<a.length;e++)$(document).trigger("gadget."+a[e],[b,c,d])},updateGadgetData:function(a,b){$(document).trigger("GadgetTrigger",a,b)},focusItemOn:function(a){$(".text-button-focus").removeClass("text-button-focus"),$(a).addClass("text-button-focus")},focusItemOff:function(a){$(a).removeClass("text-button-focus")},rgbColorToHex:function(a){var b,c,d,e;"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var f=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}}];for(b=0;b<f.length;b++){var g=f[b].re,h=f[b].process,i=g.exec(a);i&&(channels=h(i),c=channels[0],d=channels[1],e=channels[2])}c=0>c||isNaN(c)?0:c>255?255:c,d=0>d||isNaN(d)?0:d>255?255:d,e=0>e||isNaN(e)?0:e>255?255:e;var j=c.toString(16),k=d.toString(16),l=e.toString(16);return 1==j.length&&(j="0"+j),1==k.length&&(k="0"+k),1==l.length&&(l="0"+l),"#"+j+k+l},browserDetect:function(){var a,b={os:"unknown",osVersion:{major:void 0,minor:void 0,micro:void 0},specialFlags:{isiOS8OrGreater:!1,isIE:!1}};$.each($.browser,function(a){return navigator.userAgent.match(/Trident\/7\./)&&(a="msie"),$("body").addClass(a+" ver"+parseInt($.browser.version,10)),!1});var c=["iphone","ipad","windows","mac","linux","android"],d=navigator.appVersion.toLowerCase().match(new RegExp(c.join("|")));d&&($("body").addClass(d[0]),b.os=d[0],("iphone"===d[0]||"ipad"===d[0])&&(a=navigator.appVersion.match(/OS\s+(\d+)_(\d+)_?(\d+)?/),b.osVersion.major=a&&a[1]?parseInt(a[1],10):void 0,b.osVersion.minor=a&&a[2]?parseInt(a[2],10):void 0,b.osVersion.micro=a&&a[3]?parseInt(a[3],10):void 0,b.specialFlags.isiOS8OrGreater=b.osVersion.major>=8)),b.specialFlags.isIE=window.navigator.userAgent.indexOf("MSIE")>-1||window.navigator.userAgent.indexOf("Trident")>-1,$("body").data("browserData",b)},getScoId:function(){var a=window.location+"",b=[],c="SCO_Id";return b=a.split("/"),c=b[b.length-2]},getFormattedDate:function(a){var b,c,d,e;return e=Math.floor(a/1e3),d=Math.floor(e/60),e%=60,c=Math.floor(d/60),d%=60,b=Math.floor(c/24),c%=24,10>c&&(c="0"+c),10>d&&(d="0"+d),10>e&&(e="0"+e),b+"."+c+":"+d+":"+e},isNumber:function(a,b,c){var d=a.toString().replace(/,/g,"");return b&&b.length>0&&0===d.indexOf(b)&&(d=d.substring(b.length,d.length)),c&&d.indexOf("%")===d.length-1&&(d=d.substring(0,d.length-1)),{isNumber:$.isNumeric(d),value:d}},formatNumber:function(a,b,c,d,e){var f=a,g=this.isNumber(a,d,e);return g.isNumber?(f=g.value,(b||b>-1)&&(f=parseFloat(f).toFixed(b)),c&&(num=f.toString().split("."),num[0]=num[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),f=num.join(".")),d&&d.length>0&&(f=d+f),e&&(f+="%"),f):void 0},formatString:function(){var a,b,c=arguments[0];for(a=0;a<arguments.length-1;a++)b=new RegExp("\\{"+a+"\\}","gi"),c=c.replace(b,arguments[1*a+1]);return c},findAuthAssetUrl:function(a){var b=this;if("object"==typeof a)if(a.length)for(var c=0,d=a.length;d>c;c++)b.findAuthAssetUrl(a[c]);else for(var e in a)"string"==typeof a[e]?-1!==a[e].indexOf("auth/asset/")&&a[e].indexOf("auth/asset/samples/")<0&&(a[e]=global_player.globalScoRootPath+a[e]):b.findAuthAssetUrl(a[e]);return a},firePostMessageEvent:function(a){try{$.browser.msie?window.parent.postMessage(JSON.stringify(a),"*"):window.parent.postMessage(a,"*")}catch(b){}},openBrowserPopupWindow:function(){if(!(arguments.length<1)){var a=$("base").attr("href")||"";arguments[0]=arguments[0]||"",a.length>0&&arguments[0].length>0&&$.browser.msie&&!/^http/.test(arguments[0])&&!/^file/.test(arguments[0])&&(arguments[0]="/"!==a.charAt(a.length-1)&&"/"!==arguments[0].charAt(0)?a+"/"+arguments[0]:a+arguments[0]),window.open.apply(window,arguments)}},setGlobalLabels:function(a,b,c,d){var e,f=!0;for(e=0;e<_global_labels.length;e++)if(_global_labels[e][b]&&JSON.stringify(_global_labels[e][b].labelOpts)===JSON.stringify(d)){f=!1;break}f&&_global_labels.push(a),c(d)},urlResolver:function(a,b,c){var d;d=a.authoring?a.authoring.Domains:void 0;var e,f="",g="",h="",i="";if("URL"===b)return c.indexOf("=")<0?c:c.indexOf("?")<0?(g=c.split("="),g[1].indexOf("&")>-1?(g=g[1].split("&"),i=g[0]):i=c,i):c;if(d)for(e=0;e<d.length;e++)if(g=d[e],b===g.optionValue)for(h=0;h<g.map.length;h++){if(f=g.map[h],f.destination.indexOf("$DOMAIN")>-1){var j=window.location.href.split("/"),k=j[0],l=j[2];f.destination=f.destination.replace("$DOMAIN",k+"//"+l)}if("*"===f.host)return f.destination+c;var m=new RegExp(f.host);if(m.test(window.location.href))return f.destination+c}return null},getGlobalizedLabel:function(a,b,c){var d,e,f=!0;for(e=0;e<_global_labels.length;e++)if(_global_labels[e][a])return void b(_global_labels[e][a].labelOpts);if(f){if(this.rootURL=window.location.href,"en"==c)return void b();var g="globalization/"+a+"_"+c+".json",h=this.getXmlHttp(g);if(this.getWasIE())j=$.parseJSON(i),d=j[a].labelOpts,this.setGlobalLabels(j,a,b,d);else if(c&&(h.open("GET",g,!1),h.send(null),200===h.status||0===h.status)){var i=h.responseText,j=$.parseJSON(i);d=j[a].labelOpts,this.setGlobalLabels(j,a,b,d)}}else b(d)},isNonEmptyString:function(a){return("string"==typeof a||a instanceof String)&&a.length>0},isNonEmptyArray:function(a){return Array.isArray(a)&&a.length>0}}}(),window.PearsonGL=window.PearsonGL||{},window.PearsonGL.globals=window.PearsonGL.globals||{},PearsonGL.GoogleAnalytics=function(a){this.setAllowSendAnalytics(!1),this.initialize(a)},PearsonGL.GoogleAnalytics.prototype={initialize:function(a){this.setAllowSendAnalytics(a.useGoogleAnalytics),this.productNameId=a.product+" "+PearsonGL.utils.getScoId(),this.allowSendAnalytics&&!this.findFile("analytics.js")&&(!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",a.googleAnalytics,{cookieDomain:"none"}))},setAllowSendAnalytics:function(a){this.allowSendAnalytics=!!a},findFile:function(a){var b,c=document.getElementsByTagName("script");for(b=0;b<c.length;b++)if(c[b].src.substr(-a.length)===a)return!0;return!1},sendAnalytics:function(a){this.allowSendAnalytics&&(ga("send",a.eventType,a.category,a.action,a.label,$.isNumeric(a.value)?Math.round(a.value):void 0),ga("send","pageview",{hitCallback:function(){}}))}},window.PearsonGL=window.PearsonGL||{},window.PearsonGL.ScormBase=function(){PearsonGL.logger.log("scorm data from gadget."),this.config={scormOn:!0}},window.PearsonGL.ScormBase.prototype={setScormConfig:function(a){$.extend(this.config,a)},data:function(){PearsonGL.logger.log("scorm data from gadget.")},setInitScormData:function(){this.config.scormOn&&this.setScormData()},setObjectiveDescription:function(a,b,c){var d=a;d=d.replace(/\{XX}/g,b),d=d.replace(/\{YY}/g,c),void 0!==this.config.scorm.interactions&&$(this.config.scorm.interactions).each(function(){$(this.objectives).each(function(){this.description=d})})},setGadgetId:function(a){"object"!=typeof window.SB&&(this.config.scormOn=!1),this.config.scormOn&&(this.config.scorm.id=a,this.getScormData(),this.parseGadgetData())},getScormData:function(){if(this.config.scormOn){var a=this.config.scorm.id;PearsonGL.logger.log(this.config.gadgetName+" Gadget getScormData("+a+")");var b=this.config.scorm.interactions,c={},d=[],e="",f=0,g=[],h=0,i={id:a,title:this.config.gadgetName,data:void 0},j="",k={},l="",m={};if($.isArray(b)&&b.length>0)if(e=window.SB.getEntry(),"resume"===e){for($.extend(c,b),f=0;f<b.length;f+=1)if(j=a+"_"+f,k=window.SB.getInteraction(j),"false"!==k)for(""!==k.learner_response&&this.setLearner_response(k.learner_response),b[f]=k,d=b[f].objectives,h=0;h<d.length;h+=1)l=j+"_"+h,m=SB.getObjective(l),m.completionThreshold=c[f].objectives[h].completionThreshold,d[h]=m;else this.setUpInteractionAndObjectives(b,f,h,j,g,k,l,m,a);i.data=SB.getSuspendDataByPageID(a),PearsonGL.logger.log("SuspendData loaded from the LMS: "),PearsonGL.logger.out(i.data)}else PearsonGL.logger.log("No previous interactions loaded from SCORM, creating new..."),this.setUpInteractionAndObjectives(b,f,h,j,g,k,l,m,a);else PearsonGL.logger.error(void 0!==b?"Incorrect interactions datatype loaded from JSON: "+typeof b:"No interactions loaded from JSON, ignoring...");this.config.scorm.suspendData=i}},setUpInteractionAndObjectives:function(a,b,c,d,e,f,g,h,i){for(b=0;b<a.length;b+=1){for(d=i+"_"+b,PearsonGL.logger.log("Creating new interaction with ID "+d),f=a[b],f.id=d,e=f.objectives,c=0;c<e.length;c+=1)g=d+"_"+c,PearsonGL.logger.log("Creating new objective with ID "+g),h=e[c],this.getScormObjectiveValues(h),h.id=g,PearsonGL.logger.log("Objective object"),PearsonGL.logger.out(h);this.getScormInteractionValues(f),f.objectives=e,PearsonGL.logger.log("Interaction object"),PearsonGL.logger.out(f)}},setScormData:function(){if(this.config.scormOn&&window.SB){PearsonGL.logger.log(this.config.gadgetName+"Gadget setScormData()");var a,b,c=this.config.scorm.suspendData,d=this.config.scorm.interactions,e=[];if(this.setGadgetData(),$.isArray(d)&&d.length>0){for(a=0;a<d.length;a+=1){var f=d[a];for(e=d[a].objectives,b=0;b<e.length;b+=1){var g=e[b];"false"!==g&&(this.setScormObjectiveValues(g),PearsonGL.logger.log("Setting objective: >>"),SB.setObjective(g),PearsonGL.logger.out(g))}this.setScormInteractionValues(f),PearsonGL.logger.log("Setting interaction: >>"),PearsonGL.logger.out(f),window.SB.setInteraction(f)}if(!c)return;c.data&&"page"!==this.config.objectType&&(PearsonGL.logger.log("Saving SuspendData to the LMS: "),PearsonGL.logger.out(c),window.SB.setSuspendDataByPageID(c.id,c.title,c.data)),$(window).trigger("LearnerDataLoaded")}else PearsonGL.logger.error("No interactions exist, ignoring...");"function"==typeof scobot_local&&window.SB.commit()}},getScormInteractionValues:function(a){return a.timestamp=new Date,a.type="other",a.weighting=1,a.learner_response="",a.correct_responses="not played",a.result="neutral",a.latency="",a},getScormObjectiveValues:function(a){var b={};try{b.scaled=0,b.raw=0,b.min=a.score.min,b.max=a.score.max,a.score=b,a.success_status="unknown",a.completion_status="not attempted",a.progress_measure=0}catch(c){}return a},setScormInteractionValues:function(a){return a.latency=new Date,a.timestamp=new Date,a.type="other",a.weighting=1,a.learner_response="played",a.correct_responses="played",a.result="neutral",a},setScormObjectiveValues:function(a){var b={};try{b.min=isNaN(a.score.min)?0:parseFloat(a.score.min),b.max=isNaN(a.score.max)?0:parseFloat(a.score.max),b.raw=b.max,b.scaled=b.max-b.min!==0?(b.raw-b.min)/(b.max-b.min):1,a.score=b,a.completion_status="completed",a.success_status="passed",a.progress_measure=1}catch(c){}return a},setLearner_response:function(a){PearsonGL.logger.log(a)},parseGadgetData:function(){PearsonGL.logger.log("scorm.parseGadgetData() - no suspendData to parse for this gadget."),this.resetHighLights()},setGadgetData:function(){PearsonGL.logger.log("scorm.setGadgetData() - no suspendData to set for this gadget.")},resetHighLights:function(){},returnHighlights:function(a){{var b=this;this.jObject}this.objectType.scormOn===!0&&this.objectType.scorm.suspendData.data&&a.each(function(a){var c=$(this).find(".text-audio-component");$(b.objectType.scorm.suspendData.data.highlights).each(function(){this.index==a&&c.html("").append(this.htmlContent)})})},isExceededSuspendDataLimit:function(a,b){var c={low:2e4,medium:35e3,high:5e4},d=JSON.stringify(a),e=d.replace(/[^\f\r\n\t\v\0\s\S\w\W\d\D\b\\B\\cX\\xhh\\uhhh]/gi,"");return void 0!==b&&c.hasOwnProperty(b.toLowerCase())||(b="low"),e.length>c[b.toLowerCase()]?!0:!1}},window.PearsonGL=window.PearsonGL||{},window.PearsonGL.GadgetBase=function(a,b){window.PearsonGL.ScormBase.call(this),this.gadgetUniqueId=b;var c={playalt:"Play",pausealt:"Pause"},d={runtimejson:{lang:"en",authoring:{}},domain:[],scorm:{id:"",interactions:[]},keyCodes:{enter:13,space:32,tab:9,left:37,up:38,right:39,down:40},objectType:"gadget"};"object"==typeof this.labelOpts?$.extend(this.labelOpts,c):this.labelOpts=c,"object"==typeof this.options?$.extend(this.options,d):this.options=d,this.isTouchDevice="ontouchstart"in document.documentElement,this.config&&(this.options.scormOn=this.config.scormOn),$.extend(!0,this.options,a),0===$(".popupsound").length&&$("body").prepend("<div class='popupsound'></div>")},window.PearsonGL.GadgetBase.prototype=Object.create(window.PearsonGL.ScormBase.prototype),window.PearsonGL.GadgetBase.prototype.constructor=window.PearsonGL.GadgetBase,window.PearsonGL.GadgetBase.prototype.initGadget=function(a){this.options.gadgetName=a,this.setScormConfig({scorm:this.options.scorm,gadgetName:this.options.gadgetName,objectType:this.options.objectType}),this.analyticsData={category:this.options.gadgetName,eventType:"event",action:this.options.runtimejson.product+" "+window.PearsonGL.utils.getScoId()}},window.PearsonGL.GadgetBase.prototype.addAccessibility=function(a){try{if(void 0!==this.options.dlink&&this.options.dlink.length>0){var b=this,c=$('<div class="skip-link accessibility-links">'+global_player.utilSkipLinkText+"</div>");c.attr({role:"button",tabindex:"0"}).click(function(a){a.preventDefault(),a.stopPropagation(),b.openDLink()}).keypress(function(a){13==a.which&&(a.preventDefault(),a.stopPropagation(),b.openDLink())}),a.prepend(c)}}catch(d){}},window.PearsonGL.GadgetBase.prototype.addLongDescription=function(a,b,c,d){try{if(void 0!==b&&b.length>0){var e=this,f=$('<div class="long-desc-link hidden-label">'+global_player.utilLongDescText+"</div>"),g=0,h=0;-1===d&&(h=-1),void 0!==c&&(g=c),f.attr({role:"button",tabindex:h,"data-id":g}).click(function(a){a.preventDefault(),a.stopPropagation(),e.openDLink(b)}).keypress(function(a){13==a.which&&(a.preventDefault(),a.stopPropagation(),e.openDLink(b))}),f.insertAfter(a)}}catch(i){}},PearsonGL.GadgetBase.prototype.skipCurrentGadget=function(){var a=this.jObject;0===a.find(".skipGadgetEnd").length&&a.append('<div class="skipGadgetEnd" tabindex="0" aria-hidden="true" role="presentation"></div>'),a.find(".skipGadgetEnd").focus()},window.PearsonGL.GadgetBase.prototype.openDLink=function(a){var b,c,d=this,e="",f="",g=PearsonGL.utils.randomString(8)+PearsonGL.utils.randomString(8),h=$(".description-pop-up"),i=!1,j=$(".dialog-modal");0===j.length?($("body").append('<div class="dialog-modal"></div>'),j.show()):j.show(),void 0!==this.options.dlink&&this.options.dlink.length>0&&(i=!0,this.options.scorm.interactions.length>0&&this.options.scorm.interactions[0].objectives.length>0&&(e='<div class="altActivityPoints hidden-label" role="button" aria-label="'+global_player.utilDlinkPointsText+'" tabindex="0"></div>'),$("body").prepend('<div aria-labelledby="'+g+'" class="description-pop-up"><label id="'+g+'" class="popup-disc hidden-label"></label><div class="popup-header"><div class="dlink-title" aria-hidden="true" role="presentation">'+global_player.utilDlinkWinTitle+'</div></div><div class="dialog-content" tabindex="0"></div>'+e+'<div class="dialog-close-btn" title="'+global_player.utilCloseDlinkText+'" role="button"></div></div>'),b=$(".dialog-content"),b.html(""),b.append(this.options.dlink),b.focus(),f=$(".altActivityPoints"),f.click(function(a){if(a.preventDefault(),d.giveAllPoints=!0,d.options.scorm.interactions.length>0)for(c=0;c<d.options.scorm.interactions.length;c++)d.options.scorm.interactions[c].objectives[0].success_status="passed",d.options.scorm.interactions[c].objectives[0].completion_status="completed",d.options.scorm.interactions[c].objectives[0].score.raw=d.options.scorm.interactions[c].objectives[0].score.max;d.options.scormOn&&d.setScormData()})),this.giveAllPoints=!1,a&&a.length>0&&(i=!1,f&&f.remove(),$("body").prepend('<div aria-labelledby="'+g+'" class="description-pop-up"><label id="'+g+'" class="popup-disc hidden-label"></label><div class="popup-header"><div class="dlink-title" aria-hidden="true" role="presentation">'+global_player.utilLongDescTitle+'</div></div><div class="dialog-content" tabindex="0"></div><div class="dialog-close-btn" title="'+global_player.utilCloseDescText+'" role="button" tabindex="0"></div></div>'),b=$(".dialog-content"),b.html(""),b.append(a),setTimeout(function(){b.focus()},.5),a=""),h.show(),$(".description-pop-up .dialog-close-btn").unbind().click(function(){$(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus()}).keypress(function(a){13===a.keyCode&&($(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus())}).keydown(function(a){9===a.keyCode&&($(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus())}).sliderbutton({buttonClassName:"dialog-close-btn",slider:!1}),$(".description-pop-up .dialog-close-btn").hover(function(){$(this).toggleClass("dialog-close-btn-over")}).mousedown(function(){$(this).addClass("dialog-close-btn-down")}).mouseup(function(){$(this).removeClass("dialog-close-btn-down"),i?d.skipCurrentGadget():$(".long-desc-link").focus()}),$(".dialog-content").focus(),PearsonGL.utils.initMathJax()},window.PearsonGL.GadgetBase.prototype.sendAnalytics=function(a,b){PearsonGL.globals&&PearsonGL.globals.comm&&this.analyticsData&&(this.analyticsData.label=this.gadgetUniqueId+" "+a,this.analyticsData.value=b,PearsonGL.globals.comm.sendAnalytics(this.analyticsData))},window.PearsonGL.GadgetBase.prototype.gadgetPageShowEvent=function(){},window.PearsonGL.GadgetBase.prototype.getjObject=function(){return this.jObject
},window.PearsonGL.GadgetBase.prototype.createRichTextObj=function(a,b,c){var d=this;void 0==b&&(b=!1);var e={value:a,noTabIndex:b,highlightingEnabled:d.options.runtimejson.highlightingEnabled,domains:d.options.runtimejson.authoring.Domains,saveText:function(){d.saveHighLightTextInGadget()},highlightArea:c};return e},window.PearsonGL.GadgetBase.prototype.saveHighLightTextInGadget=function(){this.jObject},window.PearsonGL.GadgetBase.prototype.goThroughHighLights=function(a){var b=(this.jObject,"%%%%%%");a.find(".highlight-identifier").each(function(){$(this).before(b).after(b),$(this).contents().unwrap()})},window.PearsonGL.GadgetBase.prototype.pause=function(){},window.PearsonGL.GadgetBase.prototype.resume=function(){},window.PearsonGL.GadgetBase.prototype.start=function(){},window.PearsonGL.GadgetBase.prototype.stop=function(){},window.PearsonGL.GadgetBase.prototype.destroy=function(){},window.PearsonGL.GadgetBase.prototype.enable=function(){},window.PearsonGL.GadgetBase.prototype.authMode=function(){},window.PearsonGL.GadgetBase.prototype.gadgetUnload=function(){},window.PearsonGL.GadgetBase.prototype.gadgetPageShowEvent=function(){},window.PearsonGL.GadgetBase.prototype.setScreenReaderMode=function(){},window.PearsonGL=window.PearsonGL||{},PearsonGL.GadgetBase2=function(a,b){this.gadgetUniqueId=b;var c={playalt:"Play",pausealt:"Pause"},d={runtimejson:{lang:"en",authoring:{}},domain:[],scorm:{id:this.gadgetUniqueId,interactions:[]},keyCodes:{enter:13,space:32,tab:9,left:37,up:38,right:39,down:40},objectType:"gadget"};"object"==typeof this.labelOpts?$.extend(this.labelOpts,c):this.labelOpts=c,"object"==typeof this.options?$.extend(this.options,d):this.options=d,this.isTouchDevice="ontouchstart"in document.documentElement,this.config&&(this.options.scormOn=this.config.scormOn),$.extend(!0,this.options,a),this.analyticsData={category:this.options.gadgetName,eventType:"event",action:this.options.runtimejson.product+" "+window.PearsonGL.utils.getScoId()},0===$(".popupsound").length&&$("body").prepend("<div class='popupsound'></div>")},PearsonGL.GadgetBase2.prototype.constructor=window.PearsonGL.GadgetBase2,PearsonGL.GadgetBase2.prototype.initGadget=function(a){this.options.gadgetName=a,this.analyticsData.category=this.options.gadgetName},PearsonGL.GadgetBase2.prototype.isCommEnabled=function(a){return PearsonGL.globals&&PearsonGL.globals.comm?a&&a.windowPostMessage?!0:this.options.scorm.interactions.length>0:!1},PearsonGL.GadgetBase2.prototype.addAccessibility=function(a){try{if(void 0!==this.options.dlink&&this.options.dlink.length>0){var b=this,c=$('<div class="skip-link accessibility-links">'+global_player.utilSkipLinkText+"</div>");c.attr({role:"button",tabindex:"0"}).click(function(a){a.preventDefault(),a.stopPropagation(),b.openDLink()}).keypress(function(a){13==a.which&&(a.preventDefault(),a.stopPropagation(),b.openDLink())}),a.prepend(c)}}catch(d){}},PearsonGL.GadgetBase2.prototype.addLongDescription=function(a,b,c,d){try{if(void 0!==b&&b.length>0){var e=this,f=$('<div class="long-desc-link hidden-label">'+global_player.utilLongDescText+"</div>"),g=0,h=0;-1===d&&(h=-1),void 0!==c&&(g=c),f.attr({role:"button",tabindex:h,"data-id":g}).click(function(a){a.preventDefault(),a.stopPropagation(),e.openDLink(b)}).keypress(function(a){13==a.which&&(a.preventDefault(),a.stopPropagation(),e.openDLink(b))}),f.insertAfter(a)}}catch(i){}},PearsonGL.GadgetBase2.prototype.skipCurrentGadget=function(){var a=this.jObject;0===a.find(".skipGadgetEnd").length&&a.append('<div class="skipGadgetEnd" tabindex="0" aria-hidden="true" role="presentation"></div>'),a.find(".skipGadgetEnd").focus()},PearsonGL.GadgetBase2.prototype.openDLink=function(a){var b,c,d=this,e="",f="",g=PearsonGL.utils.randomString(8)+PearsonGL.utils.randomString(8),h=$(".description-pop-up"),i=!1,j=$(".dialog-modal");0===j.length?($("body").append('<div class="dialog-modal"></div>'),j.show()):j.show(),void 0!==this.options.dlink&&this.options.dlink.length>0&&(i=!0,this.options.scorm.interactions.length>0&&this.options.scorm.interactions[0].objectives.length>0&&(e='<div class="altActivityPoints hidden-label" role="button" aria-label="'+global_player.utilDlinkPointsText+'" tabindex="0"></div>'),$("body").prepend('<div aria-labelledby="'+g+'" class="description-pop-up"><label id="'+g+'" class="popup-disc hidden-label"></label><div class="popup-header"><div class="dlink-title" aria-hidden="true" role="presentation">'+global_player.utilDlinkWinTitle+'</div></div><div class="dialog-content" tabindex="0"></div>'+e+'<div class="dialog-close-btn" title="'+global_player.utilCloseDlinkText+'" role="button"></div></div>'),b=$(".dialog-content"),b.html(""),b.append(this.options.dlink),b.focus(),f=$(".altActivityPoints"),f.click(function(a){if(a.preventDefault(),d.giveAllPoints=!0,d.options.scorm.interactions.length>0)for(c=0;c<d.options.scorm.interactions.length;c++)d.options.scorm.interactions[c].objectives[0].success_status="passed",d.options.scorm.interactions[c].objectives[0].completion_status="completed",d.options.scorm.interactions[c].objectives[0].score.raw=d.options.scorm.interactions[c].objectives[0].score.max;d.options.scormOn&&d.setScormData()})),this.giveAllPoints=!1,a&&a.length>0&&(i=!1,f&&f.remove(),$("body").prepend('<div aria-labelledby="'+g+'" class="description-pop-up"><label id="'+g+'" class="popup-disc hidden-label"></label><div class="popup-header"><div class="dlink-title" aria-hidden="true" role="presentation">'+global_player.utilLongDescTitle+'</div></div><div class="dialog-content" tabindex="0"></div><div class="dialog-close-btn" title="'+global_player.utilCloseDescText+'" role="button" tabindex="0"></div></div>'),b=$(".dialog-content"),b.html(""),b.append(a),setTimeout(function(){b.focus()},.5),a=""),h.show(),$(".description-pop-up .dialog-close-btn").unbind().click(function(){$(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus()}).keypress(function(a){13===a.keyCode&&($(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus())}).keydown(function(a){9===a.keyCode&&($(".description-pop-up").remove(),$(".dialog-modal").hide(),i?d.skipCurrentGadget():$(".long-desc-link").focus())}).sliderbutton({buttonClassName:"dialog-close-btn",slider:!1}),$(".description-pop-up .dialog-close-btn").hover(function(){$(this).toggleClass("dialog-close-btn-over")}).mousedown(function(){$(this).addClass("dialog-close-btn-down")}).mouseup(function(){$(this).removeClass("dialog-close-btn-down"),i?d.skipCurrentGadget():$(".long-desc-link").focus()}),$(".dialog-content").focus(),PearsonGL.utils.initMathJax()},PearsonGL.GadgetBase2.prototype.sendAnalytics=function(a,b){PearsonGL.globals&&PearsonGL.globals.comm&&this.analyticsData&&(this.analyticsData.label=this.gadgetUniqueId+" "+a,this.analyticsData.value=b,PearsonGL.globals.comm.sendAnalytics(this.analyticsData))},PearsonGL.GadgetBase2.prototype.gadgetPageShowEvent=function(){},PearsonGL.GadgetBase2.prototype.getjObject=function(){return this.jObject},PearsonGL.GadgetBase2.prototype.createRichTextObj=function(a,b,c){var d=this;void 0==b&&(b=!1);var e={value:a,noTabIndex:b,highlightingEnabled:d.options.runtimejson.highlightingEnabled,domains:d.options.runtimejson.authoring.Domains,saveText:function(){d.saveHighLightTextInGadget()},highlightArea:c};return e},PearsonGL.GadgetBase2.prototype.saveHighLightTextInGadget=function(){this.jObject},PearsonGL.GadgetBase2.prototype.goThroughHighLights=function(a){var b=(this.jObject,"%%%%%%");a.find(".highlight-identifier").each(function(){$(this).before(b).after(b),$(this).contents().unwrap()})},PearsonGL.GadgetBase2.prototype.getLearnerData=function(a){if(this.isCommEnabled()){var b={id:this.gadgetUniqueId,objectiveDesc:this.options.objectiveDescription,name:this.options.gadgetName,objectType:this.options.objectType,data:this.options.scorm,weighting:1,results:[{correctResponses:"not played",learnerResponse:[]}]};$.extend(!0,b,a),PearsonGL.globals.comm.getLearnerData(b),this.options.scorm.suspendData&&this.parseLearnerData()}},PearsonGL.GadgetBase2.prototype.setLearnerData=function(a){var b={id:this.gadgetUniqueId,data:this.options.scorm,weighting:1};$.extend(!0,b,a),this.isCommEnabled()&&PearsonGL.globals.comm.setLearnerData(b)},PearsonGL.GadgetBase2.prototype.parseLearnerData=function(){},PearsonGL.GadgetBase2.prototype.pause=function(){},PearsonGL.GadgetBase2.prototype.resume=function(){},PearsonGL.GadgetBase2.prototype.start=function(){},PearsonGL.GadgetBase2.prototype.stop=function(){},PearsonGL.GadgetBase2.prototype.destroy=function(){},window.PearsonGL.GadgetBase2.prototype.enable=function(){},window.PearsonGL.GadgetBase2.prototype.authMode=function(){},window.PearsonGL.GadgetBase2.prototype.gadgetUnload=function(){this.setLearnerData()},window.PearsonGL.GadgetBase2.prototype.gadgetPageShowEvent=function(){},window.PearsonGL.GadgetBase2.prototype.setScreenReaderMode=function(){},window.PearsonGL=window.PearsonGL||{},window.PearsonGL.CommunicatorBase=function(){this.passingScore=.6,this.completionThreshold=1},window.PearsonGL.CommunicatorBase.prototype={getLearnerData:function(){},setLearnerData:function(){},getSuspendData:function(){},setSuspendDataById:function(){},isExceededSuspendDataLimit:function(){return!1},getPassingScore:function(){return-1},isConnected:function(){return!1},commit:function(){},setTotalScore:function(){},getBookmark:function(){},setBookmark:function(){},getMode:function(){},finish:function(){},exit:function(){}},window.PearsonGL=window.PearsonGL||{},PearsonGL.CommunicatorScorm=function(){window.PearsonGL.CommunicatorBase.call(this),this.init()},PearsonGL.CommunicatorScorm.prototype=Object.create(window.PearsonGL.CommunicatorBase.prototype),PearsonGL.CommunicatorScorm.prototype.init=function(){if(!window.skipExecution){var a=this;if("function"==typeof scobot_local){localData=scobot_local();try{PearsonGL.globals.hasLocalStorage="localStorage"in window&&null!=window.localStorage}catch(b){}}scorm=new SCORM_API({debug:!1,throw_alerts:!1,exit_type:"suspend",success_status:"unknown",cmi:localData}),SB=new SCOBot({completion_threshold:1,scaled_passing_score:.6}),this.scoBot=SB,$(scorm).on("StoreData",function(b){"use strict";PearsonGL.globals.hasLocalStorage&&PearsonGL.globals.useLocalStorage&&(localStorage.setItem(PearsonGL.utils.getScoId(),JSON.stringify(b.runtimedata)),a.scoBot.debug("Call to Store Data was made.",3),a.scoBot.debug(b.runtimedata))}),$(this.scoBot).on("exception",function(){return!1}),"function"==typeof this.scoBot.init&&this.scoBot.init()}},PearsonGL.CommunicatorScorm.prototype.getBookmark=function(){return this.scoBot.getBookmark()},PearsonGL.CommunicatorScorm.prototype.setBookmark=function(a){this.scoBot.setBookmark(a)},PearsonGL.CommunicatorScorm.prototype.setTotalScore=function(a){this.scoBot.setTotals(a)},PearsonGL.CommunicatorScorm.prototype.getPassingScore=function(){return parseFloat(this.scoBot.get("scaled_passing_score"))},PearsonGL.CommunicatorScorm.prototype.isConnected=function(){return scorm.hasOwnProperty("isLMSConnected")?scorm.isLMSConnected():!1},PearsonGL.CommunicatorScorm.prototype.isExceededSuspendDataLimit=function(a,b){var c={low:2e4,medium:35e3,high:5e4},d=JSON.stringify(a),e=d.replace(/[^\f\r\n\t\v\0\s\S\w\W\d\D\b\\B\\cX\\xhh\\uhhh]/gi,"");return void 0!==b&&c.hasOwnProperty(b.toLowerCase())||(b="low"),e.length>c[b.toLowerCase()]?!0:void 0},PearsonGL.CommunicatorScorm.prototype.getSuspendData=function(){return this.scoBot.getvalue("cmi.suspend_data")},PearsonGL.CommunicatorScorm.prototype.getLearnerData=function(a){this.getScormData(a)},PearsonGL.CommunicatorScorm.prototype.setLearnerData=function(a){this.setScormData(a)},PearsonGL.CommunicatorScorm.prototype.getScormData=function(a){if(this.scoBot){var b=a.id;PearsonGL.logger.log(a.name+" Gadget getScormData("+b+")");var c,d=a.data.interactions,e={},f=[],g="",h=0,i={id:b,title:a.name,data:void 0},j="",k={},l="",m={};if($.isArray(d)&&d.length>0)if(g=this.scoBot.getEntry(),"resume"===g){for($.extend(e,d),h=0;h<d.length;h++){if(j=b+"_"+h,k=this.scoBot.getInteraction(j),"false"===k){this.initInteractionAndObjectives(d,a);break}for(d[h]=k,f=d[h].objectives,c=0;c<f.length;c++)l=j+"_"+c,m=this.scoBot.getObjective(l),m.completionThreshold=e[h].objectives[c].completionThreshold,f[c]=m}i.data=this.scoBot.getSuspendDataByPageID(b),PearsonGL.logger.log("SuspendData loaded from the LMS: "),PearsonGL.logger.out(i.data)}else PearsonGL.logger.log("No previous interactions loaded from SCORM, creating new..."),this.initInteractionAndObjectives(d,a);else PearsonGL.logger.error(void 0!==d?"Incorrect interactions datatype loaded from JSON: "+typeof d:"No interactions loaded from JSON, ignoring...");a.data.suspendData=i}},PearsonGL.CommunicatorScorm.prototype.initInteractionAndObjectives=function(a,b){var c,d,e,f,g,f=[];for(c=0;c<a.length;c++){for(e=a[c],e.id=b.id+"_"+c,PearsonGL.logger.log("Creating new interaction with ID "+e.id),f=e.objectives,g=b.results&&c<b.results.length?b.results[c]:void 0,b&&b.objectiveDesc&&(g?g.objectiveDesc=b.objectiveDesc:g={objectiveDesc:b.objectiveDesc}),d=0;d<f.length;d++)this.initScormObjectiveValues(f[d],g),f[d].id=e.id+"_"+d;this.initScormInteractionValues(e,b,g),e.objectives=f,PearsonGL.logger.log("Interaction object"),PearsonGL.logger.out(e)}},PearsonGL.CommunicatorScorm.prototype.setScormData=function(a){if(this.scoBot){var b,c,d,d,e=a.data.suspendData,f=a.data.interactions,g=[];if($.isArray(f)&&f.length>0){for(b=0;b<f.length;b++){var h=f[b];for(g=f[b].objectives,c=0;c<g.length;c++){var i=g[c];"false"!==i&&(d=a.results&&b<a.results.length?a.results[b]:void 0,this.setScormObjectiveValues(i,d),this.scoBot.setObjective(i))}this.setScormInteractionValues(h,d),this.scoBot.setInteraction(h)}if($(window).trigger("LearnerDataLoaded"),!e)return;e.data&&"page"!==a.objectType&&this.scoBot.setSuspendDataByPageID(e.id,e.title,e.data)}"function"==typeof scobot_local&&this.scoBot.commit()}},PearsonGL.CommunicatorScorm.prototype.initScormInteractionValues=function(a,b,c){a.timestamp=new Date,a.type="other",a.weighting=1,a.learner_response="",a.correct_responses="not played",a.result="neutral",a.latency="",b.hasOwnProperty("type")&&(a.type=b.type),c.hasOwnProperty("learnerResponse")&&(a.learner_response=c.learnerResponse),c.hasOwnProperty("correctResponses")&&(a.correct_responses=c.correctResponses),c.hasOwnProperty("result")&&(a.result=c.result),c.hasOwnProperty("weighting")&&(a.weighting=c.weighting)},PearsonGL.CommunicatorScorm.prototype.initScormObjectiveValues=function(a,b){var c={};try{c.scaled=0,c.raw=0,c.min=$.isNumeric(a.score.min)?a.score.min:0,c.max=a.score.max,a.score=c,a.success_status="unknown",a.completion_status="not attempted",a.progress_measure=0,a.description=b.objectiveDesc?b.objectiveDesc:""}catch(d){}},PearsonGL.CommunicatorScorm.prototype.setScormInteractionValues=function(a,b){a.latency=new Date,a.timestamp=new Date,b&&(b.hasOwnProperty("learnerResponse")&&(a.learner_response=b.learnerResponse),b.hasOwnProperty("correctResponses")&&(a.correct_responses=b.correctResponses),b.hasOwnProperty("result")&&(a.result=b.result),b.hasOwnProperty("type")&&(a.type=b.type))},PearsonGL.CommunicatorScorm.prototype.setScormObjectiveValues=function(a,b){try{a.score.min=isNaN(b.min)?0:parseFloat(b.min),b.hasOwnProperty("max")&&(a.score.max=b.max),b.hasOwnProperty("raw")&&(a.score.raw=b.raw),a.score.scaled=b.hasOwnProperty("scaled")?b.scaled:a.score.max-a.score.min!==0?(a.score.raw-a.score.min)/(a.score.max-a.score.min):1,a.completion_status=b.completionStatus?b.completionStatus:"completed",a.success_status=b.successStatus?b.successStatus:"passed",b.hasOwnProperty("progressMeasure")&&(a.progress_measure=b.progressMeasure)}catch(c){}},PearsonGL.CommunicatorScorm.prototype.setSuspendDataById=function(a,b,c){this.scoBot.setSuspendDataByPageID(a,b,c)},PearsonGL.CommunicatorScorm.prototype.getMode=function(){return this.scoBot.getMode()},PearsonGL.CommunicatorScorm.prototype.finish=function(){this.scoBot.finish()},PearsonGL.CommunicatorScorm.prototype.commit=function(){this.scoBot.commit()},PearsonGL.CommunicatorScorm.prototype.exit=function(){this.scoBot.exit()},window.PearsonGL=window.PearsonGL||{},PearsonGL.CommunicatorPSoC=function(){window.PearsonGL.CommunicatorBase.call(this),this.init()},PearsonGL.CommunicatorPSoC.prototype=Object.create(window.PearsonGL.CommunicatorBase.prototype),PearsonGL.CommunicatorPSoC.prototype.init=function(){var a=this;this.eventBroker=require("chaplin/lib/event_broker"),this.learnerData={interactions:{},objectives:{},suspendData:{pages:{}},bookmark:"",scoreData:{}},this.isEstablished=!1,this.eventBroker.subscribeEvent("#doSave",function(){a.sendLearnerData()}),this.eventBroker.subscribeEvent("#doFinish",function(){a.sendLearnerResult()}),this.eventBroker.publishEvent("#fetch",{type:"state"},function(b){if(a.isEstablished=!0,b)try{a.learnerData=JSON.parse(b)}catch(c){}})},PearsonGL.CommunicatorPSoC.prototype.getBookmark=function(){return this.learnerData.bookmark},PearsonGL.CommunicatorPSoC.prototype.setBookmark=function(a){this.learnerData.bookmark=a},PearsonGL.CommunicatorPSoC.prototype.setTotalScore=function(a){this.learnerData.scoreData=a},PearsonGL.CommunicatorPSoC.prototype.getPassingScore=function(){return this.passingScore},PearsonGL.CommunicatorPSoC.prototype.isConnected=function(){return this.isEstablished},PearsonGL.CommunicatorPSoC.prototype.isExceededSuspendDataLimit=function(){return!1},PearsonGL.CommunicatorPSoC.prototype.getSuspendData=function(){return JSON.stringify(this.learnerData.suspendData)},PearsonGL.CommunicatorPSoC.prototype.getLearnerData=function(a){return this.getData(a)},PearsonGL.CommunicatorPSoC.prototype.setLearnerData=function(a){this.setData(a)},PearsonGL.CommunicatorPSoC.prototype.getData=function(a){if(this.learnerData){var b,c=a.id,d=a.data.interactions,e={},f=[],g=0,h={id:c,title:a.name,data:void 0},i="",j={},k="",l={};if($.isArray(d)&&d.length>0){for($.extend(e,d),g=0;g<d.length;g++){if(i=c+"_"+g,j=this.learnerData.interactions[i],!j){this.initInteractionAndObjectives(d,a);break}for(d[g]=j,f=d[g].objectives,b=0;b<f.length;b++)k=i+"_"+b,l=this.learnerData.objectives[k],l.completionThreshold=e[g].objectives[b].completionThreshold,f[b]=l}this.learnerData.suspendData.pages[c]&&(h.data=this.learnerData.suspendData.pages[c].data)}a.data.suspendData=h}},PearsonGL.CommunicatorPSoC.prototype.initInteractionAndObjectives=function(a,b){var c,d,e,f,g,f=[];for(c=0;c<a.length;c++){for(e=a[c],e.id=b.id+"_"+c,f=e.objectives,g=b.results&&c<b.results.length?b.results[c]:void 0,b&&b.objectiveDesc&&(g?g.objectiveDesc=b.objectiveDesc:g={objectiveDesc:b.objectiveDesc}),d=0;d<f.length;d++)this.initObjectiveValues(f[d],g),f[d].id=e.id+"_"+d;this.initInteractionValues(e,b,g),e.objectives=f}},PearsonGL.CommunicatorPSoC.prototype.setData=function(a){if(this.learnerData){var b,c,d,d,e=a.data.suspendData,f=a.data.interactions,g=[];if($.isArray(f)&&f.length>0){for(b=0;b<f.length;b++){var h=f[b];for(g=f[b].objectives,c=0;c<g.length;c++){var i=g[c];"false"!==i&&(d=a.results&&b<a.results.length?a.results[b]:void 0,this.setObjectiveValues(i,d),this.learnerData.objectives[i.id]=i)}this.setInteractionValues(h,d),this.learnerData.interactions[h.id]=h}if($(window).trigger("LearnerDataLoaded"),!e)return;e.data&&"page"!==a.objectType&&this.setSuspendDataById(e.id,e.title,e.data)}}},PearsonGL.CommunicatorPSoC.prototype.initInteractionValues=function(a,b,c){a.timestamp=new Date,a.type="other",a.weighting=1,a.learner_response="",a.correct_responses="not played",a.result="neutral",a.latency="",b.hasOwnProperty("type")&&(a.type=b.type),c.hasOwnProperty("learnerResponse")&&(a.learner_response=c.learnerResponse),c.hasOwnProperty("correctResponses")&&(a.correct_responses=c.correctResponses),c.hasOwnProperty("result")&&(a.result=c.result),c.hasOwnProperty("weighting")&&(a.weighting=c.weighting)},PearsonGL.CommunicatorPSoC.prototype.initObjectiveValues=function(a,b){var c={};try{c.scaled=0,c.raw=0,c.min=$.isNumeric(a.score.min)?a.score.min:0,c.max=a.score.max,a.score=c,a.success_status="unknown",a.completion_status="not attempted",a.progress_measure=0,a.description=b.objectiveDesc?b.objectiveDesc:""}catch(d){}},PearsonGL.CommunicatorPSoC.prototype.setInteractionValues=function(a,b){a.latency=new Date,a.timestamp=new Date,b&&(b.hasOwnProperty("learnerResponse")&&(a.learner_response=b.learnerResponse),b.hasOwnProperty("correctResponses")&&(a.correct_responses=b.correctResponses),b.hasOwnProperty("result")&&(a.result=b.result),b.hasOwnProperty("type")&&(a.type=b.type))},PearsonGL.CommunicatorPSoC.prototype.setObjectiveValues=function(a,b){try{a.score.min=isNaN(b.min)?0:parseFloat(b.min),b.hasOwnProperty("max")&&(a.score.max=b.max),b.hasOwnProperty("raw")&&(a.score.raw=b.raw.toFixed(3)),a.score.scaled=b.hasOwnProperty("scaled")?b.scaled.toFixed(3):a.score.max-a.score.min!==0?((a.score.raw-a.score.min)/(a.score.max-a.score.min)).toFixed(3):1,a.completion_status=b.completionStatus?b.completionStatus:"completed",a.success_status=b.successStatus?b.successStatus:"passed",b.hasOwnProperty("progressMeasure")&&(a.progress_measure=b.progressMeasure)}catch(c){}},PearsonGL.CommunicatorPSoC.prototype.setSuspendDataById=function(a,b,c){this.learnerData.suspendData.pages[a]={id:a,title:b,data:c}},PearsonGL.CommunicatorPSoC.prototype.getMode=function(){return"normal"},PearsonGL.CommunicatorPSoC.prototype.finish=function(){this.sendLearnerData(),this.sendLearnerResult()},PearsonGL.CommunicatorPSoC.prototype.commit=function(){this.sendLearnerData()},PearsonGL.CommunicatorPSoC.prototype.exit=function(){this.sendLearnerData(),this.sendLearnerResult()},PearsonGL.CommunicatorPSoC.prototype.sendLearnerData=function(){if(this.isEstablished&&this.eventBroker){var a={type:"state",data:JSON.stringify(this.learnerData)};this.eventBroker.publishEvent("#save",a)}},PearsonGL.CommunicatorPSoC.prototype.sendLearnerResult=function(){if(this.isEstablished){var a={},b=this.learnerData.scoreData.totalInteractions,c=this.learnerData.scoreData.totalObjectives,d=(Object.keys(this.learnerData.objectives).length,this.learnerData.scoreData.scoreMin),e=this.learnerData.scoreData.scoreMax;if(0===b||0===c)return c;var f,g=0,h=0,i=0;$.each(this.learnerData.objectives,function(a,b){h=parseFloat(b.score.raw),isNaN(h)||(g+=parseFloat(h)),"completed"===b.completion_status&&(i+=1)}),e-d!==0&&(a.score=((g-d)/(e-d)).toFixed(3)),f=(i/c).toString(),a.completion=parseFloat(f)>=parseFloat(this.completionThreshold)?!0:!1,a.success=parseFloat(a.score)>=parseFloat(this.passingScore)?!0:!1,this.eventBroker.publishEvent("#Finish",a)}},window.PearsonGL=window.PearsonGL||{},window.PearsonGL.CommunicationLayer=function(a){this.settings=a,this.postMessageSubscribers=[],this.initialize()},window.PearsonGL.CommunicationLayer.prototype={initialize:function(){this.analytics,this.communicator="psoc"==PearsonGL.globals.commType?new window.PearsonGL.CommunicatorPSoC:new window.PearsonGL.CommunicatorScorm,this.initGoogleAnalytics(),this.initPostMessageListener()},initGoogleAnalytics:function(){this.settings.useGoogleAnalytics&&(this.analytics=new PearsonGL.GoogleAnalytics(this.settings))},initPostMessageListener:function(){var a=this,b=function(b){a.postMessageSubscribers.forEach(function(a){a(b.data)})};window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b)},sendAnalytics:function(a){this.analytics&&this.analytics.sendAnalytics(a)},isConnected:function(){return this.communicator.isConnected()},exit:function(){"function"==typeof this.communicator.exit&&this.communicator.exit()},setTotalScore:function(a){this.communicator.setTotalScore(a)},getBookmark:function(){return this.communicator.getBookmark()},setBookmark:function(a){this.communicator.setBookmark(a)},getSuspendData:function(){return this.communicator.getSuspendData()},getLearnerData:function(a){this.communicator.getLearnerData(a)},setLearnerData:function(a){this.communicator.setLearnerData(a)},getPassingScore:function(){return this.communicator.getPassingScore()},setSuspendDataById:function(a,b,c){this.communicator.setSuspendDataById(a,b,c)},isExceededSuspendDataLimit:function(a,b){return this.communicator.isExceededSuspendDataLimit(a,b)},getMode:function(){return this.communicator.getMode()},finish:function(){this.communicator.finish()},commit:function(){this.communicator.commit()},subscribeToPostMessages:function(a){"function"==typeof a&&this.postMessageSubscribers.push(a)},firePostMessageEvent:function(a){try{window.parent.postMessage($.browser.msie?JSON.stringify(a):a,"*")}catch(b){}}},GoogleAnalyticsComponent=new Class({Implements:[Options,Utility],options:{useGoogleAnalytics:!1},jQuery:"gadgetAnalytics",initialize:function(a,b){void 0!==b&&(this.setOptions(b),this.scoId=this.getScoId(),this.analyticsData={gadgetType:this.options.gadgetName,gadgetEventType:"event",gadgetAction:""},this.findFile("analytics.js")||this.options.runtimejson&&this.options.runtimejson.useGoogleAnalytics&&(!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",this.options.runtimejson.googleAnalytics,{cookieDomain:"none"})))},findFile:function(a){var b,c=document.getElementsByTagName("script");for(b=0;b<c.length;b++)if(c[b].src.substr(-a.length)===a)return!0;return!1},initializeAnalytics:function(){this.gadgetAnalytics=new GoogleAnalyticsComponent(void 0,this.options)},sendAnalytics:function(a){this.gadgetAnalytics&&this.gadgetAnalytics.analyticsData&&(this.gadgetAnalytics.analyticsData.gadgetAction=a),this.gadgetAnalytics&&this.gadgetAnalytics.updateAnalytics(this.gadgetAnalytics.analyticsData),this.gadgetAnalytics&&this.parentGadgetOptions&&this.parentGadgetOptions.runtimejson.useGoogleAnalytics&&(analyticsData=this.gadgetAnalytics.analyticsData,this.parentGadgetOptions.gadgetName&&(analyticsData.gadgetType=this.parentGadgetOptions.gadgetName),this.gadgetAnalytics.scoId&&(analyticsData.scoId=this.gadgetAnalytics.scoId),this.gadgetAnalytics._passDataToGoogle(analyticsData))},updateAnalytics:function(a){(this.options.useGoogleAnalytics||this.options.runtimejson&&this.options.runtimejson.useGoogleAnalytics)&&this._passDataToGoogle(a)},_passDataToGoogle:function(a){var b="";this.options.runtimejson&&this.options.runtimejson.product&&(b=this.options.runtimejson.product+" "),ga("send",a.gadgetEventType,a.gadgetType,b+this.scoId+": "+a.gadgetAction),ga("send","pageview",{hitCallback:function(){}})}}),window.PearsonGL=window.PearsonGL||{},window.PearsonGL.Gadget=window.PearsonGL.Gadget||{},PearsonGL.Gadget.ImgAnimate=function(a,b){this.options={image:"",fps:50,isReady:function(){},loops:-1,responsive:!1},this.jObject=$(a),this.initialize(a,b)},PearsonGL.Gadget.ImgAnimate.prototype.initialize=function(a,b){if(void 0!==a){$.extend(!0,this.options,b),this.jObject.addClass("imgAnimate-identifier");var c=this;this.xpos=0,this.ypos=0,this.index=0,this.loopCount=0,void 0===this.options.frameWidth||void 0===this.options.frameHeight?(this.options.frameWidth=parseFloat(this.jObject.width()),this.options.frameHeight=parseFloat(this.jObject.height())):this.jObject.css({width:this.options.frameWidth,height:this.options.frameHeight}),this.image=document.createElement("img"),this.image.onload=function(){c.imageWidth=parseFloat(this.width),c.imageHeight=parseFloat(this.height),c.numFrames_X=c.imageWidth/c.options.frameWidth,c.numFrames_Y=c.imageHeight/c.options.frameHeight,c.numFrames=c.imageWidth*c.imageHeight/(c.options.frameWidth*c.options.frameHeight),c.animationReady()},this.image.src=this.options.image,this.jObject.css("background","url("+this.image.src+") no-repeat")}},PearsonGL.Gadget.ImgAnimate.prototype._gameLoop=function(){var a=this,b=this.jObject,c=this.xpos/(this.imageWidth-this.options.frameWidth)*100,d=0;this.imageHeight-this.options.frameHeight>0&&(d=this.ypos/(this.imageHeight-this.options.frameHeight)*100),this.state===!0&&(this.options.responsive?b.css("background-position",c+"% "+d+"%"):b.css("background-position",-this.xpos+"px "+-this.ypos+"px")),this.xpos+=this.options.frameWidth,this.index+=1,this.index>=this.numFrames?(this.xpos=0,this.ypos=0,this.index=0,this.loopCount++):this.xpos+this.options.frameWidth>this.imageWidth&&(this.xpos=0,this.ypos+=this.options.frameHeight),this.state&&(this.gLoop=setTimeout(function(){a._gameLoop()},1e3/this.options.fps)),this.loopCount>=this.options.loops&&-1!==this.options.loops&&(this.stopLoop(),this.loopCount=0)},PearsonGL.Gadget.ImgAnimate.prototype.startLoop=function(){this.state=!0,this._gameLoop()},PearsonGL.Gadget.ImgAnimate.prototype.stopLoop=function(){this.xpos=0,this.ypos=0,this.index=0,this.state=!1},PearsonGL.Gadget.ImgAnimate.prototype.animationReady=function(){this.options.isReady(this,this.jObject)},PearsonGL.Gadget.ImgAnimate.prototype.updateAnimation=function(a,b){var c="cover";this.options.frameWidth=Math.round(a),this.options.frameHeight=Math.round(b),this.xpos=0,this.ypos=0,this.imageWidth=Math.round(this.options.frameWidth*this.numFrames_X),this.imageHeight=Math.round(this.options.frameHeight*this.numFrames_Y),this.numFrames_Y>1&&(c=100*this.numFrames_Y+"%"),this.options.responsive?(this.jObject.css({"background-size":c,width:"100%",height:"100%"}),this.options.responsiveWidth&&this.jObject.css({width:this.options.responsiveWidth+"%"}),this.options.responsiveHeight&&this.jObject.css({height:this.options.responsiveHeight+"%"})):this.jObject.css("background-size",this.imageWidth+"px ")},PearsonGL.Gadget.ImgAnimate.prototype.destroyMe=function(){this.startLoop(),this.jObject.removeClass("imgAnimate-identifier"),this.jObject.css("background-position",""),this.jObject.css("background","")},$.fn.imgAnimate=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new PearsonGL.Gadget.ImgAnimate(this,arguments[0]);$(this).data("imgAnimate-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("imgAnimate-component");if(a&&"function"==typeof a[arguments[0]]){if("function"!=typeof arguments[1])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1));a[arguments[0]]=arguments[1],$(this).data("imgAnimate-component",a)}}},PearsonGL.Gadget=PearsonGL.Gadget||{},PearsonGL.Gadget.HighLighterComponent=function(a,b,c){this.options={saveHighLight:function(){},popup:"HighLighter Popup",color_1:"Green Color Highlight",color_2:"Orange Color Highlight",color_3:"Yellow Color Highlight",color_4:"Blue Color Highlight",color_5:"Pink Color Highlight",color_6:"Remove Color Highlight",underline:"Underline Selected Text"},b&&(PearsonGL.GadgetBase.call(this,b,c),this.jObject=$(a),this.initialize())},PearsonGL.Gadget.HighLighterComponent.prototype=Object.create(window.PearsonGL.GadgetBase.prototype),PearsonGL.Gadget.HighLighterComponent.prototype.initialize=function(){this.jObject.addClass("hl-comp-identifier"),this.style="",this.isTouchDevice="ontouchstart"in document.documentElement,PearsonGL.utils.checkforIE6to8()||this._addEvents()},PearsonGL.Gadget.HighLighterComponent.prototype._addEvents=function(){var a=this,b=PearsonGL.utils.randomString(8)+PearsonGL.utils.randomString(8),c=this.options.highlightArea||this.jObject;$(".hl-comp-identifier").length<=0&&$(document).bind("mouseup.body touchend.body",function(){$(".highlighter-component").remove()}),a.markerPopup=$('<div tabindex="0" ="'+b+'" role="dialog" class="highlighter-component"><label id="'+b+'" class="hidden-label">'+a.options.popup+'</label><style type="text/css">.pop-up{-webkit-transform:none!important}</style><div class="contextMenu" data-color="underlinehighlight" title="'+a.options.underline+'"><label class="hidden-label">'+a.options.underline+'</label><div id="underlinebutton" class="colors"></div></div><div class="contextMenu" data-color="greenhighlight" title="'+a.options.color_1+'"><label class="hidden-label">'+a.options.color_1+'</label><div id="greenbutton" class="colors"></div></div><div class="contextMenu" data-color="orangehighlight" title="'+a.options.color_2+'"><label class="hidden-label">'+a.options.color_2+'</label><div id="orangebutton" class="colors"></div></div><div class="contextMenu" data-color="yellowhighlight" title="'+a.options.color_3+'"><label class="hidden-label">'+a.options.color_3+'</label><div id="yellowbutton" class="colors"></div></div><div class="contextMenu" data-color="bluehighlight" title="'+a.options.color_4+'"><label class="hidden-label">'+a.options.color_4+'</label><div id="bluebutton" class="colors"></div></div><div class="contextMenu" data-color="pinkhighlight" title="'+a.options.color_5+'"><label class="hidden-label">'+a.options.color_5+'</label><div id="pinkbutton" class="colors"></div></div><div class="contextMenu" data-color="removehighlight" title="'+a.options.color_6+'"><label class="hidden-label">'+a.options.color_6+'</label><div id="removebutton"></div></div></div>'),a.markerPopup.find(".contextMenu").attr({role:"button",tabindex:"0"}),a.markerPopup.find(".contextMenu").bind("mousedown touchstart",function(b){b.stopImmediatePropagation();
var c=a._getRng(),d=a._getSel(),e=$(this).attr("data-color");a.style=e,-1!==e&&a._styleRange(e),"underlinehighlight"===e&&d.addRange(c),a._clearSelection(),a.hidePopUp()}).keydown(function(b){b.keyCode===a.options.keyCode.enter&&$(this).trigger("mousedown")}),c.data("highlighterEvent")!==!0&&(c.data("highlighterEvent",!0),c.on("mouseup touchend",function(b){if(!("textarea"===b.target.tagName.toLowerCase()||b.target.className.indexOf("fib-input")>=0)&&(a.hidePopUp(),a._checkSelection())){a._restoreSel();var c=a._getRng(),d=c.startContainer.parentNode,e=c.endContainer.parentNode;if(!($(d).parents().hasClass("MathJax")&&$(e).parents().hasClass("MathJax")||$(d).hasClass("MathJax")&&$(e).hasClass("MathJax"))){var f=b.clientX,g=b.clientY,h=256;if("touchend"==b.type){var i=event.changedTouches[0];f=parseFloat(i.clientX),g=parseFloat(i.clientY)+20}f+h>a.wDifference&&(f=a.wDifference-h-10,g+=10),a.markerPopup.css({left:f,top:g}),a.jObject.append(a.markerPopup.clone(!0,!0))}}})),a.hidePopUp(),$(window).bind("resize.highlight",function(){a.jObject.is(":visible")&&(a.wDifference=$("body").width()-a.markerPopup.width())}),a.wDifference=$("body").width()-a.markerPopup.width()},PearsonGL.Gadget.HighLighterComponent.prototype.callSaveHighLight=function(){this.options.saveHighLight()},PearsonGL.Gadget.HighLighterComponent.prototype.hidePopUp=function(){$(".highlighter-component").remove()},PearsonGL.Gadget.HighLighterComponent.prototype._checkSelection=function(){return new String(this._getSel()).length?!0:!1},PearsonGL.Gadget.HighLighterComponent.prototype._getSel=function(){return this.savedSel=window.getSelection?window.getSelection():document.selection,this.savedSel},PearsonGL.Gadget.HighLighterComponent.prototype._getRng=function(){var a=this.savedSel;if(a&&0!==a.rangeCount)return a.rangeCount>0?a.getRangeAt(0):a.createRange()},PearsonGL.Gadget.HighLighterComponent.prototype._saveRng=function(){this.savedRange=this._getRng()},PearsonGL.Gadget.HighLighterComponent.prototype._clearSelection=function(){this.isTouchDevice||(window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty())},PearsonGL.Gadget.HighLighterComponent.prototype._restoreSel=function(){if(!this.isTouchDevice){var a=this._getRng();try{if(a)if(a.select)a.select();else{var b=this._getSel();b.removeAllRanges&&b.addRange&&(b.removeAllRanges(),b.addRange(a))}}catch(c){}}},PearsonGL.Gadget.HighLighterComponent.prototype._styleRange=function(a){var b,c,d,e=this,f=(e._getSel(),e._getRng()),g=$(".hl-comp-identifier");try{if(b=f.startContainer,3==b.nodeType){if(f.startOffset<b.length)b=b.splitText(f.startOffset);else if(f.startOffset===b.length){var h=document.createTextNode("");b.parentNode.insertBefore(h,b.nextSibling),b=b.nextSibling}}else 1==b.nodeType&&b.childNodes&&!/(script|style)/i.test(b.tagName)&&(b=b.childNodes[0]);if(c=f.endContainer,3==c.nodeType)f.endOffset<c.length&&(c=c.splitText(f.endOffset).previousSibling);else if(1==c.nodeType&&c.childNodes&&!/(script|style)/i.test(c.tagName))for(d=c.childNodes.length-1;d>=0;d--)if(3==c.childNodes[d].nodeType){c=c.childNodes[d];break}this.style=a;var i,j,k,l=0;for(f.setStart(b,0),f.setEnd(c,c.length),i=this.getNodesInRange(f),d=0;d<i.length;d++)if(($(i[d].parentNode).hasClass("hl-comp-identifier")||g.find($(i[d].parentNode)).length>0)&&!$(i[d].parentNode).hasClass("MathJax")&&!$(i[d].parentNode).parents().hasClass("MathJax")&&!$(i[d].parentNode).parents().hasClass("NO-HIGHLIGHT")&&!$(i[d].parentNode).hasClass("NO-HIGHLIGHT"))for(j=$(i[d].parentNode);j;){if(j.hasClass(a+" underline-identifier")){l++;break}j=j.parentNode}for(d=0;d<i.length;d++)if(($(i[d].parentNode).hasClass("hl-comp-identifier")||g.find($(i[d].parentNode)).length>0)&&!$(i[d].parentNode).hasClass("MathJax")&&!$(i[d].parentNode).parents().hasClass("MathJax")&&!$(i[d].parentNode).parents().hasClass("NO-HIGHLIGHT")&&!$(i[d].parentNode).hasClass("NO-HIGHLIGHT"))if(k=document.createElement("span"),"underlinehighlight"===a)if(l===i.length)for(j=$(i[d].parentNode);j;){if(j.hasClass(a+" underline-identifier")){var m=j.contents();j.replaceWith(m)}j=j.parentNode}else{if($(i[d].parentNode).hasClass(a+" underline-identifier")){j=$(i[d].parentNode);var m=j.contents();j.replaceWith(m)}var n=$(i[d].parentNode).parent(),o=!1;n.hasClass(a+" underline-identifier")&&(n.contents().unwrap(),o=!0),o===!1&&(k.setAttribute("class",a+" underline-identifier"),k.setAttribute("data-cid",a),k.appendChild(document.createTextNode(i[d].nodeValue)),i[d].parentNode.replaceChild(k,i[d]))}else k.setAttribute("class",a+" highlight-identifier"),$(i[d].parentNode).hasClass(a+" underline-identifier")&&$(i[d].parentNode).addClass(a+" underline-identifier"),k.setAttribute("data-cid",a),k.appendChild(document.createTextNode(i[d].nodeValue)),i[d].parentNode.replaceChild(k,i[d])}catch(p){PearsonGL.logger.out("Failed to edit the text range and apply the highlight "+p)}g.find(".highlight-identifier").each(function(){if($(this).find("*").hasClass("highlight-identifier")){var b=$(this).clone(),c="",e=[],f=b.clone(),g=$(this).find(".highlight-identifier").clone(),h="",i=b.clone(),j="%%%%%%",k=$("<div></div>");if(f.html(""),i.html(""),b.find(".highlight-identifier").before(j).after(j),c=b.html(),e=c.split(new RegExp(j,"g")),f.append(e[0]),i.append(e[e.length-1]),"removehighlight"!==a){for(d=1;d<e.length-1;d++)h+=e[d];f.find("*").is(":empty")&&(h='<span class="underlinehighlight underline-identifier" data-cid="underlinehighlight">'+h)}f.attr("class","").attr("class",f.attr("data-cid")+" highlight-identifier"),i.attr("class","").attr("class",i.attr("data-cid")+" highlight-identifier"),"removehighlight"!==a?k.append(f).append(h).append(i):k.append(f).append(g).append(i),$(this).find("*").hasClass("underline-identifier")&&"removehighlight"===a&&$(this).contents().unwrap(),$(this).html("").append(k.contents()).contents().unwrap()}}),g.find(".removehighlight").contents().unwrap(),e._removeEmptySpans(),e._clearSelection(),e.hidePopUp(),g.each(function(){$(this)[0].normalize(),$(this).highLighter("callSaveHighLight")})},PearsonGL.Gadget.HighLighterComponent.prototype._removeEmptySpans=function(){var a=$(".hl-comp-identifier");a.find("*").find(".highlight-identifier").each(function(){$(this).is(":empty")&&$(this).remove()}),a.find("*").find(".underline-identifier").each(function(){$(this).is(":empty")&&$(this).remove()})},PearsonGL.Gadget.HighLighterComponent.prototype.addClickToHighlight=function(){},PearsonGL.Gadget.HighLighterComponent.prototype.getNodesInRange=function(a){var b,c=a.startContainer,d=a.endContainer,e=a.commonAncestorContainer,f=[];for(b=c.parentNode;b&&(3===b.nodeType&&f.push(b),b!==e);b=b.parentNode);for(f.reverse(),b=c;b&&(3===b.nodeType&&f.push(b),b!==d);b=this.getNextNode(b));return f},PearsonGL.Gadget.HighLighterComponent.prototype.getNextNode=function(a){if(a.firstChild)return a.firstChild;for(;a;){if(a.nextSibling)return a.nextSibling;a=a.parentNode}},$.fn.highLighter=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new PearsonGL.Gadget.HighLighterComponent(this,arguments[0]);$(this).data("highlighter-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("highlighter-component");if(a&&"function"==typeof a[arguments[0]])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1))}},Scorm=new Class({options:{scormOn:!0},data:function(){new Debug("scorm data from gadget.","log")},setInitScormData:function(){this.options.scormOn&&this.setScormData()},setObjectiveDescription:function(a,b,c){var d=a;d=d.replace(/\{XX}/g,b),d=d.replace(/\{YY}/g,c),void 0!==this.options.scorm.interactions&&$(this.options.scorm.interactions).each(function(){$(this.objectives).each(function(){this.description=d})})},setGadgetId:function(a){"object"!=typeof SB&&(this.options.scormOn=!1),this.options.scormOn&&(this.options.scorm.id=a,this.getScormData(),this.parseGadgetData())},getScormData:function(){if(this.options.scormOn){var a=this.options.scorm.id;this.debug.log(this.options.gadgetName+" Gadget getScormData("+a+")");var b=this.options.scorm.interactions,c={},d=[],e="",f=0,g=[],h=0,i={id:a,title:this.options.gadgetName,data:void 0},j="",k={},l="",m={};if($.isArray(b)&&b.length>0)if(e=SB.getEntry(),"resume"===e){for($.extend(c,b),f=0;f<b.length;f+=1)if(j=a+"_"+f,k=SB.getInteraction(j),"false"!==k)for(""!==k.learner_response&&this.setLearner_response(k.learner_response),b[f]=k,d=b[f].objectives,h=0;h<d.length;h+=1)l=j+"_"+h,m=SB.getObjective(l),m.completionThreshold=c[f].objectives[h].completionThreshold,d[h]=m;else this.setUpInteractionAndObjectives(b,f,h,j,g,k,l,m,a);i.data=SB.getSuspendDataByPageID(a),this.debug.log("SuspendData loaded from the LMS: "),this.debug.out(i.data)}else this.debug.log("No previous interactions loaded from SCORM, creating new..."),this.setUpInteractionAndObjectives(b,f,h,j,g,k,l,m,a);else this.debug.error(void 0!==b?"Incorrect interactions datatype loaded from JSON: "+typeof b:"No interactions loaded from JSON, ignoring...");this.options.scorm.suspendData=i}},setUpInteractionAndObjectives:function(a,b,c,d,e,f,g,h,i){for(b=0;b<a.length;b+=1){for(d=i+"_"+b,this.debug.log("Creating new interaction with ID "+d),f=a[b],f.id=d,e=f.objectives,c=0;c<e.length;c+=1)g=d+"_"+c,this.debug.log("Creating new objective with ID "+g),h=e[c],this.getScormObjectiveValues(h),h.id=g,this.debug.log("Objective object"),this.debug.out(h);this.getScormInteractionValues(f),f.objectives=e,this.debug.log("Interaction object"),this.debug.out(f)}},setScormData:function(){if(this.options.scormOn){this.debug.log(this.options.gadgetName+"Gadget setScormData()");var a,b,c=this.options.scorm.suspendData,d=this.options.scorm.interactions,e=[];if(this.setGadgetData(),$.isArray(d)&&d.length>0){for(a=0;a<d.length;a+=1){var f=d[a];for(e=d[a].objectives,b=0;b<e.length;b+=1){var g=e[b];"false"!==g&&(this.setScormObjectiveValues(g),this.debug.log("Setting objective: >>"),SB.setObjective(g),this.debug.out(g))}this.setScormInteractionValues(f),this.debug.log("Setting interaction: >>"),this.debug.out(f),SB.setInteraction(f)}if(!c)return;c.data&&"page"!==this.options.objectType&&(this.debug.log("Saving SuspendData to the LMS: "),this.debug.out(c),SB.setSuspendDataByPageID(c.id,c.title,c.data)),$(window).trigger("LearnerDataLoaded")}else this.debug.error("No interactions exist, ignoring...");"function"==typeof scobot_local&&SB.commit()}},getScormInteractionValues:function(a){return a.timestamp=new Date,a.type="other",a.weighting=1,a.learner_response="",a.correct_responses="not played",a.result="neutral",a.latency="",a},getScormObjectiveValues:function(a){var b={};try{b.scaled=0,b.raw=0,b.min=a.score.min,b.max=a.score.max,a.score=b,a.success_status="unknown",a.completion_status="not attempted",a.progress_measure=0}catch(c){}return a},setScormInteractionValues:function(a){return a.latency=new Date,a.timestamp=new Date,a.type="other",a.weighting=1,a.learner_response="played",a.correct_responses="played",a.result="neutral",a},setScormObjectiveValues:function(a){var b={};try{b.min=isNaN(a.score.min)?0:parseFloat(a.score.min),b.max=isNaN(a.score.max)?0:parseFloat(a.score.max),b.raw=b.max,b.scaled=b.max-b.min!==0?(b.raw-b.min)/(b.max-b.min):1,a.score=b,a.completion_status="completed",a.success_status="passed",a.progress_measure=1}catch(c){}return a},setLearner_response:function(a){this.debug.log(a)},parseGadgetData:function(){this.debug.log("scorm.parseGadgetData() - no suspendData to parse for this gadget."),this.resetHighLights()},setGadgetData:function(){this.debug.log("scorm.setGadgetData() - no suspendData to set for this gadget.")},resetHighLights:function(){},returnHighlights:function(a){{var b=this;this.jObject}this.options.scormOn===!0&&this.options.scorm.suspendData.data&&a.each(function(a){var c=$(this).find(".text-audio-component");$(b.options.scorm.suspendData.data.highlights).each(function(){this.index==a&&c.html("").append(this.htmlContent)})})},isExceededSuspendDataLimit:function(a,b){var c={low:2e4,medium:35e3,high:5e4},d=JSON.stringify(a),e=d.replace(/[^\f\r\n\t\v\0\s\S\w\W\d\D\b\\B\\cX\\xhh\\uhhh]/gi,"");return void 0!==b&&c.hasOwnProperty(b.toLowerCase())||(b="low"),e.length>c[b.toLowerCase()]?!0:!1}}),window.Gadget={};var page_theme="",isDebug=!1,Gadget=new Class({labelOpts:{playalt:"Play",pausealt:"Pause"},options:{runtimejson:{lang:"en",authoring:{}},domain:[],scorm:{id:"",interactions:[]},objectType:"gadget",keyCodes:{enter:13,space:32,tab:9,left:37,up:38,right:39,down:40}},initialize:function(){0===$(".popupsound").length&&$("body").prepend("<div class='popupsound'></div>")},createRichTextObj:function(a,b,c){var d=this;void 0==b&&(b=!1);var e={value:a,noTabIndex:b,highlightingEnabled:d.options.runtimejson.highlightingEnabled,domains:d.options.runtimejson.authoring.Domains,saveText:function(){d.saveHighLightTextInGadget()},highlightArea:c};return e},saveHighLightTextInGadget:function(){this.jObject},goThroughHighLights:function(a){var b=(this.jObject,"%%%%%%");a.find(".highlight-identifier").each(function(){$(this).before(b).after(b),$(this).contents().unwrap()})},pause:function(){},resume:function(){},start:function(){},stop:function(){},destroy:function(){},enable:function(){},authMode:function(){},gadgetUnload:function(){},gadgetPageShowEvent:function(){},setScreenReaderMode:function(){},getjObject:function(){return this.jObject}});window.PearsonGL=window.PearsonGL||{},window.PearsonGL.Gadget=window.PearsonGL.Gadget||{},PearsonGL.Gadget.Gesture=function(a,b){this.options={inline:"false",draggable:"true",foldable:"true",resizable:"true",swipeDelta:30,onDrag:function(){},onDragEnd:function(){},onSwipe:function(){},onTap:function(){},onPinch:function(){},onFinalPinch:function(){},onScreen:function(){},offScreen:function(){}},this.jObject=$(a),this.initialize(a,b)},PearsonGL.Gadget.Gesture.prototype.initialize=function(a,b){void 0!==a&&($.extend(!0,this.options,b),this.targetObj=$(a),this.targetObjX=$(a).offset().left,this.targetObjY=$(a).offset().top,this.swipe={},this.previousMode="null",this.isTouchDevice="ontouchstart"in document.documentElement,this.eventTrace={isTouched:!1,isDragged:!1,isSwiped:!1,isPinched:!1},this.attach(),this.isTouchDevice&&this.events())},PearsonGL.Gadget.Gesture.prototype.getJqObj=function(){return this.targetObj},PearsonGL.Gadget.Gesture.prototype.events=function(){var a=this,b=this.targetObj.get(0);return b.addEventListener("touchstart",function(b){a.touchHandler(b)},!0),b.addEventListener("touchmove",function(b){a.touchHandler(b)},!0),b.addEventListener("touchend",function(b){a.touchHandler(b)},!0),b.addEventListener("touchcancel",function(b){a.touchHandler(b)},!0),b.addEventListener("gesturestart",function(b){a.pinchHandler(b)},!0),b.addEventListener("gesturechange",function(b){a.pinchHandler(b)},!0),b.addEventListener("gestureend",function(b){a.pinchHandler(b)},!0),b.addEventListener("mousedown",function(b){a.mouseHandler(b)},!0),b.addEventListener("mousemove",function(b){a.mouseHandler(b)},!0),b.addEventListener("mouseup",function(b){a.mouseHandler(b)},!0),this},PearsonGL.Gadget.Gesture.prototype.initWipeEvent=function(a){this.eventTrace.isTouched=!0,this.eventTrace.isDragged=!1,this.eventTrace.isSwipped=!1,this.eventTrace.isPinched=!1,this.swipe.mode="drag",this.swipe.firstTouchX=a.pageX,this.swipe.firstTouchY=a.pageY,this.swipe.lastTouchX=a.pageX,this.swipe.lastTouchY=a.pageY,this.swipe.preTouchX=a.pageX,this.swipe.preTouchY=a.pageY,this.swipe.currTouchX=a.pageX,this.swipe.currTouchY=a.pageY,this.swipe.firstTouchXInTarget=a.pageX-this.targetObjX,this.swipe.firstTouchYInTarget=a.pageY-this.targetObjY,this.swipe.currTouchXInTarget=a.pageX-this.targetObjX,this.swipe.currTouchYInTarget=a.pageY-this.targetObjY,this.swipe.target=a.target,this.swipe.currentTarget=this.swipe.target,this.swipe.direction="",this.jObject.trigger("onScreen",this.swipe)},PearsonGL.Gadget.Gesture.prototype.touchHandler=function(a){if(!(a.targetTouches.length>1)){var b=a.changedTouches[0];if("touchstart"==a.type)return this.initWipeEvent(b),void(this.swipe.input="finger");if("touchmove"==a.type){this.swipe.currTouchX=b.pageX,this.swipe.currTouchY=b.pageY,this.swipe.currTouchXInTarget=b.pageX-this.targetObjX,this.swipe.currTouchYInTarget=b.pageY-this.targetObjY;var c=Math.abs(this.swipe.currTouchX-this.swipe.preTouchX),d=Math.abs(this.swipe.currTouchY-this.swipe.preTouchY);return this.swipe.direction=c>=d?this.swipe.currTouchX-this.swipe.preTouchX>0?"right":"left":this.swipe.currTouchY-this.swipe.preTouchY>0?"down":"up",this.swipe.mode=c>this.options.swipeDelta||d>this.options.swipeDelta?"swipe":"drag","swipe"!=this.swipe.mode||this.eventTrace.isPinched?"drag"!=this.swipe.mode||this.eventTrace.isPinched||(this.jObject.trigger("drag",this.swipe),this.eventTrace.isDragged=!0):this.eventTrace.isSwiped=!0,this.swipe.preTouchX=this.swipe.currTouchX,void(this.swipe.preTouchY=this.swipe.currTouchY)}return"touchend"==a.type?(this.swipe.lastTouchX=b.pageX,this.swipe.lastTouchY=b.pageY,this.swipe.currTouchXInTarget=b.pageX-this.targetObjX,this.swipe.currTouchYInTarget=b.pageY-this.targetObjY,this.eventTrace.isSwiped?this.jObject.trigger("swipe",this.swipe):this.eventTrace.isDragged&&this.jObject.trigger("dragEnd",this.swipe),this.eventTrace.isSwiped=!1,void(this.swipe.lastTouchX-this.swipe.firstTouchX===0&&this.swipe.lastTouchY-this.swipe.firstTouchY===0?(this.swipe.mode="tap",this.swipe.direction="none",this.jObject.trigger("tap",this.swipe)):this.jObject.trigger("offScreen",this.swipe))):void 0}},PearsonGL.Gadget.Gesture.prototype.mouseHandler=function(a){if(a.preventDefault(),"mousedown"==a.type)return this.initWipeEvent(a),void(this.swipe.input="mouse");if("mousemove"==a.type&&this.swipe&&"mouse"==this.swipe.input){this.swipe.currTouchX=a.pageX,this.swipe.currTouchY=a.pageY,this.swipe.currTouchXInTarget=a.pageX-this.targetObjX,this.swipe.currTouchYInTarget=a.pageY-this.targetObjY;var b=Math.abs(this.swipe.currTouchX-this.swipe.preTouchX),c=Math.abs(this.swipe.currTouchY-this.swipe.preTouchY);this.swipe.direction=b>=c?this.swipe.currTouchX-this.swipe.preTouchX>0?"right":"left":this.swipe.currTouchY-this.swipe.preTouchY>0?"down":"up",this.jObject.trigger("drag",this.swipe)}return"mouseup"==a.type?(this.swipe.lastTouchX=a.pageX,this.swipe.lastTouchY=a.pageY,this.swipe.currTouchXInTarget=a.pageX-this.targetObjX,this.swipe.currTouchYInTarget=a.pageY-this.targetObjY,this.swipe.input="finger",void(this.swipe.lastTouchX-this.swipe.firstTouchX==0&&this.swipe.lastTouchY-this.swipe.firstTouchY==0?(this.swipe.mode="tap",this.swipe.direction="none",this.jObject.trigger("tap",this.swipe)):this.jObject.trigger("offScreen",this.swipe))):void 0},PearsonGL.Gadget.Gesture.prototype.pinchHandler=function(a){a.preventDefault(),"gesturestart"==a.type&&(this.pinch=new Object,this.pinch.target=a.target,this.pinch.rotation=0,this.pinch.scale=0,this.pinch.finalrotation=0,this.pinch.finalscale=0,this.eventTrace.isPinched=!1),"gesturechange"==a.type&&(this.pinch.rotation=a.rotation,this.pinch.scale=a.scale,this.jObject.trigger("pinch",this.pinch),this.eventTrace.isPinched=!0),"gestureend"==a.type&&(this.pinch.finalrotation=a.rotation,this.pinch.finalscale=a.scale,this.pinch.zoom=a.scale>1?"in":"out",this.jObject.trigger("finalpinch",this.pinch))},PearsonGL.Gadget.Gesture.prototype.attach=function(){var a=this;return this.jObject.on("onScreen",function(b,c){a.onScreen($.extend(!0,b,a,c))}),this.jObject.on("drag",function(b,c){a.onDrag($.extend(!0,b,a,c))}),this.jObject.on("dragEnd",function(b,c){a.onDragEnd($.extend(!0,b,a,c))}),this.jObject.on("swipe",function(b,c){a.onSwipe($.extend(!0,b,a,c))}),this.jObject.on("tap",function(b,c){a.onTap($.extend(!0,b,a,c))}),this.jObject.on("pinch",function(b,c){a.onPinch($.extend(!0,b,a,c))}),this.jObject.on("finalpinch",function(b,c){a.onFinalPinch($.extend(!0,b,a,c))}),this.jObject.on("offScreen",function(b,c){a.offScreen($.extend(!0,b,a,c))}),this},PearsonGL.Gadget.Gesture.prototype.detach=function(){return this},PearsonGL.Gadget.Gesture.prototype.setTargetID=function(a){this.targetID=a},PearsonGL.Gadget.Gesture.prototype.getTargetID=function(){return this.targetID},PearsonGL.Gadget.Gesture.prototype.onDrag=function(a){this.options.onDrag(a)},PearsonGL.Gadget.Gesture.prototype.onDragEnd=function(a){this.options.onDragEnd(a)},PearsonGL.Gadget.Gesture.prototype.onSwipe=function(a){this.options.onSwipe(a)},PearsonGL.Gadget.Gesture.prototype.onTap=function(a){this.options.onTap(a)},PearsonGL.Gadget.Gesture.prototype.onPinch=function(a){this.options.onPinch(a)},PearsonGL.Gadget.Gesture.prototype.onFinalPinch=function(a){this.options.onFinalPinch(a)},PearsonGL.Gadget.Gesture.prototype.onScreen=function(a){this.options.onScreen(a)},PearsonGL.Gadget.Gesture.prototype.offScreen=function(a){this.options.offScreen(a)},$.fn.gesture=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new PearsonGL.Gadget.Gesture(this,arguments[0]);$(this).data("gesture-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("gesture-component");if(a&&"function"==typeof a[arguments[0]]){if("function"!=typeof arguments[1])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1));a[arguments[0]]=arguments[1],$(this).data("gesture-component",a)}}};var MouseToTouch=new Class({Implements:[Options,Events],options:{},jQuery:"mouseToTouch",initialize:function(a,b){this.jObject=jQuery(a),this.setOptions(b),this.mobile()},mobile:function(){var a=this,b=this.jObject;b.each(function(){$(this)[0].addEventListener("touchstart",function(b){a.touchHandler(b)},!0),$(this)[0].addEventListener("touchmove",function(b){a.touchHandler(b)},!0),$(this)[0].addEventListener("touchmove",function(a){a.preventDefault()},!0),$(this)[0].addEventListener("touchend",function(b){a.touchHandler(b)},!0),$(this)[0].addEventListener("touchcancel",function(b){a.touchHandler(b)},!0)})},touchHandler:function(a){var b=a.changedTouches,c=b[0],d="";switch(a.type){case"touchstart":d="mousedown";break;case"touchmove":d="mousemove";break;case"touchend":d="mouseup";break;default:return}var e=document.createEvent("MouseEvent");e.initMouseEvent(d,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),c.target.dispatchEvent(e)}});!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind("touchstart",a.proxy(b,"_touchStart")).bind("touchmove",a.proxy(b,"_touchMove")).bind("touchend",a.proxy(b,"_touchEnd")),e.call(b)}}}(jQuery),window.PearsonGL=window.PearsonGL||{},window.PearsonGL.Gadget=window.PearsonGL.Gadget||{},PearsonGL.Gadget.SliderButton=function(a,b){this.options={buttonClassName:"",buttonText:"",slider:!0,enable:!0,useTouchForClick:!1,clickFunction:function(){}},this.jObject=$(a),this.initialize(a,b)},PearsonGL.Gadget.SliderButton.prototype.initialize=function(a,b){void 0!==a&&($.extend(!0,this.options,b),this.isTouchDevice="ontouchstart"in document.documentElement,this.jObject.addClass(this.options.buttonClassName),this.jObject.addClass("is-button base-button"),this.options.slider?(this.jObject.append('<div class="base-button-inside-wrap"><div class="'+this.options.buttonClassName+'-button-left base-button-left">&nbsp;</div><div class="'+this.options.buttonClassName+'-button-right base-button-right"></div><span class="button-text" data-icon="btn-label-icon" >'+this.options.buttonText+"</span></div>"),this.eventAttacher=this.jObject.find(".base-button-inside-wrap")):this.eventAttacher=this.jObject,this.eventAttacher.attr("tabindex","0"),this.eventAttacher.attr("hideFocus","true"),this.eventAttacher.attr("role","button"),this.eventAttacher.attr("aria-disabled","false"),this.buttonClick(),this.buttonMouseEvents())},PearsonGL.Gadget.SliderButton.prototype.buttonMouseEvents=function(){var a=this,b=this.jObject;a.eventAttacher.bind("mouseover.button mouseout.button mousedown.button mouseup.button touchstart.button touchend.button",function(c){if(a.options.enable===!0){var d=a.options.buttonClassName;a.isTouchDevice?"touchstart"===c.type?1===c.originalEvent.touches.length&&(b.addClass(d+"-button-down base-button-down"),b.find("."+d+"-button-left").addClass(d+"-button-left-down base-button-left-down"),b.find("."+d+"-button-right").addClass(d+"-button-right-down base-button-right-down")):"touchend"===c.type&&(b.removeClass(d+"-button-down base-button-down"),b.find("."+d+"-button-right").removeClass(d+"-button-right-down base-button-right-down"),b.find("."+d+"-button-left").removeClass(d+"-button-left-down base-button-left-down")):"mouseover"===c.type?-1==b.attr("class").indexOf("disabled")&&(b.addClass(d+"-button-over base-button-over"),b.find("."+d+"-button-left").addClass(d+"-button-left-over base-button-left-over"),b.find("."+d+"-button-right").addClass(d+"-button-right-over base-button-right-over")):"mouseout"===c.type?(b.removeClass(d+"-button-over base-button-over"),b.removeClass(d+"-button-down base-button-down"),b.find("."+d+"-button-left").removeClass(d+"-button-left-over base-button-left-over"),b.find("."+d+"-button-left").removeClass(d+"-button-left-down base-button-left-down"),b.find("."+d+"-button-right").removeClass(d+"-button-right-over base-button-right-over"),b.find("."+d+"-button-right").removeClass(d+"-button-right-down base-button-right-down")):"mousedown"===c.type?-1==b.attr("class").indexOf("disabled")&&(b.addClass(d+"-button-down base-button-down"),b.find("."+d+"-button-left").addClass(d+"-button-left-down base-button-left-down"),b.find("."+d+"-button-right").addClass(d+"-button-right-down base-button-right-down")):"mouseup"===c.type&&(b.removeClass(d+"-button-down base-button-down"),b.find("."+d+"-button-right").removeClass(d+"-button-right-down base-button-right-down"),b.find("."+d+"-button-left").removeClass(d+"-button-left-down base-button-left-down"))}})},PearsonGL.Gadget.SliderButton.prototype.keyPressEventHandler=function(){},PearsonGL.Gadget.SliderButton.prototype.keyUpEventHandler=function(){},PearsonGL.Gadget.SliderButton.prototype.buttonClick=function(){var a=this,b=this.jObject;a.isTouchDevice&&a.options.useTouchForClick?a.eventAttacher.on("touchend.button",function(b){a.options.clickFunction(a,"click",b)}):a.eventAttacher.click(function(b){b.stopImmediatePropagation(),a.options.clickFunction(a,"click",b)}),a.eventAttacher.keydown(function(b){b.stopImmediatePropagation(),(13===b.keyCode||32===b.keyCode)&&a.options.clickFunction(a,"key",b),a.keyPressEventHandler(b,a)}),a.eventAttacher.keyup(function(c){if(9!==c.keyCode||$(this).attr("class").indexOf("disable")>-1)13===c.keyCode&&a.keyUpEventHandler(c,a);else{var d=$(window).height(),e=$(b).offset();window.scroll(0,e.top-d+$(b).height()+50),PearsonGL.utils.focusItemOn(this)}}).blur(function(){PearsonGL.utils.focusItemOff(this)})},PearsonGL.Gadget.SliderButton.prototype.enable=function(){var a=this.options.buttonClassName;this.options.enable=!0,this.eventAttacher.attr("aria-disabled","false"),this.jObject.removeClass(a+"-button-disable base-button-disable"),this.jObject.find("."+a+"-button-left").removeClass(a+"-button-left-disable base-button-left-disable"),this.jObject.find("."+a+"-button-right").removeClass(a+"-button-right-disable base-button-right-disable")},PearsonGL.Gadget.SliderButton.prototype.disable=function(){var a=this.options.buttonClassName;this.options.enable=!1,this.eventAttacher.attr("aria-disabled","true"),this.jObject.removeClass(a+"-button-over base-button-over "+a+"-button-down base-button-down").addClass(a+"-button-disable base-button-disable"),this.jObject.find("."+a+"-button-right").removeClass(a+"-button-right-down base-button-right-down "+a+"-button-right-over base-button-right-over").addClass(a+"-button-right-disable base-button-right-disable"),this.jObject.find("."+a+"-button-left").removeClass(a+"-button-left-down base-button-left-down "+a+"-button-left-over base-button-left-over").addClass(a+"-button-left-disable base-button-left-disable")},PearsonGL.Gadget.SliderButton.prototype.destroy=function(){this.jObject.unbind(".button")},$.fn.sliderbutton=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new PearsonGL.Gadget.SliderButton(this,arguments[0]);$(this).data("slider-button-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("slider-button-component");if(a&&"function"==typeof a[arguments[0]]){if("function"!=typeof arguments[1])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1));a[arguments[0]]=arguments[1],$(this).data("slider-button-component",a)}}},PearsonGL.Gadget=PearsonGL.Gadget||{},PearsonGL.Gadget.DialogComponent=function(a,b){this.options={dialogType:"feedback",closeToolTip:"Close dialog",yesToolTip:"Yes",noToolTip:"No",resizable:!1,doAnimate:!0},this.initialize(a,b)},PearsonGL.Gadget.DialogComponent.prototype.initialize=function(a,b){$.extend(this.options,b),this.jObject=$(a),this.DIALOG_FEEDBACK="feedback",this.DIALOG_CONFIMATION="confirm",this.ANIMATED_FEEDBACK="animated",this.determineDialog()},PearsonGL.Gadget.DialogComponent.prototype.determineDialog=function(){var a=this.options.dialogType;switch(a){case this.DIALOG_CONFIMATION:this.buildConfirmDialog();break;case this.ANIMATED_FEEDBACK:this.buildAnimagedFeedbackDialog();break;case this.DIALOG_FEEDBACK:default:this.buildDefaultDialog()}},PearsonGL.Gadget.DialogComponent.prototype.populateDialog=function(a,b){a.attr("audio",""),a.empty().richtextcomponent(b),PearsonGL.utils.initMathJax(this.jObject[0])},PearsonGL.Gadget.DialogComponent.prototype.removeTabsFromLabel=function(){this.jObject.find(".result-pop-up .hidden-label").removeAttr("audio").removeAttr("tabindex").removeAttr("role").removeAttr("data-audio-type"),this.jObject.find(".result-pop-up .hidden-label").find("[tabindex]").removeAttr("tabindex")},PearsonGL.Gadget.DialogComponent.prototype.buildDefaultDialog=function(){var a=this,b=this.jObject;b.append('<div tabindex="0" class="dialog-box-window result-pop-up popup-window hide"><div class="result-header"></div><div class="result-text-container"><div class="result-text" tabindex="0">'+(a.options.resultsText?a.options.resultsText:"")+'</div></div><div class="result-close" data-icon="icon-dialog-close-button" alt="'+a.options.closeToolTip+'" title="'+a.options.closeToolTip+'"></div></div>'),this.options.isModal&&b.append('<div class="modal-dialog-window"></div>'),b.find(".result-pop-up").draggable({scroll:!0,handle:".result-header",containment:".main"}),this.options.resizable&&b.find(".result-pop-up").resizable({}),b.find(".result-pop-up").children(".result-close").sliderbutton({buttonClassName:"result-close",slider:!1,clickFunction:function(){try{b.find(".result-text").audioComponent("pause")}catch(a){}b.find(".result-pop-up").fadeOut(),b.find(".modal-dialog-window").hide(),b.find(".result-pop-up").removeClass("incorrect correct"),b.unbind("click.obj"),b.find(".result-pop-up").triggerHandler({type:"closed"})}}),b.find(".result-pop-up").children(".result-close").sliderbutton("keyPressEventHandler",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9!=a.keyCode||a.shiftKey||(a.preventDefault(),b.find(".result-pop-up").focus())}),b.find(".result-pop-up").focus(function(){PearsonGL.utils.focusItemOn(this)}).blur(function(){PearsonGL.utils.focusItemOff(this)}).bind("keydown",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9==a.keyCode&&a.shiftKey&&(a.preventDefault(),b.find(".result-pop-up").children(".result-close").focus())
})},PearsonGL.Gadget.DialogComponent.prototype.buildAnimagedFeedbackDialog=function(){var a,b,c=this,d=this.jObject,e=this.options.imageComponent,f=this.options.textMessage,g=this.options.doAnimate;d.find(".result-text, .result-animation-container").empty(),d.find(".animated-dialog-box-window").remove(),a=$('<div tabindex="0" class="animated-dialog-box-window result-pop-up popup-window hide"><div class="result-header"></div><div class="result-text-container"><div title="'+(e.title?e.title:"")+'" class="'+(g?"result-animation-container":"result-image-container")+' result-graphic-container"></div><div class="result-text" tabindex="0">'+(f?f.value:"")+'</div></div><div class="result-close" data-icon="icon-dialog-close-button" alt="'+c.options.closeToolTip+'" title="'+c.options.closeToolTip+'"></div></div>'),a.appendTo(d),this.options.isModal&&d.append('<div class="modal-dialog-window"></div>'),e&&(b=function(){var b=a.find(".result-graphic-container"),c=g?e.width:this.width,d=g?e.height:this.height;if(a.css({width:a.width()+c,height:d}),g){var f={image:e.src,fps:e.fps,frameWidth:c,frameHeight:d,loops:e.loops};a.addClass("base-animation"),b.imgAnimate(f),b.imgAnimate("startLoop")}else b.css({width:c,height:d,background:"url("+e.src+") no-repeat"})},$("<img />").on("load",b).attr("src",e.src)),d.find(".result-pop-up").draggable({scroll:!0,handle:".result-header",containment:".main"}),this.options.resizable&&d.find(".result-pop-up").resizable({}),d.find(".result-pop-up").children(".result-close").sliderbutton({buttonClassName:"result-close",slider:!1,clickFunction:function(){d.find(".result-pop-up").fadeOut(),d.find(".modal-dialog-window").hide(),d.find(".result-pop-up").removeClass("incorrect correct"),d.unbind("click.obj"),d.find(".result-pop-up").triggerHandler({type:"closed"})}}),d.find(".result-pop-up").children(".result-close").sliderbutton("keyPressEventHandler",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9!=a.keyCode||a.shiftKey||(a.preventDefault(),d.find(".result-pop-up").focus())}),d.find(".result-pop-up").focus(function(){PearsonGL.utils.focusItemOn(this)}).blur(function(){PearsonGL.utils.focusItemOff(this)}).bind("keydown",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9==a.keyCode&&a.shiftKey&&(a.preventDefault(),d.find(".result-pop-up").children(".result-close").focus())})},PearsonGL.Gadget.DialogComponent.prototype.buildConfirmDialog=function(){var a,b=this,c=this.jObject,d=PearsonGL.utils.randomString(8)+PearsonGL.utils.randomString(8),e=b.options.audioComponent&&b.options.audioComponent.src;c.find(".dialog-box-window").remove(),a=e?'<div class="checker-text">':'<div tabindex="0" class="checker-text">',c.append('<div aria-labelledby="'+d+'" tabindex="0" class="dialog-box-window checker checker-pop-up hide yesnodialog popup-window"><div class="checker-model-blanket"></div><div class="checker-header"></div><label id="'+d+'" class="hidden-label"></label>'+a+'<div class="checker-text-cell">'+b.options.resultsText+'</div></div><div class="yes" alt="'+b.options.yesToolTip+'" title="'+b.options.yesToolTip+'"></div><div class="no" alt="'+b.options.noToolTip+'" title="'+b.options.noToolTip+'"></div></div>');var f=c.find(".checker").find(".no"),g=c.find(".yesnodialog"),h=c.find(".yes");f.sliderbutton({buttonClassName:"no",buttonText:b.options.noToolTip,slider:!0,clickFunction:function(){g.fadeOut(),e&&c.find(".checker-text-cell").audioComponent("pause")}}),f.sliderbutton("keyPressEventHandler",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9!=a.keyCode||a.shiftKey||(a.preventDefault(),g.focus())}),b.options.keyPressEventHandler&&h.sliderbutton({buttonClassName:"yes",buttonText:b.options.yesToolTip,slider:!0,clickFunction:function(){b.options.keyPressEventHandler(),e&&c.find(".checker-text-cell").audioComponent("pause")}}),e&&(c.find(".checker-text-cell").audioComponent(b.options.audioComponent),c.find(".hidden-label").removeAttr("audio").removeAttr("tabindex").removeAttr("role").removeAttr("data-audio-type")),g.bind("keydown",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9==a.keyCode&&a.shiftKey&&(a.preventDefault(),f.focus())}).draggable({handle:c.children(".checker").find(".checker-header"),scroll:!0,containment:".main"}).focus(function(){PearsonGL.utils.focusItemOn(this)}).blur(function(){PearsonGL.utils.focusItemOff(this)}),PearsonGL.utils.initMathJax(c[0])},$.fn.dialogcomponent=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new PearsonGL.Gadget.DialogComponent(this,arguments[0]);$(this).data("dialog-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("dialog-component");if(a&&"function"==typeof a[arguments[0]])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1))}},window.PearsonGL=window.PearsonGL||{},window.PearsonGL.Gadget=window.PearsonGL.Gadget||{},PearsonGL.Gadget.Protector=function(a,b){this.options={},this.jObject=$(a),this.initialize(a,b)},PearsonGL.Gadget.Protector.prototype.initialize=function(a,b){if(void 0!==a){$.extend(!0,this.options,b);var c=this;this.jObject.each(function(){c._protectImage(this)})}},PearsonGL.Gadget.Protector.prototype._protectImage=function(a){document.all&&a.setAttribute("galleryimg","no"),a.oncontextmenu=function(){return!1},this._capture(a)},PearsonGL.Gadget.Protector.prototype._capture=function(a){var b=this;a.addEventListener?a.addEventListener("mousedown",b._block,!1):a.attachEvent&&a.attachEvent("ondragstart",b._block)},PearsonGL.Gadget.Protector.prototype._block=function(a){var b=a;return a&&"undefined"!=typeof a||(b=window.event),b.stopPropagation?(b.stopPropagation(),b.preventDefault()):(b.cancelBubble=!0,b.returnValue=!1),!1},$.fn.Protector=function(){if("object"==typeof arguments[0]||0===arguments.length){var a=new PearsonGL.Gadget.Protector(this,arguments[0]);$(this).data("protector-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("protector-component");if(a&&"function"==typeof a[arguments[0]]){if("function"!=typeof arguments[1])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1));a[arguments[0]]=arguments[1],$(this).data("protector-component",a)}}},window.PearsonGL=window.PearsonGL||{},PearsonGL.logger=function(){var a=!1;window.console=window.console||{};var b=["log","error","warning","debug","trace","info"],c=function(){};return b.forEach(function(a){"function"!=typeof window[a]&&(window[a]=c)}),{enable:function(){a=!0},disable:function(){a=!1},error:function(b){a&&console.error("ERROR: "+b)},warning:function(b){a&&console.log("WARNING: "+b)},log:function(b){a&&console.log("LOG: "+b)},dir:function(b){a&&console.dir(b)},console:function(a){console.log(a)},out:function(b){a&&console.log(b)}}}(),Debug.prototype.error=function(){},Debug.prototype.warning=function(){},Debug.prototype.log=function(){},Debug.prototype.dir=function(){},Debug.prototype.console=function(){},Debug.prototype.out=function(){},window.PearsonGL.Gadget=window.PearsonGL.Gadget||{},PearsonGL.Gadget.AudioComponent=function(a,b,c){a.audioComponent("destroy"),this.isDestroyed=!1,this.labelOpts={playalt:"play",pausealt:"pause"},this.options={type:"hover",src:"",trigger:!1,isPopAudio:!1,stopDefault:!0},b&&($.extend(this.options,b),PearsonGL.GadgetBase.call(this,b,c),this.jObject=$(a),this.initialize(a))},PearsonGL.Gadget.AudioComponent.prototype=Object.create(window.PearsonGL.GadgetBase.prototype),PearsonGL.Gadget.AudioComponent.prototype.initialize=function(a){if(void 0!==a){if($.extend(this.labelOpts,this.options.labelOpts),void 0===this.options.src&&!this.options.isPopAudio)return;this.html5=!1;var b=document.createElement("audio");if(b.canPlayType&&b.canPlayType("audio/mp3").replace(/no/,"")&&(this.html5=!0),this.isPlaying=!1,this.disabledAudio=!1,this.parentGadgetOptions=this.jObject.parents(".gadget").data("gadget_options"),void 0!==this.options.src){var c=this.options.src;this.options.src=c}""!==this.options.src&&this.createAudioPlayer(),this.options.isPopAudio&&(this.options.src="css/product/popup.mp3",this.html5?this.createAudioPlayer():this.UrlExists("css/product/popup.mp3")&&this.createAudioPlayer())}},PearsonGL.Gadget.AudioComponent.prototype.UrlExists=function(a){var b=!0;return $.ajax({url:a,type:"GET",async:!1,error:function(){b=!1}}),b},PearsonGL.Gadget.AudioComponent.prototype.createAudioPlayer=function(){var a=this,b=this.jObject;if((navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Mozilla")>-1)&&window.location.href.toLowerCase().indexOf("msde")>-1&&window.location.href.toLowerCase().indexOf("blackboard")>-1&&(this.html5=!1),b.attr("audio",this.options.src).addClass("audioToggleIdentifier"),this.html5===!1)0===$("#inline_swf_audio_player").length&&($("body").append('<div id="inline_swf_audio_player" class="jp-jplayer" ></div>'),$("#inline_swf_audio_player").css({position:"absolute","z-index":"-10",left:"0",top:"0",width:"0",height:"0"}),$("#inline_swf_audio_player").jPlayer({ready:function(){},solution:"flash, html",supplied:"mp3",preload:"auto",swfPath:"js"}).bind($.jPlayer.event.error,function(a){window.location.href.indexOf("file://")||"e_flash"!=a.jPlayer.error.type&&"e_url_not_set"!=a.jPlayer.error.type||alert("Enable Flash Trusted Locations for Content Object")}),$("#inline_swf_audio_player").bind($.jPlayer.event.ended,function(){$(".audioToggleIdentifier").each(function(){$(this).audioComponent("pause")}),a.onAudioComplete()}));else{0===$("#inline_html_audio_player").length&&(this.audio=$('<audio id="inline_html_audio_player"></audio>'),$("body").append(this.audio),$("#inline_html_audio_player").css({position:"absolute","z-index":"-10",left:"0",top:"0",width:"0",height:"0"}));var c=document.getElementById("inline_html_audio_player");c.addEventListener("ended",function(){$(".audioToggleIdentifier").each(function(){$(this).audioComponent("pause")}),a.isPlaying=!1,a.fireEvent("paused"),$("#inline_html_audio_player")[0].src="",a.onAudioComplete()}),"auto"===this.options.type&&a.play()}this.jObject.attr("data-audio-type",this.options.type.toLowerCase()),"hover"===this.options.type.toLowerCase()?this.togglesetup():"button"===this.options.type.toLowerCase().trim()?this.buttonsetup():"progress"===this.options.type.toLowerCase().trim()&&this.progressSetup()},PearsonGL.Gadget.AudioComponent.prototype.destroy=function(){this.isDestroyed=!0},PearsonGL.Gadget.AudioComponent.prototype.progressSetup=function(){var a=this,b=this.jObject;if(this.lastPct=0,this.audioPct=0,b.attr("audiostate","ready"),b.prepend("<div class='controls'><div class='slice'> <div class='pie'></div></div><div tabindex='0' alt='"+this.labelOpts.playalt+"' title='"+this.labelOpts.playalt+"' class='ctr audio-play' id='play'></div><div tabindex='0' alt='"+this.labelOpts.pausealt+"' title='"+this.labelOpts.pausealt+"' class='ctr audio-pause' id='pause'></div></div>"),b.find(".audio-pause").hide(),b.find(".audio-play").sliderbutton({buttonClassName:"audio-play",slider:!1,clickFunction:function(b){a.disabledAudio===!1&&(a.loopButtonAudio(),a.setUpAudioButton(b.jObject))}}),b.find(".audio-pause").sliderbutton({buttonClassName:"audio-pause",slider:!1,clickFunction:function(b){a.disabledAudio===!1&&(a.loopButtonAudio(),a.setUpAudioButton(b.jObject))}}),a.html5===!1)$("#inline_swf_audio_player").bind($.jPlayer.event.timeupdate,function(c){if("playing"==b.attr("audiostate")){if(a.audioPct=parseInt(c.jPlayer.status.currentPercentAbsolute),0==a.lastPct&&0==a.audioPct?a.lastPct=0:a.lastPct>=0&&a.audioPct>0?a.lastPct=a.audioPct-1:a.lastPct>0&&0==a.audioPct&&(a.audioPct=100),100==a.audioPct)return a.progress(a.audioPct),void a.onAudioComplete();a.progress(a.audioPct)}});else{var c=document.getElementById("inline_html_audio_player");c.addEventListener("timeupdate",function(){if("playing"==b.attr("audiostate")){if(a.audioPct=c.currentTime/c.duration*100,a.lastPct=a.audioPct-1,100==a.audioPct)return a.progress(a.audioPct),void a.onAudioComplete();a.progress(a.audioPct)}})}},PearsonGL.Gadget.AudioComponent.prototype.progress=function(a){if(0!=a){if(2>a)this.jObject.find(".slice");else if(a>50)this.jObject.find(".slice").addClass("gt50");else if(100==a)return;var b=3.6*a;this.jObject.find(".pie").css({"-moz-transform":"rotate("+b+"deg)","-webkit-transform":"rotate("+b+"deg)","-o-transform":"rotate("+b+"deg)",transform:"rotate("+b+"deg)"})}},PearsonGL.Gadget.AudioComponent.prototype.onAudioComplete=function(){this.jObject.find(".slice").removeClass("gt50").find(".pie").css({"-moz-transform":"rotate(0deg)","-webkit-transform":"rotate(0deg)","-o-transform":"rotate(0deg)",transform:"rotate(0deg)"}).removeAttr("style"),this.lastPct=0,this.audioPct=0,this.jObject.attr("audiostate","ready"),$(window).trigger("audioComplete",this)},PearsonGL.Gadget.AudioComponent.prototype.togglesetup=function(){var a=this,b=this.jObject;b.attr("audio",a.options.src).addClass("audioCursor"),b.attr({tabindex:"0",role:"button"}),b.click(function(c){a.options.stopDefault&&c.stopPropagation(),a.disabledAudio===!1&&($(".audioToggleIdentifier").each(function(){b[0]!==$(this)[0]&&$(this).audioComponent("isplaying")&&$(this).audioComponent("pause")}),a.setUpAudioToggle())}),b.keydown(function(b){13===b.keyCode&&a.disabledAudio===!1?(b.stopImmediatePropagation(),a.setUpAudioToggle()):b.stopImmediatePropagation()}),b.keyup(function(a){if(9===a.keyCode){var c=$(window).height(),d=$(b).offset();window.scroll(0,d.top-c+$(b).height()+50),PearsonGL.utils.focusItemOn(this)}}).blur(function(){PearsonGL.utils.focusItemOff(this)})},PearsonGL.Gadget.AudioComponent.prototype.setUpAudioButton=function(a){var b=this,c=this.jObject;this.html5===!0?$("#inline_html_audio_player").attr("src")==c.attr("audio")?"play"==$(a).attr("id")?(this.play(),this.jObject.find("#pause").focus()):"pause"==$(a).attr("id")&&(this.pause(),this.jObject.find("#play").focus()):($("#inline_html_audio_player")[0].src=c.attr("audio"),b.onAudioComplete(),"play"==$(a).attr("id")?(this.play(),this.jObject.find("#pause").focus()):"pause"==$(a).attr("id")&&(this.pause(),this.jObject.find("#play").focus())):$("#inline_swf_audio_player").attr("audio")==c.attr("audio")?"play"==$(a).attr("id")?(this.play(),this.jObject.find("#pause").focus()):"pause"==$(a).attr("id")&&(this.pause(),this.jObject.find("#play").focus()):($("#inline_swf_audio_player").attr("audio",c.attr("audio")),$("#inline_swf_audio_player").jPlayer("clearMedia"),$("#inline_swf_audio_player").jPlayer("setMedia",{mp3:c.attr("audio")}),b.onAudioComplete(),"play"==$(a).attr("id")?(this.play(),this.jObject.find("#pause").focus()):"pause"==$(a).attr("id")&&(this.pause(),this.jObject.find("#play").focus()))},PearsonGL.Gadget.AudioComponent.prototype.setUpAudioToggle=function(){var a=this.jObject;this.isDestroyed||(this.html5===!0?$("#inline_html_audio_player").attr("src")==a.attr("audio")?this.isPlaying===!0?this.pause():this.play():($("#inline_html_audio_player")[0].src=a.attr("audio"),this.isPlaying===!0?this.pause():this.play()):$("#inline_swf_audio_player").attr("audio")==a.attr("audio")?this.isPlaying===!0?this.pause():this.play():($("#inline_swf_audio_player").attr("audio",a.attr("audio")),$("#inline_swf_audio_player").jPlayer("clearMedia"),$("#inline_swf_audio_player").jPlayer("setMedia",{mp3:a.attr("audio")}),this.isPlaying===!0?this.pause():this.play()))},PearsonGL.Gadget.AudioComponent.prototype.buttonsetup=function(){var a=this;this.jObject.prepend("<div class='controls'><div tabindex='0' alt='"+this.labelOpts.playalt+"' title='"+this.labelOpts.playalt+"' class='ctr' id='play' data-icon='audio-play'></div><div tabindex='0' alt='"+this.labelOpts.pausealt+"' title='"+this.labelOpts.pausealt+"' class='ctr' id='pause' data-icon='audio-pause'></div></div>"),this.jObject.find("#pause").hide();var b=this.jObject;this.jObject.find("#play").sliderbutton({buttonClassName:"audio-play",slider:!1,clickFunction:function(){a.disabledAudio===!1&&(a.loopButtonAudio(),a.setUpAudioButton(b.find("#play")))}}),this.jObject.find("#pause").sliderbutton({buttonClassName:"audio-pause",slider:!1,clickFunction:function(){a.disabledAudio===!1&&(a.loopButtonAudio(),a.setUpAudioButton(b.find("#pause")))}})},PearsonGL.Gadget.AudioComponent.prototype.loopButtonAudio=function(){var a=this.jObject;$(".audioToggleIdentifier").each(function(){a[0]!==$(this)[0]&&($(this).audioComponent("isplaying")&&$(this).audioComponent("pause"),$(this).audioComponent("onAudioComplete"))})},PearsonGL.Gadget.AudioComponent.prototype.enableAudio=function(){this.disabledAudio=!1},PearsonGL.Gadget.AudioComponent.prototype.disableAudio=function(){this.disabledAudio=!0},PearsonGL.Gadget.AudioComponent.prototype.isplaying=function(){return this.isPlaying},PearsonGL.Gadget.AudioComponent.prototype.play=function(){var a=this.jObject;this.destory||(this.sendAnalytics("audio_playing"),this.isPlaying=!0,("button"==this.options.type.toLowerCase().trim()||"progress"==this.options.type.toLowerCase().trim())&&(a.find("#play").hide(),a.find("#pause").show()),a.attr("audiostate","playing"),this.html5===!0?(this.options.trigger===!0&&($("#inline_html_audio_player")[0].src=a.attr("audio")),""==$("#inline_html_audio_player").attr("src")&&$("#inline_html_audio_player").attr("src",this.options.src),$("#inline_html_audio_player")[0].play()):(this.options.trigger===!0&&($("#inline_swf_audio_player").attr("audio",a.attr("audio")),$("#inline_swf_audio_player").jPlayer("clearMedia"),$("#inline_swf_audio_player").jPlayer("setMedia",{mp3:a.attr("audio")})),$("#inline_swf_audio_player").jPlayer("play")),this.fireEvent("played"))},PearsonGL.Gadget.AudioComponent.prototype.fireEvent=function(a){$(window).trigger(a,{sourceId:this.gadgetUniqueId,source:this})},PearsonGL.Gadget.AudioComponent.prototype.pause=function(){var a=this.jObject;this.isPlaying&&!this.isDestroyed&&(this.isPlaying=!1,("button"==this.options.type.toLowerCase().trim()||"progress"==this.options.type.toLowerCase().trim())&&(a.find("#pause").hide(),a.find("#play").show()),a.attr("audiostate","paused"),this.html5===!0?$("#inline_html_audio_player")[0].pause():$("#inline_swf_audio_player").jPlayer("pause"),this.fireEvent("paused"))},PearsonGL.Gadget.AudioComponent.prototype.stop=function(){this.jObject.find(".audioToggleIdentifier").each(function(){$(this).audioComponent("isplaying")&&$(this).audioComponent("pause"),$(this).audioComponent("onAudioComplete")})},$.fn.audioComponent=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new PearsonGL.Gadget.AudioComponent(this,arguments[0]);$(this).data("audio-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("audio-component");if(a&&"function"==typeof a[arguments[0]])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1))}},function(a){a.fn.richtextcomponent=function(b){var c=this,d={saveText:function(){},highlightingEnabled:!1};b=a.extend(d,b);var e=b.noTabIndex?"":"tabIndex='0'";return this.append("<div "+e+" class='gadget-textblock'><span class='text-audio-component'>"+(void 0!=b.value?b.value:"")+"</span></div>"),this.find(".gadget-textblock").keyup(function(a){9===a.keyCode&&PearsonGL.utils.focusItemOn(this)}).blur(function(){PearsonGL.utils.focusItemOff(this)}),this.find("a").click(function(d){d.preventDefault();var e,f,g,h,i,j=c.data().gadget_options;return e=j?j.runtimejson.authoring.Domains:b.domains,a.extend(b,{runtimejson:{authoring:{Domains:e}}}),f=a(this).attr("data-domain"),g=a(this).attr("data-path"),h=a(this).attr("target"),isPopUp=a(this).attr("data-popup"),i=PearsonGL.utils.urlResolver(j.runtimejson,f,g),isPopUp||h&&"_new"===h.toLowerCase()?PearsonGL.utils.openBrowserPopupWindow(i,"","location=0,menubar=0,scrollbars=1",!0):document.location.href=i,!1}).addClass("text-ahref-link"),b.highlightingEnabled&&this.highLighter({saveHighLight:function(){b.saveText()},highlightArea:b.highlightArea}),this}}(jQuery),window.Gadget=window.Gadget||{},Gadget.VideoComponent=function(a,b,c){this.labelOpts={playToolTip:"Play",pauseToolTip:"Pause",muteToolTip:"Mute",unMuteToolTip:"Unmute",fullScreenToolTip:"Enter Fullscreen",exitFullScreenToolTip:"Exit Fullscreen",ccShowToolTip:"Show Captions",ccHideToolTip:"Hide Captions",showStopPointToolTip:"Show Stop Points",hideStopPointToolTip:"Hide Stop Points"},this.options={play:!0,time:!0,fullscreen:!0,mute:!0,progressbar:!0,volumebar:!0,volumebarDirection:"vertical",caption:!0,controls:!0,autoPlay:!1,toggleControls:!1,disableClickToPlayPause:!1,src:"",poster:"",srt:"",clip:"",showCC:!1,videoPosterImg:"",local:[],external:[],showStopPointToggle:!1},b&&(PearsonGL.GadgetBase.call(this,b,c),this.jObject=$(a),this.initialize())},Gadget.VideoComponent.prototype=Object.create(window.PearsonGL.GadgetBase.prototype),Gadget.VideoComponent.prototype.eventType={played:"played",paused:"paused",sliderChangeStarted:"locChangeStarted"},Gadget.VideoComponent.prototype.initialize=function(){if(void 0!==this.jObject){var a=this;this.currentTimeWatched=0,this.deferred=$.Deferred(),PearsonGL.utils.getGlobalizedLabel("videoplayer_globalization",a.globalizationComplete.bind(this),this.options.runtimejson.lang)}},Gadget.VideoComponent.prototype.isReady=function(){(!this.html5&&this.flashIsReady&&!this.playing&&this.options.autoPlay||this.html5&&!this.playing&&this.options.autoPlay&&!this.isTouchDevice)&&this.play(),this.resize()},Gadget.VideoComponent.prototype.hidePlayButtonOnScreen=function(){this.jObject.find("#play-button").hide()},Gadget.VideoComponent.prototype.globalizationComplete=function(a){var b=this;if(this.flashRanID=PearsonGL.utils.randomString(6),this.firstPlay=!0,this.disablePlay=!1,this.gettime=0,this.previous=0,this.previous_2=-1,this.VolumeLevel=100,this.maxSlider=100,this.durationOfVideo=0,this.playEnabled=!0,this.scormData={duration:0,timeWatched:0},this.playing=!1,this.canProgress=!1,this.timewatched=0,this.isTouchDevice="ontouchstart"in document.documentElement,this.isDownloadedSrt=!1,this.stopAtStopPoints=!0,this.isStop=!1,this.callback={},this.currentTimeWatched=0,this.deferred=$.Deferred(),this.options.videoVersion)switch(this.options.videoVersion){case"noControl":this.options.controls=!1;break;case"noControlAutoPlay":this.options.controls=!1,this.options.autoPlay=!0;break;case"allControlsNoSubs":this.options.caption=!1;break;case"allControlsAutoPlay":this.options.autoPlay=!0;break;case"allControlsAutoHide":this.options.toggleControls=!0;break;case"noVolumeBarAndFullScreen":this.options.volumebar=!1,this.options.fullscreen=!1;break;case"noVolumeBarAndFullScreenAndCC":this.options.volumebar=!1,this.options.fullscreen=!1,this.options.caption=!1}$.extend(this.labelOpts,a),this.hasWebm=!1,this.webMsrc="",this.options.local.length>0?(this.options.src=this.options.local[0].src,$(this.options.local).each(function(){"webm"==b.getFileExtension(this.src).toLowerCase()&&(b.hasWebm=!0,b.webMsrc=this.src)})):this.options.external.length>0&&(this.options.src=PearsonGL.utils.urlResolver(this.options.runtimejson,this.options.external[0].domain,this.options.external[0].path)),this.init(),$(window).on("play",function(a,c){c&&c.sourceId!==b.gadgetUniqueId&&(b.isTouchDevice&&!b.firstPlay&&c.gadgetUniqueId===b.gadgetUniqueId||!b.isTouchDevice&&c.gadgetUniqueId===b.gadgetUniqueId)&&(c.eventData||$.isNumeric(c.eventData)?(b.setCurrentTime(c.eventData),b.play(!1,c.eventData)):b.play())}),$(window).on("pause",function(a,c){c.sourceId!==b.gadgetUniqueId&&c.gadgetUniqueId===b.gadgetUniqueId&&b.pause()})},Gadget.VideoComponent.prototype.destroy=function(){this.jObject.children().remove(),this.jObject.removeClass("video-component-identifier"),this.jObject.removeAttr("tabindex")},Gadget.VideoComponent.prototype.getFileExtension=function(a){var b=a.split(".");return 1===b.length||""===b[0]&&2===b.length?"":b.pop()},Gadget.VideoComponent.prototype.init=function(){var a,b=this,c=this.jObject,d=document.createElement("video"),e=document.createElement("img");this.jObject.addClass("video-component-identifier"),this.jObject.attr({tabindex:"-1"}),this.html5=!1,this.options.fullscreen&&this.options.caption?this.options.showStopPointToggle||c.addClass("total-right-btn-two"):c.addClass(this.options.showStopPointToggle&&(this.options.caption||this.options.fullscreen)?"two-buttons total-right-btn-two":this.options.caption||this.options.showStopPointToggle||this.options.fullscreen?"one-button total-right-btn-one":"total-right-btn-zero"),this.options.volumebar||c.addClass("total-left-btn-one"),d.canPlayType&&d.canPlayType("video/mp4").replace(/no/,"")&&(this.html5=!0),b.hasWebm&&d.canPlayType&&d.canPlayType("video/webm").replace(/no/,"")&&!window.location.href.indexOf("file://")&&(this.html5=!0,this.options.src=b.webMsrc);var f=window.PearsonGL.utils.getQuerystring("html5video","",!0);if("true"==f&&(this.html5=!1,d.canPlayType&&d.canPlayType("video/mp4").replace(/no/,"")&&(this.html5=!0)),void 0!==this.options.clip&&this.options.clip.length>0)for(this.options.clip.sort(function(a,b){return a.time-b.time}),b.clipLength=this.options.clip.length,a=0;a<=b.clipLength-1;a++)this.options.clip[a].time=this.options.clip[a].time-.1,this.options.clip[a].beenAt=!1;$(e).load(function(){b.posterWidth=parseFloat(this.width),b.posterHeight=parseFloat(this.height);var a="";b.options.disableClickToPlayPause||(a="<div id='play-button' data-icon='ic-video-start' role='button' alt='"+b.labelOpts.playToolTip+"' title='"+b.labelOpts.playToolTip+"' class='play-button'></div>"),c.append("<img class='video-poster-pos' src='"+this.src+"' /><div class='player-height'></div><div class='player'><div class='overlay'></div><div id='video-play' playid='video'><img id='video-poster' src='"+this.src+"' />"+a+"<div id='video-loading'></div></div>"),b.options.hidePlayButtonOnScreen&&b.hidePlayButtonOnScreen(),c.find("#video-poster").attr({title:b.options.videoPosterImg,alt:b.options.videoPosterImg}),$(window).bind("scroll.videoplayer",function(){b.isFullScreen&&b.enterFullScreen()}),$(window).bind("resize.videoplayer",function(){b.resize()}),b.html5===!0?b.HTML():b.flash();try{b.posterReady()}catch(d){}}),e.src=this.options.poster},Gadget.VideoComponent.prototype.fireEvent=function(a,b){$(window).trigger(a,{sourceId:this.gadgetUniqueId,data:b,source:this})},Gadget.VideoComponent.prototype.HTML=function(){var a=this,b=a.jObject;this.isTouchDevice?(this.video=$('<video class="video" preload="auto" src="'+a.options.src+'"></video>'),b.children(".player").append(this.video)):(this.video=$('<video class="video" preload="auto"></video>'),b.children(".player").append(this.video),this.video.attr("src",a.options.src)),b.find(".overlay").click(function(){(a.firstPlay||!a.options.playOnlyOnce)&&a.handleVideoClickEvent()}),a.setUpControls(),this.isTouchDevice&&this.deferred.resolveWith(this)},Gadget.VideoComponent.prototype.flash=function(){var a,b,c,d=this,e=this.jObject;e.children(".player").append("<a class='video' style='visibility:hidden;' id='"+d.flashRanID+"' href='"+d.options.src+"'></a>"),b=document.createElement("a"),b.href=d.options.src,c=d.options.src,b.href!==d.options.src?c=b.href:e.children(".player").children(".video").attr("href")!==d.options.src&&(c=e.children(".player").children(".video").attr("href")),d.canProgress=!1,d.flashIsReady=!1,this.video=e.children(".player").children(".video"),this.video.jPlayer({ready:function(){d.flashIsReady=!0,$(this).find("img").remove(),$(this).find("*").attr("tabindex","-1").attr("aria-hidden","true"),$(this).jPlayer("setMedia",{m4v:c}),d.setVolume(d.VolumeLevel),d.resize(),$(this).jPlayer("load"),d.options.autoPlay===!0&&d.play()},size:{width:d.posterWidth,height:d.posterHeight},backgroundColor:"#ffffff",solution:"flash",supplied:"m4v",swfPath:"js",volume:.5,preload:"auto",timeupdate:function(a){if(!d.isStop&&d.canProgress===!1){var b=d.jObject.find("#current-time").html();(a.jPlayer.status.currentTime>0||"00:00"!=b&&a.jPlayer.status.currentTime>0)&&d.setCurrentTime(a.jPlayer.status.currentTime),a.jPlayer.status.currentTime>.1&&e.find("[playid]").css({"z-index":"-1",visibility:"hidden"})}},loadedmetadata:function(){d.deferred.resolveWith(d)},durationchange:function(){},play:function(){d.onPlay(),d.playing=!0,d.flashAlertTimeout&&clearTimeout(d.flashAlertTimeout),d.startCount(),d.firstPlay===!0&&(d.onFirstPlay(),d.firstPlay=!1,a=setInterval(function(){0!==parseFloat(d.video.data("jPlayer").status.duration)&&(d.duration=d.video.data("jPlayer").status.duration,d.setTotalTime(d.duration),d.scormData.duration=d.duration,d.setVolume(d.VolumeLevel),clearInterval(a))},100)),e.find("[playid]").css({"z-index":"-1",visibility:"hidden"}),e.children(".controls").children("#play").hide(),e.children(".controls").children("#pause").show(),e.children(".controls").find("#progress").slider("enable"),e.find("#progress").find(".ui-slider-handle").attr("tabindex","0")},pause:function(){d.flashAlertTimeout&&clearTimeout(d.flashAlertTimeout),d.onPause(),d.playing=!1,d.endCount(),e.children(".controls").children("#pause").hide(),e.children(".controls").children("#play").show()},ended:function(a){d.flashAlertTimeout&&clearTimeout(d.flashAlertTimeout),d.setCurrentTime(a.jPlayer.status.duration),d.onEnd(),d.options.playOnlyOnce||(e.find("[playid]").css({"z-index":"1009",visibility:"visible"}),d.jObject.find(".video").jPlayer("pause",0)),d.endCount(),e.children(".controls").children("#pause").hide(),e.children(".controls").children("#play").show()},error:function(a){0!==window.location.href.indexOf("file://")||!$(this).is(":visible")||global_player.hasShownFlashTrustedAlert||"e_flash"!=a.jPlayer.error.type&&"e_url_not_set"!=a.jPlayer.error.type||d.showFlashTrustedAlert()}}),e.children(".player").children(".video").children().attr("data-flash","flash"),e.find(".overlay").click(function(){(d.firstPlay||!d.options.playOnlyOnce)&&d.handleVideoClickEvent()}),d.setUpControls()},Gadget.VideoComponent.prototype.setUpControls=function(){var a,b,c,d,e,f=this,g=this.jObject;g.find("[playid]").click(function(){f.options.disableClickToPlayPause?f.isTouchDevice&&f.options.toggleControls===!0&&g.find(".controls").fadeIn():(f.play(),f.isTouchDevice&&f.options.toggleControls===!0&&g.find(".controls").fadeOut())}),g.find("[playid]").find(".play-button").sliderbutton({buttonClassName:"play-button",slider:!1,clickFunction:function(){f.options.disableClickToPlayPause||f.play(),f.isTouchDevice&&f.options.toggleControls===!0&&g.find(".controls").fadeOut()}}),f.options.controls===!0&&(g.append('<div class="controls" id="controls"></div>'),f.options.play===!0&&(g.children(".controls").append('<div class="ctr play" id="play" data-icon="ic-arrow-play" alt="'+f.labelOpts.playToolTip+'" title="'+f.labelOpts.playToolTip+'"/>'),g.children(".controls").append('<div style="display:none;" class="ctr pause" id="pause" data-icon="ic-arrow-play" alt="'+f.labelOpts.pauseToolTip+'" title="'+f.labelOpts.pauseToolTip+'"/>'),g.find("#play").sliderbutton({buttonClassName:"play",slider:!1,clickFunction:function(){f.play(),f.isTouchDevice&&f.options.toggleControls===!0&&g.find(".controls").fadeOut(),g.find("#pause").focus()}}),g.find("#pause").sliderbutton({buttonClassName:"pause",slider:!1,clickFunction:function(){f.pause(),f.isTouchDevice&&f.options.toggleControls===!0&&g.children(".controls").fadeIn(),g.find("#play").focus()}})),f.options.volumebar===!0&&(f.isTouchDevice||(g.children(".controls").append('<div class="ctr mute" id="mute" data-icon="ic-volume-off" alt="'+f.labelOpts.muteToolTip+'" title="'+f.labelOpts.muteToolTip+'"/>'),g.children(".controls").append('<div style="display:none;" class="ctr unmute" id="unmute" data-icon="ic-volume-on" alt="'+f.labelOpts.unMuteToolTip+'" title="'+f.labelOpts.unMuteToolTip+'"/>'),g.find("#mute").sliderbutton({buttonClassName:"mute",slider:!1,clickFunction:function(){f.mute(),g.find("#unmute").focus()}}),g.find("#unmute").sliderbutton({buttonClassName:"unmute",slider:!1,clickFunction:function(){f.unmute(),g.find("#mute").focus()}}),g.children(".controls").append('<div id="volume-bar-container"><div id="volume-bar"></div></div>'))),f.options.progressbar===!0&&(g.children(".controls").append('<div class="progress-wrapper"><div id="progress"></div></div>'),g.children(".controls").append('<div id="progress-time"></div>'),f.setProgressBarWidth()),f.options.time===!0&&(f.currentTimeCtrl=$('<div id="current-time">00:00</div>'),g.find(".controls #progress-time").append(f.currentTimeCtrl),g.find(".controls #progress-time").append('<div id="duration">/  00:00</div>')),f.options.showStopPointToggle===!0&&(g.children(".controls").append('<div style="display:none;" class="ctr show-stop-point" data-icon="show-stop" id="show-stop-point" alt="'+f.labelOpts.showStopPointToolTip+'" title="'+f.labelOpts.showStopPointToolTip+'"/>'),g.children(".controls").append('<div class="ctr hide-dp" id="hide-stop-point" data-icon="hide-stop" alt="'+f.labelOpts.hideStopPointToolTip+'" title="'+f.labelOpts.hideStopPointToolTip+'"/>'),g.find("#show-stop-point").sliderbutton({buttonClassName:"show-stop-point",slider:!1,clickFunction:function(){f.setStopPointVisibility(!0),g.find("#hide-stop-point").focus()
}}),g.find("#hide-stop-point").sliderbutton({buttonClassName:"hide-stop-point",slider:!1,clickFunction:function(){f.setStopPointVisibility(!1),g.find("#show-stop-point").focus()}}),f.setStopPointVisibility(!0)),f.options.caption===!0&&(g.children(".controls").append('<div style="display:none;" class="ctr show-cc" id="show-cc" data-icon="ic-close-caption-on" alt="'+f.labelOpts.ccShowToolTip+'" title="'+f.labelOpts.ccShowToolTip+'"/>'),g.children(".controls").append('<div class="ctr hide-cc" id="hide-cc" data-icon="ic-close-caption-off" alt="'+f.labelOpts.ccHideToolTip+'" title="'+f.labelOpts.ccHideToolTip+'"/>'),g.find("#show-cc").sliderbutton({buttonClassName:"show-cc",slider:!1,clickFunction:function(){f.sendAnalytics("video_showclosedcaption"),f.showCC(),g.find("#hide-cc").focus()}}),g.find("#hide-cc").sliderbutton({buttonClassName:"hide-cc",slider:!1,clickFunction:function(){f.hideCC(),g.find("#show-cc").focus()}})),f.options.fullscreen===!0&&(g.children(".controls").append('<div class="ctr enter-full" id="enter-full" data-icon="ic-fullscreen"  alt="'+f.labelOpts.fullScreenToolTip+'" title="'+f.labelOpts.fullScreenToolTip+'"/>'),g.children(".controls").append('<div style="display:none;" class="ctr exit-full" data-icon="ic-exit-fullscreen" id="exit-full" alt="'+f.labelOpts.exitFullScreenToolTip+'" title="'+f.labelOpts.exitFullScreenToolTip+'"/>'),g.find("#enter-full").sliderbutton({buttonClassName:"enter-full",slider:!1,clickFunction:function(){f.sendAnalytics("video_fullscreenlaunch"),f.enterFullScreen(),g.find("#exit-full").focus()}}),g.find("#exit-full").sliderbutton({buttonClassName:"exit-full",slider:!1,clickFunction:function(){f.sendAnalytics("video_fullscreenexit"),f.exitFullScreen(),g.find("#enter-full").focus()}}),$.browser.msie&&7===parseInt($.browser.version,10)&&g.find("#exit-full").sliderbutton("keyPressEventHandler",function(a){9===a.keyCode&&(a.preventDefault(),f.isFullScreen&&g.find("[tabindex]").each(function(){return $(this).is(":visible")&&"hidden"!==$(this).css("visibility")&&"flash"!==$(this).attr("data-flash")?($(this).focus(),!1):void 0}))})),f.options.controls&&"allControlsAutoHide"!==f.options.videoVersion&&g.find("#play-button").attr({"aria-hidden":!0,tabindex:"-1"}),f.isTouchDevice||(g.find("#volume-bar-container").hover(function(){clearTimeout(b),g.find("#volume-bar-container").is(":visible")?(g.find("#volume-bar-container").find("*").show(),g.find("#volume-bar-container").show()):(g.find("#volume-bar-container").find("*").fadeIn(),g.find("#volume-bar-container").fadeIn())},function(){b=setTimeout(function(){g.find("#volume-bar-container").find("*").fadeOut(),g.find("#volume-bar-container").fadeOut()},600)}),g.children(".controls").children("#mute, #unmute").hover(function(){clearTimeout(b),g.find("#volume-bar-container").is(":visible")?(g.find("#volume-bar-container").find("*").show(),g.find("#volume-bar-container").show()):(g.find("#volume-bar-container").find("*").fadeIn(),g.find("#volume-bar-container").fadeIn())},function(){b=setTimeout(function(){g.find("#volume-bar-container").find("*").fadeOut(),g.find("#volume-bar-container").fadeOut()},600)}),g.find("#volume-bar-container").hide(),f.options.toggleControls===!0&&(g.children(".player").find("*").bind("mousemove",function(){clearTimeout(a),g.children(".controls").is(":visible")?g.children(".controls").show():g.children(".controls").fadeIn(),a=setTimeout(function(){g.children(".controls").fadeOut()},1200)}),g.children(".controls").hover(function(){clearTimeout(a),g.children(".controls").is(":visible")?g.children(".controls").show():g.children(".controls").fadeIn()},function(){a=setTimeout(function(){g.children(".controls").fadeOut()},1200)}),g.children(".controls").hide())),f.canProgress=!1,g.children(".controls").find("#progress").slider({range:"min",min:0,max:100,create:function(){$(this).children(".ui-slider-handle").removeAttr("href")},start:function(a){a.stopImmediatePropagation(),a.stopPropagation(),$(a.toElement).hasClass("clip-clicker")&&a.preventDefault();try{f.html5?f.fireEvent(f.eventType.sliderChangeStarted,f.video[0].currentTime):f.fireEvent(f.eventType.sliderChangeStarted,f.video.data("jPlayer").status.currentTime)}catch(b){}},slide:function(a,b){return b.value>=f.maxSlider?!1:(f.canProgress=!0,c=b.value/100,f.html5===!0?(f.scormData.duration=d=g.children(".player").children("video")[0].duration,e=d*c,f.setCurrentTime(e),g.children(".player").children("video")[0].currentTime=e,f.onSeek(e)):(f.scormData.duration=d=g.find(".video").data("jPlayer").status.duration,e=d*c,f.setCurrentTime(e),g.find(".video").data("jPlayer").status.paused?g.find(".video").jPlayer("pause",e):g.find(".video").jPlayer("play",e),f.onSeek(e)),void g.find("#progress").find(".ui-slider-handle").attr({alt:f.currentTimeCtrl.html(),title:f.currentTimeCtrl.html()}))},stop:function(){f.canProgress=!1}}),g.find("#progress").find(".ui-slider-handle").attr({alt:f.currentTimeCtrl.html(),title:f.currentTimeCtrl.html()}),f.isTouchDevice||g.children(".controls").children("#volume-bar-container").children("#volume-bar").slider({orientation:f.options.volumebarDirection,range:"min",min:0,max:100,create:function(){$(this).children(".ui-slider-handle").removeAttr("href")},slide:function(a,b){f.setVolume(b.value)}}),this.isMute=!1,this.html5===!0&&f.setVolume(f.VolumeLevel),g.find("#progress").slider("disable"),g.find("#progress").find(".ui-slider-handle").keyup(function(){PearsonGL.utils.focusItemOn(this)}),g.find("#progress").find(".ui-slider-handle").blur(function(){PearsonGL.utils.focusItemOff(this)})),f.isTouchDevice||g.keydown(function(a){switch(a.keyCode){case 32:f.isPlaying()?f.pause():f.play();break;case 39:f.getTime()<f.durationOfVideo&&f.seek(f.getTime()+1);break;case 37:f.getTime()>0&&f.seek(f.getTime()-1)}}),void 0!=f.options.srt&&f.options.srt.length>0&&(g.find(".player").append('<div id="cc"></div>'),f.getCaption()),this.html5===!0&&f.htmlEvents(),g.find("img").Protector(),f.addAccessibility(g),f.options.caption===!0&&(f.options.showCC||f.hideCC()),f.addLongDescription(g.find("#video-poster"),f.options.longDesc)},Gadget.VideoComponent.prototype.htmlEvents=function(){var a=this,b=a.jObject,c=!0;this.video.on("play",function(c){c.stopImmediatePropagation(),b.find("[playid]").css({"z-index":"-1",visibility:"hidden"}),a.hasEnded=!1,a.onPlay(),a.playing=!0,a.firstPlay===!0&&(a.onFirstPlay(),a.firstPlay=!1,b.children(".controls").find("#progress").slider("enable"),b.find("#progress").find(".ui-slider-handle").attr("tabindex","0"),b.children(".controls").children("#play").hide(),b.children(".controls").children("#pause").show(),a.setProgressBarWidth())}),this.video.on("playing",function(){a.startCount(),c===!0&&(c=!1,a.setTotalTime(a.video[0].duration),a.scormData.duration=a.video[0].duration)}),this.video.on("pause",function(b){b.stopImmediatePropagation(),a.hasEnded===!1&&(a.endCount(),a.hasEnded=!1,a.onPause(),a.playing=!1)}),this.video.on("ended",function(){a.hasEnded=!0,a.endCount(),a.setCurrentTime(a.video[0].duration),a.onEnd(),a.options.playOnlyOnce||b.find("[playid]").css({"z-index":"1009",visibility:"visible"}),a.video[0].pause(),b.children(".controls").children("#pause").hide(),b.children(".controls").children("#play").show()}),this.video.on("timeupdate",function(){b.children(".player").children(".video").attr({width:b.find(".player").width(),height:b.find(".player").height()}).css({width:b.find(".player").width(),height:b.find(".player").height()}),a.canProgress===!1&&a.setCurrentTime(a.video[0].currentTime)}),this.video.on("loadedmetadata",function(){a.onloadedmetadata(this.duration)}),a.isTouchDevice&&this.video.on("webkitendfullscreen",function(){a.exitFullScreen()}),b.find("video").click(function(){a.handleVideoClickEvent()}),a.options.autoPlay===!0&&!a.isTouchDevice&&b.find(".video").is(":visible")&&a.play()},Gadget.VideoComponent.prototype.onloadedmetadata=function(a){var b=this.jObject;this.firstPlay===!0&&a>0&&a!==2/0&&(this.setTotalTime(a),this.scormData.duration=a,b.children(".controls").find("#progress").slider("enable"),b.find("#progress").find(".ui-slider-handle").attr("tabindex","0"),this.setProgressBarWidth()),this.deferred.resolveWith(this)},Gadget.VideoComponent.prototype.play=function(a,b){var c=this;this.deferred.done(function(){if(0==this.disablePlay){this.attemptToPlay=!0,this.jObject.children(".controls").children("#play").hide(),this.jObject.children(".controls").children("#pause").show();var d=this.jObject.find("#progress").find(".ui-slider-handle").css("left");if(this.firstPlay&&"0px"===d){this.jObject.find("#play-button").hide();var e=this.jObject.find("#video-loading");try{this.spinner=new Spinner({color:"#000"}).spin(),$(e).append(this.spinner.el),this.hasSpinner=!0}catch(f){}}this.html5===!0?(a?this.video[0].currentTime=0:$.isNumeric(b)&&(this.video[0].currentTime=b),this.fireEvent(this.eventType.played,this.video[0].currentTime),this.video[0].play()):a?setTimeout(function(){c.video.jPlayer("play",0),c.fireEvent(c.eventType.played,0)},500):(this.video.jPlayer("play",parseInt(b,10)),this.fireEvent(this.eventType.played,$.isNumeric(parseInt(b,10))?b:this.video.data("jPlayer").status.currentTime)),this.html5||0!==window.location.href.indexOf("file://")||!this.firstPlay||global_player.hasShownFlashTrustedAlert||(this.flashAlertTimeout=setTimeout(function(){c.playing||c.showFlashTrustedAlert()},5e3))}})},Gadget.VideoComponent.prototype.playDisable=function(a){this.disablePlay=a},Gadget.VideoComponent.prototype.pause=function(a){this.fireEvent(this.eventType.paused,a),this.jObject.children(".controls").children("#pause").hide(),this.jObject.children(".controls").children("#play").show(),this.html5===!0?this.video&&this.video[0].pause():this.jObject.find(".video").jPlayer("pause",a)},Gadget.VideoComponent.prototype.mute=function(){this.onMute(),this.jObject.children(".controls").children("#mute").hide(),this.jObject.children(".controls").children("#unmute").show(),this.html5===!0?(this.jObject.children(".player").children("video").get(0).volume=0,this.isMute=!0):(this.jObject.find(".video").jPlayer("volume",0),this.isMute=!0)},Gadget.VideoComponent.prototype.unmute=function(){this.onUnmute(),this.jObject.children(".controls").children("#unmute").hide(),this.jObject.children(".controls").children("#mute").show(),this.html5===!0?(this.isMute=!1,this.jObject.children(".player").children("video").get(0).volume=this.volume):(this.jObject.find(".video").jPlayer("volume",this.volume),this.isMute=!1)},Gadget.VideoComponent.prototype.setCurrentTime=function(a){var b,c,d,e,f=this,g=f.jObject,h=0;this.deferred.done(function(){if(void 0!=f.options.srt&&f.options.srt.length>0&&f.isDownloadedSrt&&f.showCaption(),a>0&&f.hasSpinner&&(f.spinner.stop(),g.find("#video-loading").remove(),f.hasSpinner=!1),!f.hasEnded&&void 0!==f.options.clip&&f.options.clip.length>0&&!f.canProgress)for(b=a,h=0;h<=f.clipLength-1;h++)if(!f.options.clip[h].beenAt&&b>=f.options.clip[h].time){f.previous=a,f.options.clip[h].beenAt=!0,e=this.html5===!0?g.children(".player").children("video")[0].duration:g.find(".video").data("jPlayer").status.duration,f.onClip(f,f.options.clip,h,b,g.find("#progress"),e);break}this.gettime=a,c=a,d=Math.floor(c/60),c%=60,d=10>d?"0"+Math.floor(d):Math.floor(d),c=Math.floor(c)<10?"0"+Math.floor(c):Math.floor(c),this.currentTimeCtrl&&this.currentTimeCtrl.text(d+":"+c),this.html5===!0?this.setProgress(this.getTime(),this.video[0].duration):this.setProgress(this.getTime(),this.jObject.find(".video").data("jPlayer").status.duration)})},Gadget.VideoComponent.prototype.setTotalTime=function(a){var b,c;this.durationOfVideo=a,void 0!==this.options.clip&&this.options.clip.length>0&&this.setUpClips(a),b=a,c=Math.floor(b/60),b%=60,c=10>c?"0"+Math.floor(c):Math.floor(c),b=Math.floor(b)<10?"0"+Math.floor(b):Math.floor(b),this.jObject.children(".controls").find("#duration").text("/  "+c+":"+b)},Gadget.VideoComponent.prototype.setProgress=function(a,b){var c=this.jObject.find("#progress");if(c.length>0){var d=a/b*100;this.jObject.children(".controls").find("#progress").slider("option","value",d),this.jObject.find("#progress").find(".ui-slider-handle").attr({alt:this.currentTimeCtrl.html(),title:this.currentTimeCtrl.html()})}},Gadget.VideoComponent.prototype.setVolume=function(a){this.VolumeLevel=a,this.html5===!0?(a/=100,this.isMute===!1&&(this.video[0].volume=a),this.volume=a,a=100*a):(a/=100,this.isMute===!1&&this.jObject.find(".video").jPlayer("volume",a),this.volume=a,a=100*a),this.setVolumeBar(parseInt(a))},Gadget.VideoComponent.prototype.setVolumeBar=function(a){this.jObject.find("#volume-bar").slider("option","value",a),this.jObject.find("#volume-bar").find(".ui-slider-handle").attr({alt:a+"%",title:a+"%"})},Gadget.VideoComponent.prototype.enterFullScreen=function(){var a,b,c,d,e,f=this,g=f.jObject;f.isTouchDevice?this.isPlaying()&&(this.onFullscreen(),this.isFullScreen=!0,g.children(".player").children("video")[0].webkitEnterFullscreen()):(this.onFullscreen(),this.isFullScreen=!0,g.children(".controls").children("#enter-full").hide(),this.jObject.children(".controls").children("#exit-full").show(),this.jObject.addClass("fs-mode"),a=$(window).width(),b=$(window).height(),g.children(".player").children(".video").attr({width:a,height:b}).css({width:a,height:b}),g.children(".player").children(".video").children().attr({width:a,height:b}).css({width:a,height:b}),g.children(".player").css({height:b,width:a}),this.setProgressBarWidth(),c=a/f.posterWidth,d=b/f.posterHeight,e=c,c*f.posterHeight>b&&(e=d),g.find("#video-poster").css({width:f.posterWidth*e,height:f.posterHeight*e,left:(f.posterWidth*e-a)/2*-1,top:(f.posterHeight*e-b)/2*-1}))},Gadget.VideoComponent.prototype.exitFullScreen=function(){var a=this.jObject;this.onFullscreenExit(),this.isFullScreen=!1,this.jObject.children(".controls").children("#exit-full").hide(),this.jObject.children(".controls").children("#enter-full").show(),this.jObject.removeClass("fs-mode"),this.jObject.children(".player").attr("style","");var b=a.find(".video-poster-pos").width(),c=a.find(".video-poster-pos").height();a.children(".player").children(".video").attr({width:b,height:c}).css({width:b,height:c}),a.children(".player").children(".video").children().attr({width:b,height:c}).css({width:b,height:c}),this.jObject.find("#video-poster").removeAttr("style"),this.setProgressBarWidth()},Gadget.VideoComponent.prototype.showCC=function(){this.jObject.find("#cc").show(),this.jObject.children(".controls").children("#show-cc").hide(),this.jObject.children(".controls").children("#hide-cc").show()},Gadget.VideoComponent.prototype.hideCC=function(){this.jObject.find("#cc").hide(),this.jObject.children(".controls").children("#hide-cc").hide(),this.jObject.children(".controls").children("#show-cc").show()},Gadget.VideoComponent.prototype.setStopPointVisibility=function(a){this.stopAtStopPoints=a,a?(this.jObject.find(".progress-wrapper .clip").show(),this.jObject.children(".controls").children("#show-stop-point").hide(),this.jObject.children(".controls").children("#hide-stop-point").show()):(this.jObject.find(".progress-wrapper .clip").hide(),this.jObject.children(".controls").children("#hide-stop-point").hide(),this.jObject.children(".controls").children("#show-stop-point").show())},Gadget.VideoComponent.prototype.getTime=function(){return this.gettime},Gadget.VideoComponent.prototype.seek=function(a){this.onSeek(a),this.setCurrentTime(a),this.html5===!0?this.jObject.children(".player").children("video")[0].currentTime=a:this.jObject.find(".video").data("jPlayer").status.paused?this.jObject.find(".video").jPlayer("pause",a):this.jObject.find(".video").jPlayer("play",a)},Gadget.VideoComponent.prototype.setUpClips=function(a){var b,c,d,e=this,f=this.jObject,a=Math.floor(a);for(d=0;d<=e.clipLength-1;d++)b=Math.floor(this.options.clip[d].time/a*100),f.find("#progress").append('<div data-id="'+d+'" id="clip'+d+'" class="clip" style="display:none;left:'+b+'%"></div>'),this.options.clip[d].stop||f.find('.clip[data-id="'+d+'"]').addClass("no-stop"),void 0!==this.options.clip[d].text&&this.options.clip[d].text.length>0&&f.find('.clip[data-id="'+d+'"]').append('<div class="clip-clicker"><label class="hidden-label">'+this.options.clip[d].text+'</label><div class="clip-text"><div class="c-text">'+this.options.clip[d].text+'</div><div class="clip-bk"></div><div class="clip-point"></div></div></div>');this.jObject.children(".controls").find("#progress").children(".clip").fadeIn(500),this.jObject.find(".clip-clicker").sliderbutton({buttonClassName:"clip-clicker",slider:!1,clickFunction:function(a){if(d=a.jObject.parent(".clip").attr("data-id"),void 0!==e.options.clip[d].text&&e.options.clip[d].text.length>0&&(c=e.jObject.find('.clip[data-id="'+d+'"] .clip-text'),c.css("left","-"+c.width()/2+"px")),parseFloat(e.previous)===parseFloat(e.options.clip[a.jObject.parent(".clip").attr("data-id")].time)?e.jObject.find('.clip[data-id="'+a.jObject.parent(".clip").attr("data-id")+'"]').find(".clip-text").is(":visible")?e.jObject.find(".clip").find(".clip-text").dequeue().hide():(e.jObject.find(".clip").find(".clip-text").dequeue().hide(),e.jObject.find('.clip[data-id="'+a.jObject.parent(".clip").attr("data-id")+'"]').find(".clip-text").show()):(e.jObject.find(".clip").find(".clip-text").dequeue().hide(),e.jObject.find('.clip[data-id="'+a.jObject.parent(".clip").attr("data-id")+'"]').find(".clip-text").show(),e.seek(e.options.clip[a.jObject.parent(".clip").attr("data-id")].time),e.previous=e.options.clip[a.jObject.parent(".clip").attr("data-id")].time),e.options.clip[a.jObject.parent(".clip").attr("data-id")].stop){var b=e.options.clip[d].time+.1;e.pause(b),e.html5?e.video[0].currentTime=b:e.setCurrentTime(b)}}}),e.setStopPointVisibility(e.stopAtStopPoints)},Gadget.VideoComponent.prototype.startCount=function(){var a=new Date;this.startcount=Math.floor(a.getTime()/1e3)},Gadget.VideoComponent.prototype.endCount=function(){var a=new Date,b=Math.floor(a.getTime()/1e3),c=b-this.startcount;this.scormData.timeWatched=this.scormData.timeWatched+c,this.currentTimeWatched+=c},Gadget.VideoComponent.prototype.getData=function(){return this.scormData},Gadget.VideoComponent.prototype.isPlaying=function(){return this.playing},Gadget.VideoComponent.prototype.onFirstPlay=function(){},Gadget.VideoComponent.prototype.onPlay=function(){},Gadget.VideoComponent.prototype.onPause=function(){},Gadget.VideoComponent.prototype.onEnd=function(){this.fireEvent(this.eventType.paused),this.gettime=0,this.options.playOnlyOnce||this.jObject.find("#cc").html(""),this.onSeek(0)},Gadget.VideoComponent.prototype.onMute=function(){},Gadget.VideoComponent.prototype.onUnmute=function(){},Gadget.VideoComponent.prototype.onFullscreen=function(){!this.isTouchDevice&&this.html5&&($(".header, .footer").addClass("hide"),$(".hideOnFullScreen").hide());var a=document.location.href;window.PearsonGL&&PearsonGL.globals&&PearsonGL.globals.comm&&PearsonGL.globals.comm.firePostMessageEvent({type:"open",dimensions:{},url:a,name:"video"})},Gadget.VideoComponent.prototype.onFullscreenExit=function(){$(".header, .footer").removeClass("hide"),$(".hideOnFullScreen").show();var a=document.location.href;window.PearsonGL&&PearsonGL.globals&&PearsonGL.globals.comm&&PearsonGL.globals.comm.firePostMessageEvent({type:"close",dimensions:{},url:a,name:"video"})},Gadget.VideoComponent.prototype.onTimeUpdate=function(){},Gadget.VideoComponent.prototype.onSeek=function(a){var b,c=this;if(void 0!==c.options.clip&&c.options.clip.length>0)for(b=0;b<=c.clipLength-1;b++)c.options.clip[b].beenAt=a<c.options.clip[b].time?!1:!0},Gadget.VideoComponent.prototype.onClip=function(a,b,c){var d;a.stopAtStopPoints&&(a.options.clip[c].stop&&(a.canProgress||a.pause(a.options.clip[c].time+.1),a.isTouchDevice&&a.options.toggleControls===!0&&a.options.controls&&a.jObject.children(".controls").fadeIn()),void 0!==a.options.clip[c].text&&a.options.clip[c].text.length>0&&(a.jObject.find(".clip").find(".clip-text").dequeue().hide(),d=a.jObject.find('.clip[data-id="'+c+'"]').find(".clip-text"),d.show().css("left","-"+d.width()/2+"px").delay(3e3).queue(function(){$(this).hide(),$(this).dequeue()})))},Gadget.VideoComponent.prototype.getCaption=function(){var a=this,b=a.options.srt;b&&$.ajax({type:"GET",dataType:"text",url:b,success:function(b){a.isDownloadedSrt=!0,a.playCC(b)},error:function(){a.isDownloadedSrt=!1}})},Gadget.VideoComponent.prototype.toSeconds=function(a){var b,c,d=0;if(a)for(b=a.split(":"),c=0;c<b.length;c++)d=60*d+parseFloat(b[c].replace(",","."));return d},Gadget.VideoComponent.prototype.playCC=function(a){var b,c,d,e,f=this,g=""+a;for(g=g.replace(/\r\r\n/g,"\r\n"),g=g.replace(/\r\n[ \t]+\r\n|\r[ \t]+\r|\n[ \t]+\n/g,"<BR><BR>"),g=g.replace(/\r\n|\r|\n/g,"<BR>"),f.subtitles={},f.time={},c=g.split("<BR><BR>"),b=0;b<=c.length-1;b++)if(st=c[b].split("<BR>"),st.length>=2){if(n=st[0],e=st[1].split(" --> ")[0],o=st[1].split(" --> ")[1],t="",st.length>2)for(t=st[2],d=3;d<st.length;d++)t+="\n"+st[d];f.time[n]=f.toSeconds(e),f.subtitles[n]={n:n,o:f.toSeconds(o),t:t}}f.l=0;for(k in f.subtitles)f.l++},Gadget.VideoComponent.prototype.showCaption=function(){var a,b,c=!1;if(this.l&&this.subtitles)if(b=this.getTime(),this.subtitles.hasOwnProperty(this.l)&&b-this.subtitles[this.l].o>=0)this.jObject.find("#cc").html("");else{for(a=1;a<=this.l+1;a++)if(this.subtitles.hasOwnProperty(a)&&b>=this.time[a]&&b<=this.subtitles[a].o){this.jObject.find("#cc").html(this.subtitles[a].t),c=!0;break}c||this.jObject.find("#cc").html("")}},Gadget.VideoComponent.prototype.stop=function(){this.isStop=!0;var a=" seconds";!this.html5&&this.flashAlertTimeout&&clearTimeout(this.flashAlertTimeout),1===this.currentTimeWatched&&(a=" second"),this.sendAnalytics("video_playduration: "+this.currentTimeWatched+a),this.currentTimeWatched=0,this.pause(),this.options.playOnlyOnce&&!this.html5&&this.jObject.find(".video").jPlayer("pause",0)},Gadget.VideoComponent.prototype.htmlFullScreenAPI=function(a,b){for(var c,d,e=["webkit","moz","ms","o",""],f=0,g=this;f<e.length&&!a[c];){if(c=b,""==e[f]&&(c=c.substr(0,1).toLowerCase()+c.substr(1)),c=e[f]+c,d=typeof a[c],"undefined"!=d)return e=[e[f]],"RequestFullScreen"==b?($(document).bind("fullscreenchange",function(){document.fullscreen||g.exitFullScreen()}),$(document).bind("mozfullscreenchange",function(){document.mozFullScreen||g.exitFullScreen()}),$(document).bind("webkitfullscreenchange",function(){document.webkitIsFullScreen||g.exitFullScreen()})):($(document).unbind("fullscreenchange"),$(document).unbind("mozfullscreenchange"),$(document).unbind("webkitfullscreenchange")),"function"==d?a[c]():a[c];f++}},Gadget.VideoComponent.prototype.gadgetPageShowEvent=function(){this.isStop=!1,this.resize(),this.firstPlay&&!this.attemptToPlay||this.playing||!this.options.playOnlyOnce||!this.options.autoPlay||(this.onSeek(0),this.play(!0))},Gadget.VideoComponent.prototype.resize=function(){var a=this,b=this.jObject;if(!this.isStop&&b.is(":visible")&&!this.isStop){var c=b.find(".player").width(),d=b.find(".player").height();null!==c&&null!==d&&(a.setProgressBarWidth(),a.isFullScreen?a.enterFullScreen():a.html5?b.children(".player").children(".video").attr({width:c,height:d}).css({width:c,height:d}):b.children(".player").children(".video").jPlayer({size:{width:c,height:d}}))}},Gadget.VideoComponent.prototype.handleVideoClickEvent=function(){var a=this,b=this.jObject;return a.options.disableClickToPlayPause&&a.isTouchDevice&&a.options.toggleControls?void b.children(".controls").fadeIn():void(a.isPlaying()?(this.options.disableClickToPlayPause||a.pause(),a.isTouchDevice&&a.options.toggleControls===!0&&b.children(".controls").fadeIn()):(this.options.disableClickToPlayPause||a.play(),a.isTouchDevice&&a.options.toggleControls===!0&&b.find(".controls").fadeOut()))},Gadget.VideoComponent.prototype.setProgressBarWidth=function(){var a=this.jObject,b=a.find(".controls").width()-parseFloat(a.find(".progress-wrapper").css("margin-right"))-parseFloat(a.find(".progress-wrapper").css("margin-left"));a.find("#progress").css("width",b+"px")},Gadget.VideoComponent.prototype.showFlashTrustedAlert=function(){0===window.location.href.indexOf("file://")&&$(this).is(":visible")&&!global_player.hasShownFlashTrustedAlert&&(global_player.hasShownFlashTrustedAlert=!0,alert("To Play Audio and Video files, you need to identify the SCO folder as a trusted location.\nTo specify trusted locations on the Mac, go to System Preferences > Flash Player.\nIn the Flash Player Setting Manager, go to the Advanced tab and click Trusted Location Settings...\nAdd the SCO folder that contains the audio and video files.\nRefresh your browser."))},Gadget.VideoComponent.prototype.showFlashTrustedAlert=function(){0===window.location.href.indexOf("file://")&&$(this).is(":visible")&&!global_player.hasShownFlashTrustedAlert&&(global_player.hasShownFlashTrustedAlert=!0,alert("To Play Audio and Video files, you need to identify the SCO folder as a trusted location.\nTo specify trusted locations on the Mac, go to System Preferences > Flash Player.\nIn the Flash Player Setting Manager, go to the Advanced tab and click Trusted Location Settings...\nAdd the SCO folder that contains the audio and video files.\nRefresh your browser."))},$.fn.videoComponent=function(){if(0!==arguments.length)if("object"==typeof arguments[0]){var a=new Gadget.VideoComponent(this,arguments[0]);$(this).data("video-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("video-component");if(a&&"function"==typeof a[arguments[0]])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1))}},window.Gadget=window.Gadget||{},Gadget.Text=function(a,b,c){if(this.lableOpts={},this.options=$.extend(!0,{gadgetName:"Text[Rich,Styled]",objectiveDescription:"Text is presented to the user.",value:"",audioComponent:{type:"",src:""}},this.options||{}),PearsonGL.GadgetBase2.call(this,b,c),b&&a){this.jObject=$(a),this.initialize(b);var d=1;this.options.scorm&&PearsonGL.utils.isNonEmptyArray(this.options.scorm.interactions)&&PearsonGL.utils.isNonEmptyArray(this.options.scorm.interactions[0].objectives)&&this.options.scorm.interactions[0].objectives[0].score&&(d=this.options.scorm.interactions[0].objectives[0].score.max),this.getLearnerData(),this.setLearnerData({results:[{learnerResponse:"played",correctResponse:"played",raw:d,progressMeasure:1,completionStatus:"completed",successStatus:"passed"}]})}},Gadget.Text.prototype=Object.create(PearsonGL.GadgetBase2.prototype),Gadget.Text.prototype.initialize=function(a){var b=this;this.initGadget(this.options.gadgetName),this.jObject.data("gadget_options",this.options),PearsonGL.utils.getGlobalizedLabel("text_globalization",function(c){$.extend(b.labelOpts,c),delete a.scorm,$.extend(!0,b.options,a),b._globalizationComplete()},this.options.runtimejson.lang)},Gadget.Text.prototype._globalizationComplete=function(){PearsonGL.utils.isNonEmptyString(this.options.value)&&this.jObject.richtextcomponent(this.createRichTextObj(this.options.value)),void 0!==this.options.audioComponent&&""!==this.options.audioComponent.src&&(this.options.audioComponent.labelOpts=this.labelOpts,this.jObject.find(".gadget-textblock .text-audio-component").audioComponent(this.options.audioComponent))},Gadget.RichText=function(a,b,c){this.options={paragraph:[{value:"",audioComponent:{type:"",src:""}}]},Gadget.Text.call(this,a,b,c),!b||!a},Gadget.RichText.prototype=Object.create(Gadget.Text.prototype),Gadget.RichText.prototype._globalizationComplete=function(){var a,b,c;if(this.options.saveText=function(){},PearsonGL.utils.isNonEmptyString(this.options.paragraph[0].value))for(a=0;a<this.options.paragraph.length;a++)c=this.options.paragraph[a],this.jObject.richtextcomponent(this.createRichTextObj(c.value)),b=this.jObject.find(".gadget-textblock:last"),void 0!==c.audioComponent&&""!==c.audioComponent.src&&(c.audioComponent.labelOpts=this.labelOpts,b.audioComponent(c.audioComponent)),a>0&&b.addClass("p-top-margin")},Gadget.StyledText=function(a,b,c){Gadget.Text.call(this,a,b,c)},Gadget.StyledText.prototype=Object.create(Gadget.Text.prototype),window.PearsonGL=window.PearsonGL||{},window.PearsonGL.Gadget=window.PearsonGL.Gadget||{},PearsonGL.Gadget.ComponentImage=function(a,b){this.options={title:"",src:"",dataId:"",protect:!0},this.jObject=$(a),this.initialize(a,b)},PearsonGL.Gadget.ComponentImage.prototype.initialize=function(a,b){if($.extend(!0,this.options,b),void 0!==this.options.src){var c=this.options.src;if(""==c)return}var d=b.noTabIndex?"":"tabIndex='0'";image=$("<span class='image-class-wrapper' "+d+" role='presentation'><img class='image-class' src='"+this.options.src+"'/></span>"),image.find("img").attr({title:this.options.title,alt:this.options.title,"data-element":this.options.dataId}),this.options.protect&&image.Protector(),$(a).append(image),$(a).find(".image-class-wrapper").keyup(function(b){if(9===b.keyCode){var c=$(window).height(),d=$(a).offset();window.scroll(0,d.top-c+$(a).height()+50),PearsonGL.utils.focusItemOn(this)}}).blur(function(){PearsonGL.utils.focusItemOff(this)})},$.fn.imagecomponent=function(){if("object"==typeof arguments[0]||0===arguments.length){var a=new PearsonGL.Gadget.ComponentImage(this,arguments[0]);$(this).data("imagecomponent-component",a)}else if("string"==typeof arguments[0]){var a=$(this).data("imagecomponent-component");if(a&&"function"==typeof a[arguments[0]]){if("function"!=typeof arguments[1])return a[arguments[0]].apply(a,Array.prototype.slice.call(arguments,1));a[arguments[0]]=arguments[1],$(this).data("imagecomponent-component",a)}}},window.Gadget=window.Gadget||{},Gadget.Image=function(a,b,c){this.options={gadgetName:"Image",objectiveDescription:"Image is presented to user.",audioComponent:{type:"toggle",src:""}},PearsonGL.GadgetBase2.call(this,b,c),b&&(this.jObject=$(a),this.initialize())},Gadget.Image.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.Image.prototype.initialize=function(){this.initGadget(this.options.gadgetName),this.jObject.addClass("identifier-image"),this.options.noTabIndex=!0,this.jObject.imagecomponent(this.options),this.jObject.data("gadget_options",this.options),void 0!==this.options.audioComponent&&(this.jObject.find("span").audioComponent(this.options.audioComponent),void 0!==this.options.title&&""!==this.options.title&&this.jObject.find(".audioCursor").attr("aria-label",this.options.title)),this.addAccessibility(this.jObject),this.addLongDescription(this.jObject,this.options.longDesc);var a=1;this.options.scorm&&PearsonGL.utils.isNonEmptyArray(this.options.scorm.interactions)&&PearsonGL.utils.isNonEmptyArray(this.options.scorm.interactions[0].objectives)&&this.options.scorm.interactions[0].objectives[0].score&&(a=this.options.scorm.interactions[0].objectives[0].score.max),this.getLearnerData(),this.setLearnerData({results:[{learnerResponse:"played",correctResponse:"played",raw:a,progressMeasure:1,completionStatus:"completed",successStatus:"passed"}]})},function(a){function b(b){a(b).keyup(function(b){if(9===b.keyCode){var c=a(window).height(),d=a(this).offset();window.scroll(0,d.top-c+a(this).height()+50)}})}function c(a,b){for(var c,d=/<([^>\s]*)[^>]*>/g,e=[],f=0,g="";(c=d.exec(a))&&b;){var h=a.substring(f,c.index).substr(0,b);g+=h,b-=h.length,f=d.lastIndex,b&&(g+=c[0],0===c[1].indexOf("/")?e.pop():c[1].lastIndexOf("/")!==c[1].length-1&&e.push(c[1]))}for(g+=a.substr(f,b);e.length;)g+="</"+e.pop()+">";return g}function d(d,e){a(d).keyup(function(b){if(9!==b.keyCode&&37!==b.keyCode&&38!==b.keyCode&&39!==b.keyCode&&40!==b.keyCode){var d,f=a(this).attr("data-max-length"),g=e.canHighlight?a(this).text():a(this).val(),h=g.length;h>=f&&(d=c(a(this).html(),f),e.canHighlight?a(this).html(d):a(this).val(g.substr(0,f)))}}),b.call(this,d)}a.fn.textanswercomponent=function(b){var c={position:"absolute",maxLength:250,top:0,left:0,height:20,value:"",placeholder:""};b=a.extend(c,b);var e=void 0!==b.value?b.value:"",f=void 0!==b.placeholder?b.placeholder:"",g=((b.width+"").indexOf("%")>-1?b.width:b.width+"px",b.labelId?b.labelId:"");
if(b.canHighlight)b.maxLength=b.maxLength<4e3?b.maxLength:15e3,this.append("<div contenteditable='true' class='custom_textarea' data-max-length='"+b.maxLength+"' data-name='"+b.name+"'></div>"),this.find(".custom_textarea").attr({value:b.value,placeholder:b.placeholder}).css({width:b.width,height:b.height+"px",position:b.position,top:b.top+"px",left:b.left+"px"});else{var h=a("<textarea></textarea>");this.append(h),h.attr({id:g,role:"textbox",placeholder:f,"data-max-length":b.maxLength,"data-name":b.name,"class":"sa_text"}).css({position:b.position,width:b.width,height:b.height,top:b.top+"px",left:b.left+"px",resize:"none"}),h.val(e)}return d.call(this,a(".sa_text:last, .custom_textarea:last"),b),this}}(jQuery),window.Gadget=window.Gadget||{},Gadget.ShortAnswer=function(a,b,c){this.labelOpts={},this.options={gadgetName:"Short Answer",objectiveDescription:"Short essay question is presented to user.",maxLengthText:"You have typed in the maximum letters.",shouldValidateMax:!1,timeOutTime:1e4,content:"",textarea:{value:"",height:"",width:"100%",name:"tnam",position:"relative",maxLength:4e3,top:"0",left:"0"},richtext:{paragraph:[{html:"",audioComponent:{src:"",type:""}}]}},PearsonGL.GadgetBase2.call(this,b,c),b&&a&&(this.jObject=$(a),this.initialize(b))},Gadget.ShortAnswer.prototype=Object.create(PearsonGL.GadgetBase2.prototype),Gadget.ShortAnswer.prototype.initialize=function(a){var b=this;this.initGadget(this.options.gadgetName),this.jObject.data("gadget_options",this.options),PearsonGL.utils.getGlobalizedLabel("shortAnswer_globalization",function(c){$.extend(b.labelOpts,c),delete a.scorm,$.extend(!0,b.options,a),b._globalizationComplete()},this.options.runtimejson.lang)},Gadget.ShortAnswer.prototype._globalizationComplete=function(){var a,b,c=this.options.richtext.paragraph;for(a=0;a<c.length;a++)this.jObject.richtextcomponent(this.createRichTextObj(c[a].value)),void 0!==c[a].audioComponent&&(c[a].audioComponent.labelOpts=this.labelOpts,this.jObject.find(".gadget-textblock:last").audioComponent(c[a].audioComponent));this.jObject.append('<div class="textarea-top"/>'),this.jObject.textanswercomponent(this.options.textarea),this.jObject.append('<div class="textarea-bottom"/>'),this._setEvents(this.jObject.find(".custom_textarea,.sa_text")),this.jObject.find(".sa_text, .custom_textarea").unbind("focus").focus(function(){$(this).addClass("shortanswer-focus")}),b=this.jObject.find(".custom_textarea"),"true"===b.attr("contenteditable")&&b.focus(function(){b.text()===b.attr("placeholder")&&(b.text(""),b.removeClass("placeholder"))}).blur(function(){(""===b.text()||b.text()===b.attr("placeholder"))&&(b.addClass("placeholder"),b.text(b.attr("placeholder")))}).blur(),this.jObject.find(".sa_text").focus().blur(),this.getLearnerData({type:"long-fill-in"})},Gadget.ShortAnswer.prototype._setEvents=function(a){var b=this,c=parseInt($(a).attr("data-max-length"));$("body").bind("click.body",function(){$(".max-length-found").unwrap().remove()}),$(a).blur(function(){if($(this).removeClass("shortanswer-focus"),b.isCommEnabled()&&b.jObject.find("textarea").length>0){var c=$(a).val().trim();b.options.content!==c&&(b.saveLearnerData(),b.options.content=c)}}).keyup(function(a){var d=b.options.textarea.canHighlight?$(this).text():$(this).val(),e=this;if(!b.options.shouldValidateMax&&c===d.length&&9!==a.keyCode&&16!==a.keyCode&&39!==a.keyCode&&37!==a.keyCode){$(".max-length-found").unwrap().remove(),$(this).wrap("<span class='max-len-wrapper' style='position:relative'></span>").parent().append('<div tabindex="0" class="max-length-found NO-HIGHLIGHT"><span>'+b.options.maxLengthText+'</span><span class="max-length-pointer"></span></div>');var f=($(".max-length-found").outerHeight(),$(".max-length-found").find("span:first").width()),g=$(this).outerWidth(),h=$(this).outerHeight(),i=($(this).position().top,10),j=h+parseInt(i,10),k=(g-f)/2,l={};k+="px",j+="px",l={position:"absolute",top:j,left:k},$(".max-length-found").css(l).focus(),window.clearTimeout(b.popuptimeout),window.setTimeout(function(){var a=$(window).height(),b=50,c=$(e).offset();a-b+window.scrollY<c.top&&window.scroll(0,c.top-a+$(e).height()+b)},100),b.popuptimeout=window.setTimeout(function(){$(".max-length-found").unwrap().remove()},b.options.timeOutTime)}})},Gadget.ShortAnswer.prototype.parseLearnerData=function(){var a=this.options.scorm;PearsonGL.utils.isNonEmptyArray(a.interactions)&&a.interactions[0].learner_response&&a.interactions[0].learner_response.text&&(this.jObject.find("textarea").val(a.interactions[0].learner_response.text),this.options.content=a.interactions[0].learner_response.text)},Gadget.ShortAnswer.prototype.gadgetUnload=function(){this.saveLearnerData()},Gadget.ShortAnswer.prototype.saveLearnerData=function(){var a,b=this,c=this.jObject.find("textarea"),d=[];this.isCommEnabled()&&c.length>0&&(a=c.val().trim(),this.options.scorm.interactions.forEach(function(c){var e=b.getResult(c.objectives[0]);e.learnerResponse={text:a},e.correctResponses=[],d.push(e)}),this.options.content!==a&&(this.options.content=a,this.setLearnerData({gadgetId:this.gadgetUniqueId,data:this.options.scorm,results:d})))},Gadget.ShortAnswer.prototype.getResult=function(a){var b={},c=0;return""!==this.jObject.find("textarea").val().trim()&&(c+=a.score.max),b.raw=c,b.min=a.score.min,b.max=a.score.max,b.scaled=b.max-b.min!==0?(b.raw-b.min)/(b.max-b.min):1,a.score=b,a.success_status="unknown",parseFloat(a.score.scaled)>=PearsonGL.globals.comm.getPassingScore()&&(a.success_status="passed"),a.completion_status=this.getObjectiveCompletionStatus(a),a.progress_measure=1,a},Gadget.ShortAnswer.prototype.getObjectiveCompletionStatus=function(a){var b,c=!0,d=this.jObject.find("textarea");for(b=0;b<d.length*a.completionThreshold;b+=1)if(""===$(d[b]).val().trim()){c=!1;break}return c?"completed":"incomplete"},window.Gadget=window.Gadget||{},Gadget.GraphicOrganizer=function(a,b,c){this.labelOpts={},this.options={gadgetName:"Graphic Organizer",objectiveDescription:"Organizer is presented to user to fill in. This may include one or more text fill in areas.",content_array:[],focusedField:"",maxLengthText:"You have typed in the maximum letters.",shouldValidateMax:!1,timeOutTime:1e4,textblocks:[{paragraph:[{value:"",audioComponent:{type:"",src:""}}]}]},this.authOptions=$.extend(!0,{},b),PearsonGL.GadgetBase2.call(this,b,c),b&&(this.jObject=$(a),this.initialize())},Gadget.GraphicOrganizer.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.GraphicOrganizer.prototype.initialize=function(){var a=this;this.initGadget(this.options.gadgetName),PearsonGL.utils.getGlobalizedLabel("go_globalization",function(){a.jObject.data("gadget_options",a.options),a.globalizationComplete()},this.options.runtimejson.lang)},Gadget.GraphicOrganizer.prototype.globalizationComplete=function(){this.jObject.addClass("graphicorganizer-identifier"),this.jObject.append('<div class="img"></div>');var a,b,c,d,e=this,f=0,g=[],h=[],i=0,j=0,k=this.options.groups,l=this.options.groups.length,m=0,n=this.jObject;for(void 0!==this.options.imageLabels&&(g=this.options.imageLabels,j=g.length),void 0!==this.options.textLabels&&(h=this.options.textLabels,i=h.length),b=0;i>b;b++)d=h[b].width?"width:"+h[b].width+"px;":"",n.append('<div id="richtext_'+m+'" class="richtext" style="position:absolute;top:'+h[b].labelY+"px;left:"+h[b].labelX+"px;"+d+'">'),n.find("#richtext_"+m).richtextcomponent(this.createRichTextObj(h[b].labelText.value)),n.find("#richtext_"+m+" .gadget-textblock").removeAttr("tabindex").attr({"aria-hidden":!0}),void 0!==h[b].labelText.audioComponent&&""!==h[b].labelText.audioComponent.src&&(c=n.find("#richtext_"+m),h[b].labelText.audioComponent.labelOpts=this.labelOpts,c.find(".gadget-textblock").audioComponent(h[b].labelText.audioComponent)),m++;for(b=0;j>b;b++)n.append('<div id="richtext_'+m+'" class="richtext" style="position:absolute;top:'+g[b].labelY+"px;left:"+g[b].labelX+'px;">'),n.find("#richtext_"+m).imagecomponent(g[b].labelImage),n.find("#richtext_"+m+" .image-class-wrapper").removeAttr("tabindex").attr({"aria-hidden":!0}),void 0!==g[b].labelImage.audioComponent&&""!==g[b].labelImage.audioComponent.src&&(c=n.find("#richtext_"+m),g[b].labelImage.audioComponent.labelOpts=this.labelOpts,c.find("span").audioComponent(g[b].labelImage.audioComponent),c.find("p").css("float","left")),m++;for(n.append('<div class="sa"></div>'),b=0;l>b;b++){var o=k[b].shortanswer,p=k[b].groupName;if(void 0!==o){n.find(".sa").append('<span id="group_'+b+'"></span>');var q=n.find("#group_"+b);for(a=0;a<o.length;a+=1){var r=o[a];r.name="tb_"+f,r.labelId="group_"+b+"_"+r.name,q.append('<label class="hidden-label" for="'+r.labelId+'">'+p+" "+(a+1)+"</label>"),q.textanswercomponent(r),q.find("textarea:last").attr({"data-index":f,title:void 0==p?"":p}),e.onBlur(q.find("textarea:last")),e.onFocus(q.find("textarea:last")),e.onKeyUp(q.find("textarea:last")),f+=1}}void 0!==k[b].scorm&&this.options.scorm.interactions.push(k[b].scorm.interactions[0]),n.find(".image-class-wrapper").focus()}this.hasLoaded=!0,this.options.image.noTabIndex=!0,n.find(".img").imagecomponent(this.options.image),n.find(".image-class").attr("style","z-index:0;position:relative;"),this.addLongDescription(n.find(".img"),this.options.image.longDesc),this.addAccessibility(n),n.keyup(function(a){if(9===a.keyCode){var b=$(window).height(),c=$(e.options.focusedField).offset();window.scroll(0,c.top-b+$(e.options.focusedField).height()+50)}}),this.getLearnerData({type:"fill-in"})},Gadget.GraphicOrganizer.prototype.onBlur=function(a){var b=this;$(a).unbind("blur").blur(function(){if($(this).removeClass("shortanswer-focus"),b.isCommEnabled())try{var c=b.options.content_array,d=$(a).attr("data-index"),e=$(a).val().trim();c[d]===e||$(a).hasClass("placeholder")||(b.hasLoaded&&b.saveLearnerData(),c[d]=e)}catch(f){PearsonGL.logger.error(f)}})},Gadget.GraphicOrganizer.prototype.onKeyUp=function(a){var b=this,c=parseInt($(a).attr("data-max-length"),10);$("body").bind("click.body",function(){$(".max-length-found").unwrap().remove()}),$(a).keyup(function(a){if(!b.options.shouldValidateMax&&c===$(this).val().length&&9!==a.keyCode&&16!==a.keyCode&&39!==a.keyCode&&37!==a.keyCode){$(".max-length-found").unwrap().remove();var d=$(this).position(),e=.5*$(this).width();$(this).wrap("<span class='max-len-wrapper'></span>").parent().append('<div tabindex="0" class="max-length-found"><span>'+b.options.maxLengthText+'</span><span class="max-length-pointer"></span></div>');var f=$(".max-length-found").outerHeight(),g=10,h=d.top-parseInt(f+g,10)+"px",i=d.left+10+"px",j={};e-=.5*$(".max-length-found").outerWidth(),e+="px",j={position:"absolute",top:h,left:i,"margin-left":e},$(".max-length-found").css(j).focus(),window.clearTimeout(this.popuptimeout),this.popuptimeout=window.setTimeout(function(){$(".max-length-found").unwrap().remove()},b.options.timeOutTime)}})},Gadget.GraphicOrganizer.prototype.onFocus=function(a){var b=this;$(a).unbind("focus").focus(function(){b.options.focusedField=a,$(this).addClass("shortanswer-focus")})},Gadget.GraphicOrganizer.prototype.gadgetUnload=function(){if(this.isCommEnabled()){var a=this.options.focusedField,b=this.options.content_array,c=$(a).attr("data-index"),d=$(a).val()?$(a).val().trim():"";b[c]!==d&&(this.saveLearnerData(),b[c]=d)}},Gadget.GraphicOrganizer.prototype.parseLearnerData=function(){var a,b,c=this.options.scorm.interactions,d=c.length;for(a=0;d>a;a++){for(c[a].groupId="group_"+a,b=0;b<c[a].objectives.length;b++)c[a].objectives[b].groupId="group_"+a;this.setLearner_response(c[a].learner_response)}},Gadget.GraphicOrganizer.prototype.saveLearnerData=function(){if(this.isCommEnabled()){var a,b=[];for(this.options.scorm.suspendData.data=this.scormData,a=0;a<this.options.scorm.interactions.length;a++)result=this.getResult(this.options.scorm.interactions[a].objectives[0]),result.learnerResponse=this.learner_response(),result.correctResponses=[],b.push(result);this.setLearnerData({gadgetId:this.gadgetUniqueId,data:this.options.scorm,results:b})}},Gadget.GraphicOrganizer.prototype.setLearner_response=function(a){if(a.words){var b,c,d=a.words,e=this.jObject.find("textarea.sa_text");$.each(e,function(){return b=$(this).attr("data-index"),c=d[b],void 0==c?!0:($(this).val(c),void(""!==c.trim()&&$(this).removeClass("placeholder")))})}},Gadget.GraphicOrganizer.prototype.getResult=function(a){var b={};try{var c,d,e=$(this.jObject).find("#"+a.groupId+" textarea.sa_text"),f=0;for(d=0;d<e.length;d+=1)c=e[d],""===$(c).val().trim()||$(c).hasClass("placeholder")||(f+=1);a.score.max!==a.score.raw&&(b.raw=parseFloat(a.score.max)*(f/e.length)),b.min=parseFloat(a.score.min),b.max=parseFloat(a.score.max),b.scaled=b.max-b.min!==0?(b.raw-b.min)/(b.max-b.min):1,b.successStatus="failed",a.score=b,"passed"!==a.success_status&&(a.success_status="unknown",b.successStatus="unknown"),parseFloat(a.score.scaled)>=PearsonGL.globals.comm.getPassingScore()&&(a.success_status="passed",b.successStatus="passed"),a.completion_status=this.completion_status(a),b.completionStatus=a.completion_status,a.progress_measure=1,b.progressMeasure=1}catch(g){}return this.giveAllPoints===!0&&(a.score.raw=a.score.max,a.success_status="passed",b.raw=a.score.max,b.successStatus="passed"),b.result=b.scaled,b},Gadget.GraphicOrganizer.prototype.learner_response=function(){var a,b,c,d=$(this.jObject).find("textarea.sa_text"),e=[],f=d.length;for(a=0;f>a;a+=1)b=d[a],c=$(b).val(),$(b).hasClass("placeholder")&&(c=""),e.push(c);return{words:e}},Gadget.GraphicOrganizer.prototype.completion_status=function(a){var b,c=$(this.jObject).find("#"+a.groupId+" textarea.sa_text"),d=c.length;for(b=0;b<c.length;b+=1)currTextBox=c[b],(""===$(currTextBox).val().trim()||$(currTextBox).hasClass("placeholder"))&&d--;return d>=c.length*a.completionThreshold?"completed":"incomplete"},window.Gadget=window.Gadget||{},Gadget.DragAndDrop=function(a,b,c){b&&(this.labelOpts={checkAnswerText:"Check Answers",showCorrectAnswerText:"Show Correct Answers",showMyAnswerText:"Show My Answers",resetText:"Start Over",resetConfirmationText:"<p>Would you like to start over?</p>",closeToolTip:"Close",yesToolTip:"Yes",noToolTip:"No",selectedText:"SELECTED",correctText:"Correct",incorrectText:"Incorrect",turnoffaudio:"Screen reader users disable audio on draggable tiles",turnonaudio:"Screen reader users enable audio on draggable tiles"},this.options={gadgetName:"DragAndDrop",objectiveDescription1:"Drag and Drop with instant feedback. Targets disappear when correctly placed. The user can start over.",objectiveDescription2:"Drag and Drop with instant feedback. Tiles disappear when correctly placed. The user can start over.",objectiveDescription3:"Drag and Drop with free form. User can drop Tiles on any Target.",objectiveDescription4:"Drag and Drop with submitted answers. The user is allowed a set number of attempts.",objectiveDescription5:"Drag and Drop with instant feedback. The user is allowed a set number of attempts.",numberOfTries:1e11,randomize:!1,cloning:!1,draggableText:[],draggableImage:[],textLabels:[],imageLabels:[],draggables:[],droppables:[],labels:[],checkAnswer:{buttonText:"Check Answers"},showCorrectAnswer:{buttonText:"Show Correct Answers",otherButtonText:"Show My Answers"},reset:{buttonText:"Start Over",resetConfirmText:"<p>Would you like to start over?</p>"},selectedText:"SELECTED",correctText:"Correct",incorrectText:"Incorrect",closeToolTip:"Close",yesToolTip:"Yes",noToolTip:"No",turnoffaudio:"Screen reader users disable audio on draggable tiles",turnonaudio:"Screen reader users enable audio on draggable tiles",haveFeedBack:!1,feedBackPopUp:!1,showScore:!1,firstInCorrect:"",firstCorrect:"",finalInCorrect:"",finalCorrect:"",scoreText:"",popupAudio:{audioClass:".popupsound",isPopAudio:!0,trigger:!0},fadeOutFeedback:!1,scorm:{id:""},popupcontainment:".main"},PearsonGL.GadgetBase2.call(this,b,c),this.jObject=$(a),this.initialize(b))},Gadget.DragAndDrop.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.DragAndDrop.prototype.initialize=function(a){var b=this;this.initGadget(this.options.gadgetName),PearsonGL.utils.getGlobalizedLabel("draganddrop_globalization",function(c){b.transferLabels(c),delete a.scorm,$.extend(!0,b.options,a),b.globalizationComplete()},this.options.runtimejson.lang)},Gadget.DragAndDrop.prototype.transferLabels=function(a){var b=this.options,c=$.extend(!0,this.labelOpts,a);b.reset.buttonText=c.resetText,b.reset.resetConfirmText=c.resetConfirmationText,b.checkAnswer.buttonText=c.checkAnswerText,b.showCorrectAnswer.buttonText=c.showCorrectAnswerText,b.showCorrectAnswer.otherButtonText=c.showMyAnswerText,b.selectedText=c.selectedText,b.correctText=c.correctText,b.incorrectText=c.incorrectText,b.closeToolTip=c.closeToolTip,b.yesToolTip=c.yesToolTip,b.noToolTip=c.noToolTip,b.turnoffaudio=c.turnoffaudio,b.turnonaudio=c.turnonaudio},Gadget.DragAndDrop.prototype.globalizationComplete=function(){switch(this.jObject.data("gadget_options",this.options),this.jObject.addClass("dnd-identifier"),this.options.dragAndDropVersion){case"onlyDragLeftAfter":this.options.objectiveDescription=this.options.objectiveDescription1;break;case"hideEverything":this.options.objectiveDescription=this.options.objectiveDescription2;break;case"freeDrag":this.options.objectiveDescription=this.options.objectiveDescription3;break;case"animatedDrag":this.options.objectiveDescription=this.options.objectiveDescription4;break;case"instant":this.options.objectiveDescription=this.options.objectiveDescription5;break;default:this.options.objectiveDescription=""}this.clone=[],this.haveDraggable=!1,this.zdex=20,this.tileTracker=[],this.scormData=this.scormData&&this.scormData.tilePattern?{tilePattern:this.scormData.tilePattern,numberOfTries:this.options.numberOfTries}:{tilePattern:{},numberOfTries:this.options.numberOfTries},this.numOfCorrect=0,this.reverCheck=!1,this.isOverDrop=!1,this.numOfTries=this.options.numberOfTries,this.isTouchDevice="ontouchstart"in document.documentElement,this.popuptimeout=null,this.hasBeenInteractedWith=!1,this.isLoaded=!1,this.options.draggables=this.options.draggables.concat(this.options.draggableText,this.options.draggableImage),this.options.labels=this.options.labels.concat(this.options.textLabels,this.options.imageLabels),(""!==this.options.firstInCorrect&&""!==this.options.firstCorrect&&""!==this.options.finalInCorrect&&""!==this.options.finalCorrect||""!==this.options.scoreText)&&(this.options.haveFeedBack=!0),""!==this.options.finalInCorrect&&""!==this.options.finalCorrect&&1==this.options.numberOfTries&&(this.options.haveFeedBack=!0),""!==this.options.scoreText&&(this.options.showScore=!0),this.init(),this.getLearnerData({type:"matching"})},Gadget.DragAndDrop.prototype.destroy=function(){this.jObject&&(this.jObject.children().remove(),this.jObject.removeClass("dnd-identifier"),this.jObject.removeClass("has-bk"))},Gadget.DragAndDrop.prototype.init=function(){var a,b,c,d,e,f,g,h=this,i=h.jObject,j=$("<div></div>"),k=$("<div></div>"),l=[];h.addTurnOffAudioLink(),h.dragStatusLive=$('<div aria-live="assertive" class="drag-status-live hidden-label"></div>'),i.append(h.dragStatusLive),i.append('<div class="drag"></div><div class="drop"></div>'),$(h.options.draggables).each(function(a){b=j.clone(),b.attr("id","d"+a).attr("unique-id","d"+a).attr("data-num-of-tries",h.options.numberOfTries).attr("data-inArray",a).attr("data-dragid",this.dragId).css({width:h.options.tileWidth+"px",height:h.options.tileHeight+"px",zIndex:h.zdex}).addClass("drag-item"),b.append('<div class="drag-bk"><div class="shade"></div></div><div class="marker" data-icon="ic-marker"></div>'),l.push(b)}).each(function(a){h.options.randomize===!0?(b=l[a=Math.floor(Math.random()*l.length)],l.splice(a,1)):b=l[a],b.attr("data-top",this.draggableY).attr("data-left",this.draggableX).css({top:this.draggableY+"px",left:this.draggableX+"px"}),i.children(".drag").append(b),b.children().hasClass("drag-text")&&(c=2*parseFloat(b.find(".drag-text").css("left")),d=2*parseFloat(b.find(".drag-text").css("top")),e=h.options.tileWidth-c,f=h.options.tileHeight-d,b.find(".drag-text").css({height:f+"px",width:e+"px"}))}),$(h.options.droppables).each(function(a){b=k.clone(),b.attr("id","t"+a).attr("data-dropid",this.dropId).attr("data-has-tile","false").addClass("drop-item"),b.append('<div class="drop-bk"><div class="shade"></div></div>'),void 0!==this.title&&b.append($('<label class="hidden-label"></label>').html(this.title)),b.attr("data-top",this.droppableY).attr("data-left",this.droppableX).css({width:h.options.tileWidth+"px",height:h.options.tileHeight+"px",top:this.droppableY+"px",left:this.droppableX+"px"}),i.children(".drop").append(b)}),$(h.options.labels).each(function(b){void 0!==this.labelText&&""!==this.labelText.value&&void 0!==this.labelText.value&&(a=$('<div aria-hidden="true" class="labels" id="label'+b+'"></div>'),this.width&&a.css("width",this.width+"px"),a.css({left:this.labelX+"px",top:this.labelY+"px"}),this.labelText.noTabIndex=!0,a.richtextcomponent(this.labelText),void 0!==this.labelText.audioComponent&&void 0!==this.labelText.audioComponent.src&&""!==this.labelText.audioComponent.src&&a.find(".gadget-textblock").audioComponent(this.labelText.audioComponent),a.find("*").attr("aria-hidden",!0),a.appendTo(i)),void 0!==this.labelImage&&""!==this.labelImage.src&&void 0!==this.labelImage.src&&(a=$('<div aria-hidden="true" class="labels" id="label'+b+'"></div>'),a.css({left:this.labelX+"px",top:this.labelY+"px"}),this.labelImage.noTabIndex=!0,a.imagecomponent(this.labelImage),void 0!==this.labelImage.audioComponent&&""!==this.labelImage.audioComponent.src&&a.find(".image-class-wrapper").audioComponent(this.labelImage.audioComponent),a.find("*").attr("aria-hidden",!0),a.appendTo(i))}),void 0!==h.options.dragAndDropBackground&&h.options.dragAndDropBackground.length>0&&(g=document.createElement("img"),g.src=h.options.dragAndDropBackground,$(g).attr("alt",h.options.backgroundTitle?h.options.backgroundTitle:"").attr("title",h.options.backgroundTitle?h.options.backgroundTitle:"").addClass("bk-img"),i.append(g),$(g).load(function(){i.css({width:this.width+"px"})}),i.addClass("has-bk"),$(g).Protector(),this.addLongDescription($(g),h.options.longDesc)),$(window).bind("scroll.dnd",function(){i.is(":visible")&&i.children(".drag").children().each(function(){if($(this).attr("data-top-offset",$(this).offset().top),$(this).attr("data-left-offset",$(this).offset().left),$(this).hasClass("drag-item")){var a=h.clone[parseFloat($(this).attr("data-clone"))];a.attr("data-top-offset",$(this).offset().top),a.attr("data-left-offset",$(this).offset().left)}})}),h.setup()},Gadget.DragAndDrop.prototype.addTurnOffAudioLink=function(){var a=this;this.isDisabledAudio=!1;var b=$('<div class="hidden-label disable-audio">'+this.options.turnoffaudio+"</div>");b.attr({role:"button",tabindex:"0"}).click(function(b){b.preventDefault(),b.stopPropagation(),a.enableDisableAudios()}).keydown(function(b){b.stopImmediatePropagation(),13===b.keyCode&&(b.preventDefault(),b.stopPropagation(),a.enableDisableAudios())}),this.jObject.append(b)},Gadget.DragAndDrop.prototype.enableDisableAudios=function(){var a=this,b=this.jObject;a.isDisabledAudio?(a.isDisabledAudio=!1,b.find(".drag-item").each(function(){$(this).find("[tabindex]").attr("tabindex","0"),$(this).find("*").hasClass("audioToggleIdentifier")&&$(this).find(".audioToggleIdentifier").audioComponent("enableAudio")}),b.find(".disable-audio").html(this.options.turnoffaudio)):(a.isDisabledAudio=!0,b.find(".drag-item").each(function(){$(this).find("[tabindex]").attr("tabindex","-1"),$(this).find("*").hasClass("audioToggleIdentifier")&&$(this).find(".audioToggleIdentifier").audioComponent("disableAudio")}),b.find(".disable-audio").html(this.options.turnonaudio)),a.focusOnSelf(b.find(".disable-audio"),!0)},Gadget.DragAndDrop.prototype.focusOnSelf=function(a,b){this.jObject;a.delay(100).queue(function(c){b&&($("[tabindex='0'][role='button']").not(a).focus(),$(this).focus()),c()})},Gadget.DragAndDrop.prototype.setup=function(){var a,b=this,c=b.jObject;c.append('<div class="dnd-footer"></div>'),b.options.haveFeedBack===!0&&(b.options.feedBackPopUp===!0?(b.options.dialogType="feedback",c.dialogcomponent(b.options),b.options.popupAudio.runtimejson=b.options.runtimejson,$(b.options.popupAudio.audioClass).audioComponent(b.options.popupAudio),b.resultPopUp=c.find(".result-pop-up")):(c.append('<div class="result"></div>'),c.find(".result").attr("tabindex","0"))),("freeDrag"===b.options.dragAndDropVersion||"hideEverything"===b.options.dragAndDropVersion||"onlyDragLeftAfter"===b.options.dragAndDropVersion)&&(c.find(".dnd-footer").append('<div class="start-over"></div>'),c.find(".start-over").sliderbutton({buttonClassName:"start-over",slider:!0,buttonText:b.options.reset.buttonText,clickFunction:function(a){if(a.jObject.hasClass("base-button-disable")===!1){var d={isModal:!0,resultsText:b.options.reset.resetConfirmText,dialogType:"confirm",closeToolTip:b.options.closeTooTip,keyPressEventHandler:function(){b.haveDraggable===!0&&b.reset(),c.find(".checker-pop-up").fadeOut(function(){$(this).remove()})},audioComponent:b.options.resetConfirmTextAudio?b.options.resetConfirmTextAudio:void 0},e=$('<div id="confirm-dlg"></div>');c.append(e),e.dialogcomponent(d),c.find(".checker-pop-up").fadeIn().focus()}}}),c.find(".start-over").sliderbutton("disable")),"animatedDrag"===b.options.dragAndDropVersion&&(c.find(".dnd-footer").append('<div class="check-answer"></div>'),b.options.checkAnswer.clickFunction=function(){b.haveDraggable===!0&&b.numOfTries>0&&b.check()},b.options.checkAnswer.buttonClassName="check-answer",c.find(".check-answer").sliderbutton(b.options.checkAnswer),c.find(".check-answer").sliderbutton("disable"),c.find(".dnd-footer").append('<div class="show-a show-correct-answer"></div>'),a=!0,b.options.showCorrectAnswer.clickFunction=function(d){c.find(".result-pop-up").fadeOut(),c.find(".result").hide();var e=c.find(".show-a").find(".button-text");if(a===!1)a=!0,e.html(d.options.buttonText).attr("title",PearsonGL.utils.stripHTML(d.options.buttonText)),c.children(".drop").children().each(function(){$(this).attr("data-dropid")!==$(this).find(".drag-item").attr("data-dragid")&&($(this).find(".drag-item").show(),$(this).find(".correct-drag").hide())}),b.options.cloning===!1&&(c.find(".drag-item.was-drop").each(function(){var a=c.find('.drop-item[data-dropid="'+$(this).data("wasDropAt")+'"]');$(this).animate({top:a.attr("data-top"),left:a.attr("data-left")},500,function(){b.addDraggableToDroppable($(this),a),$(this).addClass("drag-item-incorrect").draggable("disable").unbind("mouseenter mouseleave"),$(this).find(".marker").show()})}),c.find(".drag-item.left-over").show());else if(a===!0){a=!1,e.html(d.options.otherButtonText).attr("title",PearsonGL.utils.stripHTML(d.options.otherButtonText));var f,g,h=!1;c.children(".drop").children().each(function(){g=$(this).find(".drag-item").attr("data-dragid"),tile=$(this).find(".drag-item"),$(this).attr("data-dropid")!==g&&($(this).find(".correct-drag").show(),b.options.cloning===!1?(f=$.grep(b.options.droppables,function(a){return a.dropId===g}),0===f.length?(tile.data("wasDropAt",$(this).attr("data-dropid")),b.resetDistractor(tile),h=!0):$(this).find(".drag-item").hide()):$(this).find(".drag-item").hide())}),h&&c.find(".drag .drag-item").addClass("left-over").hide()}PearsonGL.utils.initMathJax(e[0])},b.options.showCorrectAnswer.buttonClassName="show-correct-answer",c.find(".show-a").sliderbutton(b.options.showCorrectAnswer),c.find(".show-a").hide()),b.dragSetup(),b.addAccessibility(c),b.isLoaded=!0},Gadget.DragAndDrop.prototype.resetDistractor=function(a){var b=this,c=this.jObject,d=$(a);top=parseFloat(d.attr("data-top-offset"))-d.offset().top,left=parseFloat(d.attr("data-left-offset"))-d.offset().left,$(d).animate({top:top,left:left},500,function(){b.options.cloning===!1&&(newTile=b.clone[parseFloat($(this).attr("data-clone"))],c.find(".drag").append(newTile),b.makeDrag(newTile),$(newTile).addClass("was-drop").data("wasDropAt",$(this).data("wasDropAt")).draggable("disable")),$(this).remove()})},Gadget.DragAndDrop.prototype.check=function(){var a,b,c,d=this,e=d.jObject,f=!0,g=0;if(d.numOfTries--,e.children(".drop").children().each(function(){d.scormData.tilePattern["'"+$(this).attr("id")+"'"]={},$(this).find(".drag-item").attr("data-dragid")===$(this).attr("data-dropid")?(d.scormData.tilePattern["'"+$(this).attr("id")+"'"].draggable=$(this).find(".drag-item").attr("id"),d.scormData.tilePattern["'"+$(this).attr("id")+"'"].disable=!0,d.scormData.tilePattern["'"+$(this).attr("id")+"'"].remove=!1,$(this).children(".drag-item").removeClass("drag-item-disable").addClass("drag-item-correct"),d.corOrIncorDrag($(this).children(".drag-item"),!0),$(this).find(".marker").show(),d.numOfTries>0&&($(this).droppable("disable"),$(this).find(".drag-item").draggable("disable"),$(this).find(".drag-item").unbind("mouseenter mouseleave"),$(this).children(".drag-item").delay(3e3).queue(function(a){$(this).removeClass("drag-item-correct").addClass("drag-item-disable"),$(this).find(".marker").hide(),a()}),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect"))):(f=!1,g++,d.scormData.tilePattern["'"+$(this).attr("id")+"'"].draggable=$(this).find(".drag-item").attr("id"),d.scormData.tilePattern["'"+$(this).attr("id")+"'"].disable=!1,d.scormData.tilePattern["'"+$(this).attr("id")+"'"].remove=!0,$(this).children(".drag-item").addClass("drag-item-incorrect"),d.corOrIncorDrag($(this).children(".drag-item"),!1),$(this).find(".marker").show(),d.numOfTries>0&&($(this).find(".drag-item").draggable("disable"),$(this).find(".drag-item").unbind("mouseenter mouseleave"),$(this).find(".drag-item").delay(3e3).queue(function(f){a=parseFloat($(this).attr("data-top-offset"))-$(this).offset().top,b=parseFloat($(this).attr("data-left-offset"))-$(this).offset().left,$(this).animate({top:a,left:b},500,function(){d.options.cloning===!1&&(c=d.clone[parseFloat($(this).attr("data-clone"))],e.find(".drag").append(c),d.makeDrag(c)),$(this).remove()}),f()})),e.find(".result-pop-up").removeClass("dialog-incorrect").addClass("dialog-correct")),d.numOfTries<=0&&($(this).droppable("disable"),$(this).find(".drag-item").draggable("disable"),$(this).find(".drag-item").unbind("mouseenter mouseleave")),$(this).removeClass("drop-item-over")}),d.scormData.numberOfTries=d.numOfTries,d.numOfCorrect=parseFloat(this.jObject.children(".drop").children().length)-g,d.onCheckAnswer(),f===!0)e.children(".drop").children().each(function(){$(this).children(".drag-item").dequeue().removeClass("drag-item-disable").addClass("drag-item-correct"),d.corOrIncorDrag($(this).children(".drag-item"),!0),$(this).find(".marker").show()}),d.writeMessage(this.jObject.children(".drop").children().length-g,f),e.find(".result-pop-up").removeClass("dialog-incorrect").addClass("dialog-correct");else if(d.numOfTries<=0){d.writeMessage(this.jObject.children(".drop").children().length-g,f),e.find(".show-a").show(),e.find(".check-answer").hide();var h=[];e.children(".drop").children().each(function(){if($(this).find(".drag-item").hasClass("drag-item-correct"))for(var a=0;a<=d.tileArray.length-1;a++)d.tileArray[a].id==$(this).find(".drag-item").attr("id")&&d.tileArray[a].counter++}).each(function(){if($(this).find(".drag-item").hasClass("drag-item-correct"))$(this).find(".correct-drag").remove();else{h=[];for(var a=0;a<=d.tileArray.length-1;a++)d.tileArray[a].dragid==$(this).attr("data-dropid")&&h.push(d.tileArray[a]);h.sort(function(a,b){return a.counter>b.counter?1:b.counter>a.counter?-1:0}),$(this).find(".correct-drag").each(function(){$(this).attr("id")!==h[0].id&&$(this).remove()});for(var a=0;a<=d.tileArray.length-1;a++)d.tileArray[a].id==h[0].id&&d.tileArray[a].counter++}}),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect")}else d.writeMessage(this.jObject.children(".drop").children().length-g,f),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect");
e.find(".check-answer").sliderbutton("disable"),d.haveDraggable=!1},Gadget.DragAndDrop.prototype.writeMessage=function(a,b){var c,d=this,e=d.jObject;d.numOfCorrect=a,this.options.haveFeedBack===!0&&(this.options.feedBackPopUp===!1?this.options.showScore===!0?(c=d.options.scoreText,c=c.replace(/\XX/g,d.numOfCorrect),c=c.replace(/\YY/g,e.children(".drop").children().length),this.jObject.find(".result").html(c),void 0!==d.options.scoreTextAudio&&void 0!==d.options.scoreTextAudio.src&&""!==d.options.scoreTextAudio.src&&this.jObject.find(".result").audioComponent(d.options.scoreTextAudio)):this.numOfTries<=0?b?(this.jObject.find(".result").html(this.options.finalCorrect),void 0!==d.options.finalCorrectAudio&&void 0!==d.options.finalCorrectAudio.src&&""!==d.options.finalCorrectAudio.src&&this.jObject.find(".result").audioComponent(d.options.finalCorrectAudio),e.find(".result-pop-up").removeClass("dialog-incorrect").addClass("dialog-correct")):(this.jObject.find(".result").html(this.options.finalInCorrect),void 0!==d.options.finalInCorrectAudio&&void 0!==d.options.finalInCorrectAudio.src&&""!==d.options.finalInCorrectAudio.src&&this.jObject.find(".result").audioComponent(d.options.finalInCorrectAudio),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect")):this.numOfTries>=1&&(b?(this.jObject.find(".result").html(this.options.firstCorrect),void 0!==d.options.firstCorrectAudio&&void 0!==d.options.firstCorrectAudio.src&&""!==d.options.firstCorrectAudio.src&&this.jObject.find(".result").audioComponent(d.options.firstCorrectAudio),e.find(".result-pop-up").removeClass("dialog-incorrect").addClass("dialog-correct")):(this.jObject.find(".result").html(this.options.firstInCorrect),void 0!==d.options.firstInCorrectAudio&&void 0!==d.options.firstInCorrectAudio.src&&""!==d.options.firstInCorrectAudio.src&&this.jObject.find(".result").audioComponent(d.options.firstInCorrectAudio),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect"))):(this.options.showScore===!0?(c=d.options.scoreText,c=c.replace(/\XX/g,d.numOfCorrect),c=c.replace(/\YY/g,e.children(".drop").children().length),e.dialogcomponent("populateDialog",e.find(".result-text"),{value:c}),b===!0?d.resultPopUp.addClass("dialog-correct").removeClass("dialog-incorrect").show():b===!1&&d.resultPopUp.removeClass("dialog-correct").addClass("dialog-incorrect").show(),e.find(".result-pop-up").show(),e.find(".result-pop-up").focus(),clearTimeout(d.popuptimeout),d.options.fadeOutFeedback&&(d.popuptimeout=setTimeout(function(){e.find(".result-pop-up").fadeOut()},3e3)),$(d.options.popupAudio.audioClass).hasClass("audioToggleIdentifier")&&$(d.options.popupAudio.audioClass).audioComponent("play"),void 0!==d.options.scoreTextAudio&&void 0!==d.options.scoreTextAudio.src&&""!==d.options.scoreTextAudio.src&&this.jObject.find(".result-text").audioComponent(d.options.scoreTextAudio),e.dialogcomponent("removeTabsFromLabel")):(this.numOfTries<=0?b?(e.dialogcomponent("populateDialog",e.find(".result-text"),{value:this.options.finalCorrect}),void 0!==d.options.finalCorrectAudio&&void 0!==d.options.finalCorrectAudio.src&&""!==d.options.finalCorrectAudio.src&&this.jObject.find(".result-text").audioComponent(d.options.finalCorrectAudio),e.dialogcomponent("removeTabsFromLabel"),e.find(".result-pop-up").removeClass("dialog-incorrect").addClass("dialog-correct")):(e.dialogcomponent("populateDialog",e.find(".result-text"),{value:this.options.finalInCorrect}),void 0!==d.options.finalInCorrectAudio&&void 0!==d.options.finalInCorrectAudio.src&&""!==d.options.finalInCorrectAudio.src&&this.jObject.find(".result-text").audioComponent(d.options.finalInCorrectAudio),e.dialogcomponent("removeTabsFromLabel"),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect")):this.numOfTries>=1&&(b?(e.dialogcomponent("populateDialog",e.find(".result-text"),{value:this.options.firstCorrect}),void 0!==d.options.firstCorrectAudio&&void 0!==d.options.firstCorrectAudio.src&&""!==d.options.firstCorrectAudio.src&&this.jObject.find(".result-text").audioComponent(d.options.firstCorrectAudio),e.dialogcomponent("removeTabsFromLabel"),e.find(".result-pop-up").removeClass("dialog-incorrect").addClass("dialog-correct")):(e.dialogcomponent("populateDialog",e.find(".result-text"),{value:this.options.firstInCorrect}),void 0!==d.options.firstInCorrectAudio&&void 0!==d.options.firstInCorrectAudio.src&&""!==d.options.firstInCorrectAudio.src&&this.jObject.find(".result-text").audioComponent(d.options.firstInCorrectAudio),e.dialogcomponent("removeTabsFromLabel"),e.find(".result-pop-up").removeClass("dialog-correct").addClass("dialog-incorrect"))),e.find(".result-pop-up").show(),e.find(".result-pop-up").focus(),clearTimeout(d.popuptimeout),d.options.fadeOutFeedback&&(d.popuptimeout=setTimeout(function(){e.find(".result-pop-up").fadeOut()},3e3)),$(d.options.popupAudio.audioClass).hasClass("audioToggleIdentifier")&&$(d.options.popupAudio.audioClass).audioComponent("play")),setTimeout(function(){e.bind("click.obj",function(a){e.find(".result-pop-up").is(":visible")&&!$(a.target).is(".result-pop-up *, .result-pop-up")&&(e.find(".result-pop-up").fadeOut(),e.unbind("click.obj"))})},100))),PearsonGL.utils.initMathJax(e.find(".result-pop-up")[0])},Gadget.DragAndDrop.prototype.dragSetup=function(){var a,b,c,d=this,e=d.jObject,f=0;d.tileArray=[],e.children(".drag").children().each(function(g){$(this).attr("data-clone",f),f++,$(this).attr("data-top-offset",$(this).offset().top),$(this).attr("data-left-offset",$(this).offset().left),a=$(this),e.children(".drop").find('[data-dropid="'+$(this).attr("data-dragid")+'"]').length>0&&e.children(".drop").find('[data-dropid="'+$(this).attr("data-dragid")+'"]').each(function(){return"false"===$(this).attr("data-has-tile")?($(this).attr("data-has-tile","true"),b=$(this).offset().top,c=$(this).offset().left,a.attr({"data-target":$(this).attr("id"),"data-correcttop":b,"data-correctleft":c}),!1):void 0}),d.makeDrag($(this),!1),d.tileArray[g]={id:$(this).attr("id"),dragid:$(this).attr("data-dragid"),counter:0}}),d.dropSetup()},Gadget.DragAndDrop.prototype.makeDrag=function(a){var b,c,d=this,e=d.jObject,f=$(a);f.hasClass("drag-item")&&(d.clone[parseFloat(a.attr("data-clone"))]=a.clone()),d.isTouchDevice?f.mouseToTouch():f.hover(function(){$(this).addClass("drag-item-over")},function(){$(this).removeClass("drag-item-over")}),void 0!==d.options.draggables[f.attr("data-inArray")].dragText&&""!==d.options.draggables[f.attr("data-inArray")].dragText.value&&void 0!==d.options.draggables[f.attr("data-inArray")].dragText.value&&(f.addClass("text-tile"),f.append("<table class='drag-text'><tr><td class='drag-text-cell'></td></tr></table>"),d.options.draggables[f.attr("data-inArray")].dragText.noTabIndex=!0,f.find(".drag-text-cell").richtextcomponent(d.options.draggables[f.attr("data-inArray")].dragText),void 0!==d.options.draggables[f.attr("data-inArray")].dragText.audioComponent&&void 0!==d.options.draggables[f.attr("data-inArray")].dragText.audioComponent.src&&""!==d.options.draggables[f.attr("data-inArray")].dragText.audioComponent.src&&(d.options.draggables[f.attr("data-inArray")].dragText.audioComponent.stopDefault=!1,f.find(".gadget-textblock").audioComponent(d.options.draggables[f.attr("data-inArray")].dragText.audioComponent)),f.attr({"data-default-title":d.options.draggables[f.attr("data-inArray")].dragText.value.replace(/<(?:.|\n)*?>/gm,"")}),f.find(".text-audio-component").append('<label class="drag-state hidden-label"></label>')),void 0!==d.options.draggables[f.attr("data-inArray")].dragImage&&""!==d.options.draggables[f.attr("data-inArray")].dragImage.src&&void 0!==d.options.draggables[f.attr("data-inArray")].dragImage.src&&(d.options.draggables[f.attr("data-inArray")].dragImage.protect=!1,f.addClass("image-tile"),f.append($('<label class="hidden-label"></label>').html(d.options.draggables[f.attr("data-inArray")].dragImage.title?d.options.draggables[f.attr("data-inArray")].dragImage.title:"")),f.append('<table class="image-container"><tr><td class="image-cell"></td></tr></table>'),d.options.draggables[f.attr("data-inArray")].dragImage.noTabIndex=!0,f.find(".image-cell").imagecomponent(d.options.draggables[f.attr("data-inArray")].dragImage),void 0!==d.options.draggables[f.attr("data-inArray")].dragImage.audioComponent&&""!==d.options.draggables[f.attr("data-inArray")].dragImage.audioComponent.src&&(d.options.draggables[f.attr("data-inArray")].dragImage.audioComponent.stopDefault=!1,f.find(".image-class-wrapper").audioComponent(d.options.draggables[f.attr("data-inArray")].dragImage.audioComponent)),f.attr({"data-default-title":d.options.draggables[f.attr("data-inArray")].dragImage.title?d.options.draggables[f.attr("data-inArray")].dragImage.title:""})),d.options.hideBackground&&(f.addClass("no-bk"),f.css("border","transparent"),f.children(".drag-bk").hide()),f.draggable({containment:e,scroll:!0,start:function(){d.zdex++,$(this).addClass("drag-item-down"),$(this).find("*").hasClass("audioToggleIdentifier")&&$(this).find(".audioToggleIdentifier").audioComponent("disableAudio"),d.options.cloning&&$(this).parent().hasClass("drag")&&(b=d.clone[parseFloat($(this).attr("data-clone"))],e.children(".drag").append(b),d.makeDrag(b)),$(this).css("z-index",d.zdex),e.find(".result-pop-up").is(":visible")&&(e.find(".result-pop-up").fadeOut(),e.unbind("click.obj"),e.find(".result-pop-up").removeClass("dialog-correct").removeClass("dialog-incorrect")),$(this).parents().hasClass("drop-item")&&(e.find(".drop").css("z-index",d.zdex),$(this).parents(".drop-item").css("z-index",d.zdex))},drag:function(){$(this).removeClass("drag-item-down").addClass("drag-item-dragging")},revert:function(a){return e.find(".drop").css("z-index",""),e.find(".drop-item").css("z-index",""),a===!1?(d.reverCheck=!0,!0):(d.reverCheck=!1,!1)},stop:function(){$(this).removeClass("drag-item-down drag-item-dragging drag-item-over"),c=$(this),setTimeout(function(){c.find("*").hasClass("audioToggleIdentifier")&&c.find(".audioToggleIdentifier").audioComponent("enableAudio")},300),d.reverCheck===!0&&d.options.cloning&&$(this).parent().hasClass("drag")&&e.children(".drag").children(":last").fadeOut(800).remove()}}),f.attr({tabindex:"0",role:"button","aria-grabbed":"false"}),f.keydown(function(a){if(($(this).is(":focus")||$(this).is(":active"))&&!$(this).hasClass("ui-draggable-disabled"))switch($(this).addClass("drag-item-dragging"),d.isDropping=!1,d.zdex++,$(this).css("z-index",d.zdex),$(this).parents().hasClass("drop-item")&&(e.find(".drop").css("z-index",d.zdex),$(this).parents(".drop-item").css("z-index",d.zdex)),d.collideDetect($(this),e.find(".drop").children()).length>0?$(d.collideDetect($(this),e.find(".drop").children())[0])[0]!==$(this).parent()[0]&&(d.isOverDrop=!0,e.find(".drop").children().removeClass("drop-item-over"),$(d.collideDetect($(this),e.find(".drop").children())[0]).addClass("drop-item-over")):(d.isOverDrop=!1,e.find(".drop").children().removeClass("drop-item-over")),a.keyCode){case 13:d.lastSelected=$(this),d.selectDrag($(this),!1),d.isOverDrop===!0&&($(d.collideDetect($(this),e.find(".drop").children())[0]).hasClass("ui-droppable-disabled")||(d.isDropping=!0,d.isOverDrop=!1,d.onDropEvent($(d.collideDetect($(this),e.find(".drop").children())[0]),$(this))));break;case 39:$(this).css("left",parseFloat($(this).css("left"))+10),d.keyEventCloneChecker($(this));break;case 37:$(this).css("left",parseFloat($(this).css("left"))-10),d.keyEventCloneChecker($(this));break;case 38:a.preventDefault(),$(this).css("top",parseFloat($(this).css("top"))-10),d.keyEventCloneChecker($(this)),$(this).position()&&$(this).position().top<$(window).scrollTop()&&$(window).scrollTop($(this).position().top);break;case 40:a.preventDefault(),$(this).css("top",parseFloat($(this).css("top"))+10),d.keyEventCloneChecker($(this)),$(this).position()&&$(this).position().top+$(this).height()>$(window).scrollTop()+(window.innerHeight||document.documentElement.clientHeight)&&$(window).scrollTop($(this).position().top-(window.innerHeight||document.documentElement.clientHeight)+2*$(this).height())}}),f.click(function(a){a.stopImmediatePropagation(),a.preventDefault(),$(this).hasClass("ui-draggable-disabled")||(d.lastSelected=$(this),d.selectDrag($(this),!1))}),f.focus(function(){$(this).hasClass("ui-draggable-disabled")||($(this).addClass("drag-item-dragging"),PearsonGL.utils.focusItemOn(this))}),f.blur(function(){e.find(".drop").css("z-index",""),e.find(".drop-item").css("z-index",""),$(this).hasClass("ui-draggable-disabled")||($(this).removeClass("drag-item-dragging"),PearsonGL.utils.focusItemOff(this),e.find(".drop").children().removeClass("drop-item-over"),$(this).parent().hasClass("drop-item")?$(this).animate({top:"0px",left:"0px"},400,function(){$(this).css({top:"",left:""})}):$(this).parent().hasClass("drag")&&d.isDropping===!1&&$(this).animate({top:$(this).attr("data-top")+"px",left:$(this).attr("data-left")+"px"},400,function(){d.options.cloning&&e.find(".drag").find('[unique-id="'+$(this).attr("unique-id")+'"]').length>=2&&$(this).parent().hasClass("drag")&&$(this).remove()}))}),d.isLoaded&&PearsonGL.utils.initMathJax(f[0])},Gadget.DragAndDrop.prototype.keyEventCloneChecker=function(a){var b;this.options.cloning&&this.jObject.find(".drag").find('[unique-id="'+a.attr("unique-id")+'"]').length<2&&a.parent().hasClass("drag")&&(b=this.clone[parseFloat(a.attr("data-clone"))],this.jObject.children(".drag").append(b),this.makeDrag(b))},Gadget.DragAndDrop.prototype.revert=function(a,b){var c=this.jObject;a.animate({top:a.attr("data-top")+"px",left:a.attr("data-left")+"px"},600,function(){$(this).find(".marker").hide(),$(this).removeClass("drag-item-incorrect"),c.find('[unique-id="'+a.attr("unique-id")+'"]').attr("data-num-of-tries",parseFloat(a.attr("data-num-of-tries"))),b===!0&&$(this).remove()})},Gadget.DragAndDrop.prototype.addDraggableToDroppable=function(a,b){$(b).append(a),a.css({top:"",left:""})},Gadget.DragAndDrop.prototype.dropSetup=function(){var a,b,c,d=this,e=d.jObject;for(d.options.hideTargetBackground&&e.find(".drop-item").addClass("no-bk"),e.children(".drop").children().each(function(){$(this).droppable({accept:".drag-item",drop:function(a,b){d.onDropEvent($(this),b.draggable)},over:function(a,b){$(this).addClass("drop-item-over"),b.draggable.addClass("drag-item-overdrop")},out:function(a,b){$(this).removeClass("drop-item-over"),b.draggable.removeClass("drag-item-overdrop")}}),d.tileTracker.push({target:$(this).attr("id"),dropid:$(this).attr("data-dropid"),correct:[]})}),c=0;c<=d.clone.length-1;c++)b=d.clone[c],e.find(".drop").find('[data-dropid="'+$(b).attr("data-dragid")+'"]').each(function(){a=$(b).clone(),d.makeDrag(a),$(a).css({display:"none",position:"",top:"",left:""}),$(a).removeClass("drag-item").addClass("correct-drag"),$(a).draggable("disable"),$(a).unbind("mouseenter mouseleave"),$(a).find(".marker").show(),$(a).find("*").hasClass("drag-state")&&$(a).find(".drag-state").html(d.options.correctText),$(a).attr("title",($(a).attr("title")?$(a).attr("title"):"")+" "+d.options.correctText).attr("alt",($(a).attr("alt")?$(a).attr("alt"):"")+" "+d.options.correctText),$(this).append(a)});e.children(".drop").children().each(function(a){d.tileTracker[a].target===$(this).attr("id")&&$(this).find(".correct-drag").each(function(){d.tileTracker[a].correct.push({tile:$(this).attr("id")})})}),e.find(".drop-item").click(function(a){$(this).hasClass("ui-droppable-disabled")||(a.preventDefault(),null!==d.lastSelected&&void 0!==d.lastSelected&&(d.keyEventCloneChecker(d.lastSelected),d.onDropEvent($(this),d.lastSelected)))}),e.find(".drop-item").attr({tabindex:"0",role:"button","aria-dropeffect":"move"}),d.options.cloning&&e.find(".drop-item").attr({"aria-dropeffect":"move copy"}),e.find(".drop-item").focus(function(){PearsonGL.utils.focusItemOn(this)}),e.find(".drop-item").blur(function(){PearsonGL.utils.focusItemOff(this)}),e.find(".drop-item").keydown(function(a){!$(this).is(":focus")&&!$(this).is(":active")||$(this).hasClass("ui-droppable-disabled")||13===a.keyCode&&(a.preventDefault(),null!==d.lastSelected&&void 0!==d.lastSelected&&(d.keyEventCloneChecker(d.lastSelected),d.onDropEvent($(this),d.lastSelected),d.options.haveFeedBack||d.focusOnSelf($(this),!0)))})},Gadget.DragAndDrop.prototype.onDropEvent=function(a,b){function c(c){var d=b.attr("data-dragid"),h=j.find('div[data-dropid="'+d+'"]:not(.ui-state-disabled)');h.length>0?(g=$(h[0]),e=parseFloat(g.offset().top)-a.offset().top,f=parseFloat(g.offset().left)-a.offset().left,b.animate({top:e,left:f},500,function(){g.droppable("disable").addClass("auto-correct"),b.draggable("disable"),i.addDraggableToDroppable(b,g),i.corOrIncorDrag(b,!0),c&&c();var a=$(h).attr("id");i.scormData.tilePattern["'"+a+"'"]={draggable:b.attr("id"),disable:!1,autoCorrect:!0,numberOfTries:i.numOfTries},i.saveLearnerData()})):(a.droppable("disable"),b.draggable("disable"))}function d(){i.haveDraggable=!0,j.find(".start-over").sliderbutton("enable"),b.children(".drag-bk").hide(),g.children(".drop-bk").hide(),b.css({border:"transparent",background:"none"}),g.css({border:"transparent",background:"none"})}var e,f,g,h,i=this,j=i.jObject;switch(b.removeClass("drag-item-dragging"),b.find("*").removeClass("text-button-focus"),j.find(".drop").css("z-index",""),j.find(".drop-item").css("z-index",""),i.options.dragAndDropVersion){case"onlyDragLeftAfter":b.attr("data-num-of-tries",parseFloat(b.attr("data-num-of-tries"))-1),i.numOfTries=b.attr("data-num-of-tries"),a.attr("data-dropid")===b.attr("data-dragid")?(i.addDraggableToDroppable(b,a),i.haveDraggable=!0,j.find(".start-over").sliderbutton("enable"),a.droppable("disable"),b.draggable("disable"),b.children(".drag-bk").hide(),a.children(".drop-bk").hide(),b.css("border","transparent"),a.css("border","transparent"),b.css("background","none"),a.css("background","none"),i.corOrIncorDrag(b,!0),i.writeMessage(j.find(".drop-item:not(.auto-correct) .drag-item:not(.correct-drag)").length,!0),i.scormData.tilePattern["'"+a.attr("id")+"'"]={},i.scormData.tilePattern["'"+a.attr("id")+"'"].draggable=b.attr("id"),i.scormData.tilePattern["'"+a.attr("id")+"'"].numberOfTries=i.numOfTries,i.saveLearnerData(),i.hasBeenInteractedWith=!0):(b.find(".marker").show(),b.addClass("drag-item-incorrect"),i.writeMessage(j.find(".drop-item:not(.auto-correct) .drag-item:not(.correct-drag)").length,!1),i.options.cloning===!1&&"0"===i.numOfTries?(i.addDraggableToDroppable(b,a),c(d)):i.revert(b,i.options.cloning));break;case"hideEverything":a.attr("data-dropid")===b.attr("data-dragid")?(i.addDraggableToDroppable(b,a),i.haveDraggable=!0,j.find(".start-over").sliderbutton("enable"),a.droppable("disable"),b.draggable("disable"),a.hide(),i.corOrIncorDrag(b,!0),i.scormData.tilePattern["'"+a.attr("id")+"'"]={},i.scormData.tilePattern["'"+a.attr("id")+"'"].draggable=b.attr("id"),i.scormData.tilePattern["'"+a.attr("id")+"'"].numberOfTries=i.numOfTries,i.saveLearnerData(),i.hasBeenInteractedWith=!0):(b.find(".marker").show(),b.addClass("drag-item-incorrect"),i.revert(b,i.options.cloning));break;case"freeDrag":a.children().hasClass("drag-item")&&(e=parseFloat(a.children(".drag-item").attr("data-top-offset"))-a.children(".drag-item").offset().top,f=parseFloat(a.children(".drag-item").attr("data-left-offset"))-a.children(".drag-item").offset().left,a.children(".drag-item").animate({top:e,left:f},500,function(){i.options.cloning===!1&&(h=i.clone[parseFloat($(this).attr("data-clone"))],j.find(".drag").append(h),i.makeDrag(h)),$(this).remove()})),i.addDraggableToDroppable(b,a),i.haveDraggable=!0,j.find(".start-over").sliderbutton("enable"),b.draggable("disable"),i.scormData.tilePattern["'"+a.attr("id")+"'"]={},i.scormData.tilePattern["'"+a.attr("id")+"'"].draggable=b.attr("id"),i.scormData.tilePattern["'"+a.attr("id")+"'"].numberOfTries=i.numOfTries,i.saveLearnerData(),i.hasBeenInteractedWith=!0;break;case"animatedDrag":a.children().hasClass("drag-item")&&a.children(".drag-item")[0]!==b[0]&&(e=parseFloat(a.children(".drag-item").attr("data-top-offset"))-a.children(".drag-item").offset().top,f=parseFloat(a.children(".drag-item").attr("data-left-offset"))-a.children(".drag-item").offset().left,a.children(".drag-item").stop(!0,!0).animate({top:e,left:f},500,function(){i.options.cloning===!1&&(h=i.clone[parseFloat($(this).attr("data-clone"))],j.find(".drag").append(h),i.makeDrag(h)),$(this).remove()})),i.addDraggableToDroppable(b,a),j.children(".drop").children().each(function(){return $(this).children().hasClass("drag-item")?void(i.haveDraggable=!0):(i.haveDraggable=!1,j.find(".check-answer").sliderbutton("disable"),!1)}),i.haveDraggable===!0&&j.find(".check-answer").sliderbutton("enable"),i.scormData.tilePattern["'"+a.attr("id")+"'"]={},i.scormData.tilePattern["'"+a.attr("id")+"'"].draggable=b.attr("id"),i.scormData.tilePattern["'"+a.attr("id")+"'"].disable=!1,i.scormData.tilePattern["'"+a.attr("id")+"'"].remove=!1,i.scormData.numberOfTries=i.numOfTries;break;case"instant":b.attr("data-num-of-tries",parseFloat(b.attr("data-num-of-tries"))-1),i.numOfTries=b.attr("data-num-of-tries"),a.attr("data-dropid")===b.attr("data-dragid")?(i.addDraggableToDroppable(b,a),a.droppable("disable"),b.draggable("disable"),b.addClass("drag-item-correct"),i.corOrIncorDrag(b,!0),b.find(".marker").show(),i.writeMessage(j.find(".drop-item:not(.auto-correct) .drag-item.drag-item-correct").length,!0),i.scormData.tilePattern["'"+a.attr("id")+"'"]={},i.scormData.tilePattern["'"+a.attr("id")+"'"].draggable=b.attr("id"),i.scormData.tilePattern["'"+a.attr("id")+"'"].numberOfTries=i.numOfTries,i.saveLearnerData(),i.hasBeenInteractedWith=!0):(i.setDragStatusLive(i.options.incorrectText),i.addDraggableToDroppable(b,a),b.find(".marker").show(),i.writeMessage(j.find(".drop-item:not(.auto-correct) .drag-item.drag-item-correct").length,!1),i.options.cloning===!1&&"0"===i.numOfTries?c():b.addClass("drag-item-incorrect").delay(50).queue(function(c){e=parseFloat(b.attr("data-top-offset"))-a.offset().top,f=parseFloat(b.attr("data-left-offset"))-a.offset().left,b.animate({top:e,left:f},500,function(){i.options.cloning===!1&&(h=i.clone[parseFloat(b.attr("data-clone"))],h.attr("data-num-of-tries",parseFloat(b.attr("data-num-of-tries"))),j.find(".drag").append(h),i.makeDrag(h)),j.find('[unique-id="'+b.attr("unique-id")+'"]').attr("data-num-of-tries",parseFloat(b.attr("data-num-of-tries"))),$(this).remove()}),c()}))}i.isTouchDevice&&$(b).mouseToTouch(),a.removeClass("drop-item-over"),b.removeClass("drag-item-overdrop"),i.lastSelected=null,i.selectDrag(null,!0)},Gadget.DragAndDrop.prototype.selectDrag=function(a,b){var c=this,d=this.jObject;d.find(".drag-item").each(function(){$(this).removeClass("drag-item-selected"),$(this).removeClass("drag-item-dragging"),$(this).hasClass("ui-draggable-disabled")?$(this).removeAttr("tabindex"):($(this).attr("aria-grabbed","false"),$(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(""),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html($(this).attr("data-default-title")?$(this).attr("data-default-title"):""))}),b||(a.addClass("drag-item-selected"),a.find("*").hasClass("drag-state")&&(a.find(".drag-state").html(c.options.selectedText),c.setDragStatusLive(c.options.selectedText)),a.hasClass("image-tile")&&a.find(".hidden-label").html((a.attr("data-default-title")?a.attr("data-default-title"):"")+" "+c.options.selectedText),a.attr("aria-grabbed","true"),c.focusOnSelf(a,!1))},Gadget.DragAndDrop.prototype.corOrIncorDrag=function(a,b){var c=this;a.each(function(){$(this).attr("aria-grabbed","false"),$(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(""),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html($(this).attr("data-default-title")?$(this).attr("data-default-title"):""),b?($(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(c.options.correctText),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html(($(this).attr("data-default-title")?$(this).attr("data-default-title"):"")+" "+c.options.correctText),c.setDragStatusLive(c.options.correctText)):($(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(c.options.incorrectText),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html(($(this).attr("data-default-title")?$(this).attr("data-default-title"):"")+" "+c.options.incorrectText),c.setDragStatusLive(c.options.incorrectText))})},Gadget.DragAndDrop.prototype.collideDetect=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=a,r=b,s=$([]);return q&&r?(q.each(function(){c=$(this),d=c.offset(),e=d.left,f=d.top,g=e+c.outerWidth(),h=f+c.outerHeight(),i=parseFloat(c.height())/2+f,j=parseFloat(c.width())/2+e,r.not(c).each(function(){return k=$(this),l=k.offset(),m=l.left,n=l.top,o=m+k.outerWidth(),p=n+k.outerHeight(),e>=o||m>=g||f>=p||n>=h?!0:o>=j&&j>=m&&p>=i&&i>=n?(s=$([]),s.push(this),!1):void 0})}),s):!1},Gadget.DragAndDrop.prototype.reset=function(){var a,b=this,c=b.jObject;c.find(".result-pop-up").fadeOut(),c.find(".result").html(""),c.children(".checker").fadeOut(),c.find(".start-over").sliderbutton("disable"),b.scormData={tilePattern:{},numberOfTries:b.options.numberOfTries},("freeDrag"===b.options.dragAndDropVersion||"onlyDragLeftAfter"===b.options.dragAndDropVersion||"hideEverything"===b.options.dragAndDropVersion)&&c.find(".drop").children().each(function(){b.options.hideTargetBackground||$(this).children(".drop-bk").show(),$(this).css("background",""),$(this).css("border",""),$(this).droppable("enable"),$(this).removeClass("drop-item-over auto-correct"),$(this).show(),b.options.cloning===!1&&$(this).children().hasClass("drag-item")&&(a=b.clone[parseFloat($(this).children(".drag-item").attr("data-clone"))],c.find(".drag").append(a),$(this).children(".drag-item").remove(),b.makeDrag(a)),$(this).children(".drag-item").remove()}),b.haveDraggable=!1},Gadget.DragAndDrop.prototype.onCheckAnswer=function(){this.saveLearnerData(),this.hasBeenInteractedWith=!0},Gadget.DragAndDrop.prototype.onAllDropFilled=function(){},Gadget.DragAndDrop.prototype.setDragStatusLive=function(a){this.dragStatusLive.html(a)},Gadget.DragAndDrop.prototype.setGadget=function(){var a,b,c=this,d=c.jObject,e=!0,f=!0,g=this.scormData;if(g)switch(c.hasBeenInteractedWith=!0,c.options.dragAndDropVersion){case"onlyDragLeftAfter":var h,i;c.numOfCorrect=0,d.find(".drop").children().each(function(){h=g.tilePattern["'"+$(this).attr("id")+"'"],void 0!==h&&($(this).droppable("disable"),$(this).children(".drop-bk").hide(),$(this).css("background","none"),$(this).css("border","transparent"),a=g.tilePattern["'"+$(this).attr("id")+"'"].draggable,i=d.find(".drag").find("#"+a),i.draggable("disable").unbind("mouseenter mouseleave").css({background:"none",border:"transparent",position:"absolute",top:"",left:""}),i.children(".drag-bk").hide(),c.options.cloning?(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],$(this).append(d.find(".drag").find("#"+a)),d.find(".drag").append(b),c.makeDrag(b)):$(this).append(d.find(".drag").find("#"+a)),c.haveDraggable=!0,d.find(".start-over").sliderbutton("enable"),$(this).append(i),h.autoCorrect?($(this).addClass("auto-correct"),i.draggable("disable").addClass("drag-item-incorrect"),i.find(".marker").show(),c.corOrIncorDrag(i,!1)):(c.numOfCorrect++,c.corOrIncorDrag(i,!0)))});break;case"hideEverything":d.find(".drop").children().each(function(){void 0!==g.tilePattern["'"+$(this).attr("id")+"'"]&&($(this).droppable("disable"),$(this).hide(),a=g.tilePattern["'"+$(this).attr("id")+"'"].draggable,d.find(".drag").find("#"+a).draggable("disable"),d.find(".drag").find("#"+a).hide(),d.find(".drag").find("#"+a).unbind("mouseenter mouseleave"),d.find(".drag").find("#"+a).css({position:"absolute",top:"",left:""}),c.options.cloning?(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],$(this).append(d.find(".drag").find("#"+a)),d.find(".drag").append(b),c.makeDrag(b)):$(this).append(d.find(".drag").find("#"+a)),c.haveDraggable=!0,d.find(".start-over").sliderbutton("enable"))});break;case"freeDrag":d.find(".drop").children().each(function(){void 0!==g.tilePattern["'"+$(this).attr("id")+"'"]&&(a=g.tilePattern["'"+$(this).attr("id")+"'"].draggable,d.find(".drag").find("#"+a).draggable("disable"),d.find(".drag").find("#"+a).unbind("mouseenter mouseleave"),d.find(".drag").find("#"+a).css({position:"absolute",top:"",left:""}),c.options.cloning?(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],$(this).append(d.find(".drag").find("#"+a)),d.find(".drag").append(b),c.makeDrag(b)):$(this).append(d.find(".drag").find("#"+a)),c.haveDraggable=!0,d.find(".start-over").sliderbutton("enable"))});break;case"animatedDrag":parseFloat(g.numberOfTries)>=1?(d.find(".drop").children().each(function(){void 0!==g.tilePattern["'"+$(this).attr("id")+"'"]?(a=g.tilePattern["'"+$(this).attr("id")+"'"].draggable,g.tilePattern["'"+$(this).attr("id")+"'"].disable===!0?(d.find(".drag").find("#"+a).unbind("mouseenter mouseleave"),d.find(".drag").find("#"+a).css({position:"absolute",top:"",left:""}),d.find(".drag").find("#"+a).addClass("drag-item-disable"),d.find(".drag").find("#"+a).draggable("disable"),d.find(".drop").find("#"+$(this).attr("id")).droppable("disable"),c.options.cloning?(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],d.find(".drop").find("#"+$(this).attr("id")).append(d.find(".drag").find("#"+a)),d.find(".drag").append(b),c.makeDrag(b)):d.find(".drop").find("#"+$(this).attr("id")).append(d.find(".drag").find("#"+a))):(e=!1,g.tilePattern["'"+$(this).attr("id")+"'"].remove===!1?(d.find(".drag").find("#"+a).css({position:"absolute",top:"",left:""}),c.options.cloning?(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],d.find(".drop").find("#"+$(this).attr("id")).append(d.find(".drag").find("#"+a)),d.find(".drag").append(b),c.makeDrag(b)):d.find(".drop").find("#"+$(this).attr("id")).append(d.find(".drag").find("#"+a))):f=!1)):f=!1}),e===!0?d.find(".check-answer").sliderbutton("disable"):f===!0&&(c.haveDraggable=!0,d.find(".check-answer").sliderbutton("enable"))):parseFloat(g.numberOfTries)<=0&&(d.find(".drop").children().each(function(){void 0!==g.tilePattern["'"+$(this).attr("id")+"'"]&&(a=g.tilePattern["'"+$(this).attr("id")+"'"].draggable,d.find(".drag").find("#"+a).unbind("mouseenter mouseleave"),d.find(".drag").find("#"+a).css({position:"absolute",top:"",left:""}),d.find(".drag").find("#"+a).removeClass("drag-item-disable"),d.find(".drag").find("#"+a).attr("data-dragid")===$(this).attr("data-dropid")?(d.find(".drag").find("#"+a).addClass("drag-item-correct"),c.corOrIncorDrag(d.find(".drag").find("#"+a),!0)):(d.find(".drag").find("#"+a).addClass("drag-item-incorrect"),c.corOrIncorDrag(d.find(".drag").find("#"+a),!1)),d.find(".drag").find("#"+a).find(".marker").show(),d.find(".drag").find("#"+a).draggable("disable"),d.find(".drop").find("#"+$(this).attr("id")).droppable("disable"),c.options.cloning?(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],d.find(".drop").find("#"+$(this).attr("id")).append(d.find(".drag").find("#"+a)),d.find(".drag").append(b),c.makeDrag(b)):d.find(".drop").find("#"+$(this).attr("id")).append(d.find(".drag").find("#"+a)))}),d.find(".show-a").show(),d.find(".check-answer").hide(),c.numOfTries=parseFloat(g.numberOfTries),c.check()),c.numOfTries=parseFloat(g.numberOfTries);break;case"instant":var h,i;c.numOfCorrect=0,d.find(".drop").children().each(function(){h=g.tilePattern["'"+$(this).attr("id")+"'"],h&&($(this).droppable("disable"),a=h.draggable,i=d.find(".drag").find("#"+a),c.options.cloning&&(b=c.clone[parseFloat(d.find(".drag").find("#"+a).attr("data-clone"))],d.find(".drag").append(b),c.makeDrag(b)),$(this).append(i),h.autoCorrect?($(this).addClass("auto-correct"),i.draggable("disable"),c.corOrIncorDrag(i,!1)):(i.draggable("disable").addClass("drag-item-correct"),c.corOrIncorDrag(i,!0),c.numOfCorrect++),i.find(".marker").show(),i.unbind("mouseenter mouseleave").css({position:"absolute",top:0,left:0}))
})}},Gadget.DragAndDrop.prototype.parseLearnerData=function(){var a=this.options.scorm.suspendData.data;"object"==typeof a&&(this.scormData=a,this.setGadget())},Gadget.DragAndDrop.prototype.gadgetUnload=function(){this.saveLearnerData()},Gadget.DragAndDrop.prototype.saveLearnerData=function(){if(this.isCommEnabled()){var a,b,c,d,e=[];for(this.options.scorm.suspendData.data=this.scormData,a=0;a<this.options.scorm.interactions.length;a++)b=[],c=[{pattern:[]}],this.jObject.find(".drop").children().each(function(){d=$(this).attr("data-dropid"),c[0].pattern.push([d,d]),$(this).find("*").hasClass("drag-item")&&b.push([$(this).find(".drag-item").attr("data-dragid"),d])}),result=this.getResult(this.options.scorm.interactions[a].objectives[0]),result.learnerResponse=b,result.correctResponses=c,e.push(result);this.setLearnerData({gadgetId:this.gadgetUniqueId,data:this.options.scorm,results:e})}},Gadget.DragAndDrop.prototype.getResult=function(a){var b=0,c=this.jObject.find(".drop").children().length,d={},b=0;return this.jObject.find(".drop").children().each(function(){$(this).children().hasClass("drag-item")&&b++}),d.raw=a.score.max!==a.score.raw?"animatedDrag"===this.options.dragAndDropVersion||"instant"===this.options.dragAndDropVersion||"onlyDragLeftAfter"===this.options.dragAndDropVersion?a.score.max*(this.numOfCorrect/c):a.score.max*(b/c):a.score.raw,d.scaled=a.score.max-a.score.min!==0?(d.raw-a.score.min)/(a.score.max-a.score.min):1,d.progressMeasure=b/this.jObject.find(".drop").children().length,"animatedDrag"===this.options.dragAndDropVersion&&this.numOfTries>0&&(d.progressMeasure=this.numOfCorrect/c),"completed"!==a.completion_status&&(d.completionStatus="incomplete",parseFloat(d.progressMeasure)>=parseFloat(a.completionThreshold)&&(d.completionStatus="completed")),d.successStatus="failed",parseFloat(d.scaled)>=PearsonGL.globals.comm.getPassingScore()&&(d.successStatus="passed"),this.giveAllPoints===!0&&(d.raw=a.score.max,d.successStatus="passed",this.giveAllPoints=!1),d.result=d.scaled,d},window.Gadget=window.Gadget||{},Gadget.FillBlank=function(a,b,c){this.options={gadgetName:"Fill in the blank",objectiveDescription:"User is presented with several blank inputs to fill in. User can will attempt to fill them in and is allowed {0} attempts.",placeholder:/<input type="text" \/>/g,maxLengthText:"",shouldValidateMax:!1,timeOutTime:1e4,numberOfTries:2,button:{buttonText:"",showCorrectAnswer:{buttonText:"",buttonText2:""}},allCorrectFeedback:{final_correct_text:{audioComponent:{}}},multiFeedback:{first_incorrect_text:{value:"",audioComponent:{}},final_incorrect_text:{value:"",audioComponent:{}},final_correct_text:{value:"",audioComponent:{}},attempts_response_text:{value:"",audioComponent:{}}},correct_response_text:{value:"",audioComponent:{}},incorrect_response_text:{value:"",audioComponent:{}},attempts_response_text:{value:"",audioComponent:{}},correctResponse:[{pattern:{words:[]}}],results_text:{value:""},popupAudio:{audioClass:".popupsound",isPopAudio:!0,trigger:!0},fadeOutFeedback:!1,highlightingEnabled:!1},this.labelOpts={maxLengthText:"You have typed in the maximum letters.",checkAnswerText:"Check Answer",closeToolTip:"Close dialog",showCorrectAnswer:"Show Correct Answers",showMyAnswer:"Show My Answers",firstIncorrectText:"Try again.",firstCorrectText:"Good job!",finalIncorrectText:"Not quite.",finalCorrectText:"That is correct!",correctResponseText:"Your answer is correct!",incorrectResponseText:"Sorry, that is not correct.",correctAnswerShown:"Correct Answer Shown",correctAnswer:"Correct Answer",userSelectedCorrectAnswer:"Student Selected Correct",userSelectedIncorrectAnswer:"Student Selected Incorrect",disabledAnswer:"Disabled",answerItemAlert:"The correct answers for this questions have been highlited and are {AA}, {BB}, {CC}, {DD}, {EE}, {FF}, {GG}, {HH}, {II}, {JJ}, {KK}"},this.authOptions=$.extend(!0,{},b),PearsonGL.GadgetBase2.call(this,b,c),b&&(this.jObject=$(a),this.initialize())},Gadget.FillBlank.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.FillBlank.prototype.initialize=function(){var a=this;this.initGadget(this.options.gadgetName),this.isAllCorrect=!0,PearsonGL.utils.getGlobalizedLabel("fillblank_globalization",function(b){a.transferLabels(b),delete a.authOptions.scorm,$.extend(!0,a.options,a.authOptions),a.mergeAllMessages(),a.globalizationComplete()},this.options.runtimejson.lang)},Gadget.FillBlank.prototype.transferLabels=function(a){var b=this.options,c=$.extend(!0,this.labelOpts,a);b.button.buttonText=c.checkAnswerText,b.button.showCorrectAnswer.buttonText=c.showCorrectAnswer,b.button.showCorrectAnswer.buttonText2=c.showMyAnswer,b.allCorrectFeedback.final_correct_text.value=c.finalCorrectText,b.multiFeedback.first_incorrect_text.value=c.firstIncorrectText,b.multiFeedback.final_incorrect_text.value=c.finalIncorrectText,b.multiFeedback.final_correct_text.value=c.finalCorrectText,b.correct_response_text.value=c.correctResponseText,b.incorrect_response_text.value=c.incorrectResponseText,b.closeToolTip=c.closeToolTip,b.yesToolTip=c.yesToolTip,b.noToolTip=c.noToolTip,b.maxLengthText=c.maxLengthText},Gadget.FillBlank.prototype.mergeAllMessages=function(){this.options.allCorrectFeedback.final_correct_text.value!==this.labelOpts.finalCorrectText?(this.options.final_correct=this.options.allCorrectFeedback.final_correct_text,this.options.numberOfTries=1,this.options.first_incorrect=this.options.multiFeedback.first_incorrect_text,this.options.final_incorrect=this.options.multiFeedback.final_incorrect_text,this.options.attempts=this.options.multiFeedback.attempts_response_text,this.isAllCorrect=!0):this.options.correct_response_text.value===this.labelOpts.correctResponseText&&this.options.incorrect_response_text.value===this.labelOpts.incorrectResponseText&&""===this.options.attempts_response_text.value||1!==this.options.numberOfTries?(this.options.correct_response_text.value!==this.labelOpts.correctResponseText||this.options.incorrect_response_text.value!==this.labelOpts.incorrectResponseText)&&this.options.numberOfTries>1?(this.isLegacy=!0,this.options.final_correct=this.options.correct_response_text,this.options.final_incorrect=this.options.incorrect_response_text,this.options.first_incorrect=this.options.multiFeedback.first_incorrect_text,this.options.attempts=this.options.multiFeedback.attempts_response_text):(this.options.first_incorrect=this.options.multiFeedback.first_incorrect_text,this.options.final_incorrect=this.options.multiFeedback.final_incorrect_text,this.options.final_correct=this.options.multiFeedback.final_correct_text,this.options.attempts=this.options.multiFeedback.attempts_response_text):(this.options.final_correct=this.options.correct_response_text,this.options.final_incorrect=this.options.incorrect_response_text,this.options.attempts=this.options.attempts_response_text,this.options.first_incorrect=this.options.multiFeedback.first_incorrect_text)},Gadget.FillBlank.prototype.globalizationComplete=function(){var a;this.jObject.data("gadget_options",this.options),this.options.objectiveDescription=PearsonGL.utils.formatString(this.options.objectiveDescription,this.options.numberOfTries,""),this.jObject.addClass("fill-blank-identifier"),this.isTouchDevice="ontouchstart"in document.documentElement,this.isFirstAttempt=!0,this.scormData={numberOfTries:this.options.numberOfTries},this.MaxTries=this.options.numberOfTries,this.allCorrect=!1,this.setUpComponents(),this.addAccessibility(this.jObject);for(a=0;a<this.options.inputAttributes.length;a++)if(this.options.inputAttributes[a].correct_response){this.isAllCorrect=!1;break}this.getLearnerData({type:"fill-in"})},Gadget.FillBlank.prototype.cleanUpUnicode=function(a){var b=/\\u([\d\w]{4})/gi;return a=a.replace(b,function(a,b){return String.fromCharCode(parseInt(b,16))})},Gadget.FillBlank.prototype.setUpComponents=function(){var a,b,c,d,e,f=this,g=this.options,h=this.jObject,i="";if(""!==g.paragraph[0].value&&void 0!==g.paragraph[0].value){for(d=g.paragraph,a=0;a<d.length;a++)e=d[a].value,e=this.cleanUpUnicode(e),i=unescape(e).replace(this.options.placeholder,'<input tabindex="0" type="text" class="fib-input"/>'),h.append("<div class='gadget-textblock'><span class='text-audio-component'>"+i+"</span></div>"),void 0!==d[a].audioComponent&&""!==d[a].audioComponent.src&&h.find(".gadget-textblock:last").audioComponent(d[a].audioComponent);g.runtimejson&&g.runtimejson.highlightingEnabled&&h.children(".gadget-textblock").highLighter({saveHighLight:function(){f.saveHighLightTextInGadget()}})}for(b=h.find(".fib-input"),a=0;a<b.length;a++)$(b[a]).before('<label class=hidden-label id="blankSpace'+a+'">blank space '+(a+1)+"</label>"),$(b[a]).wrap('<span class="input-wrapper"></span>'),c=this.options.inputAttributes[a],$(b[a]).attr("data-index",a).attr({maxLength:c.maxLength,placeholder:c.placeholder,size:c.maxLength,"aria-labelledby":"blankSpace"+a});this.totalCorrect=b.length,h.find(".fib-input").addClass("placeholder"),this.options.showFeedback&&h.append('<div class="check-answer-button" aria-live="assertive"></div>'),h.dialogcomponent(this.options),this.addEventHandlers(),this.options.popupAudio.runtimejson=this.options.runtimejson,$(this.options.popupAudio.audioClass).audioComponent(this.options.popupAudio)},Gadget.FillBlank.prototype.setAnswerItemAlert=function(a,b){var c,d=a;for(c=0;c<b.length;c++)switch(currQ=b[c],c){case 0:d=d.replace(/\{AA}/g,currQ);break;case 1:d=d.replace(/\{BB}/g,currQ);break;case 2:d=d.replace(/\{CC}/g,currQ);break;case 3:d=d.replace(/\{DD}/g,currQ);break;case 4:d=d.replace(/\{EE}/g,currQ);break;case 5:d=d.replace(/\{FF}/g,currQ);break;case 6:d=d.replace(/\{GG}/g,currQ);break;case 7:d=d.replace(/\{HH}/g,currQ);break;case 8:d=d.replace(/\{II}/g,currQ);break;case 9:d=d.replace(/\{JJ}/g,currQ);break;case 10:d=d.replace(/\{KK}/g,currQ)}var e=d.indexOf("{");this.jObject.find(".result-text").append("<label class='hidden-label'> "+d.substring(0,e)+"</label>")},Gadget.FillBlank.prototype.checkForButtonState=function(){var a,b,c=this.jObject,d=c.find("input").length,e=!1;for(b=0;d>b;b++)if(a=c.find("input").get(b),""===$(a).val().trim()||$(a).hasClass("placeholder")){e=!0;break}c.find(".check-answer-button").sliderbutton(!e&&!this.allCorrect||this.options.numberOfTries<=0?"enable":"disable"),c.find(".button-text").attr("label")===this.options.button.showCorrectAnswer.buttonText&&c.find(".check-answer-button").sliderbutton("enable")},Gadget.FillBlank.prototype.addEventHandlers=function(){var a=this.jObject,b=this,c=""!==b.options.attempts.value;this.options.button.clickFunction=function(d){if(d.options.enable){var e=b.options.inputAttributes,f=!1,g=!1,h=a.find("input"),i={},j="";b.options.numberOfTries--,b.options.numberOfTries<=0&&(g=!0),a.find(".dialog-box-window").fadeOut();var k=a.find(".button-text");if(a.find(".show-correct-answers").length>0){var l;for(a.find(".show-correct-answers").addClass("show-incorrect-answers").removeClass("show-correct-answers"),k.empty().html(b.options.button.showCorrectAnswer.buttonText2).attr("label",b.options.button.showCorrectAnswer.buttonText2),PearsonGL.utils.initMathJax(k[0]),b.myanswers=[],l=0;l<e.length;l++)void 0!==e[l].correct_response&&""!==e[l].correct_response&&(responses=e[l].correct_response.split("|"),b.myanswers.push(a.find(h[l]).val()),a.find(h[l]).hasClass("incorrect_input")&&(a.find(h[l]).addClass("correct-answer").val(responses[0]),a.find(h[l]).parent(".input-wrapper").hasClass("incorrect-wrap")&&a.find(h[l]).parent(".input-wrapper").addClass("correct-wrap")));return}if(a.find(".show-incorrect-answers").length>0){for(a.find(".show-incorrect-answers").addClass("show-correct-answers").removeClass("show-incorrect-answers"),k.empty().html(b.options.button.showCorrectAnswer.buttonText).attr("label",b.options.button.showCorrectAnswer.buttonText),PearsonGL.utils.initMathJax(k[0]),l=0;l<e.length;l++)a.find(h[l]).removeClass("correct-answer").val(b.myanswers[l]),a.find(h[l]).parent(".input-wrapper").hasClass("incorrect-wrap")&&a.find(h[l]).parent(".input-wrapper").removeClass("correct-wrap");return}f=b.checkAnswers(),b.isAllCorrect&&(f=!0,a.find("input").removeClass("incorrect_input").addClass("correct_input"),a.find(".input-wrapper").removeClass("incorrect-wrap").addClass("correct-wrap")),f&&!c?(j=b.options.final_correct.value,i.value=j,i.audioComponent=b.options.final_correct.audioComponent):b.isFirstAttempt&&f&&!c?(j=b.options.final_correct.value,i.value=j,i.audioComponent=b.options.final_correct.audioComponent):g||f||g?!g&&b.isFirstAttempt||!f||c?!g&&b.isFirstAttempt||f||c?c&&(j=b.options.attempts.value,j=j.replace(/\XX/g,b.correctMessageCount),j=j.replace(/\YY/g,b.totalCorrect),i.value=j,i.audioComponent=b.options.attempts.audioComponent,a.find(".result-pop-up").removeClass("dialog-correct").removeClass("dialog-incorrect")):(j=b.options.final_incorrect.value,i.value=j,i.audioComponent=b.options.final_incorrect.audioComponent):(j=b.options.final_correct.value,i.value=j,i.audioComponent=b.options.final_correct.audioComponent):(j=b.options.first_incorrect.value,i.value=j,i.audioComponent=b.options.first_incorrect.audioComponent),b.isFirstAttempt=!1,$(b.options.popupAudio.audioClass).audioComponent("play"),b.options.numberOfTries>0?(f?(b.options.scorm.interactions.length>0&&b.options.scorm.interactions[0].objectives.length>0&&(b.options.scorm.interactions[0].objectives[0].score.raw=b.options.scorm.interactions[0].objectives[0].score.max,b.options.numberOfTries=0,b.scormData.numberOfTries=0,b.setCorrectResponse(),b.saveLearnerData()),b.options.results_text=i,a.find(".check-answer-button").sliderbutton("disable"),a.find(".dialog-box-window").addClass("dialog-correct").removeClass("dialog-incorrect")):(b.options.results_text=i,b.scormData.numberOfTries=b.options.numberOfTries,a.dialogcomponent("populateDialog",a.find(".result-text"),b.options.results_text),a.find(".dialog-box-window").removeClass("dialog-correct").addClass("dialog-incorrect")),a.dialogcomponent("populateDialog",a.find(".result-text"),b.options.results_text),void 0!==b.options.results_text.audioComponent&&""!==b.options.results_text.audioComponent.src&&void 0!==b.options.results_text.audioComponent.src&&a.find(".result-text").audioComponent(b.options.results_text.audioComponent)):(b.scormData.numberOfTries=b.options.numberOfTries,b.options.results_text=i,f?(a.find(".check-answer-button").sliderbutton("disable"),b.options.scorm.interactions.length>0&&b.options.scorm.interactions[0].objectives.length>0&&(b.options.scorm.interactions[0].objectives[0].score.raw=b.options.scorm.interactions[0].objectives[0].score.max),a.find(".dialog-box-window").addClass("dialog-correct").removeClass("dialog-incorrect")):a.find(".dialog-box-window").removeClass("dialog-correct").addClass("dialog-incorrect"),b.setCorrectResponse(),b.saveLearnerData(),a.dialogcomponent("populateDialog",a.find(".result-text"),b.options.results_text),void 0!==b.options.results_text.audioComponent&&""!==b.options.results_text.audioComponent.src&&void 0!==b.options.results_text.audioComponent.src&&a.find(".result-text").audioComponent(b.options.results_text.audioComponent)),b.showPopUpTimeOut(),f&&b.fireEvent(!0),!f&&g&&b.fireEvent(!1)}},this.isTouchDevice&&(this.options.button.useTouchForClick=!0),a.find(".check-answer-button").sliderbutton(this.options.button),a.find(".check-answer-button").sliderbutton("disable"),$("body").bind("click.body",function(){$(".max-length-found").unwrap().remove()}),a.find("input").unbind("focus").focus(function(){b.disableAudio();var c=$(this);$(".max-length-found").unwrap().remove(),a.find(".dialog-box-window").fadeOut(),c.addClass("text-focus"),c.val()===c.attr("placeholder")?(c.val(""),c.removeClass("placeholder")):c.val()!==c.attr("placeholder")&&c.removeClass("placeholder"),$(this).hasClass("incorrect_input")&&!$(this).attr("readonly")&&(c.val(""),c.removeClass("incorrect_input"),c.parent(".input-wrapper").removeClass("incorrect-wrap"))}).blur(function(){b.enableAudio();var a=$(this);a.removeClass("text-focus"),(""===a.val()||a.val()===a.attr("placeholder"))&&(a.addClass("placeholder"),navigator.userAgent.indexOf("MSIE")>-1&&a.val(a.attr("placeholder"))),b.hasLoaded&&!b.options.showFeedback?(b.scormData.numberOfTries=0,b.saveLearnerData()):b.hasLoaded&&b.saveLearnerData(),b.checkForButtonState()}).keyup(function(a){if(b.options.showFeedback&&!$(this).attr("readonly")&&b.checkForButtonState(),!b.options.shouldValidateMax&&$(this).attr("maxlength")==$(this).val().length&&9!==a.keyCode&&16!==a.keyCode&&39!==a.keyCode&&37!==a.keyCode){$(".max-length-found").unwrap().remove(),$(this).wrap("<span class='max-len-wrapper' style='position:relative'></span>").parent().append('<div tabindex="0" class="max-length-found NO-HIGHLIGHT"><span>'+b.options.maxLengthText+'</span><span class="max-length-pointer"></span></div>');var c=$(".max-length-found").outerHeight(),d=$(".max-length-found").outerWidth(),e=$(this).outerWidth(),f=$(this).position().top,g=10,h=f-parseInt(c+g,10),i=(e-d)/2,j={};i+="px",h+="px",j={position:"absolute",top:h,left:i},$(".max-length-found").css(j).focus(),window.clearTimeout(this.popuptimeout),this.popuptimeout=window.setTimeout(function(){$(".max-length-found").unwrap().remove()},b.options.timeOutTime)}}).blur(),this.hasLoaded=!0},Gadget.FillBlank.prototype.disableAudio=function(){var a=this.jObject;a.find("*").hasClass("audioToggleIdentifier")&&a.find(".audioToggleIdentifier").audioComponent("disableAudio")},Gadget.FillBlank.prototype.enableAudio=function(){var a=this.jObject;a.find("*").hasClass("audioToggleIdentifier")&&a.find(".audioToggleIdentifier").audioComponent("enableAudio")},Gadget.FillBlank.prototype.setCorrectResponse=function(){var a,b,c,d,e,f,g=$(this.jObject).find("input"),h=[];for(a=0;a<g.length;a++){for(e=!0,b=this.options.inputAttributes[a].correct_response?this.options.inputAttributes[a].correct_response.split("|"):[],c=$(g[a]).val(),$(g[a]).attr("placeholder")===c&&(c=""),f=0;f<b.length;f++)if(d=b[f],this.options.inputAttributes[a].case_sensitive||(c=c.toLowerCase(),d=d.toLowerCase()),d.trim()===c.trim()){h.push(c),e=!1;break}e&&h.push(b[0])}this.options.correctResponse[0].pattern={words:h}},Gadget.FillBlank.prototype.showPopUpTimeOut=function(){var a=this.jObject.find(".result-pop-up");window.clearTimeout(this.popuptimeout),a.show(),this.jObject.find(".dialog-box-window").focus(),this.options.fadeOutFeedback&&(this.popuptimeout=window.setTimeout(function(){a.fadeOut()},3e3))},Gadget.FillBlank.prototype.checkAnswers=function(a){var b,c,d,e,f,g=!0,h=!1,i=!1,j=this.jObject,k=this.options.inputAttributes,l=j.find("input");for(this.correctMessageCount=0,this.numberCorrect=0,b=0;b<k.length;b++)if(f=k[b],void 0!==f.correct_response&&""!==f.correct_response){for(d=f.correct_response.split("|"),e=f.case_sensitive,c=0;c<d.length;c++)if(i=!1,currentValue=j.find(l[b]).val().trim(),currentResponseValue=d[c].trim(),e||(currentValue=currentValue.toLowerCase(),currentResponseValue=currentResponseValue.toLowerCase()),currentValue===currentResponseValue&&""!==currentValue&&void 0===a){i=!0,this.numberCorrect++,j.find(l[b]).removeClass("incorrect_input").addClass("correct_input").attr({disabled:"disabled",readonly:"readonly",tabindex:"-1"}).unbind(),j.find(l[b]).parent(".input-wrapper").removeClass("incorrect-wrap").addClass("correct-wrap");break}i||this.isAllCorrect?this.correctMessageCount++:(g=!1,j.find(l[b]).addClass("incorrect_input"),j.find(l[b]).parent(".input-wrapper").addClass("incorrect-wrap")),""===j.find(l[b]).val().trim()&&(h=!0),!i&&!this.isAllCorrect&&this.options.numberOfTries>0&&j.find(l[b]).val("")}return(h||this.options.numberOfTries==this.MaxTries)&&j.find("input").attr("class","fib-input"),j.find(".check-answer-button").sliderbutton("disable"),this.options.numberOfTries<=0&&!g&&(j.find(".button-text").empty().html(this.options.button.showCorrectAnswer.buttonText).addClass("show-correct-answers").attr("label",this.options.button.showCorrectAnswer.buttonText),j.find(".check-answer-button").sliderbutton("enable")),a?g&&j.find(".check-answer-button").sliderbutton("enable"):(g||this.options.numberOfTries<=0)&&(j.find("input").attr({readonly:"readonly",tabindex:"-1"}).unbind(),this.allCorrect=!0),g},Gadget.FillBlank.prototype.setGadget=function(){var a=this.scormData;if(this.setLearner_response(),a){var b=this.options.numberOfTries;this.options.numberOfTries=a.numberOfTries,this.attemptCount=a.numberOfTries,b==a.numberOfTries?this.checkAnswers(!0):this.checkAnswers(),this.checkForButtonState()}else this.scormData={numberOfTries:this.options.numberOfTries}},Gadget.FillBlank.prototype.gadgetUnload=function(){this.isCommEnabled()&&(this.setCorrectResponse(),this.saveLearnerData())},Gadget.FillBlank.prototype.parseLearnerData=function(){var a=this.options.scorm.suspendData.data;"object"==typeof a&&(this.scormData=a,this.setGadget())},Gadget.FillBlank.prototype.saveLearnerData=function(){if(this.isCommEnabled()){var a,b=[];for(this.options.scorm.suspendData.data=this.scormData,a=0;a<this.options.scorm.interactions.length;a++)result=this.getResult(this.options.scorm.interactions[a].objectives[0]),result.learnerResponse=this.learner_response(),result.correctResponses=this.options.correctResponse,b.push(result);this.setLearnerData({gadgetId:this.gadgetUniqueId,data:this.options.scorm,results:b})}},Gadget.FillBlank.prototype.setLearner_response=function(){if(this.options.scorm.interactions&&this.options.scorm.interactions.length>0&&this.options.scorm.interactions[0].learner_response&&this.options.scorm.interactions[0].learner_response.words){var a,b,c=this.options.scorm.interactions[0].learner_response.words,d=$(this.jObject).find("input");$.each(d,function(){return a=$(this).attr("data-index"),b=c[a],void 0===b?!0:($(this).val(b),void(""!==b.trim()&&$(this).removeClass("placeholder")))})}},Gadget.FillBlank.prototype.getResult=function(a){var b,c={},d=$(this.jObject).find("input"),e=d.length,f=0;try{for(b=0;b<d.length;b+=1)currTextBox=d[b],$(currTextBox).hasClass("correct_input")&&(f+=1);c.raw=parseFloat(a.score.max)*(f/e),c.min=isNaN(a.score.min)?0:parseFloat(a.score.min),c.max=a.score.max,c.scaled=c.max-c.min!==0?(c.raw-c.min)/(c.max-c.min):1,c.completionStatus="incomplete",c.successStatus="failed",a.completion_status="incomplete",a.success_status="failed",this.options.showFeedback?(this.numberCorrect&&(a.score.scaled=this.numberCorrect/this.options.inputAttributes.length),parseFloat(a.score.scaled)>=parseFloat(SB.get("scaled_passing_score"))&&this.options.numberOfTries<=0&&(a.success_status="passed",c.successStatus="passed"),("passed"===a.success_status||this.options.numberOfTries<=0)&&(a.completion_status="completed",c.completionStatus="completed")):(a.completion_status="completed",a.success_status="passed",c.completionStatus="completed",c.successStatus="passed",c.scaled=1,c.raw=a.score.max),a.score.max!==a.score.raw&&(a.score=c),a.progress_measure=1,c.progressMeasure=1,this.isAllCorrect&&(c.scaled=1,c.raw=a.score.max,a.score=score,a.completion_status="completed",a.success_status="passed",c.completionStatus="completed",c.successStatus="passed")}catch(g){}return this.giveAllPoints===!0&&(a.score.raw=a.score.max,a.success_status="passed",c.successStatus="passed",this.giveAllPoints=!1),c.result=c.scaled,c},Gadget.FillBlank.prototype.learner_response=function(){var a,b,c,d=$(this.jObject).find("input"),e=[],f=d.length;for(a=0;f>a;a+=1)b=d[a],c=$(b).val(),$(b).hasClass("placeholder")&&(c=""),e.push(c);return{words:e}},Gadget.FillBlank.prototype.fireEvent=function(a){var b=a?"finalCorrect":"finalIncorrect",c={sourceId:this.gadgetUniqueId};$(window).trigger(b,c)},window.Gadget=window.Gadget||{},Gadget.TileSort=function(a,b,c){return this.labelOpts={ofLabel:"of",closeToolTip:"Close",selectedText:"SELECTED",correctText:"Correct",incorrectText:"Incorrect",yesToolTip:"Yes",noToolTip:"No",customCheckAnswer:"Check Answer",customSolution:"Solution",customRestButton:"Rest",customTryAgain:"Try Again",customMyAnswers:"Show My Answers",capacityError:"<b>Whoops!</b></br> This area is full. You can remove an item to make room."},this.options={popupAudio:{audioClass:".popupsound",isPopAudio:!0,trigger:!0},gadgetName:"TileSort",objectiveDescription:"User matches tiles to categories and is allowed a set number of attempts.",fadeOutFeedback:!0},this.authOptions=$.extend(!0,{},b),PearsonGL.GadgetBase2.call(this,b,c),b?(this.theGadget=null,this.jObject=$(a),this.initialize(),this.theGadget):void 0},Gadget.TileSort.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.TileSort.prototype.initialize=function(){var a=this;this.initGadget(this.options.gadgetName),PearsonGL.utils.getGlobalizedLabel("tilesort_globalization",function(b){a.transferLabels(b),delete a.authOptions.scorm,$.extend(!0,a.options,a.authOptions),a.options.labelOpts=a.labelOpts,a.theGadget=a.options.custom?new Gadget.CustomTileSort(a.jObject,a.options,a.gadgetUniqueId):new Gadget.OriginalTileSort(a.jObject,a.options,a.gadgetUniqueId)},this.options.runtimejson.lang)},Gadget.TileSort.prototype.transferLabels=function(a){var b=this.options,c=c=$.extend(!0,this.labelOpts,a);b.selectedText=c.selectedText,b.correctText=c.correctText,b.incorrectText=c.incorrectText,b.closeToolTip=c.closeToolTip,b.yesToolTip=c.yesToolTip,b.noToolTip=c.noToolTip,b.ofLabel=c.ofLabel,b.buttons&&(b.buttons.resetButtonGroup&&(b.buttons.resetButtonGroup[0].resetButtonText=c.customRestButton),b.buttons.showAnswerButtonGroup&&(b.buttons.showAnswerButtonGroup[0].showAnswerButton=c.customSolution,b.buttons.showAnswerButtonGroup[0].showMyAnswersButton=c.customMyAnswers),b.buttons.checkAnswerButton=c.customCheckAnswer,b.buttons.tryAgainButton=c.customTryAgain)},Gadget.TileSort.prototype.gadgetUnload=function(){this.isCommEnabled()&&this.hasBeenInteractedWith&&this.saveLearnerData()},Gadget.TileSort.prototype.fireEvent=function(a){var b=a?"finalCorrect":"finalIncorrect",c={sourceId:this.gadgetUniqueId};$(window).trigger(b,c)},Gadget.CustomTileSort=function(a,b,c){if(this.options={gadgetName:"TileSortCust"},b){this.jObject=$(a),this.gadgetUniqueId=c,this.labelOpts=b.labelOpts,b.custom=b.custom[0],$.extend(!0,this.options,b),this.jObject.addClass("custom-sorter-identifier"),this.jObject.attr("id",PearsonGL.utils.randomString(9)),this.fakeTileName="djnone",this.totalTriesCount=0,this.progressBarOptions={useGraphical:!1,useNumeric:!1,dropZoneCount:0},this.scormData={tilePattern:[],numberOfTries:0};var d,e,f,g=this.options.custom,h=g.backgroundImage,i=this,j=this.jObject;d=document.createElement("img"),d.setAttribute("class","main-background"),$(d).attr({title:h.title,alt:h.title}),d.onload=function(){j.append(this);var a=d.naturalWidth,b=d.naturalHeight;j.width(a).height(b),j.append("<div class='custom-holder' style='width:"+a+"px;height:"+b+"px;'></div>"),j.find(".main-background").css({maxWidth:a+"px"}),i.isInstant="instantFeedback"===i.options.feedbackType,i.buildDropZones(),i.buildTiles(),i.buildLabels(),i.addButtons(),i.addDragEvents(),i.randomizeAnimations(),i.buildProgressBar(),i.scaled=$(window).height()/b,i.orgImgHeight=b*i.scaled,i.orgImgWidth=a*i.scaled,g.hideTileBackground&&j.find(".c-tile").addClass("no-bk"),g.hideDropZoneBackground&&j.find(".s-drop-zone, .b-drop-zone").addClass("no-bk"),i.getLearnerData({type:"matching"})},d.src=h.src,"string"==typeof i.options.correctAudio&&""!==i.options.correctAudio&&(e=$("<div class='dnd-correct-audio' style='display:none'></div>"),e.appendTo(j),e.audioComponent({src:i.options.correctAudio,trigger:!0,type:"hover"})),"string"==typeof i.options.inCorrectAudio&&""!==i.options.inCorrectAudio&&(f=$("<div class='dnd-in-correct-audio' style='display:none'></div>"),f.appendTo(j),f.audioComponent({src:i.options.inCorrectAudio,trigger:!0,type:"hover"})),j.delegate(".modal-dialog-window","click",function(){i.removeDialogs()}),this.img_correctIndex=0,this.img_incorrectIndex=0,this.txt_correctIndex=0,this.txt_incorrectIndex=0}},Gadget.CustomTileSort.prototype=Object.create(Gadget.TileSort.prototype),Gadget.CustomTileSort.prototype.resizeContentEvent=function(){var a=this;$(window).bind("resize.tileSort",function(){clearTimeout(a.doit),a.doit=setTimeout(function(){a.resizeContent()},200)})},Gadget.CustomTileSort.prototype.resizeContent=function(){var a,b,c=this.jObject,d=this.options.custom,e=d.tile;for(this.scaled=$(window).height()/this.orgImgHeight,this.orgImgWidth=this.orgImgWidth*this.scaled,this.orgImgHeight=this.orgImgHeight*this.scaled,a=0;a<e.imageTiles.length;a++)b=e.imageTiles[a];for(a=0;a<e.imageTiles.length;a++)b=e.imageTiles[a],b.xcoord=b.xcoord*this.scaled,b.ycoord=b.ycoord*this.scaled,b.width=b.width*this.scaled,b.height=b.height*this.scaled,c.find(".c-image-tile[data-id=IT"+a+"]").css({top:b.ycoord,left:b.xcoord,width:b.width,height:b.height});c.find(".main-background").css({height:this.orgImgHeight+"px",width:this.orgImgWidth+"px"})},Gadget.CustomTileSort.prototype.removeDialogs=function(){this.jObject.find(".result-pop-up, .modal-dialog-window, .dialog-box-window").remove()},Gadget.CustomTileSort.prototype.animateTileToStartPos=function(a,b,c){var d,e=this,f=!0,g=this.jObject,h=this.getOrgTilePostion(b),i=g.offset().top,j=g.offset().left,k=$(b).attr("data-id");if(a&&this.dropZones[a].subZones){for(d in this.dropZones[a].subZones)if(this.dropZones[a].subZones[d].dragId===k){e.doingReset&&!this.dropZones[a].subZones[d].isCorrect||!e.doingReset&&this.dropZones[a].subZones[d].isCorrect?f=!0:e.doingReset&&this.dropZones[a].subZones[d].isCorrect&&(f=!1);break}}else a&&(e.doingReset&&!this.dropZones[a].isCorrect||!e.doingReset&&this.dropZones[a].isCorrect?f=!0:e.doingReset&&this.dropZones[a].isCorrect&&(f=!1));f?(this.dragTiles[k].isDistractor&&(this.dragTiles[k].isCorrect=!0),$(b).hasClass("dropped-item")&&($(b).parent().hasClass("b-cell")&&$(b).parent().addClass("open-cell"),g.find(".custom-holder").prepend($(b)),$(b).css({top:c.offset.top-i,left:c.offset.left-j,position:"absolute"})),h.zindex=c.zindex,h.position="absolute",$(b).find(".feedback-icon").fadeOut(500,function(){$(this).removeClass("correct_icon incorrect_icon")}),$(b).removeClass("drag-item-correct drag-item-incorrect"),this.animateTileToPosition(b,h,function(){e.options.custom.tile.cloneTiles&&$(b).hasClass("dropped-item")&&$(b).fadeOut(400,function(){$(this).remove()}),$(b).removeClass("dropped-item"),e.resetTilesInCustomHolder()})):this.resetTilesInCustomHolder()},Gadget.CustomTileSort.prototype.animateTileToPosition=function(a,b,c){$(a).animate({top:b.ycoord,left:b.xcoord,position:b.postion,zIndex:100+b.zindex},400,c)},Gadget.CustomTileSort.prototype.revertToStartPos=function(a){if(wasAlreadyInADropZone=$(a).parent().hasClass("DMZ")?!0:!1,this.wasDroppedOutsideOfDropzone&&wasAlreadyInADropZone)this.doRevert=!1;else if(this.wasDroppedOutsideOfDropzone)return void(this.doRevert=!0);wasAlreadyInADropZone||(this.dropZones[this.lastDroppedZone]&&this.dropZones[this.lastDroppedZone].isCorrect&&!this.dragTiles[$(this.ActiveElement).attr("data-id")].isDistractor?this.doRevert=!1:this.isInstant?this.doRevert=!0:wasAlreadyInADropZone||(this.orgDroppedZone=void 0)),this.placeWrongTileInCorrectSpot(a,!1,!1)},Gadget.CustomTileSort.prototype.isZoneFilled=function(a,b,c){var d=c+1;return a.children().length>0&&!$(a).hasClass("b-drop-zone")&&b.locations[c]&&(a=this.jObject.find(".DMZ[data-id="+b.locations[c]+"]"),a=this.isZoneFilled(a,b,d)),a},Gadget.CustomTileSort.prototype.testAllZonesFilled=function(){var a,b,c,d,e,f,g,h,i,j,k=this.jObject,l=this,m=k.find(".DMZ"),n=!1,o={};for(b=0;b<m.length;b++)if(a=$(m[b]),h=a.attr("data-id"),h&&a.children().length>1)for(d=0;d<a.children().length;d++)if(e=$(a.find(".c-tile")[d]),f=e.attr("data-id"),g=this.dragTiles[f],!g.isCorrect&&g.locations.length>1){for(c=0;c<g.locations.length;c++)if(i=g.locations[c],h!==i&&(j=k.find(".DMZ[data-id="+i+"]"),!($(j).children().length>0))){n=!0,o.xcoord=$(j).position().left,o.ycoord=$(j).position().top,k.append(e),e.css({top:a.position().top,left:a.position().left,position:"absolute"}),l.animateTileToPosition(e,o,function(){e.css({top:"auto",left:"auto"}),$(j).append(e)
});break}if(n)break}},Gadget.CustomTileSort.prototype.placeWrongTileInCorrectSpot=function(a,b,c,d,e){var f=this.jObject,g=this,h=0,i=!1,j=a.attr("data-id"),k=this.dragTiles[j];if(d=d||k.locations[h],c&&f.find(".custom-holder").prepend($(a)),(this.isInstant||b)&&(k.maxTriesCount>=this.options.numberOfTries||this.totalTriesCount>=this.options.numberOfTries)){if(k.isDistractor||e){var l=g.getOrgTilePostion(a);l.zindex=101,l.position="absolute",this.animateTileToPosition(a,l,function(){$(this).draggable("disable"),g.setShowAnswerButtonStates("enable")})}else{var m=this.jObject.find(".DMZ[data-id="+d+"]");0===m.length&&(m=this.jObject.find(".b-drop-zone[data-id="+d+"]"),i=!0),this.isInstant&&(m=this.isZoneFilled(m,k,0)),offset=m.position(),this.doRevert=!1;var n={};(!k.isCorrect&&this.isInstant||!this.isInstant)&&(n={xcoord:offset.left,ycoord:offset.top},this.animateTileToPosition(a,n,function(){$(this).draggable("disable"),i?$(m).find(".open-cell:first").append(this).removeClass("open-cell"):$(m).append(this),$(this).css({top:"auto",left:"auto"}).addClass("dropped-item"),g.isInstant||g.testAllZonesFilled(),g.setProgressBarValue(),g.setShowAnswerButtonStates("enable"),g.isInstant&&g.isCommEnabled()&&g.saveLearnerData()})),k.isCorrect?a.find(".feedback-icon").removeClass("incorrect_icon").addClass("correct_icon"):a.find(".feedback-icon").removeClass("correct_icon").addClass("incorrect_icon"),g.options.feedback.showGraphicalTreatment||!g.isInstant&&!b||(a.find(".feedback-icon").fadeIn(),a.toggleClass("drag-item-correct",k.isCorrect),a.toggleClass("drag-item-incorrect",!k.isCorrect))}this.doRevert=!1}},Gadget.CustomTileSort.prototype.getOrgTilePostion=function(a){var b=this.options.custom,c=b.tile,d=$(a).attr("data-id"),e=d.substring(2,d.length),f=d.indexOf("TT")>-1?c.textTiles[e]:c.imageTiles[e];return f},Gadget.CustomTileSort.prototype.wasCorrectSpot=function(a,b){var c,d,e,f=this.jObject,g=this.dragTiles[b].locations,h=!1,i=f.find(".c-tile[data-id="+b+"]"),j=this.dragTiles[b];for(d=i.parent().hasClass("b-cell")?$(i).parent().attr("data-id")+","+a:$(i).parent().attr("data-id"),c=0;c<g.length;c++)if(e=g[c],e===a){if(h=!0,j.isCorrect=!0,this.isInstant)for(x=0;x<i.length;x++)if($(i[x]).hasClass("dropped-item")&&!$(i[x]).find(".feedback-icon").hasClass("correct_icon")){$(i[x]).find(".feedback-icon").removeClass("incorrect_icon").addClass("correct_icon"),$(i[x]).removeClass("drag-item-correct drag-item-incorrect"),this.options.feedback.showGraphicalTreatment||($(i[x]).find(".feedback-icon").fadeIn(),$(i[x]).addClass("drag-item-correct"));break}break}return h||(j.isCorrect=!1),j.droppedZone=d,h},Gadget.CustomTileSort.prototype.checkAnswer=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o=this.jObject,p=o.find(".c-checkanswer-button"),q=!0,r=!0;if(this.hasBeenInteractedWith=!0,a){r=b;var s=$(this.ActiveElement).attr("data-id"),t=this.dragTiles[s];this.options.custom.tile.cloneTiles?"":t.maxTriesCount++}else{if(this.totalTriesCount++,this.options.custom.tile.cloneTiles){for(f=o.find(".c-tile"),k=0;k<f.length;k++)if(g=f[k],$(g).hasClass("dropped-item")){for(h=$(g).parent(),$(h).hasClass("b-cell")&&(i=$(h).attr("data-id"),h=$(h).parent().parent()),e=h.attr("data-id"),j=$(g).attr("data-id"),m=this.dragTiles[j].locations,l=0;l<m.length;l++){if(n=m[l],e===n){q=!0;break}q=!1}q?(this.dragTiles[j].isCorrect=!0,this.dropZones[e].subZones?(this.dropZones[e].subZones[i].isCorrect=!0,this.dropZones[e].subZones[i].checked=!0):(this.dropZones[e].isCorrect=!0,this.dropZones[e].checked=!0),$(g).draggable("disable"),$(g).find(".feedback-icon").removeClass("incorrect_icon").addClass("correct_icon"),this.options.feedback.showGraphicalTreatment||($(g).find(".feedback-icon").fadeIn(),$(g).removeClass("drag-item-incorrect").addClass("drag-item-correct"))):($(g).find(".feedback-icon").removeClass("correct_icon").addClass("incorrect_icon"),this.options.feedback.showGraphicalTreatment||($(g).find(".feedback-icon").fadeIn(),$(g).removeClass("drag-item-correct").addClass("drag-item-incorrect")),this.dragTiles[j].isCorrect=!1,this.dropZones[e].subZones?(this.dropZones[e].subZones[i].isCorrect=!1,this.dropZones[e].subZones[i].checked=!1):(this.dropZones[e].isCorrect=!1,this.dropZones[e].checked=!1),r=!1),this.dragTiles[j].droppedZone=e}}else{var u,v,w,x,y,z={};for(d in this.dropZones)if(u=this.dropZones[d],u.subZones)for(v in u.subZones)y=u.subZones[v],z[y.dragId]=y.isCorrect,this.dropZones[d].subZones[v].checked=y.isCorrect;else z[u.dragId]=u.isCorrect,this.dropZones[d].checked=u.isCorrect;for(x in z)w=z[x],g=o.find(".c-tile[data-id='"+x+"']"),w?($(g).draggable("disable"),$(g).find(".feedback-icon").removeClass("incorrect_icon").addClass("correct_icon"),this.options.feedback.showGraphicalTreatment||($(g).find(".feedback-icon").fadeIn(),$(g).removeClass("drag-item-incorrect").addClass("drag-item-correct"))):(r=!1,$(g).find(".feedback-icon").removeClass("correct_icon").addClass("incorrect_icon"),this.options.feedback.showGraphicalTreatment||($(g).find(".feedback-icon").fadeIn(),$(g).removeClass("drag-item-correct").addClass("drag-item-incorrect")))}r&&this.fireEvent(!0),r||this.totalTriesCount!==this.options.numberOfTries||this.fireEvent(!1)}this.scormData.checkedAnswer=!0,this.scormData.allCorrect=r,this.scormData.numberOfTries=this.totalTriesCount,this.isCommEnabled()&&!this.isInstant&&this.saveLearnerData(),this.totalTriesCount>=this.options.numberOfTries&&(o.find(".c-answer-button").show(),this.setShowAnswerButtonStates("enable")),c=this.options,c.imageComponent=this.pickrandomAnimation(r),c.textMessage=this.pickRandomTextMessage(r),c.isModal=!0,(c.imageComponent||c.textMessage)&&(this.removeDialogs(),this.options.dialogType=c.imageComponent?"animated":"feedback",c.doAnimate=this.options.imageComponent&&this.options.imageComponent.fps?!0:!1,c.resultsText=c.textMessage?c.textMessage.value:"",this.options.popupAudio.src=r?this.options.correctAudio:this.options.inCorrectAudio,this.options.popupAudio.isPopAudio=!1,$(this.options.popupAudio.audioClass).audioComponent(this.options.popupAudio),o.dialogcomponent(c),o.find(".result-pop-up").fadeIn().focus(),$(this.options.popupAudio.audioClass).audioComponent("play"),c.textMessage&&c.textMessage.audioComponent&&c.textMessage.audioComponent.src&&""!==c.textMessage.audioComponent.src&&o.find(".result-text-container .result-text").audioComponent(c.textMessage.audioComponent)),(r||this.totalTriesCount===this.options.numberOfTries)&&(p.sliderbutton("disable"),p.find(".button-text").html(this.options.buttons.checkAnswerButton),p.removeClass("try-again"),this.scormData.numberOfTries=0),r&&(this.setShowAnswerButtonStates("disable"),o.find(".c-answer-button, .c-myanswer-button").hide())},Gadget.CustomTileSort.prototype.showMyAnswers=function(){var a,b,c,d,e,f,g,h,j,k,l,m=this.jObject,n=this,o=m.find(".c-tile"),p=m.offset().top,q=m.offset().left;if(this.options.custom.tile.cloneTiles){m.find(".dropped-item").remove(),m.find(".b-cell").addClass("open-cell"),k=[],l=0;for(e in n.dropZones)if(g=n.dropZones[e],g.subZones)for(j in g.subZones)b=g.subZones[j].dragId,h=m.find(".c-tile[data-id="+b+"]").not(".clone,.dropped-item").clone(),$(h).addClass("clone"),m.find(".custom-holder").append(h),$(h).find(".feedback-icon").addClass(g.subZones[j].isCorrect?"correct_icon":"incorrect_icon"),this.options.feedback.showGraphicalTreatment||($(h).toggleClass("drag-item-correct",g.subZones[j].isCorrect),$(h).toggleClass("drag-item-incorrect",!g.subZones[j].isCorrect),$(h).find(".feedback-icon").fadeIn()),d=m.find(".DMZ[data-id="+j+"]").offset(),f={ycoord:d.top-p,xcoord:d.left-q,position:"absolute"},m.find(".b-drop-zone[data-id="+e+"]").find(".open-cell:first").append(h).removeClass("open-cell"),n.setShowAnswerButtonStates("enable"),$(h).css({top:"auto",left:"auto"}).addClass("dropped-item");else b=g.dragId,h=m.find(".c-tile[data-id="+b+"]").not(".clone,.dropped-item").clone(),$(h).addClass("clone"),m.find(".custom-holder").append(h),$(h).find(".feedback-icon").addClass(g.isCorrect?"correct_icon":"incorrect_icon"),this.options.feedback.showGraphicalTreatment||($(h).toggleClass("drag-item-correct",g.isCorrect),$(h).toggleClass("drag-item-incorrect",!g.isCorrect)),k.push(m.find(".DMZ[data-id="+e+"]")),d=m.find(".DMZ[data-id="+e+"]").offset(),f={ycoord:d.top-p,xcoord:d.left-q,position:"absolute"},n.animateTileToPosition($(h),f,function(){$(k[l]).append(this),l++,$(this).css({top:"auto",left:"auto"}).addClass("dropped-item"),n.setShowAnswerButtonStates("enable")});this.options.feedback.showGraphicalTreatment||m.find(".feedback-icon").fadeIn()}else{k=[],l=0;var r,s,t;for(i=0;i<o.length;i++)a=o[i],b=$(a).attr("data-id"),this.dragTiles[b].isCorrect||(e=this.dragTiles[b].droppedZone,e?(e.indexOf(",")>-1?(r=e.split(","),e=r[0],t=r[1],s=".b-drop-zone[data-id="+t+"] .DMZ[data-id="+e+"]"):s=".DMZ[data-id="+e+"]",k.push(m.find(s)),d=m.find(s).offset(),c={top:$(a).offset().top-p,left:$(a).offset().left-q},$(a).css(c),c={ycoord:d.top-p,xcoord:d.left-q,position:"absolute"},$(a).parent().hasClass("b-cell")&&$(a).parent().addClass("open-cell"),m.find(".custom-holder").prepend($(a)),this.animateTileToPosition($(a),c,function(){$(k[l]).append(this),l++,$(this).css({top:"auto",left:"auto"}).addClass("dropped-item"),n.setShowAnswerButtonStates("enable")})):(c={top:$(a).offset().top-p,left:$(a).offset().left-q},c.position="absolute",$(a).css(c),$(a).find(".feedback-icon").removeClass("incorrect_icon correct_icon"),$(a).removeClass("drag-item-correct drag-item-incorrect"),c=this.getOrgTilePostion($(a)),$(a).parent().hasClass("b-cell")&&$(a).parent().addClass("open-cell"),m.find(".custom-holder").prepend($(a)),this.animateTileToPosition($(a),c,function(){n.setShowAnswerButtonStates("enable")})));this.options.feedback.showGraphicalTreatment||m.find(".c-tile").each(function(a,b){b=$(b);var c=b.find(".feedback-icon");b.toggleClass("drag-item-correct",c.hasClass("correct_icon")),b.toggleClass("drag-item-incorrect",c.hasClass("incorrect_icon")),c.fadeIn()})}},Gadget.CustomTileSort.prototype.totalCountReachedShowCorrectAnswers=function(){var a,b,c,d,e,f,g,h=this,i=this.jObject,j=i.find(".c-checkanswer-button"),k=i.find(".custom-holder"),l=i.find(".DMZ"),m=0,n=[],o=[],p=i.offset();if(this.options.custom.tile.cloneTiles){i.find(".dropped-item").remove(),i.find(".b-cell").addClass("open-cell");for(dragTileId in this.dragTiles)n.push(dragTileId);l.each(function(g,j){j=$(j);var l=j.hasClass("b-cell"),o=l?j.closest(".b-drop-zone").attr("data-id"):j.attr("data-id"),q=m;a:do for(b=n[m],a=h.dragTiles[b],m=(m+1)%n.length,f=0;f<a.locations.length;f++)if(o===a.locations[f]){c=i.find(".c-tile[data-id="+b+"]").first(),d=c.offset(),e=c.clone(),e.appendTo(k),e.css({top:d.top-p.top,left:d.left-p.left,position:"absolute"}),h.placeWrongTileInCorrectSpot(e,!0,!0,o);break a}while(m!==q)})}else{for(b in h.dragTiles)a=h.dragTiles[b],c=i.find(".c-tile[data-id="+b+"]").first(),d=c.offset(),a.isCorrect||(c.parent(".b-cell").addClass("open-cell"),c.appendTo(k),c.css({top:d.top-p.top,left:d.left-p.left,position:"absolute"}),o.push({tileElement:c,tile:a}));for(l.each(function(b,d){d=$(d);var e=d.hasClass("b-cell"),i=e?d.closest(".b-drop-zone").attr("data-id"):d.attr("data-id"),j=e&&d.hasClass("open-cell")||!e&&0===d.children().length;if(j)a:for(f=0;f<o.length;f++)for(a=o[f].tile,c=o[f].tileElement,g=0;g<a.locations.length;g++)if(i===a.locations[g]){h.placeWrongTileInCorrectSpot(c,!0,!0,i),o.splice(f,1);break a}}),f=0;f<o.length;f++)h.placeWrongTileInCorrectSpot(o[f].tileElement,!0,!0,null,!0)}i.find(".feedback-icon").hide(),i.find(".c-tile").removeClass("drag-item-correct drag-item-incorrect"),j.sliderbutton("disable"),j.find(".button-text").html(this.options.buttons.checkAnswerButton),j.removeClass("try-again")},Gadget.CustomTileSort.prototype.pickRandomTextMessage=function(a){var b,c,d,e=this.options.feedback,f=e.messages_feedback,g=this.totalTriesCount,h=!1,i=this.ActiveElement,j=!1,k=g>=this.options.numberOfTries?!0:!1;if(f&&(c=f.correct,d=f.incorrect,a?(b=c[this.txt_correctIndex],this.txt_correctIndex>=c.length-1?this.txt_correctIndex=0:this.txt_correctIndex++):(b=d[this.txt_incorrectIndex],this.txt_incorrectIndex>=d.length-1?this.txt_incorrectIndex=0:this.txt_incorrectIndex++)),this.isInstant?(tileId=$(i).attr("data-id"),g=this.dragTiles[tileId].maxTriesCount,j=g>=this.options.numberOfTries):e.attempts_response_text.value&&(h=!0),!h&&a&&1===g&&e.first_correct_text.value)b=e.first_correct_text;else if(h||a||!j&&!k||!e.final_incorrect_text.value){if(h&&(k||a)){var l=this.calculateScores(),m=this.jObject.find(".DMZ").length,n=e.attempts_response_text.value;n=n?n.replace(/\XX/g,l):"",n=n?n.replace(/\YY/g,m):"",e.attempts_response_text.value=n,b=e.attempts_response_text}}else b=e.final_incorrect_text;return!this.isInstant&&k&&this.jObject.find(".c-tile").draggable("disable"),b},Gadget.CustomTileSort.prototype.calculateScores=function(){var a,b=0,c=this.jObject.find(".feedback-icon");for(a=0;a<c.length;a++)$(c[a]).hasClass("correct_icon")&&b++;return b},Gadget.CustomTileSort.prototype.pickrandomAnimation=function(a){var b,c,d,e=this.options.feedback,f=e.imageAnimation_feedback,g=!1,h=this.ActiveElement,i=this.totalTriesCount,j=i>=this.options.numberOfTries?!0:!1;return f&&(c=f.correct,d=f.incorrect,c&&a&&c[this.img_correctIndex]?(b=c[this.img_correctIndex].imageComponent,this.img_correctIndex>=c.length-1?this.img_correctIndex=0:this.img_correctIndex++):d&&!a&&d[this.img_incorrectIndex]&&(b=d[this.img_incorrectIndex].imageComponent,this.img_incorrectIndex>=d.length-1?this.img_incorrectIndex=0:this.img_incorrectIndex++)),this.isInstant?(tileId=$(h).attr("data-id"),i=this.dragTiles[tileId].maxTriesCount,j=i>=this.options.numberOfTries):e.attempts_response_text.value&&!this.isInstant&&(g=!0),!g&&a&&1===i&&e.first_correct_text.imageComponent&&e.first_correct_text.imageComponent.src?b=e.first_correct_text.imageComponent:!g&&!a&&j&&e.final_incorrect_text.imageComponent&&e.final_incorrect_text.imageComponent.src&&(b=e.final_incorrect_text.imageComponent),g&&(j||a)&&(b=""),b&&(b.loops=1),b},Gadget.CustomTileSort.prototype.resetTilesInCustomHolder=function(){var a,b,c=this.jObject,d=c.find(".custom-holder"),e=d.children(".c-tile"),f=this.options.buttons.resetButtonGroup&&this.options.buttons.resetButtonGroup.length>0&&this.options.buttons.resetButtonGroup[0].randomizeTiles;for(e.sort(function(a,b){var c=parseInt($(a).attr("data-id").replace(/\D/g,""),10),d=parseInt($(b).attr("data-id").replace(/\D/g,""),10);return c-d}),b=e.length-1;b>=0;b--)a=$(e[b]),a.prependTo(d),f||a.css("z-index","")},Gadget.CustomTileSort.prototype.resetTiles=function(){var a,b,c,d=this.jObject,e=this.options.custom,f=e.tile,g={},h=d.find(".c-tile"),i=!1,j="",k=this.options.buttons.resetButtonGroup&&this.options.buttons.resetButtonGroup.length>0&&this.options.buttons.resetButtonGroup[0].randomizeTiles;for(g.offset={},this.options.buttons.resetButtonGroup&&k&&this.randomizeTiles(f),a=0;a<h.length;a++)b=h[a],$(b).css({opacity:1}),$(b).find(".feedback-icon").removeClass("incorrect_icon"),$(b).removeClass("drag-item-incorrect"),parentContainer=$(b).parent(),k&&(j=Math.floor(100*Math.random()+1)),parentContainer.hasClass("b-cell")&&($(b).find(".feedback-icon").hasClass("correct_icon")||parentContainer.addClass("open-cell"),parentContainer=$(parentContainer).parent().parent()),c=parentContainer.attr("data-id"),this.options.buttons.resetButtonGroup&&!k&&$(b).parent().hasClass("DMZ")?i=!0:this.options.buttons.resetButtonGroup&&k?i=!0:!this.options.buttons.resetButtonGroup&&$(b).parent().hasClass("DMZ")&&(i=!0),i&&(g.offset.top=$(b).offset().top,g.offset.left=$(b).offset().left,g.zindex=j,this.animateTileToStartPos(c,b,g));this.resetTilesInCustomHolder(),this.setProgressBarValue(),delete this.scormData.checkedAnswer,d.find(".c-checkanswer-button").sliderbutton("disable")},Gadget.CustomTileSort.prototype.randomizeTiles=function(a){var b,c,d,e=a.textTiles,f=a.imageTiles,g=[];for(allTiles=f&&f.length>0&&e&&e.length>0?f.concat(e):f&&f.length>0?f:e,b=0;b<allTiles.length;b++)tileObj=allTiles[b],d={x:tileObj.xcoord,y:tileObj.ycoord},g.push(d);for(c=PearsonGL.utils.shuffleArray(g),b=0;b<allTiles.length;b++)tileObj=allTiles[b],coordObj=c[b],tileObj.xcoord=coordObj.x,tileObj.ycoord=coordObj.y,tileObj.zindex=Math.floor(100*Math.random()+1)},Gadget.CustomTileSort.prototype.randomizeAnimations=function(){if(this.options.feedback.imageAnimation_feedback){var a=this.options.feedback.imageAnimation_feedback,b=a.correct,c=a.incorrect;b&&PearsonGL.utils.shuffleArray(b),c&&PearsonGL.utils.shuffleArray(c)}},Gadget.CustomTileSort.prototype.createADragEventForATile=function(a,b){var c=this.jObject,d=this,e="";b&&(e="clone"),a.find("img").on("dragstart",function(){return!1}),a.draggable({helper:e,snapMode:"inner",containment:"#"+c.attr("id"),revert:function(){var a=this,b=this.draggable("option","revertDuration");return d.revertToStartPos(this),d.doRevert&&(d.lastDroppedZone=d.orgDroppedZone,setTimeout(function(){a.find(".feedback-icon.incorrect_icon").fadeOut(function(){$(this).removeClass("incorrect_icon")}),a.removeClass("drag-item-incorrect")},b)),d.dragTiles[this.attr("data-id")].lastDroppedZone=d.lastDroppedZone,d.doRevert},start:function(){d.wasDroppedOutsideOfDropzone=!0,d.ActiveElement=this,d.hasBeenInteractedWith=!0;var a=c.find(".c-checkanswer-button");$(a).find(".button-text").html(d.options.buttons.checkAnswerButton),$(a).removeClass("try-again")},stop:function(a,b){var e,f,g,h=c.find(".b-cell"),i=$(this).parent(),j=c.find(".DMZ"),k=!0,l=!1,m=!1;for(i=i.hasClass("b-cell")?$(i).parent().parent():i,wasAlreadyInADropZone=$(this).parent().hasClass("DMZ")?!0:!1,d.wasDroppedOutsideOfDropzone&&wasAlreadyInADropZone&&(b.zindex=1,d.animateTileToStartPos(i.attr("data-id"),this,b),m=!0,d.orgDroppedZone=void 0,d.dragTiles[$(this).attr("data-id")].lastDroppedZone=void 0,d.setProgressBarValue()),f=0;f<h.length;f++)e=h[f],0===$(e).children().length&&$(e).addClass("open-cell");for(x=0;x<j.length;x++)0!==$(j[x]).children().length||l||(k=!1,l=!0),0===$(j[x]).children().length&&m&&($(j[x]).hasClass("b-cell")?d.dropZones[$(j[x]).parent().parent().attr("data-id")].subZones[$(j[x]).attr("data-id")]&&(g=d.dropZones[$(j[x]).parent().parent().attr("data-id")].subZones[$(j[x]).attr("data-id")].dragId,d.dropZones[$(j[x]).parent().parent().attr("data-id")].subZones[$(j[x]).attr("data-id")].dragId="",d.dropZones[$(j[x]).parent().parent().attr("data-id")].subZones[$(j[x]).attr("data-id")].isCorrect=!1):(g=d.dropZones[$(j[x]).attr("data-id")].dragId,d.dropZones[$(j[x]).attr("data-id")].dragId="",d.dropZones[$(j[x]).attr("data-id")].isCorrect=!1),""!==g&&(d.dragTiles[g].isCorrect=!1,d.dragTiles[g].droppedZone=""));k||c.find(".c-checkanswer-button").sliderbutton("disable"),d.scormData.tilePattern=d.dropZones,d.isInstant&&d.isCommEnabled()&&d.saveLearnerData()}})},Gadget.CustomTileSort.prototype.addDragEvents=function(){var a=this.jObject,b=this,c=this.options.custom,d=c.tile;this.createADragEventForATile(a.find(".c-tile"),d.cloneTiles),a.find(".s-drop-zone, .b-drop-zone").droppable({tolerance:"pointer",drop:function(c,e){if(e.helper.hasClass("c-tile")){var f,g,h,i=!1,j=e.helper,k=e.helper,l=$(this).attr("data-id"),m=j.attr("data-id"),n=b.dragTiles[m].locations,o=$(this).hasClass("s-drop-zone");if(b.wasDroppedOutsideOfDropzone=!1,o){if($(this).html()!==j.parent().html()){var p=$(this).find(".c-tile"),q=p.length>0&&p.hasClass("ui-draggable-disabled");if(q)return void(b.wasDroppedOutsideOfDropzone=!0)}}else if(j.closest(".b-drop-zone").attr("data-id")!==l&&0===$(this).find(".open-cell").length){b.removeDialogs();var r=b.options;return r.isModel=!0,r.resultsText=b.options.custom.bucket.exceedsCapacityError?b.options.custom.bucket.exceedsCapacityError:b.labelOpts.capacityError,b.options.dialogType="feedback",a.dialogcomponent(r),a.find(".result-pop-up").fadeIn().focus(),void(b.wasDroppedOutsideOfDropzone=!0)}if(b.orgDroppedZone=b.lastDroppedZone,b.lastDroppedZone=l,b.isInstant){for(f=0;f<n.length;f++)if(n[f]===l){i=!0;break}}else i=!0;if(i){if(b.doRevert=!1,d.cloneTiles&&!j.hasClass("dontClone")){var s=j.find(".image-class-wrapper").length>0,t=j.find(s?".image-class-wrapper":".gadget-textblock"),u=t.attr("audio"),v=t.attr("data-audio-type");j=j.clone().addClass("dontClone"),b.createADragEventForATile(j,!1),k.remove(),t.removeClass("audioToggleIdentifier audioCursor").removeAttr("audio data-audio-type"),t.audioComponent({src:u,type:v})}if(o){if($(this).html()!==j.parent().html()){var w=$(this).find("div:first");$(this).children().length>0&&(d.cloneTiles?b.animateTileToStartPos(l,w,e):(e.zindex=1,b.animateTileToStartPos(l,w,e),h=$(w).attr("data-id"),b.dragTiles[h].isCorrect=b.dragTiles[h].isDistrator?!0:!1,delete b.dragTiles[h].droppedZone)),$(this).append(j)}else b.doRevert=!0;j.css({top:"auto",left:"auto"}).addClass("dropped-item")}else j.closest(".b-drop-zone").attr("data-id")===l?b.doRevert=!0:(j.css({top:"auto",left:"auto"}).addClass("dropped-item"),$(this).find(".open-cell:first").append(j).removeClass("open-cell"));b.isInstant&&b.onCorrect()}else b.doRevert=!0,b.isInstant&&(b.options.feedback.showGraphicalTreatment||(j.find(".feedback-icon").removeClass("correct_icon").addClass("incorrect_icon").show(),j.removeClass("drag-item-correct").addClass("drag-item-incorrect")),b.onIncorrect());b.doRevert||(g=b.wasCorrectSpot(l,m));var x=a.find(".DMZ"),y=!0,z=!1;for(f=0;f<x.length;f++)0!==$(x[f]).children().length||z||(y=!1,z=!0),j.parent().hasClass("b-cell")&&!b.doRevert?(b.dropZones[l].subZones[j.parent().attr("data-id")].dragId=m,b.dropZones[l].subZones[j.parent().attr("data-id")].isCorrect=g):b.doRevert||(b.dropZones[l].dragId=m,b.dropZones[l].isCorrect=g),0===$(x[f]).children().length&&($(x[f]).hasClass("b-cell")?b.dropZones[$(x[f]).parent().parent().attr("data-id")].subZones[$(x[f]).attr("data-id")]&&(b.dropZones[$(x[f]).parent().parent().attr("data-id")].subZones[$(x[f]).attr("data-id")].dragId="",b.dropZones[$(x[f]).parent().parent().attr("data-id")].subZones[$(x[f]).attr("data-id")].isCorrect=!1):(b.dropZones[$(x[f]).attr("data-id")].dragId="",b.dropZones[$(x[f]).attr("data-id")].isCorrect=!1));if(y&&a.find(".c-checkanswer-button").sliderbutton("enable"),b.isInstant&&(b.checkAnswer(!0,g),g&&j.draggable("disable")),b.setProgressBarValue(),b.isInstant&&0===b.jObject.find(".DMZ").filter(":empty").length){var A=!0;a:for(dropZoneKey in b.dropZones){var B=b.dropZones[dropZoneKey];if(B.subZones)for(subZoneKey in B.subZones){var C=B.subZones[subZoneKey];if(!C.isCorrect){A=!1;break a}}else if(!B.isCorrect){A=!1;break a}}b.fireEvent(A)}}}})},Gadget.CustomTileSort.prototype.setShowAnswerButtonStates=function(a){var b=this.jObject;"enable"===a&&b.find(".c-myanswer-button").children().length>0?(window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){b.find(".c-myanswer-button").sliderbutton(a),b.find(".c-answer-button").sliderbutton(a)},500)):b.find(".c-myanswer-button").children().length>0&&(b.find(".c-myanswer-button").sliderbutton(a),b.find(".c-answer-button").sliderbutton(a))},Gadget.CustomTileSort.prototype.addButtons=function(){var a=this,b=this.options.buttons,c=this.jObject;c.append("<ul class='c-button-group'><li class='c-button-wrapper c-checkanswer-button'></li><li class='c-button-wrapper c-reset-button'></li><li class='c-button-wrapper c-answer-button'></li><li class='c-button-wrapper c-myanswer-button'></li></ul>"),a.isInstant?c.find(".c-checkanswer-button").remove():(c.find(".c-checkanswer-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.checkAnswerButton,clickFunction:function(d){c.find(".result-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()});var e=d.jObject;e.find(".button-text").html(b.checkAnswerButton),e.hasClass("base-button-disable")||(e.hasClass("try-again")?(e.removeClass("try-again"),a.doingReset=!0,c.find(".incorrect_icon").parent().draggable("enable"),a.resetTiles(),a.doingReset=!1):(e.find(".button-text").html(b.tryAgainButton),e.addClass("try-again"),a.checkAnswer(),c.find(".dropped-item").draggable("disable")))}}),c.find(".c-checkanswer-button").sliderbutton("disable")),b.resetButtonGroup&&c.find(".c-reset-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.resetButtonGroup[0].resetButtonText,clickFunction:function(d){if(!d.jObject.hasClass("base-button-disable"))if(b.resetButtonGroup[0].resetConfirmText){a.removeDialogs();var e=a.options;e.keyPressEventHandler=function(){a.doReset()},e.isModal=!0,e.resultsText=b.resetButtonGroup[0].resetConfirmText,a.options.dialogType="confirm",c.dialogcomponent(e),c.find(".checker-pop-up").fadeIn().focus()}else a.doReset()}}),!this.isInstant&&b.showAnswerButtonGroup&&(c.find(".c-answer-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.showAnswerButtonGroup[0].showAnswerButton,clickFunction:function(b){b.jObject.hasClass("base-button-disable")||(c.find(".c-answer-button").hide(),c.find(".c-myanswer-button").show(),a.setShowAnswerButtonStates("disable"),a.totalCountReachedShowCorrectAnswers(),c.find(".result-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()}))}}),c.find(".c-myanswer-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.showAnswerButtonGroup[0].showMyAnswersButton,clickFunction:function(b){b.jObject.hasClass("base-button-disable")||(c.find(".c-answer-button").show(),c.find(".c-myanswer-button").hide(),a.setShowAnswerButtonStates("disable"),a.showMyAnswers())}}),c.find(".c-answer-button").sliderbutton("disable")),c.find(".c-answer-button").hide(),c.find(".c-myanswer-button").hide()},Gadget.CustomTileSort.prototype.doReset=function(){var a=this.jObject;this.doingReset=!0,this.resetCountsAndEnableAll(),this.resetTiles(),this.doingReset=!1,a.find(".result-pop-up,.modal-dialog-window,.dialog-box-window").fadeOut(function(){$(this).remove()})},Gadget.CustomTileSort.prototype.resetCountsAndEnableAll=function(){var a,b,c,d,e,f,g=this.jObject;for(g.find(".c-tile").draggable("enable"),g.find(".feedback-icon").removeClass("incorrect_icon correct_icon"),g.find(".c-tile").removeClass("drag-item-correct drag-item-incorrect"),this.totalTriesCount=0,a=0;a<g.find(".c-tile").length;a++)b=this.dragTiles[$(g.find(".c-tile")[a]).attr("data-id")],b.isCorrect=!1,b.maxTriesCount=0;g.find(".b-cell").addClass("open-cell"),g.find(".c-checkanswer-button").find(".button-text").html(this.options.buttons.checkAnswerButton),g.find(".c-checkanswer-button").removeClass("try-again").sliderbutton("disable");for(d in this.dropZones)if(c=this.dropZones[d],c.subZones)for(e in c.subZones)c.subZones[e].isCorrect=!1,c.subZones[e].dragId="";else c.dragId="",c.isCorrect=!1;for(d in this.dragTiles)f=this.dragTiles[d],f.droppedZone="",f.lastDroppedZone="";g.find(".c-answer-button, .c-myanswer-button").hide()},Gadget.CustomTileSort.prototype.buildDropZones=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this.jObject,v=this.options.custom,w=v.bucket,x=v.single,y=u.find(".custom-holder");if(this.dropZones={},x.dropZones&&x.dropZones.length>0)for(e=x.cellWidth?x.cellWidth:void 0,f=x.cellHeight?x.cellHeight:void 0,a=0;a<x.dropZones.length;a++)d=x.dropZones[a],g=d.matchId,i=d.xcoord,j=d.ycoord,k=d.altText?d.altText:"",l=d.width?d.width:e,m=d.height?d.height:f,$(y).append('<div title="'+k+'" class="s-drop-zone DMZ" style="width:'+l+"px;height:"+m+"px;left:"+i+"px;top:"+j+'px;" data-id="'+g+'"></div>'),this.dropZones[g]={},this.progressBarOptions.dropZoneCount++;if(w.dropZones&&w.dropZones.length>0)for(e=w.cellWidth?w.cellWidth:void 0,f=w.cellHeight?w.cellHeight:void 0,a=0;a<w.dropZones.length;a++)for(h=0,d=w.dropZones[a],g=d.matchId,i=d.xcoord,j=d.ycoord,k=d.altText?d.altText:"",l=d.width?d.width:e,m=d.height?d.height:f,p=d.cols,q=d.rows,r=d.max,n=void 0!==d.vspace?d.vspace:w.verticalSpacing,o=void 0!==d.hspace?d.hspace:w.horizonalSpacing,s=p*l+2*p*o,t=q*m+2*q*n,$(y).append('<ul title="'+k+'" class="b-drop-zone" style="width:'+s+"px;height:"+t+"px;left:"+i+"px;top:"+j+'px;" data-id="'+g+'"></ul>'),this.dropZones[g]={},this.dropZones[g].subZones={},b=0;q>b;b++)for(u.find(".b-drop-zone:last").append('<li class="b-row"></li>'),c=0;p>c;c++)r>h?($(y).find(".b-row:last").append('<div data-id="bd'+h+'" class="b-cell open-cell DMZ" style="margin:'+n+"px "+o+"px;width:"+l+"px;height:"+m+'px"></div>'),this.dropZones[g].subZones["bd"+h]={},this.progressBarOptions.dropZoneCount++):$(y).find(".b-row:last").css("padding-left",.5*l+o),h++},Gadget.CustomTileSort.prototype.buildTiles=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this.jObject,q=this.options.custom,r=q.tile,s=p.find(".custom-holder");if(this.isRandom=this.options.randomize,this.isRandom&&this.randomizeTiles(r),this.dragTiles={},r.textTiles)for(n=r.width?r.width:void 0,o=r.height?r.height:void 0,a=0;a<r.textTiles.length;a++)c=r.textTiles[a],b=c.matchIds,d=c.xcoord,e=c.ycoord,f=c.zindex?"z-index: "+c.zindex+"; ":"",h=c.width?c.width:n,i=c.height?c.height:o,g=c.value,j=c.audioComponent,l=$('<div data-id="TT'+a+'" class="c-tile c-text-tile" style="'+f+"top:"+e+"px;left:"+d+"px;width:"+h+"px;height:"+i+'px"></div>'),l.appendTo(s),l.richtextcomponent(this.createRichTextObj(g)),j&&""!==j.src&&(j.labelOpts=this.labelOpts,l.find(".gadget-textblock").audioComponent(j)),l.append('<div class="feedback-icon sprite"></div>'),this.dragTiles["TT"+a]={},b?this.dragTiles["TT"+a].isDistractor=!1:(b=this.fakeTileName,this.dragTiles["TT"+a].isDistractor=!0),this.dragTiles["TT"+a].locations=b.split(","),this.dragTiles["TT"+a].maxTriesCount=0;if(r.imageTiles)for(n=r.width?r.width:void 0,o=r.height?r.height:void 0,a=0;a<r.imageTiles.length;a++)c=r.imageTiles[a],b=c.matchIds,d=c.xcoord,e=c.ycoord,f=c.zindex?"z-index: "+c.zindex+"; ":"",h=c.tileWidth?c.tileWidth:n,i=c.tileHeight?c.tileHeight:o,k=c.imageComponent,k.protect=!1,j=c.audioComponent,l=$('<div data-id="IT'+a+'" class="c-tile c-image-tile" style="'+f+"top:"+e+"px;left:"+d+'px;"></div>'),l.appendTo(s),l.imagecomponent(k),m=l.find("img"),m.css({width:h+"px",height:i+"px"}),m.attr("draggable","false"),m.on("dragstart",function(){return!1}),j&&""!==j.src&&(j.labelOpts=this.labelOpts,l.find(".image-class-wrapper").audioComponent(j)),l.append('<div class="feedback-icon sprite"></div>'),this.dragTiles["IT"+a]={},b?this.dragTiles["IT"+a].isDistractor=!1:(b=this.fakeTileName,this.dragTiles["IT"+a].isDistractor=!0),this.dragTiles["IT"+a].locations=b.split(","),this.dragTiles["IT"+a].maxTriesCount=0},Gadget.CustomTileSort.prototype.buildLabels=function(){var a,b,c,d,e,f,g,h=this.options.custom,i=this.jObject,j=i.find(".custom-holder");if(h.textLabels)for(a=0;a<h.textLabels.length;a++)b=h.textLabels[a],c=b.xcoord,d=b.ycoord,e=b.text,f=b.audioComponent,g=b.width?"width:"+b.width+"px;":"",$(j).append('<div class="c-label" style="top:'+d+"px;left:"+c+"px;"+g+'"></div>'),$(j).find(".c-label:last").richtextcomponent(this.createRichTextObj(e)),f&&""!==f.src&&(f.labelOpts=this.labelOpts,$(j).find(".c-label:last").find(".gadget-textblock").audioComponent(f));if(h.imageLabels)for(a=0;a<h.imageLabels.length;a++)b=h.imageLabels[a],c=b.xcoord,d=b.ycoord,e=b.text,f=b.audioComponent,img=b.imageComponent,$(j).append('<div class="c-label" style="top:'+d+"px;left:"+c+'px;"></div>'),$(j).find(".c-label:last").imagecomponent(img),f&&""!==f.src&&(f.labelOpts=this.labelOpts,$(j).find(".c-label:last").find(".image-class-wrapper").audioComponent(f))},Gadget.CustomTileSort.prototype.buildProgressBar=function(){var a=this.jObject,b=null;if(Array.isArray(this.options.custom.progress)&&this.options.custom.progress.length>0&&(b=this.options.custom.progress[0],this.progressBarOptions.useGraphical=!!b.graphicalProgressIndicator,this.progressBarOptions.useNumeric=!!b.numericProgressIndicator),this.progressBarOptions.useGraphical||this.progressBarOptions.useNumeric){var c=$("<div class='progress-indicator'></div>"),d=$("<div class='progress-bar'></div>"),e=$("<div class='progress'></div>");"number"==typeof b.xCoordinate&&c.css("left",b.xCoordinate+"px"),"number"==typeof b.yCoordinate&&c.css("top",b.yCoordinate+"px"),"number"==typeof b.width&&c.width(b.width),c.appendTo(a),this.progressBarOptions.useNumeric&&e.appendTo(c),this.progressBarOptions.useGraphical&&(d.appendTo(c),d.slider({range:"min",min:0,max:100,disabled:!0,create:function(){$(this).children(".ui-slider-handle").removeAttr("href"),$(this).children(".ui-slider-handle").hide()
}})),this.setProgressBarValue(0)}},Gadget.CustomTileSort.prototype.setProgressBarValue=function(a){if(!(this.progressBarOptions.dropZoneCount<1)){var b="number"==typeof a?a:this.jObject.find(".DMZ").not(":empty").length,c=b/this.progressBarOptions.dropZoneCount*100;this.progressBarOptions.useGraphical&&this.jObject.find(".progress-indicator .progress-bar").slider("option","value",c),this.progressBarOptions.useNumeric&&this.jObject.find(".progress-indicator .progress").text(b+" "+this.options.ofLabel+" "+this.progressBarOptions.dropZoneCount)}},Gadget.CustomTileSort.prototype.onCorrect=function(){"string"==typeof this.options.correctAudio&&""!==this.options.correctAudio&&this.jObject.find(".dnd-correct-audio").audioComponent("play")},Gadget.CustomTileSort.prototype.onIncorrect=function(){"string"==typeof this.options.inCorrectAudio&&""!==this.options.inCorrectAudio&&this.jObject.find(".dnd-in-correct-audio").audioComponent("play")},Gadget.CustomTileSort.prototype.setGadget=function(){var a,b,c,d,e,f,g=this.jObject,h=this.scormData.tilePattern,i=!0,j=this.options.custom.tile.cloneTiles,k=this.options.feedback.showGraphicalTreatment;if(this.totalTriesCount=this.scormData.numberOfTries,0!==h.length){this.dropZones=h;for(a in h)if(zoneId=h[a],e=zoneId.isCorrect,zoneId.dragId&&(this.dragTiles[zoneId.dragId].isCorrect=e,this.dragTiles[zoneId.dragId].droppedZone=a),zoneId.dragId&&"string"==typeof zoneId.dragId)c=g.find(".c-tile[data-id="+zoneId.dragId+"]"),j&&(c=$(c).clone(),$(c).addClass("dontClone"),this.totalTriesCount>0&&this.createADragEventForATile($(c),!1)),g.find(".DMZ[data-id="+a+"]").append(c),$(c).css({top:"auto",left:"auto"}).addClass("dropped-item"),(this.isInstant||1==this.scormData.checkedAnswer)&&($(c).draggable("disable"),f=e?"correct_icon":"incorrect_icon",$(c).find(".feedback-icon").addClass(f),k||($(c).find(".feedback-icon").show(),$(c).toggleClass("drag-item-correct",e),$(c).toggleClass("drag-item-incorrect",!e)));else if(zoneId.subZones)for(b in zoneId.subZones)d=zoneId.subZones[b].dragId,e=zoneId.subZones[b].isCorrect,d&&(this.dragTiles[d].isCorrect=e,this.dragTiles[d].droppedZone=b),c=g.find(".c-tile[data-id="+d+"]"),j&&(c=$(c).clone(),$(c).addClass("dontClone"),this.totalTriesCount>0&&this.createADragEventForATile($(c),!1)),g.find(".DMZ[data-id="+b+"]").append(c).removeClass("open-cell"),$(c).css({top:"auto",left:"auto"}).addClass("dropped-item"),(this.isInstant||1==this.scormData.checkedAnswer)&&($(c).draggable("disable"),f=e?"correct_icon":"incorrect_icon",$(c).find(".feedback-icon").addClass(f),k||($(c).find(".feedback-icon").show(),$(c).toggleClass("drag-item-correct",e),$(c).toggleClass("drag-item-incorrect",!e)));else i=!1;if(this.setProgressBarValue(),!this.isInstant)if(i&&this.totalTriesCount<this.options.numberOfTries){var l=g.find(".c-checkanswer-button");l.sliderbutton("enable"),g.find(".feedback-icon").show(),1==this.scormData.checkedAnswer&&(l.find(".button-text").html(this.options.buttons.tryAgainButton),l.addClass("try-again"))}else this.options.buttons.showAnswerButtonGroup&&(g.find(".c-answer-button").show().sliderbutton("enable"),g.find(".c-myanswer-button").hide().sliderbutton("enable"))}},Gadget.CustomTileSort.prototype.parseLearnerData=function(){var a=this.options.scorm.suspendData.data;"object"==typeof a&&(this.scormData=a,this.setGadget())},Gadget.CustomTileSort.prototype.saveLearnerData=function(){if(this.isCommEnabled()){var a,b=[];for(this.options.scorm.suspendData.data=this.scormData,a=0;a<this.options.scorm.interactions.length;a++){result=this.getResult(this.options.scorm.interactions[a].objectives[0]),result.correctResponses=[{pattern:[]}],result.learnerResponse=[];var c,d,e;for(c in this.dragTiles)this.dragTiles[c].isDistractor||result.correctResponses[0].pattern.push([c,this.dragTiles[c].locations[0]]);for(c in this.dropZones)if(d=this.dropZones[c],d.dragId&&"string"==typeof d.dragId)result.learnerResponse.push([d.dragId,c]);else if(d.subZones)for(bucketKey in d.subZones)e=d.subZones[bucketKey].dragId,result.learnerResponse.push([e,c]);b.push(result)}this.setLearnerData({gadgetId:this.gadgetUniqueId,data:this.options.scorm,results:b})}},Gadget.CustomTileSort.prototype.calcProgressMeasured=function(){var a,b,c,d,e=this,f=(this.jObject,0),g=this.jObject.find(".DMZ"),h=this.jObject.find(".DMZ").length;for(x=0;x<g.length;x++)$(g[x]).children().length>0&&($(g[x]).hasClass("b-cell")?e.dropZones[$(g[x]).parent().parent().attr("data-id")].subZones[$(g[x]).attr("data-id")].dragId=$(g[x]).children().attr("data-id"):e.dropZones[$(g[x]).attr("data-id")].dragId=$(g[x]).children().attr("data-id"));for(a in this.dropZones)if(b=this.dropZones[a],b.dragId&&"string"==typeof b.dragId)f++;else if(b.subZones)for(d in b.subZones)c=b.subZones[d].dragId,c&&f++;return isNaN(f/h)?0:f/h},Gadget.CustomTileSort.prototype.getResult=function(a){var b=this,c=this.jObject.find(".DMZ").length,d={};try{a.score.min=0,a.score.max!==a.score.raw&&(a.score.raw=a.score.max*(this.calculateScores()/c)),a.score.scaled=a.score.max-a.score.min!==0?(a.score.raw-a.score.min)/(a.score.max-a.score.min):1,d.raw=a.score.raw,d.min=a.score.min,d.max=a.score.max,d.scaled=a.score.scaled,a.progress_measure=b.calcProgressMeasured(),d.progressMeasure=a.progress_measure,a.completion_status="incomplete",a.success_status="unknown",d.completionStatus="incomplete",d.successStatus="unknown",parseFloat(a.progress_measure)>=parseFloat(a.completionThreshold)&&(a.completion_status="completed",d.completionStatus="completed"),this.isInstant||(a.completion_status="incomplete",d.completionStatus="incomplete",1==this.scormData.checkedAnswer&&(this.totalTriesCount>=this.options.numberOfTries||this.scormData.allCorrect)&&(a.completion_status="completed",d.completionStatus="completed")),"completed"===a.completion_status&&(parseFloat(a.score.scaled)>=parseFloat(SB.get("scaled_passing_score"))?(a.success_status="passed",d.successStatus="passed"):(a.success_status="failed",d.successStatus="failed"))}catch(e){}return d.result=d.scaled,d},Gadget.OriginalTileSort=function(a,b,c){if(this.options={feedBackPopUp:!1,randomize:!1,scoreText:"",tilesText:[],tilesImage:[],columnsText:[],columnsImage:[],freeZone:[],draggables:[],droppables:[],textLabels:[],imageLabels:[],labels:[],hideTargetBackground:!1,cloning:!1,tileSortBackground:"",popupcontainment:".main",gadgetName:"OrgTileSort",feedback:{showGraphicalTreatment:!1}},b){this.jObject=$(a);var d=this;this.labelOpts=b.labelOpts,this.isLegacy=!0,void 0==b.feedbackType&&(b.feedbackType="instantFeedback"),b.column&&($.extend(b,b.column[0]),delete b.column,this.isLegacy=!1),$.extend(!0,d.options,b),this.gadgetUniqueId=c,this.jObject.data("gadget_options",this.options),this.jObject.addClass("sorter-identifier"),this.zdex=201,this.reverCheck=!1,this.totalDraggableTile=0,this.clone=[],this.numOfCorrect=0,this.isInstant="instantFeedback"===this.options.feedbackType,this.submittedTries=0,this.isColumn=!0,this.columnTheme=["th1","th2","th3","th4","th5"],this.scormData=this.scormData&&this.scormData.tilePattern?{submittedTries:0,tilePattern:this.scormData.tilePattern,numberOfCorrect:this.numOfCorrect}:{submittedTries:0,tilePattern:{},numberOfCorrect:this.numOfCorrect},this.isTouchDevice="ontouchstart"in document.documentElement,this.hasBeenInteractedWith=!1;var e,f,g;""!==this.options.scoreText&&(this.options.feedBackPopUp=!0),this.options.draggables=this.options.draggables.concat(this.options.tilesText,this.options.tilesImage),this.options.droppables=this.options.droppables.concat(this.options.columnsText,this.options.columnsImage),this.options.labels=this.options.labels.concat(this.options.textLabels,this.options.imageLabels),this.options.tilesText.length>0&&this.options.tilesImage.length>0&&(this.options.randomize=!0),this.options.columnsText.length>0&&this.options.columnsImage.length>0&&this.options.droppables.sort(function(){return e=parseFloat(10*Math.random()),f=e%2,g=e>5?1:-1,f*g}),this.options.freeZone.length>this.options.columnsText.length+this.options.columnsImage.length&&(this.isColumn=!1,this.options.droppables=this.options.freeZone,this.jObject.addClass("sorter-freezone")),this.init()}},Gadget.OriginalTileSort.prototype=Object.create(Gadget.TileSort.prototype),Gadget.OriginalTileSort.prototype.destroy=function(){this.jObject&&(this.jObject.children().remove(),this.jObject.removeClass("sorter-identifier"))},Gadget.OriginalTileSort.prototype.init=function(){var a,b,c,d,e,f=this,g=f.jObject,h=$("<div></div>"),i=$("<div></div>");f.dragStatusLive=$('<div aria-live="assertive" class="drag-status-live hidden-label"></div>'),g.append(f.dragStatusLive),g.append('<div class="drag"></div><div class="drop"></div>'),""!==f.options.correctAudio&&(g.append("<div class='dnd-correct-audio' style='display:none'></div>"),g.find(".dnd-correct-audio").audioComponent({src:f.options.correctAudio,trigger:!0,type:"hover"})),""!==f.options.inCorrectAudio&&(g.append("<div class='dnd-in-correct-audio' style='display:none'></div>"),g.find(".dnd-in-correct-audio").audioComponent({src:f.options.inCorrectAudio,trigger:!0,type:"hover"})),void 0!==f.options.tileSortBackground&&f.options.tileSortBackground.length>0&&(image=document.createElement("img"),image.src=f.options.tileSortBackground,$(image).attr("alt",f.options.backgroundTitle?f.options.backgroundTitle:"").attr("title",f.options.backgroundTitle?f.options.backgroundTitle:"").addClass("bk-img"),g.append(image),$(image).load(function(){g.css({width:this.width+"px"})}),$(image).Protector(),g.addClass("has-bk"),this.addLongDescription($(image),f.options.longDesc)),f.addDraggables(),f.totalDraggableTile=g.children(".drag").children().size(),$(f.options.droppables).each(function(c){b=i.clone(),b.attr("id","t"+c).attr("data-dropid",this.dropId).addClass("drop-item"),f.isColumn?(a=$("<div class='drop-container drop-container-"+f.columnTheme[c]+"'></div>"),a.append('<div class="drop-header"></div>'),void 0!==this.dropText&&this.dropText.value.length>0&&(this.dropText.noTabIndex=!0,a.find(".drop-header").append($("<div class='drop-text' aria-hidden='true'></div>").richtextcomponent(this.dropText,!0)),b.append($('<label class="hidden-label"></label>').html(this.dropText.value.replace(/<(?:.|\n)*?>/gm,""))),void 0!==this.dropText.audioComponent&&""!==this.dropText.audioComponent.src&&void 0!==this.dropText.audioComponent.src&&a.find(".gadget-textblock").audioComponent(this.dropText.audioComponent),a.find(".gadget-textblock").removeAttr("tabindex role")),void 0!==this.dropImage&&""!==this.dropImage.src&&void 0!==this.dropImage.src&&(this.dropImage.protect=!1,a.find(".drop-header").append('<table class="image-container"><tr><td class="image-cell" aria-hidden="true"></td></tr></table>'),a.find(".drop-header").find(".image-cell").imagecomponent(this.dropImage),b.append($('<label class="hidden-label"></label>').html(void 0!==this.dropImage.title?this.dropImage.title:"")),void 0!==this.dropImage.audioComponent&&""!==this.dropImage.audioComponent.src&&a.find(".drop-header").find("span").audioComponent(this.dropImage.audioComponent)),a.append("<div class='drop-button-container'><div class='drop-button' data-icon='drop-button' aria-hidden='false'></div></div>"),a.append("<div style='display:none;' class='correct-mark' data-icon='correct-mark'></div>"),a.append(b),g.find(".drop").append(a)):(b.append("<div class='drop-bk'><div class='shade'></div></div>"),b.css({left:this.droppableX+"px",top:this.droppableY+"px",width:this.droppableWidth,height:this.droppableHeight}),g.find(".drop").append(b))}),$(f.options.labels).each(function(a){void 0!==this.labelText&&""!==this.labelText.value&&void 0!==this.labelText.value&&(label=$('<div aria-hidden="true" class="labels" id="label'+a+'"></div>'),label.css({left:this.labelX+"px",top:this.labelY+"px"}),this.labelText.noTabIndex=!0,label.richtextcomponent(this.labelText),void 0!==this.labelText.audioComponent&&void 0!==this.labelText.audioComponent.src&&""!==this.labelText.audioComponent.src&&label.find(".gadget-textblock").audioComponent(this.labelText.audioComponent),label.find("*").attr("aria-hidden",!0),label.appendTo(g)),void 0!==this.labelImage&&""!==this.labelImage.src&&void 0!==this.labelImage.src&&(label=$('<div aria-hidden="true" class="labels" id="label'+a+'"></div>'),label.css({left:this.labelX+"px",top:this.labelY+"px"}),this.labelImage.noTabIndex=!0,label.imagecomponent(this.labelImage),void 0!==this.labelImage.audioComponent&&""!==this.labelImage.audioComponent.src&&label.find(".image-class-wrapper").audioComponent(this.labelImage.audioComponent),label.find("*").attr("aria-hidden",!0),label.appendTo(g))}),f.options.hideTargetBackground&&g.find(".drop-item").addClass("no-bk"),$(h,i).remove(),f.isColumn&&(c=parseFloat(g.find(".drop-container").width()),d=c*g.find(".drop-container").size(),e=d/2,g.find(".drop").css({width:d+"px",left:"50%",marginLeft:-e+"px"}),g.find(".drop-container").each(function(a){$(this).css("left",c*a+"px")})),f.setupSort();try{global_player.inScreenReaderMode&&f.setScreenReaderMode()}catch(j){}!this.isLegacy,f.img_correctIndex=0,f.img_incorrectIndex=0,f.txt_correctIndex=0,f.txt_incorrectIndex=0,f.options.buttons&&f.addButtons(),f.isInstant||(f.randomizeAnimations(),f.addCorrectDraggables()),this.getLearnerData({type:"matching"})},Gadget.OriginalTileSort.prototype.removeDialogs=function(){this.jObject.find(".result-pop-up, .modal-dialog-window, .dialog-box-window").remove()},Gadget.OriginalTileSort.prototype.doReset=function(){var a=this.jObject;this.numOfCorrect=0,this.scormData.numberOfCorrect=0,this.resetTiles(),a.find(".result-pop-up,.modal-dialog-window,.dialog-box-window").fadeOut(function(){$(this).remove()})},Gadget.OriginalTileSort.prototype.resetTiles=function(){var a=this,b=this.jObject,c=!1;b.find(".c-checkanswer-button").removeClass("try-again").find(".button-text").html(a.options.buttons.checkAnswerButton),b.find(".c-checkanswer-button").show().sliderbutton("disable"),b.find(".c-answer-button").hide(),b.find(".c-myanswer-button").hide(),a.setShowAnswerButtonStates("disable"),b.find(".drag-item").show(),b.find(".correct-tile").hide(),b.find(".drop-item").css("height",""),b.find(".drop-item").each(function(){var d=$(this);d.find(".drag-item:not(.correct-tile)").each(function(){c=!0;var d=$(this),e=d.offset().top-b.find(".drag").offset().top,f=d.offset().left-b.find(".drag").offset().left;a.isTryAgainClick?d.hasClass("ignore-incorrect")&&(d.css({position:"absolute",width:"",height:"",left:f,top:e}),b.find(".drag").append(d),d.animate({top:d.attr("data-top"),left:d.attr("data-left")},600,function(){$(this).css({position:"absolute",width:"",height:"",left:"",top:""})})):(d.css({position:"absolute",width:"",height:"",left:f,top:e}),b.find(".drag").append(d),d.animate({top:d.attr("data-top"),left:d.attr("data-left")},600,function(){$(this).css({position:"absolute",width:"",height:"",left:"",top:""})}))})}),a.resizeColumn(b.find(".drop-item").find(".drag-item:not(.correct-tile)")),c?b.delay(600).queue(function(b){a.reset_draggables(),b()}):a.reset_draggables(),delete a.scormData.checkedAnswer},Gadget.OriginalTileSort.prototype.reset_draggables=function(){var a=this,b=this.jObject;b.find(".drag").children().remove(),a.addDraggables(),a.dragSetup(),a.progressIndicator()},Gadget.OriginalTileSort.prototype.checkAnswer=function(){var a=this,b=this.jObject,c=!0;a.submittedTries++,a.numOfCorrect=0,b.find(".drop-item").each(function(){var b=$(this);b.find(".drag-item:not(.correct-tile)").each(function(){var d=$(this);d.attr("data-dragid")===b.attr("data-dropid")?(d.addClass("ignore-correct"),a.numOfCorrect++,a.options.feedback.showGraphicalTreatment||d.addClass("drag-item-correct")):(c=!1,d.addClass("ignore-incorrect"),a.options.feedback.showGraphicalTreatment||d.addClass("drag-item-incorrect")),d.draggable("disable")})}),a.scormData.numberOfCorrect=a.numOfCorrect,a.scormData.allCorrect=c,a.scormData.submittedTries=a.submittedTries,a.scormData.checkedAnswer=!0,c&&(b.find(".c-checkanswer-button").removeClass("try-again").find(".button-text").html(a.options.buttons.checkAnswerButton),b.find(".c-checkanswer-button").show().sliderbutton("disable"),b.find(".c-answer-button").hide(),b.find(".c-myanswer-button").hide()),a.submittedTries==a.options.numberOfTries&&(b.find(".c-checkanswer-button").hide(),b.find(".c-answer-button").show(),a.setShowAnswerButtonStates("enable")),a.showFeedBack(c),a.saveSubmittedMode()},Gadget.OriginalTileSort.prototype.showFeedBack=function(a){var b,c=this,d=this.jObject;b=this.options,b.imageComponent=this.pickrandomAnimation(a),b.textMessage=this.pickRandomTextMessage(a),b.isModal=!0,(b.imageComponent||b.textMessage)&&(this.removeDialogs(),this.options.dialogType=b.imageComponent?"animated":"feedback",b.doAnimate=this.options.imageComponent&&this.options.imageComponent.fps?!0:!1,b.resultsText=b.textMessage?b.textMessage.value:"",d.dialogcomponent(b),d.find(".result-pop-up").fadeIn().focus(),b.textMessage&&b.textMessage.audioComponent&&b.textMessage.audioComponent.src&&""!==b.textMessage.audioComponent.src&&d.find(".result-text-container .result-text").audioComponent(b.textMessage.audioComponent)),this.isInstant&&(c.submittedTries=0)},Gadget.OriginalTileSort.prototype.pickRandomTextMessage=function(a){var b,c,d,e=this.options.feedback,f=e.messages_feedback,g=this.submittedTries,h=!1,i=!1,j=g>=this.options.numberOfTries?!0:!1;if(f&&(c=f.correct,d=f.incorrect,a?(b=c[this.txt_correctIndex],this.txt_correctIndex>=c.length-1?this.txt_correctIndex=0:this.txt_correctIndex++):(b=d[this.txt_incorrectIndex],this.txt_incorrectIndex>=d.length-1?this.txt_incorrectIndex=0:this.txt_incorrectIndex++)),!this.isInstant&&e.attempts_response_text&&e.attempts_response_text.value&&(h=!0),!h&&a&&1===g&&e.first_correct_text&&e.first_correct_text.value)b=e.first_correct_text;else if(!h&&!a&&(i||j)&&e.final_incorrect_text&&e.final_incorrect_text.value)b=e.final_incorrect_text;else if(h&&(j||a)){var k=this.jObject.find(".ignore-correct").length,l=this.totalDraggableTile,m=e.attempts_response_text.value;m=m?m.replace(/\XX/g,k):"",m=m?m.replace(/\YY/g,l):"",e.attempts_response_text.value=m,b=e.attempts_response_text}return j&&this.jObject.find(".c-tile").draggable("disable"),b},Gadget.OriginalTileSort.prototype.pickrandomAnimation=function(a){var b,c,d,e=this.options.feedback,f=e.imageAnimation_feedback,g=!1,h=this.submittedTries,i=h>=this.options.numberOfTries?!0:!1;return f&&(c=f.correct,d=f.incorrect,c&&a&&c[this.img_correctIndex]?(b=c[this.img_correctIndex].imageComponent,this.img_correctIndex>=c.length-1?this.img_correctIndex=0:this.img_correctIndex++):d&&!a&&d[this.img_incorrectIndex]&&(b=d[this.img_incorrectIndex].imageComponent,this.img_incorrectIndex>=d.length-1?this.img_incorrectIndex=0:this.img_incorrectIndex++)),!this.isInstant&&e.attempts_response_text&&e.attempts_response_text.value&&(g=!0),!g&&a&&1===h&&e.first_correct_text&&e.first_correct_text.imageComponent&&e.first_correct_text.imageComponent.src?b=e.first_correct_text.imageComponent:!g&&!a&&i&&e.final_incorrect_text&&e.final_incorrect_text.imageComponent&&e.final_incorrect_text.imageComponent.src?b=e.final_incorrect_text.imageComponent:g&&(i||a)&&(b=""),b&&(b.loops=1),b},Gadget.OriginalTileSort.prototype.randomizeAnimations=function(){if(this.options.feedback.imageAnimation_feedback){var a=this.options.feedback.imageAnimation_feedback,b=a.correct,c=a.incorrect;b&&PearsonGL.utils.shuffleArray(b),c&&PearsonGL.utils.shuffleArray(c)}},Gadget.OriginalTileSort.prototype.addButtons=function(){var a=this,b=this.options.buttons,c=this.jObject;c.append("<ul class='c-button-group'><li class='c-button-wrapper c-checkanswer-button'></li><li class='c-button-wrapper c-reset-button'></li><li class='c-button-wrapper c-answer-button'></li><li class='c-button-wrapper c-myanswer-button'></li></ul>"),a.isInstant?c.find(".c-checkanswer-button, .c-answer-button, .c-myanswer-button").remove():(c.find(".c-checkanswer-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.checkAnswerButton,clickFunction:function(d){c.find(".result-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()});var e=d.jObject;e.find(".button-text").html(b.checkAnswerButton),e.hasClass("base-button-disable")||(e.hasClass("try-again")?(e.removeClass("try-again"),c.find(".incorrect_icon").parent().draggable("enable"),a.isTryAgainClick=!0,a.doReset()):(e.find(".button-text").html(b.tryAgainButton),e.addClass("try-again"),a.checkAnswer(),c.find(".dropped-item").draggable("disable")))}}),c.find(".c-checkanswer-button").sliderbutton("disable")),b.resetButtonGroup&&c.find(".c-reset-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.resetButtonGroup[0].resetButtonText,clickFunction:function(d){if(!d.jObject.hasClass("base-button-disable"))if(a.isTryAgainClick=!1,b.resetButtonGroup[0].resetConfirmText){a.removeDialogs();var e=a.options;e.keyPressEventHandler=function(){a.submittedTries=0,a.doReset()},e.isModal=!0,e.resultsText=b.resetButtonGroup[0].resetConfirmText,e.audioComponent=b.resetButtonGroup[0].audioComponent,a.options.dialogType="confirm",c.dialogcomponent(e),c.find(".checker-pop-up").fadeIn().focus()}else a.submittedTries=0,a.doReset()}}),!this.isInstant&&b.showAnswerButtonGroup&&(c.find(".c-answer-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.showAnswerButtonGroup[0].showAnswerButton,clickFunction:function(a){a.jObject.hasClass("base-button-disable")||(c.find(".c-answer-button").hide(),c.find(".c-myanswer-button").show(),c.find(".drag-item").hide(),c.find(".correct-tile").show(),c.find(".result-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()}))}}),c.find(".c-myanswer-button").sliderbutton({buttonClassName:"c-button",slider:!0,buttonText:b.showAnswerButtonGroup[0].showMyAnswersButton,clickFunction:function(a){a.jObject.hasClass("base-button-disable")||(c.find(".c-answer-button").show(),c.find(".c-myanswer-button").hide(),c.find(".drag-item").show(),c.find(".correct-tile").hide())}}),c.find(".c-answer-button").sliderbutton("disable")),c.find(".c-answer-button").hide(),c.find(".c-myanswer-button").hide()},Gadget.OriginalTileSort.prototype.setShowAnswerButtonStates=function(a){var b=this.jObject;"enable"===a&&b.find(".c-myanswer-button").children().length>0?(window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){b.find(".c-myanswer-button").sliderbutton(a),b.find(".c-answer-button").sliderbutton(a)},500)):b.find(".c-myanswer-button").children().length>0&&(b.find(".c-myanswer-button").sliderbutton(a),b.find(".c-answer-button").sliderbutton(a))},Gadget.OriginalTileSort.prototype.addCorrectDraggables=function(){var a,b,c,d,e,f=this,g=f.jObject,h=$("<div></div>");$(f.options.draggables).each(function(i){a=h.clone(),a.attr({id:"d"+i,"unique-id":"d"+i,"data-dragid":this.dragId,"aria-hidden":!0,"data-numOfTries":f.options.numberOfTries,"data-inArray":i}).addClass("drag-item correct-tile"),a.append('<div class="drag-bk"><div class="shade"></div></div><div class="marker" data-icon="marker"></div>'),void 0!==this.dragText&&""!==this.dragText.value&&void 0!==this.dragText.value&&(a.addClass("text-drag"),a.append("<table class='drag-text'><tr><td class='drag-text-cell'></td></tr></table>"),a.find(".drag-text-cell").richtextcomponent(this.dragText),a.attr({"data-default-title":this.dragText.value.replace(/<(?:.|\n)*?>/gm,"")}),a.find(".text-audio-component").append('<label class="drag-state hidden-label"></label>')),void 0!==this.dragImage&&""!==this.dragImage.src&&void 0!==this.dragImage.src&&(a.addClass("image-drag"),a.addClass("image-tile"),a.append($('<label class="hidden-label"></label>').html(this.dragImage.title?this.dragImage.title:"")),this.dragImage.protect=!1,a.append('<table class="image-container"><tr><td class="image-cell"></td></tr></table>'),a.find(".image-cell").imagecomponent(this.dragImage),a.attr({"data-default-title":this.dragImage.title?this.dragImage.title:""})),g.find(".drop-item").each(function(){var f=$(this);f.attr("data-dropid")===a.attr("data-dragid")&&(f.append(a),c=2*parseFloat(a.find(".drag-text").css("left")),b=2*parseFloat(a.find(".drag-text").css("top")),d=parseFloat(a.width())-c,e=parseFloat(a.height())-b,a.find(".drag-text").css({height:e+"px",width:d+"px"}))})}),g.find(".correct-tile").hide()},Gadget.OriginalTileSort.prototype.addDraggables=function(){var a,b,c=this,d=c.jObject,e=$("<div></div>"),f=[];$(c.options.draggables).each(function(a){b=e.clone(),b.attr({id:"d"+a,"unique-id":"d"+a,"data-dragid":this.dragId,"aria-hidden":!0,"data-numOfTries":c.options.numberOfTries,"data-inArray":a}).addClass("drag-item"),b.append('<div class="drag-bk"><div class="shade"></div></div><div class="marker" data-icon="marker"></div>'),f.push(b)}).each(function(a){var e=null;c.options.randomize===!0?(b=f[a=Math.floor(Math.random()*f.length)],e=f[a],f.splice(a,1)):(e=f[a],b=f[a]);var g=!0;d.find(".drop-item").each(function(){var a=$(this);a.find(".drag-item:not(.correct-tile)").each(function(){var a=$(this);a.attr("unique-id")===b.attr("unique-id")&&(g=!1)})}),g&&d.children(".drag").append(b)}),d.find(".drag").children(":first-child").attr("aria-hidden",!1),c.isColumn&&(clearInterval(a),a=setInterval(function(){isNaN(parseFloat(d.find(".drag").children().css("top")))===!1&&isNaN(parseFloat(d.find(".drag").children().css("left")))===!1&&(d.find(".drag").children().each(function(){$(this).attr({"data-top":parseFloat($(this).css("top")),"data-left":parseFloat($(this).css("left"))})}),clearInterval(a))},100))},Gadget.OriginalTileSort.prototype.setScreenReaderMode=function(){this.jObject.find(".gadget-textblock").removeClass("audioCursor").attr({audio:"","data-audio-type":""}),this.jObject.find(".image-cell").find(".image-class-wrapper").removeClass("audioCursor").attr({audio:"","data-audio-type":""})},Gadget.OriginalTileSort.prototype.focusOnSelf=function(a){a.blur().focus()},Gadget.OriginalTileSort.prototype.setupSort=function(){var a,b,c,d,e,f,g,h,i=this,j=i.jObject,k=!1;i.options.feedBackPopUp===!0&&(j.dialogcomponent(this.options),i.options.popupAudio.runtimejson=i.options.runtimejson,$(i.options.popupAudio.audioClass).audioComponent(i.options.popupAudio),j.find(".result-pop-up").children(".result-close").focus(function(){window.scroll(0,$(this).offset().top-60)})),j.find(".drop-button").sliderbutton({buttonClassName:"drop-button",slider:!1,clickFunction:function(l){if(i.isInstant)if(null!==i.lastSelected&&void 0!==i.lastSelected){{i.lastSelected}i.onDropEvent(l.jObject.parent().parent().find(".drop-item"),i.lastSelected,!0)}else k===!1&&0!==j.find(".drag").children().size()&&(k=!0,c=l.jObject.parent().parent().find(".drop-item"),d=j.find(".drag").children().first(),a=c.offset().top-d.offset().top,a=a+d.offset().top-j.offset().top,b=c.offset().left-d.offset().left,b=b+d.offset().left-j.offset().left,j.find(".drag").children().first().animate({top:a,left:b},600,function(){$(this).attr("data-numOfTries",parseFloat($(this).attr("data-numOfTries"))-1),i.submittedTries=i.options.numberOfTries-parseFloat($(this).attr("data-numOfTries")),i.scormData.tilePattern["'"+$(this).attr("id")+"'"]={},i.scormData.tilePattern["'"+$(this).attr("id")+"'"].numberOfTries=$(this).attr("data-numOfTries"),i.scormData.tilePattern["'"+$(this).attr("id")+"'"].dropped=!1,i.scormData.tilePattern["'"+$(this).attr("id")+"'"].correct=!1,$(this).attr("data-dragid")===c.attr("data-dropid")?(i.scormData.tilePattern["'"+$(this).attr("id")+"'"].dropped=!0,i.scormData.tilePattern["'"+$(this).attr("id")+"'"].correct=!0,i.onCorrect(),i.numOfCorrect++,i.scormData.numberOfCorrect=i.numOfCorrect,PearsonGL.utils.focusItemOff(d.find(".drag-text")),PearsonGL.utils.focusItemOff(d.find(".image-container")),d.draggable("disable"),i.options.feedback.showGraphicalTreatment||c.parent().find(".correct-mark").show("bounce",{times:2},300),i.showFeedBack(!0),d.hide("fade",{},600,function(){$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),c.prepend($(this)),f=2*parseFloat($(this).find(".drag-text").css("left")),e=2*parseFloat($(this).find(".drag-text").css("top")),g=parseFloat($(this).width())-f,h=parseFloat($(this).height())-e,$(this).find(".drag-text").css({height:h+"px",width:g+"px"}),i.options.feedback.showGraphicalTreatment||$(this).addClass("drag-item-correct"),i.stateChecker(),$(this).unbind("mouseenter mouseleave"),$(this).stop().fadeIn(400,function(){i.progressIndicator(),i.saveLearnerData(),i.hasBeenInteractedWith=!0,c.parent().find(".correct-mark").fadeOut(500,function(){k=!1})}),j.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button"),j.find(".drag").children(":first-child").find(".gadget-textblock").attr("tabindex","0").attr("role","button"),j.find(".drag").children(":first-child").find(".image-class-wrapper").attr("tabindex","0").attr("role","button"),i.resizeColumn(d)})):parseFloat($(this).attr("data-numOfTries"))<=0?(i.scormData.tilePattern["'"+$(this).attr("id")+"'"].dropped=!0,i.onIncorrect(),PearsonGL.utils.focusItemOff(d.find(".drag-text")),PearsonGL.utils.focusItemOff(d.find(".image-container")),d.unbind("mouseenter mouseleave"),d.draggable("disable"),i.options.feedback.showGraphicalTreatment||d.addClass("drag-item-incorrect"),i.showFeedBack(!1),d.delay(600).queue(function(a){d.animate({top:d.attr("data-top")+"px",left:d.attr("data-left")+"px"},600,function(){d.hide("fade",{},600,function(){j.find('[data-dropid="'+$(this).attr("data-dragid")+'"]').prepend($(this)),$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),f=2*parseFloat($(this).find(".drag-text").css("left")),e=2*parseFloat($(this).find(".drag-text").css("top")),g=parseFloat($(this).width())-f,h=parseFloat($(this).height())-e,$(this).find(".drag-text").css({height:h+"px",width:g+"px"}),i.options.feedback.showGraphicalTreatment||$(this).addClass("drag-item-incorrect"),i.stateChecker(),$(this).fadeIn(400,function(){i.progressIndicator(),i.saveLearnerData(),i.hasBeenInteractedWith=!0,k=!1}),j.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button"),j.find(".drag").children(":first-child").find(".gadget-textblock").attr("tabindex","0").attr("role","button"),j.find(".drag").children(":first-child").find(".image-class-wrapper").attr("tabindex","0").attr("role","button"),i.resizeColumn(d)})}),a()})):(i.onIncorrect(),d.unbind("mouseenter mouseleave"),i.options.feedback.showGraphicalTreatment||d.addClass("drag-item-incorrect"),i.showFeedBack(!1),d.delay(600).queue(function(a){$(this).animate({top:$(this).attr("data-top")+"px",left:$(this).attr("data-left")+"px"},600,function(){$(this).delay(500).removeClass("drag-item-incorrect"),k=!1,i.isTouchDevice||$(this).hover(function(){$(this).addClass("drag-item-over")},function(){$(this).removeClass("drag-item-over")})}),a()}))}));else k===!1&&j.find(".drag").children().size()>0&&(k=!0,c=l.jObject.parent().parent().find(".drop-item"),d=j.find(".drag").children().first(),a=c.offset().top-d.offset().top,a=a+d.offset().top-j.offset().top,b=c.offset().left-d.offset().left,b=b+d.offset().left-j.offset().left,j.find(".drag").children().first().animate({top:a,left:b},600,function(){PearsonGL.utils.focusItemOff(d.find(".drag-text")),PearsonGL.utils.focusItemOff(d.find(".image-container")),d.hide("fade",{},600,function(){$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),c.prepend($(this)),f=2*parseFloat($(this).find(".drag-text").css("left")),e=2*parseFloat($(this).find(".drag-text").css("top")),g=parseFloat($(this).width())-f,h=parseFloat($(this).height())-e,$(this).stop().fadeIn(400,function(){i.saveSubmittedMode(),i.progressIndicator(),i.hasBeenInteractedWith=!0,k=!1,0===j.find(".drag").children().size()&&j.find(".c-checkanswer-button").sliderbutton("enable")}),j.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button"),j.find(".drag").children(":first-child").find(".gadget-textblock").attr("tabindex","0").attr("role","button"),j.find(".drag").children(":first-child").find(".image-class-wrapper").attr("tabindex","0").attr("role","button"),i.resizeColumn(d)
})}))}}),i.isTouchDevice||j.find(".drop-header").hover(function(){$(this).addClass("drop-header-over")},function(){$(this).removeClass("drop-header-over")}),i.lastSelected=null,i.stateChecker(),this.options.progressBar===!0&&(j.append("<div class='progress-indicator'><div class='progress'></div><div class='progress-bar'></div></div>"),j.find(".progress-bar").slider({range:"min",min:0,max:100,create:function(){$(this).children(".ui-slider-handle").removeAttr("href"),$(this).children(".ui-slider-handle").hide()},change:function(a,b){b.value>0&&b.value<100?$(this).find(".ui-slider-handle").show():b.value>=100&&$(this).find(".ui-slider-handle").hide()}})),i.dragSetup(),i.progressIndicator(),i.dropSetup(),j.find(".drop-button").removeAttr("tabindex"),i.addAccessibility(j)},Gadget.OriginalTileSort.prototype.dragSetup=function(){var a=this,b=0;a.jObject.children(".drag").children().each(function(){$(this).attr("data-clone",b),$(this).css("z-index",199-b),a.makeDrag($(this)),b++})},Gadget.OriginalTileSort.prototype.makeDrag=function(a){var b,c,d,e=this,f=e.jObject,g=null,h=$("<div class='drag temp-div'></div>");$(a).hasClass("drag-item")&&(e.clone[parseFloat(a.attr("data-clone"))]=a.clone()),e.isTouchDevice?$(a).mouseToTouch():$(a).hover(function(){$(this).addClass("drag-item-over")},function(){$(this).removeClass("drag-item-over")}),void 0!==e.options.draggables[$(a).attr("data-inArray")].dragText&&""!==e.options.draggables[$(a).attr("data-inArray")].dragText.value&&void 0!==e.options.draggables[$(a).attr("data-inArray")].dragText.value&&($(a).addClass("text-drag"),$(a).append("<table class='drag-text'><tr><td class='drag-text-cell'></td></tr></table>"),$(a).find(".drag-text-cell").richtextcomponent(e.options.draggables[$(a).attr("data-inArray")].dragText),void 0!==e.options.draggables[$(a).attr("data-inArray")].dragText.audioComponent&&void 0!==e.options.draggables[$(a).attr("data-inArray")].dragText.audioComponent.src&&""!==e.options.draggables[$(a).attr("data-inArray")].dragText.audioComponent.src&&(e.options.draggables[$(a).attr("data-inArray")].dragText.audioComponent.stopDefault=!1,$(a).find(".gadget-textblock").audioComponent(e.options.draggables[$(a).attr("data-inArray")].dragText.audioComponent),"button"===e.options.draggables[$(a).attr("data-inArray")].dragText.audioComponent.type&&$(a).find(".gadget-textblock").removeAttr("tabindex")),$(a).attr({"data-default-title":e.options.draggables[$(a).attr("data-inArray")].dragText.value.replace(/<(?:.|\n)*?>/gm,"")}),$(a).find(".text-audio-component").append('<label class="drag-state hidden-label"></label>')),void 0!==e.options.draggables[$(a).attr("data-inArray")].dragImage&&""!==e.options.draggables[$(a).attr("data-inArray")].dragImage.src&&void 0!==e.options.draggables[$(a).attr("data-inArray")].dragImage.src&&($(a).addClass("image-drag"),$(a).addClass("image-tile"),$(a).append($('<label class="hidden-label"></label>').html(e.options.draggables[$(a).attr("data-inArray")].dragImage.title?e.options.draggables[$(a).attr("data-inArray")].dragImage.title:"")),e.options.draggables[$(a).attr("data-inArray")].dragImage.protect=!1,$(a).append('<table class="image-container"><tr><td class="image-cell"></td></tr></table>'),$(a).find(".image-cell").imagecomponent(e.options.draggables[$(a).attr("data-inArray")].dragImage),void 0!==e.options.draggables[$(a).attr("data-inArray")].dragImage.audioComponent&&""!==e.options.draggables[$(a).attr("data-inArray")].dragImage.audioComponent.src&&(e.options.draggables[$(a).attr("data-inArray")].dragImage.audioComponent.stopDefault=!1,$(a).find(".image-class-wrapper").audioComponent(e.options.draggables[$(a).attr("data-inArray")].dragImage.audioComponent)),$(a).attr({"data-default-title":e.options.draggables[$(a).attr("data-inArray")].dragImage.title?e.options.draggables[$(a).attr("data-inArray")].dragImage.title:""})),$(a).draggable({containment:e.jObject,scroll:!0,start:function(){e.zdex++,$(this).addClass("drag-item-down"),$(this).find("*").hasClass("audioToggleIdentifier")&&$(this).find(".audioToggleIdentifier").audioComponent("disableAudio"),e.options.cloning&&$(this).parent().hasClass("drag")&&(clone=e.clone[parseFloat($(this).attr("data-clone"))],f.children(".drag").append(clone),e.makeDrag(clone)),$(this).css("z-index",e.zdex),!e.isInstant&&$(this).parent().hasClass("drop-item")&&(c=$(this).offset().top-f.find(".drop").offset().top,d=$(this).offset().left-f.find(".drop").offset().left,g=$(this).parent(),h.css({position:"absolute",width:"0",height:"0",left:d,top:c}),f.find(".drop").append(h.append($(this))))},drag:function(){$(this).removeClass("drag-item-down").addClass("drag-item-dragging")},revert:function(a){return a===!1?(e.reverCheck=!0,!0):(e.reverCheck=!1,!1)},stop:function(){b=$(this),$(this).removeClass("drag-item-down drag-item-dragging drag-item-over drag-item-overdrop"),setTimeout(function(){b.find("*").hasClass("audioToggleIdentifier")&&b.find(".audioToggleIdentifier").audioComponent("enableAudio")},300),e.reverCheck===!0&&($(this).removeClass("drag-item-down drag-item-dragging drag-item-over drag-item-overdrop"),e.options.cloning&&$(this).parent().hasClass("drag")&&f.children(".drag").children(":last").fadeOut(800).remove(),!e.isInstant&&b.parent().hasClass("temp-div")&&e.onDropEvent(g,b,!1))}}),e.isColumn?(f.find(".drag").find(".drag-item").attr("tabindex","").attr("role",""),f.find(".drag").find(".drag-item").find(".gadget-textblock").attr("tabindex","").attr("role",""),f.find(".drag").find(".drag-item").find(".image-class-wrapper").attr("tabindex","").attr("role",""),f.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button")):(f.find(".drag").find(".drag-item").find(".gadget-textblock").attr("tabindex","").attr("role",""),f.find(".drag").find(".drag-item").find(".image-class-wrapper").attr("tabindex","").attr("role",""),f.find(".drag").find(".drag-item").attr("tabindex","0").attr("role","button")),$(a).keydown(function(a){if(($(this).is(":focus")||$(this).is(":active"))&&!$(this).hasClass("ui-draggable-disabled"))switch(e.isDropping=!1,e.collideDetect($(this),f.find(".drop").find(".drop-item")).length>0?(e.isOverDrop=!0,f.find(".drop").find(".drop-item").removeClass("drop-item-over"),$(e.collideDetect($(this),f.find(".drop").find(".drop-item"))[0]).addClass("drop-item-over")):(e.isOverDrop=!1,f.find(".drop").find(".drop-item").removeClass("drop-item-over")),a.keyCode){case 13:e.lastSelected=$(this),e.stateChecker(),e.selectDrag($(this)),e.isOverDrop===!0&&($(e.collideDetect($(this),f.find(".drop").find(".drop-item"))[0]).hasClass("ui-droppable-disabled")||(e.isDropping=!0,e.isOverDrop=!1,e.onDropEvent($(e.collideDetect($(this),f.find(".drop").find(".drop-item"))[0]),$(this),!0),$(this).find("*").hasClass("audioToggleIdentifier")&&$(this).find(".audioToggleIdentifier").audioComponent("enableAudio")));break;case 39:e.zdex++,$(this).css("z-index",e.zdex),$(this).css("left",parseFloat($(this).css("left"))+10),e.checkingAudio($(this)),e.keyEventCloneChecker($(this));break;case 37:e.zdex++,$(this).css("z-index",e.zdex),$(this).css("left",parseFloat($(this).css("left"))-10),e.checkingAudio($(this)),e.keyEventCloneChecker($(this));break;case 38:a.preventDefault(),e.zdex++,$(this).css("z-index",e.zdex),$(this).css("top",parseFloat($(this).css("top"))-10),e.checkingAudio($(this)),e.keyEventCloneChecker($(this)),$(this).position()&&$(this).position().top<$(window).scrollTop()&&$(window).scrollTop($(this).position().top);break;case 40:a.preventDefault(),e.zdex++,$(this).css("z-index",e.zdex),$(this).css("top",parseFloat($(this).css("top"))+10),e.checkingAudio($(this)),e.keyEventCloneChecker($(this)),$(this).position()&&$(this).position().top+$(this).height()>$(window).scrollTop()+(window.innerHeight||document.documentElement.clientHeight)&&$(window).scrollTop($(this).position().top-(window.innerHeight||document.documentElement.clientHeight)+2*$(this).height())}}),$(a).click(function(a){a.stopImmediatePropagation(),a.preventDefault(),$(this).hasClass("ui-draggable-disabled")||(e.lastSelected=$(this),e.stateChecker(),e.selectDrag($(this)))}),$(a).focus(function(){$(this).hasClass("ui-draggable-disabled")||($(this).addClass("drag-item-dragging"),PearsonGL.utils.focusItemOn(this))}),$(a).blur(function(){f.find(".drop").children().removeClass("drop-item-over"),$(this).hasClass("ui-draggable-disabled")||(PearsonGL.utils.focusItemOff(this),$(this).removeClass("drag-item-dragging"),f.find(".drop").children().removeClass("drop-item-over"),$(this).find("*").hasClass("audioToggleIdentifier")&&$(this).find(".audioToggleIdentifier").audioComponent("enableAudio"),$(this).parent().hasClass("drag")&&e.isDropping===!1&&$(this).animate({top:$(this).attr("data-top")+"px",left:$(this).attr("data-left")+"px"},400,function(){e.options.cloning&&f.find(".drag").find('[unique-id="'+$(this).attr("unique-id")+'"]').length>=2&&$(this).parent().hasClass("drag")&&$(this).remove()}))})},Gadget.OriginalTileSort.prototype.keyEventCloneChecker=function(a){var b;this.options.cloning&&this.jObject.find(".drag").find('[unique-id="'+a.attr("unique-id")+'"]').length<2&&a.parent().hasClass("drag")&&(b=this.clone[parseFloat(a.attr("data-clone"))],this.jObject.children(".drag").append(b),this.makeDrag(b))},Gadget.OriginalTileSort.prototype.revert=function(a,b){var c=this.jObject;a.animate({top:a.attr("data-top")+"px",left:a.attr("data-left")+"px"},600,function(){$(this).find(".marker").hide(),$(this).removeClass("drag-item-incorrect"),c.find('[unique-id="'+a.attr("unique-id")+'"]').attr("data-num-of-tries",parseFloat(a.attr("data-num-of-tries"))),b===!0&&$(this).remove()})},Gadget.OriginalTileSort.prototype.selectDrag=function(a){var b=this;a.addClass("drag-item-selected"),a.find("*").hasClass("drag-state")&&(b.setDragStatusLive(b.options.selectedText),a.find(".drag-state").html(b.options.selectedText)),a.hasClass("image-tile")&&a.find(".hidden-label").html((a.attr("data-default-title")?a.attr("data-default-title"):"")+" "+b.options.selectedText),a.attr("aria-grabbed","true"),b.focusOnSelf(a)},Gadget.OriginalTileSort.prototype.stateChecker=function(){var a=this;this.jObject.find(".drag-item").each(function(){$(this).attr("aria-grabbed","false"),$(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(""),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html($(this).attr("data-default-title")?$(this).attr("data-default-title"):""),$(this).hasClass("drag-item-correct")?($(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(a.options.correctText),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html(($(this).attr("data-default-title")?$(this).attr("data-default-title"):"")+" "+a.options.correctText)):$(this).hasClass("drag-item-incorrect")&&($(this).find("*").hasClass("drag-state")&&$(this).find(".drag-state").html(a.options.incorrectText),$(this).hasClass("image-tile")&&$(this).find(".hidden-label").html(($(this).attr("data-default-title")?$(this).attr("data-default-title"):"")+" "+a.options.incorrectText))})},Gadget.OriginalTileSort.prototype.checkingAudio=function(a){a.find("*").hasClass("audioToggleIdentifier")&&(a.find(".audioToggleIdentifier").audioComponent("stop"),a.find(".audioToggleIdentifier").audioComponent("disableAudio"),a.parent().hasClass("drag")?a.css("top")===a.attr("data-top")+"px"&&a.css("left")===a.attr("data-left")+"px"&&a.find(".audioToggleIdentifier").audioComponent("enableAudio"):a.parent().hasClass("drop-item")&&a.find(".audioToggleIdentifier").audioComponent("enableAudio"))},Gadget.OriginalTileSort.prototype.dropSetup=function(){var a=this,b=a.jObject;b.find(".drop-item").each(function(){$(this).droppable({accept:".drag-item",drop:function(b,c){a.onDropEvent($(this),c.draggable,!1)},over:function(a,b){b.draggable.addClass("drag-item-overdrop"),$(this).addClass("drop-item-over")},out:function(a,b){b.draggable.removeClass("drag-item-overdrop"),$(this).removeClass("drop-item-over")}})}),b.find(".drop-item").click(function(b){$(this).hasClass("ui-droppable-disabled")||(b.preventDefault(),null!==a.lastSelected&&void 0!==a.lastSelected&&a.onDropEvent($(this),a.lastSelected,!1))}),b.find(".drop-item").attr({tabindex:"0",role:"button","aria-dropeffect":"move"}),b.find(".drop-item").focus(function(){PearsonGL.utils.focusItemOn(this)}),b.find(".drop-item").blur(function(){PearsonGL.utils.focusItemOff(this)}),b.find(".drop-item").keydown(function(b){if(($(this).is(":focus")||$(this).is(":active"))&&!$(this).hasClass("ui-droppable-disabled")&&13===b.keyCode&&(b.preventDefault(),null!==a.lastSelected&&void 0!==a.lastSelected)){{a.lastSelected}a.onDropEvent($(this),a.lastSelected,!0)}})},Gadget.OriginalTileSort.prototype.onDropEvent=function(a,b){var c,d,e,f,g=this,h=g.jObject;b.removeClass("drag-item-dragging"),PearsonGL.utils.focusItemOff(b),g.isInstant?(b.attr("data-numOfTries",parseFloat(b.attr("data-numOfTries"))-1),g.submittedTries=g.options.numberOfTries-parseFloat(b.attr("data-numOfTries")),g.scormData.tilePattern["'"+b.attr("id")+"'"]={},g.scormData.tilePattern["'"+b.attr("id")+"'"].numberOfTries=b.attr("data-numOfTries"),g.scormData.tilePattern["'"+b.attr("id")+"'"].dropped=!1,g.scormData.tilePattern["'"+b.attr("id")+"'"].correct=!1,a.attr("data-dropid")===b.attr("data-dragid")?(g.scormData.tilePattern["'"+b.attr("id")+"'"].dropped=!0,g.scormData.tilePattern["'"+b.attr("id")+"'"].correct=!0,g.onCorrect(),g.numOfCorrect++,g.scormData.numberOfCorrect=g.numOfCorrect,b.draggable("disable"),g.options.feedback.showGraphicalTreatment||a.parent().find(".correct-mark").show("bounce",{times:2},300),g.showFeedBack(!0),g.setDragStatusLive(g.options.correctText),b.hide("fade",{},600,function(){a.prepend($(this)),$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),d=2*parseFloat($(this).find(".drag-text").css("left")),c=2*parseFloat($(this).find(".drag-text").css("top")),e=parseFloat($(this).width())-d,f=parseFloat($(this).height())-c,g.options.feedback.showGraphicalTreatment||$(this).addClass("drag-item-correct"),h.find(".drag-item-correct").removeAttr("tabindex role"),h.find(".drag-item-correct").find(".gadget-textblock").removeAttr("tabindex role"),h.find(".drag-item-correct").find(".image-class-wrapper").removeAttr("tabindex role"),g.stateChecker(),$(this).unbind("mouseenter mouseleave"),$(this).fadeIn(400,function(){h.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button"),PearsonGL.utils.focusItemOff($(this).find(".drag-text").removeAttr("tabindex")),PearsonGL.utils.focusItemOff($(this).find(".image-container").removeAttr("tabindex")),h.find(".drag").children(":first-child").attr("aria-hidden",!1),g.progressIndicator(),g.saveLearnerData(),g.hasBeenInteractedWith=!0,a.parent().find(".correct-mark").fadeOut(500),g.focusOnSelf(a),g.resizeColumn(b)})})):parseFloat(b.attr("data-numOfTries"))<=0?(g.scormData.tilePattern["'"+b.attr("id")+"'"].dropped=!0,g.onIncorrect(),b.unbind("mouseenter mouseleave"),b.draggable("disable"),g.setDragStatusLive(g.options.incorrectText),g.options.feedback.showGraphicalTreatment||b.addClass("drag-item-incorrect"),g.showFeedBack(!1),b.delay(600).queue(function(a){b.animate({top:b.attr("data-top")+"px",left:b.attr("data-left")+"px"},600,function(){b.hide("fade",{},600,function(){h.find('[data-dropid="'+$(this).attr("data-dragid")+'"]').prepend($(this)),$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),d=2*parseFloat($(this).find(".drag-text").css("left")),c=2*parseFloat($(this).find(".drag-text").css("top")),e=parseFloat($(this).width())-d,f=parseFloat($(this).height())-c,$(this).find(".drag-text").css({height:f+"px",width:e+"px"}),g.options.feedback.showGraphicalTreatment||$(this).addClass("drag-item-incorrect"),h.find(".drag-item-incorrect").removeAttr("tabindex role"),h.find(".drag-item-incorrect").find(".gadget-textblock").removeAttr("tabindex role"),h.find(".drag-item-incorrect").find(".image-class-wrapper").removeAttr("tabindex role"),g.stateChecker(),g.focusOnSelf(h.find('[data-dropid="'+$(this).attr("data-dragid")+'"]')),$(this).fadeIn(400,function(){g.progressIndicator(),g.saveLearnerData(),g.hasBeenInteractedWith=!0}),PearsonGL.utils.focusItemOff($(this).find(".drag-text")),PearsonGL.utils.focusItemOff($(this).find(".image-container")),h.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button"),g.resizeColumn(b),h.find(".drag").children(":first-child").attr("aria-hidden",!1)})}),a()})):(g.onIncorrect(),b.unbind("mouseenter mouseleave"),g.options.feedback.showGraphicalTreatment||b.addClass("drag-item-incorrect"),g.showFeedBack(!1),b.delay(600).queue(function(a){b.animate({top:b.attr("data-top")+"px",left:b.attr("data-left")+"px"},600,function(){$(this).delay(500).removeClass("drag-item-incorrect"),g.stateChecker(),g.isTouchDevice||$(this).hover(function(){$(this).addClass("drag-item-over")},function(){$(this).removeClass("drag-item-over")}),g.options.cloning&&h.find(".drag").find('[unique-id="'+$(this).attr("unique-id")+'"]').length>=2&&$(this).parent().hasClass("drag")&&h.find(".drag").find('[unique-id="'+$(this).attr("unique-id")+'"]:last').remove(),g.focusOnSelf(b)}),a()}),h.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button"),h.find(".drag").children(":first-child").attr("aria-hidden",!1),h.find(".drag").children(":first-child").focus())):b.hide("fade",{},600,function(){$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),a.prepend($(this)),d=2*parseFloat($(this).find(".drag-text").css("left")),c=2*parseFloat($(this).find(".drag-text").css("top")),e=parseFloat($(this).width())-d,f=parseFloat($(this).height())-c,PearsonGL.utils.focusItemOff($(this).find(".drag-text")),PearsonGL.utils.focusItemOff($(this).find(".image-container")),$(this).fadeIn(400,function(){g.saveSubmittedMode(),g.progressIndicator(),g.hasBeenInteractedWith=!0,g.focusOnSelf(a),0===h.find(".drag").children().size()&&h.find(".c-checkanswer-button").sliderbutton("enable")}),h.find(".drag").children(":first-child").attr("tabindex","0").attr("role","button").attr("aria-hidden",!1),h.find(".drag").children(":first-child").find(".gadget-textblock").attr("tabindex","0").attr("role","button"),h.find(".drag").children(":first-child").find(".image-class-wrapper").attr("tabindex","0").attr("role","button"),g.resizeColumn(b),h.find(".temp-div").remove()}),a.removeClass("drop-item-over"),g.lastSelected=null,g.stateChecker()},Gadget.OriginalTileSort.prototype.setDragStatusLive=function(a){this.dragStatusLive.html(a)},Gadget.OriginalTileSort.prototype.resizeColumn=function(a){var b,c,d=this.jObject,e=0;d.find(".drop-item").css({height:""}),d.css({height:""}),d.find(".drop-item").each(function(){$(this).find(".drag-item:not(.correct-tile)").length>e&&(e=$(this).find(".drag-item:not(.correct-tile)").length,e>3&&(b=$(this).find(".drag-item:not(.correct-tile)").length*$(a).height()+$(a).height(),c=d.height()+20,d.find(".drop-item").css({height:b+"px"}),d.css({height:c+$(a).height()*($(this).find(".drag-item:not(.correct-tile)").length-3)})))})},Gadget.OriginalTileSort.prototype.collideDetect=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=a,r=b,s=$([]);return q&&r?(c=q,d=c.offset(),e=d.left,f=d.top,g=e+c.outerWidth(),h=f+c.outerHeight(),i=parseFloat(c.height())/2+f,j=parseFloat(c.width())/2+e,r.not(c).each(function(){return k=$(this),l=k.offset(),m=l.left,n=l.top,o=m+k.outerWidth(),p=n+k.outerHeight(),e>=o||m>=g||f>=p||n>=h?!0:o>=j&&j>=m&&p>=i&&i>=n?(s=$([]),s.push(this),!1):void 0}),s):!1},Gadget.OriginalTileSort.prototype.progressIndicator=function(){{var a;this.jObject}if(this.options.progressBar===!0){a=this.totalDraggableTile-this.jObject.find(".drag").children().size(),this.jObject.find(".progress").html(a+" "+this.options.ofLabel+" "+this.totalDraggableTile);var b=a/this.totalDraggableTile*100;0==b&&this.jObject.find(".progress-bar").find(".ui-slider-handle").hide(),this.jObject.find(".progress-bar").slider("option","value",b)}0===this.jObject.find(".drag").children().size()&&this.onComplete()},Gadget.OriginalTileSort.prototype.onCorrect=function(){this.options.correctAudio&&""!==this.options.correctAudio&&this.jObject.find(".dnd-correct-audio").audioComponent("play")},Gadget.OriginalTileSort.prototype.onIncorrect=function(){this.options.inCorrectAudio&&""!==this.options.inCorrectAudio&&this.jObject.find(".dnd-in-correct-audio").audioComponent("play")},Gadget.OriginalTileSort.prototype.onComplete=function(){},Gadget.OriginalTileSort.prototype.saveSubmittedMode=function(){var a=this,b=a.jObject;a.scormData.tilePattern={},b.find(".drag-item:not(.correct-tile)").each(function(){$(this).parent().hasClass("drop-item")&&(a.scormData.tilePattern["'"+$(this).attr("id")+"'"]={},a.scormData.tilePattern["'"+$(this).attr("id")+"'"].parent=$(this).parent().attr("data-dropid"),$(this).hasClass("ignore-correct")&&(a.scormData.tilePattern["'"+$(this).attr("id")+"'"].correct=!0),$(this).hasClass("ignore-incorrect")&&(a.scormData.tilePattern["'"+$(this).attr("id")+"'"].incorrect=!0))}),a.scormData.tryagain=b.find(".c-checkanswer-button").hasClass("try-again")?!0:!1,a.saveLearnerData()},Gadget.OriginalTileSort.prototype.setGadget=function(){var a,b,c,d,e,f=this,g=f.jObject;if(f.numOfCorrect=parseFloat(f.scormData.numberOfCorrect),f.hasBeenInteractedWith=!0,f.isInstant)g.find(".drag-item").each(function(){void 0!==f.scormData.tilePattern["'"+$(this).attr("id")+"'"]&&(f.scormData.tilePattern["'"+$(this).attr("id")+"'"].dropped===!0?(g.find(".drop").find('[data-dropid="'+$(this).attr("data-dragid")+'"]').prepend($(this)),$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),b=2*parseFloat($(this).find(".drag-text").css("left")),c=2*parseFloat($(this).find(".drag-text").css("top")),d=parseFloat($(this).width())-b,e=parseFloat($(this).height())-c,$(this).find(".drag-text").css({height:e+"px",width:d+"px"}),f.options.feedback.showGraphicalTreatment||$(this).addClass(f.scormData.tilePattern["'"+$(this).attr("id")+"'"].correct===!0?"drag-item-correct":"drag-item-incorrect"),f.stateChecker(),$(this).unbind("mouseenter mouseleave")):(a=parseFloat(g.find(".drag").children().first().css("z-index"))+5,$(this).css("z-index",a),$(this).attr("data-numoftries",f.scormData.tilePattern["'"+$(this).attr("id")+"'"].numberOfTries),g.find(".drag").prepend($(this))))});else{g.find(".drag-item:not(.correct-tile)").each(function(){void 0!==f.scormData.tilePattern["'"+$(this).attr("id")+"'"]&&(g.find(".drop").find('[data-dropid="'+f.scormData.tilePattern["'"+$(this).attr("id")+"'"].parent+'"]').prepend($(this)),$(this).css({position:"relative",width:"",height:"",left:"",top:""}),$(this).find(".image-container").css({width:"",height:""}),f.scormData.tilePattern["'"+$(this).attr("id")+"'"].correct&&($(this).addClass("ignore-correct"),f.options.feedback.showGraphicalTreatment||$(this).addClass("drag-item-correct"),$(this).unbind("mouseenter mouseleave"),$(this).draggable("disable")),f.scormData.tilePattern["'"+$(this).attr("id")+"'"].incorrect&&($(this).addClass("ignore-incorrect"),f.options.feedback.showGraphicalTreatment||$(this).addClass("drag-item-incorrect"),$(this).unbind("mouseenter mouseleave"),$(this).draggable("disable")))});var h=f.scormData.allCorrect;f.submittedTries=f.scormData.submittedTries,g.find(".c-checkanswer-button").show().sliderbutton("disable"),f.scormData.tryagain?(g.find(".c-checkanswer-button").find(".button-text").html(f.options.buttons.tryAgainButton),g.find(".c-checkanswer-button").addClass("try-again"),g.find(".c-checkanswer-button").show().sliderbutton("enable")):(g.find(".c-checkanswer-button").removeClass("try-again").find(".button-text").html(f.options.buttons.checkAnswerButton),0==g.find(".drag").children().length&&g.find(".c-checkanswer-button").show().sliderbutton("enable")),h&&(g.find(".c-checkanswer-button").removeClass("try-again").find(".button-text").html(f.options.buttons.checkAnswerButton),g.find(".c-checkanswer-button").show().sliderbutton("disable"),g.find(".c-answer-button").hide(),g.find(".c-myanswer-button").hide()),f.submittedTries==f.options.numberOfTries&&(g.find(".c-checkanswer-button").hide(),g.find(".c-answer-button").show(),f.setShowAnswerButtonStates("enable"))}f.resizeColumn(g.find(".drop").find(".drag-item")),f.progressIndicator()},Gadget.OriginalTileSort.prototype.parseLearnerData=function(){var a=this.options.scorm.suspendData.data;"object"==typeof a&&(this.scormData=a,this.setGadget())},Gadget.OriginalTileSort.prototype.saveLearnerData=function(){if(this.isCommEnabled()){var a,b=[];for(this.options.scorm.suspendData.data=this.scormData,a=0;a<this.options.scorm.interactions.length;a++)result=this.getResult(this.options.scorm.interactions[a].objectives[0]),result.correctResponses=[{pattern:[]}],result.learnerResponse=[],this.jObject.find(".drag-item").each(function(){result.correctResponses[0].pattern.push([$(this).attr("data-dragid"),$(this).attr("data-dragid")]),result.learnerResponse.push([$(this).attr("data-dragid"),$(this).attr("data-dragid")])}),b.push(result);this.setLearnerData({gadgetId:this.gadgetUniqueId,data:this.options.scorm,results:b})}},Gadget.OriginalTileSort.prototype.getResult=function(a){var b={};try{a.score.min=0,a.score.max!==a.score.raw&&(a.score.raw=a.score.max*(this.numOfCorrect/this.totalDraggableTile)),a.score.scaled=a.score.max-a.score.min!==0?(a.score.raw-a.score.min)/(a.score.max-a.score.min):1,a.progress_measure=(this.totalDraggableTile-this.jObject.find(".drag").children().size())/this.totalDraggableTile,b.raw=a.score.raw,b.min=a.score.min,b.max=a.score.max,b.scaled=a.score.scaled,b.progressMeasure=a.progress_measure,b.completionStatus="incomplete",b.successStatus="unknown",a.completion_status="incomplete",a.success_status="unknown",parseFloat(a.progress_measure)>=parseFloat(a.completionThreshold)?(a.completion_status="completed",b.completionStatus="completed",parseFloat(a.score.scaled)>=parseFloat(SB.get("scaled_passing_score"))?(a.success_status="passed",b.successStatus="passed"):(a.success_status="failed",b.successStatus="failed")):parseFloat(a.score.scaled)>=parseFloat(SB.get("scaled_passing_score"))&&(a.success_status="passed",b.successStatus="passed"),this.isInstant||(a.completion_status="incomplete",b.completionStatus="incomplete",1==this.scormData.checkedAnswer&&(this.submittedTries>=this.options.numberOfTries||this.scormData.allCorrect)&&(a.completion_status="completed",b.completionStatus="completed"))}catch(c){}return this.giveAllPoints===!0&&(a.score.raw=a.score.max,a.success_status="passed",b.successStatus="passed",this.giveAllPoints=!1),b.result=b.scaled,b},window.Gadget=window.Gadget||{},Gadget.Table=function(a,b,c){PearsonGL.GadgetBase2.call(this,b,c),b&&(this.labelOpts={showSolutionText:"Show My Answers",resetButtonText:"Start Over",chartItButtonText:"Chart It",resetConfirmText:"Would you like to start over?",closeToolTip:"Close",yesToolTip:"Yes",noToolTip:"No",invalidRange:"Value is out of range. Enter a value between {0} and {1}.",numberTooSmall:"Enter a value greater than or equal to {0}.",numberTooBig:"Enter a value less than or equal to {0}.",exceedMaxLen:"Maximum allowed characters: {0}.",validDataSample:"Invalid data format. Example valid data: {0}.",invalidDateTimeFormat:"Invalid date or invalid date/time format.  The valid format is {0}.",exceedScormDataLimit:"Table data cannot be saved because the data exceeds the specified limit."},$.extend(this.options,{gadgetName:"Table",objectiveDescription:"Table is presented to the user.",editable:!1,noTabIndex:!0,isModal:!0}),this.jObject=$(a),this.initialize())},Gadget.Table.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.Table.prototype.constants={RESET_BTN:"resetBtn",SOLUTION_BTN:"ansBtn",CHART_IT_BTN:"chartItBtn",COL_ID:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],CELL_ID_INDEX:{col:0,row:1,rand:2},DATE_FORMAT:{d:"d -Day of the month as digits; no leading zero for single-digit days.",dd:"dd - Day of the month as digits; leading zero for single-digit days.",ddd:"ddd - Day of the week as a three-letter abbreviation.",dddd:"dddd - Day of the week as its full name.",m:"m - Month as digits; no leading zero for single-digit months.",mm:"mm - Month as digits; leading zero for single-digit months.",mmm:"mmm - Month as a three-letter abbreviation.",mmmm:"mmmm - Month as its full name.",yy:"yy - Year as last two digits; leading zero for years less than 10.",yyyy:"yyyy - Year represented by four digits.",h:"h - Hours; no leading zero for single-digit hours (12-hour clock).",hh:"hh - Hours; leading zero for single-digit hours (12-hour clock).",H:"H - Hours; no leading zero for single-digit hours (24-hour clock).",HH:"HH - Hours; leading zero for single-digit hours (24-hour clock).",M:"M - Minutes; no leading zero for single-digit minutes.",MM:"MM - Minutes; leading zero for single-digit minutes.",s:"s - Seconds; no leading zero for single-digit seconds.",ss:"ss - Seconds; leading zero for single-digit seconds.",t:"t - Lowercase, single-character time marker string: a or p.",tt:"tt - Lowercase, two-character time marker string: am or pm.",T:"T - Uppercase, single-character time marker string: A or P.",TT:"TT - Uppercase, two-character time marker string: AM or PM."}},Gadget.Table.prototype.dayNames={en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],es:["dom","lun","mar","mi��","jue","vie","s��b","domingo","lunes","martes","mi��rcoles","jueves","viernes","s��bado"]},Gadget.Table.prototype.monthNames={en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],es:["enero","feb","marzo","abr","mayo","jun","jul","agosto","sept","oct","nov","dic","enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Gadget.Table.prototype.initialize=function(){var a=this,b=this.jObject;this.scormData={},this.isShowSolutionAlways=!0,this.isResetBtnEnabled=!1,this.hasEditableCell=!1,this.isL1Scorm=!0,this.hasChanged=!1,this.isScreenReaderMode=!1,this.cellIdToExportData={},this.exportData={};try{this.isScreenReaderMode=global_player.inScreenReaderMode}catch(c){}this.randId=Math.floor(1e5*Math.random()),this.isTabPressed=!1,this.jObject.addClass("table-identifier"),this.initGadget(this.options.gadgetName),this.options.exportData&&this.setupExportData(),PearsonGL.utils.getGlobalizedLabel("table_globalization",a.globalizationComplete.bind(this),this.options.runtimejson.lang),a.options.exportData&&!a.options.chartIt&&$(document).on("PageShowEvent",function(){a.exportAllData()}),$(window).bind("resize.table",function(){a.jObject.is(":visible")&&(a.table.width()<=400?b.addClass("responsive-table"):b.removeClass("responsive-table"))})},Gadget.Table.prototype.globalizationComplete=function(a){var b=$.extend({},this.options);this.transferLabels(a),delete b.scorm,$.extend(this.options,b),this.mergeAllMessages(),this.setupComponents(),this.getLearnerData({results:[{correctResponses:[{pattern:"Edited/Viewed Table"}],learnerResponse:"Not Edit Table"}]})},Gadget.Table.prototype.findNextDownEditableContent=function(a,b,c){var d,e=$(a).data("focus-id").split("_"),f=1*e[this.constants.CELL_ID_INDEX.row],g=$(a).attr("id");for(b||f++,f;f<=this.options.rows;f++)if(d=e[this.constants.CELL_ID_INDEX.col]+"_"+f+"_"+this.randId,this.setFocusOnNextCell(g,d,c))return!0;return!1},Gadget.Table.prototype.findNextLeftEditableContent=function(a){var b,c,d=a.data("focus-id").split("_"),e=$(a).attr("id");for(b=d[this.constants.CELL_ID_INDEX.col].charCodeAt(0)-1;b>=97;b--)if(c=String.fromCharCode(b)+"_"+d[this.constants.CELL_ID_INDEX.row]+"_"+this.randId,this.setFocusOnNextCell(e,c))return
},Gadget.Table.prototype.findNextRightEditableContent=function(a){var b,c,d=a.data("focus-id").split("_"),e=$(a).attr("id");for(b=d[this.constants.CELL_ID_INDEX.col].charCodeAt(0)+1;b<=97+1*this.options.cols;b++)if(c=String.fromCharCode(b)+"_"+d[this.constants.CELL_ID_INDEX.row]+"_"+this.randId,this.setFocusOnNextCell(e,c))return},Gadget.Table.prototype.findNextUpEditableContent=function(a){var b,c,d=a.data("focus-id").split("_"),e=$(a).attr("id");for(b=d[this.constants.CELL_ID_INDEX.row]-1;b>=1;b--)if(c=d[this.constants.CELL_ID_INDEX.col]+"_"+b+"_"+this.randId,this.setFocusOnNextCell(e,c))return},Gadget.Table.prototype.getDateTime=function(a,b){function c(a){var b,c=e.options.runtimejson.lang;for(b=0;b<e.monthNames[c].length&&e.monthNames[c][b].toLowerCase()!==a.toLowerCase();b++);return b>11?(b-12)%12+1:b%12+1}var d,e=this,f={formatString:b,toString:a},g=b.split(/[\/, -.]+/),h=a.split(/[\/, -.]+/);if(""===a)return f;for(d=0;d<h.length;d++)switch(g[d]){case"m":case"mm":f.month=parseInt(h[d],10);break;case"mmm":case"mmmm":f.month=c(h[d]),f.monthToString=h[d];break;case"d":case"dd":f.date=parseInt(h[d],10);break;case"ddd":case"dddd":f.dayOfWeek=h[d];break;case"yy":case"yyyy":f.year=parseInt(h[d],10);break;default:for(var i=g[d].split(/[: ]+/),j=h[d].split(/[: ]+/),k=0;k<j.length;k++)switch(i[k]){case"h":case"H":case"hh":case"HH":f.hours=parseInt(j[k],10);break;case"M":case"MM":f.minutes=parseInt(j[k],10);break;case"s":case"ss":f.seconds=parseInt(j[k],10);break;case"t":case"tt":case"T":case"TT":f.period=j[k]}}return f},Gadget.Table.prototype.getDateTimeFormat=function(a){var b="";return a.dateFormat&&"none"!==a.dateFormat&&(b=a.dateFormat),a.timeFormat&&"none"!==a.timeFormat&&(b+=" "+a.timeFormat),b.trim()},Gadget.Table.prototype.getScormDataId=function(a){var b=a.split("_");return b.length>=3?b[0]+"_"+b[1]+"_":""},Gadget.Table.prototype.getNormalCellId=function(a){var b=this.getScormDataId(a);return b.substring(0,b.length-1)},Gadget.Table.prototype.formatDate=function(a,b){var c,d=new Date,e=this.options.runtimejson.lang,f=d.getDate(),g=d.getDay(),h=d.getMonth()+1,i=d.getFullYear(),j=d.getHours(),k=d.getMinutes(),l=d.getSeconds(),m=void 0,n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,o=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};getValue=function(a,b,c,d){var e;for(e=0;e<a.length;e++)if(a[e].toLowerCase()===b.toLowerCase())return e>=c&&d>=e?a[e]:e>d?a[e-d-1]:a[e+c];return""};var p=b.split(/[\/, -.]+/),q=a.split(/[\/, -.]+/);for(c=0;c<q.length;c++)switch(p[c]){case"m":case"mm":h=1*q[c];break;case"mmm":case"mmmm":h=q[c];break;case"d":case"dd":f=1*q[c];break;case"ddd":case"dddd":g=q[c];break;case"yy":case"yyyy":i=q[c];break;default:for(var r=p[c].split(/[: ]+/),s=q[c].split(/[: ]+/),t=0;t<s.length;t++)switch(r[t]){case"h":case"H":case"hh":case"HH":j=1*s[t];break;case"M":case"MM":k=1*s[t];break;case"s":case"ss":l=1*s[t];break;case"t":m=s[t].toLowerCase(),2===m.length&&(m=m.charAt(0));break;case"tt":m=s[t].toLowerCase(),1===m.length&&(m+="m");break;case"T":m=s[t].toUpperCase(),2===m.length&&(m=m.charAt(0));break;case"TT":m=s[t].toUpperCase(),1===m.length&&(m+="M");break;default:return q}}return flags={d:f,dd:o(f),ddd:Math.floor(g)==g&&$.isNumeric(g)?this.dayNames[e][1*g]:getValue(this.dayNames[e],g,0,6),dddd:Math.floor(g)==g&&$.isNumeric(g)?this.dayNames[e][1*g+7]:getValue(this.dayNames[e],g,7,13),m:h,mm:o(h),mmm:Math.floor(h)==h&&$.isNumeric(h)?this.monthNames[e][1*h-1]:getValue(this.monthNames[e],h,0,11),mmmm:Math.floor(h)==h&&$.isNumeric(h)?this.monthNames[e][1*h+11]:getValue(this.monthNames[e],h,12,24),yy:4===String(i).length?String(i).slice(2):i,yyyy:i,h:j%12||12,hh:o(j%12||12),H:j,HH:o(j),M:k,MM:o(k),s:l,ss:o(l),t:m?m:12>j?"a":"p",tt:m?m:12>j?"am":"pm",T:m?m:12>j?"A":"P",TT:m?m:12>j?"AM":"PM"},b.replace(n,function(a){return a in flags?flags[a]:a.slice(1,a.length-1)})},Gadget.Table.prototype.updateExportData=function(a,b,c){var d,e=this,f=this.getNormalCellId(a),g=this.cellIdToExportData[f];if(g)for(c&&c.length>0&&(b=e.getDateTime(b,c)),d=0;d<g.length;d++)$.each(this.exportData[g[d]],function(a){a===f&&(e.exportData[g[d]][a]=b)})},Gadget.Table.prototype.exportTableData=function(a,b,c){var d,e,f=this,g={gadgetId:this.gadgetUniqueId},h=this.getNormalCellId(a.attr("id")),i=this.cellIdToExportData[h];if(i){for(c&&c.length>0&&(b=this.getDateTime(b,c)),d=0;d<i.length;d++)e=[],$.each(this.exportData[i[d]],function(a,c){a===h&&(f.exportData[i[d]][a]=b,c=b),e.push(c)}),g[i[d]]=e;f.options.chartIt||a.trigger("tableDataChanged",g)}},Gadget.Table.prototype.exportAllData=function(){var a,b,c={gadgetId:this.gadgetUniqueId},d=$.map(this.exportData,function(a,b){return b});for(a=0;a<d.length;a++)b=[],$.each(this.exportData[d[a]],function(a,c){b.push(c)}),c[d[a]]=b;$(this.jObject).trigger("tableDataChanged",c)},Gadget.Table.prototype.mergeAllMessages=function(){var a=this;a.options.reset&&a.options.reset.each(function(b){b.buttonText||(b.buttonText=a.labelOpts.resetButtonText),b.resetConfirmText||(b.resetConfirmText="<p>"+a.labelOpts.resetConfirmText+"</p>")}),a.options.showSolution&&a.options.showSolution.each(function(b){b.buttonText||(b.buttonText=a.labelOpts.showSolutionText)}),a.options.chartIt&&a.options.chartIt.each(function(b){b.buttonText||(b.buttonText=a.labelOpts.chartItButtonText)})},Gadget.Table.prototype.resetTableData=function(){var a,b,c,d,e=this.jObject,f=this,g=e.find(".editableContent");e.find(".result-pop-up").fadeOut(),e.children(".checker").fadeOut(),e.find(".start-over").sliderbutton("disable"),g.each(function(a,e){b=$(e).parent().data("cell-data"),origCellValue=$(b.value).text.trim,$(this).empty().append(b.displayValue),d=$(this).parent(),f.scormData[f.getScormDataId(d.attr("id"))]=origCellValue,f.options.exportData&&(c="","Date"===b.format&&(c=f.getDateTimeFormat(b)),f.updateExportData(d.attr("id"),origCellValue,c))}),this.isResetBtnEnabled=!1,a=this.isShowSolutionAlways?"enable":"disable",e.find(".show-solution").sliderbutton(a),e.find(".chart-it").sliderbutton(a),this.isCommEnabled()&&!f.isL1Scorm&&(f.scormData[f.constants.RESET_BTN]="disable",f.scormData[f.constants.SOLUTION_BTN]=a,f.scormData[f.constants.CHART_IT_BTN]=a,f.saveLearnerData()),f.sendAnalytics("table_revertdata")},Gadget.Table.prototype.saveLearnerData=function(){if(this.isCommEnabled()){if(PearsonGL.globals.comm.isExceededSuspendDataLimit(this.scormData,this.options.scorm.suspendDataLimit)&&!this.jObject.find(".result-pop-up").is(":visible"))return void this.showValidationError(this.options.exceedScormDataLimit);this.options.scorm.suspendData.data=this.scormData,this.setLearnerData({results:[{learnerResponse:"Edited/Viewed Table",raw:this.options.scorm.interactions[0].objectives[0].score.max,progressMeasure:1,completionStatus:"completed",successStatus:"passed"}]})}},Gadget.Table.prototype.setCellStyle=function(a,b){var c={},d="";if(b.bgcolor&&(c["background-color"]=b.bgcolor.indexOf("#")<0&&b.bgcolor.length>=3?"#"+b.bgcolor:b.bgcolor),b.border)for(d in b.border)b.border.hasOwnProperty(d)&&(c["border-"+d]=b.border[d]);$(a).css(c),b.align&&""!==b.align&&$(a).addClass("align-"+b.align),b.valign&&""!==b.valign&&$(a).addClass("valign-"+b.valign)},Gadget.Table.prototype.selectAndFocusCellData=function(a){var b,c,d=a[0],e=$(d).text().trim();return 0===e.length?void d.focus():void(document.body.createTextRange?(b=document.body.createTextRange(),b.moveToElementText(d),b.select()):window.getSelection&&(c=window.getSelection(),b=document.createRange(),b.selectNodeContents(d),c.removeAllRanges(),c.addRange(b),d.focus()))},Gadget.Table.prototype.setFocusOnNextCell=function(a,b,c){var d,e;if(c||a.indexOf(b)<0){if(d=this.jObject.find("[id*='"+b+"']"),e=d.find("div"),d.data("focus-id",b),0===e.length&&this.isScreenReaderMode)return d.focus(),!0;if(e&&e.hasClass("editableContent"))return this.selectAndFocusCellData(e),!0}return!1},Gadget.Table.prototype.setEventHandlers=function(a){var b,c,d,e=this,f="cell",g=(a.hasClass("editableCell"),a.find("div[contentEditable=true]"));g.keyup(function(){c=$(a).data("cell-data"),b=$(this).text().trim(),""===b&&$(this).html("&nbsp;"),e.isResetBtnEnabled||b===$(c.value).text().trim()||(e.jObject.find(".start-over").sliderbutton("enable"),e.isResetBtnEnabled=!0),d=0===e.jObject.find(".required.miss").length?"enable":"disable",e.jObject.find(".show-solution").sliderbutton(d)}),a.on("click",function(){g.focus()}),g.blur(function(){var h,i="";if(a.removeClass("editableCell-focus"),!(e.jObject.find(".checker").is(":visible")||e.jObject.find(".solution-pop-up").is(":visible")||e.jObject.find(".result-pop-up").is(":visible"))){if(c=a.data("cell-data"),b=g.text().trim(),prevValue=$(c).text().trim(),c.header&&""!==c.header&&(f="columnlabel"),e.sendAnalytics(b!==prevValue?""===b?"table_deleted"+f:"table_edited"+f:"table_selected"+f),b.length>0&&e.validateCellData(a,b)){switch(c.format){case"Percentage":h=PearsonGL.utils.formatNumber(b,c.decimal,c.separator,"",!0);break;case"Number":h=PearsonGL.utils.formatNumber(b,c.decimal,c.separator,"",!1);break;case"Currency":h=PearsonGL.utils.formatNumber(b,c.decimal,c.separator,c.currency,!1);break;case"Date":i=e.getDateTimeFormat(a.data("cell-data")),h=e.formatDate(b,i);break;default:h=b}h!==b&&($(this).text(h),a.find("label").text(h),b=h),$(this).removeClass("miss"),e.hasChanged=!0,e.options.exportData&&e.exportTableData(a,b,i)}else""===b&&($(this).html("&nbsp;"),a.find("label").text("blank")),"Date"===c.format&&e.options.showPlaceHolder===!0&&$(this).empty(),$(this).hasClass("required")&&$(this).addClass("miss");d=0===e.jObject.find(".required.miss").length?"enable":"disable",e.jObject.find(".show-solution").sliderbutton(d),e.jObject.find(".chart-it").sliderbutton(d),e.isCommEnabled&&!e.isL1Scorm&&(e.scormData[e.constants.RESET_BTN]=e.isResetBtnEnabled?"enable":"disable",e.scormData[e.constants.SOLUTION_BTN]=d,e.scormData[e.constants.CHART_IT_BTN]=d,e.scormData[e.getScormDataId(a.attr("id"))]=b,e.saveLearnerData())}}).focus(function(){a.addClass("editableCell-focus"),e.isTabPressed&&(e.selectAndFocusCellData(g),e.isTabPressed=!1)}),a.keydown(function(a){if(a.keyCode!==PearsonGL.utils.keyCode.enter||a.shiftKey)a.keyCode===PearsonGL.utils.keyCode.right&&a.shiftKey?(a.preventDefault(),e.findNextRightEditableContent($(this))):a.keyCode===PearsonGL.utils.keyCode.left&&a.shiftKey?(a.preventDefault(),e.findNextLeftEditableContent($(this))):a.keyCode==PearsonGL.utils.keyCode.up?(a.preventDefault(),e.findNextUpEditableContent($(this))):a.keyCode===PearsonGL.utils.keyCode.down?(a.preventDefault(),e.findNextDownEditableContent($(this))):a.keyCode===PearsonGL.utils.keyCode.tab&&(e.isTabPressed=!0);else if(a.preventDefault(),e.findNextDownEditableContent($(this))===!1){var b=$(this).attr("id").split("_"),c=b[e.constants.CELL_ID_INDEX.col]+"_1_"+e.randId,d=e.jObject.find("[id*='"+c+"']");d.data("focus-id",c),e.findNextDownEditableContent(d,!0,!0)}})},Gadget.Table.prototype.initExportData=function(a,b,c){var d,e,f=this.getNormalCellId(a);if(c&&c.length>0&&(b=this.getDateTime(b,c)),this.cellIdToExportData.hasOwnProperty(f))for(d=0;d<this.cellIdToExportData[f].length;d++)e=this.cellIdToExportData[f][d],this.exportData[e][f]=b},Gadget.Table.prototype.setGadget=function(){var a,b,c="";for(c in this.scormData)a=this.jObject.find("[id*='"+c+"']"),a.length>0?(b=$(a).find("div"),$(b).text(this.scormData[c]),$(b).hasClass("required miss")&&this.scormData[c].length>0&&$(b).removeClass("miss")):c===this.constants.RESET_BTN?(this.jObject.find(".start-over").sliderbutton(this.scormData[c]),this.isResetBtnEnabled="enable"===this.scormData[c]?!0:!1):c===this.constants.SOLUTION_BTN?this.jObject.find(".show-solution").sliderbutton(this.scormData[c]):c===this.constants.CHART_IT_BTN&&this.jObject.find(".chart-it").sliderbutton(this.scormData[c])},Gadget.Table.prototype.setupChartItButton=function(){var a=this.jObject,b=this;b.options.chartIt instanceof Array&&$(b.options.chartIt).each(function(){b.haschartIt=!0,a.find(".table-footer").append('<div class="chart-it"></div>'),a.find(".chart-it").sliderbutton({buttonClassName:"chart-it-button",slider:!0,buttonText:b.options.chartIt[0].buttonText,clickFunction:function(c){if(a.find(".result-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()}),c.jObject.hasClass("base-button-disable")===!1)if(b.options.chartIt[0].confirmText){var d={isModal:!0,resultsText:b.options.chartIt[0].confirmText,dialogType:"confirm",closeToolTip:b.labelOpts.closeToolTip,keyPressEventHandler:function(){b.exportAllData(),a.find(".checker-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()})},audioComponent:b.options.chartIt[0].confirmTextAudio?b.options.chartIt[0].confirmTextAudio:void 0};a.dialogcomponent(d),a.find(".checker-pop-up").fadeIn().focus()}else b.exportAllData()}}),b.isShowSolutionAlways||a.find(".chart-it").sliderbutton("disable"),b.options.scormOn&&!b.isL1Scorm&&(b.scormData[b.constants.CHART_IT_BTN]=b.isShowSolutionAlways?"enable":"disable")})},Gadget.Table.prototype.setupComponents=function(){function a(a,b){b&&n.css(a,b)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this,v=u.jObject,w=this.options.table,x=0,y=[];if(this.table=$("<table class='dataTable'></table>"),this.options.title&&this.options.title.length>0&&this.table.append("<caption>"+this.options.title+"</caption"),void 0!==this.options.minWidth&&this.table.css("min-width",this.options.minWidth+"px"),void 0!==this.options.minHeight&&this.table.css("min-height",this.options.minHeight+"px"),v.append(this.table),w.colwidth&&w.colwidth.length>0){for(p=$("<colgroup></colgroup>"),q=0;q<w.colwidth.length;q++)p.append("<col width='"+w.colwidth[q].width+"%'>");this.table.append(p)}for(u.options.hasOwnProperty("rows")||(u.options.rows=w.rows.length),i=0;i<u.options.rows;i++)for(x++,d=w.rows[i],l=$("<tr id='"+x+"_"+this.randId+"'></tr>"),this.table.append(l),f=0,h=u.options.cols||d.cols.length,j=0;h>j;j++){k="undefined"==typeof d?{editable:!0}:d.cols[j],"undefined"==typeof k&&(k={editable:!0}),g=!1;do{if(e=this.constants.COL_ID[f]+"_"+x+"_"+this.randId,!($.inArray(e,y)>=0))break;f++,u.options.hasOwnProperty("cols")&&h--,j>=h&&(g=!0)}while(!g);if(g)break;if("row"===k.header||"col"===k.header?(m=$("<th scope='"+k.header+"' id='"+e+"' data-focus-id='"+e+"'></th>"),s=!0):(m=$("<td id='"+e+"' data-focus-id='"+e+"'></td>"),s=!1),m.data("cell-data",k),k.rowspan)for(m.attr("rowspan",k.rowspan),m.css("height",1.433*k.rowspan+"em"),b=1;b<k.rowspan;b++)e+=","+this.constants.COL_ID[f]+"_"+(1*x+b)+"_"+this.randId,y.push(this.constants.COL_ID[f]+"_"+(1*x+b)+"_"+this.randId);if(k.colspan){for(m.attr("colspan",k.colspan),b=1;b<k.colspan;b++)e+=","+this.constants.COL_ID[f+b]+"_"+1*x+"_"+this.randId,u.options.hasOwnProperty("cols")&&h--;f+=k.colspan}else f++;if(m.attr("id",e),c="",k.required&&k.required===!0&&(k.editable=!0,c="required",k.value||(c+=" miss",this.isShowSolutionAlways=!1)),o=$(k.value).text().trim(),k.displayValue=o,k.value&&""!==o||(k.displayValue="&nbsp;"),r=e+"_label",0===o.length&&(o="blank"),t="",k.editable===!0&&""!==k.editable){n=$("<div contentEditable='true' tabindex='0' class='editableContent "+c+"' aria-hidden='true' aria-labelledby='"+r+"'></div><label id='"+r+"' class='hidden-label'>"+o+"</label>"),k.rowspan&&$(n[0]).addClass("rowspanCell"),$(k.value).find("*").each(function(b,c){("blank"===o||$(c).text().length>0)&&(a("font-family",$(this).css("font-family")),a("font-size",$(this).css("font-size")),a("color",$(this).css("color")),a("text-decoration","none"===$(this).css("text-decoration")?void 0:$(this).css("text-decoration")),$(this).is("em")&&a("font-style","italic"),$(this).is("strong")&&a("font-weight","bold"))}),m.addClass("editableCell");"Date"===k.format&&this.options.showPlaceHolder===!0&&(t=u.getDateTimeFormat(k),n.attr("data-ph",t),"blank"===o&&(k.value="",k.displayValue="")),o="blank"===k.value?"":$(k.value).text().trim(),this.scormData[this.getScormDataId(e)]=o,this.hasEditableCell=!0,$(n[0]).append(k.displayValue),l.append(m.append(n))}else s?m.attr("aria-label",o):m.attr("aria-label",o+" noneditable"),m.addClass("nonEditableCell"),this.isScreenReaderMode&&m.attr("tabindex","0"),m.append(k.value),l.append(m);this.options.exportData&&this.initExportData(e,$(k.value).text().trim(),t),this.setCellStyle(m,k),this.setEventHandlers(m)}this.isL1Scorm=!this.hasEditableCell,v.append('<div class="table-footer"></div>'),this.setupResetButton(),this.setupShowSolutionButton(),this.setupChartItButton()},Gadget.Table.prototype.setupExportData=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=this.options.exportData,p=function(){n.cellIdToExportData[m]||(n.cellIdToExportData[m]=[]),n.cellIdToExportData[m].push(dataId),n.exportData[dataId]||(n.exportData[dataId]={}),n.exportData[dataId][m]=""};for(a=0;a<o.length;a++)for(k=o[a].data.split(","),dataId=o[a].dataId,b=0;b<k.length;b++)if(k[b].indexOf(":")>-1)for(ranges=k[b].split(":"),f=ranges[1].match(/\d+/),g=$.trim(ranges[0]).match(/^[a-zA-Z]+/)[0].charCodeAt(0),e=ranges[0].match(/\d+/),h=$.trim(ranges[1]).match(/^[a-zA-Z]+/)[0].charCodeAt(0),i=g;h>=i;i++)for(l=String.fromCharCode(i),j=e;f>=j;j++)m=l+"_"+j,p();else c=$.trim(k[b]).match(/^[a-zA-Z]+/),d=k[b].match(/\d+/),m=c+"_"+d,p()},Gadget.Table.prototype.setupResetButton=function(){var a=this.jObject,b=this;b.options.reset instanceof Array&&$(b.options.reset).each(function(){a.find(".table-footer").append('<div class="start-over"></div>'),a.find(".start-over").sliderbutton({buttonClassName:"start-over-button",slider:!0,buttonText:b.options.reset[0].buttonText,clickFunction:function(c){if(a.find(".result-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()}),c.jObject.hasClass("base-button-disable")===!1)if(b.options.reset[0].confirmText){var d={isModal:!0,resultsText:b.options.reset[0].confirmText,dialogType:"confirm",closeToolTip:b.labelOpts.closeToolTip};d.keyPressEventHandler=function(){b.resetTableData(),a.find(".checker-pop-up,.modal-dialog-window").fadeOut(function(){$(this).remove()})},b.options.reset[0].confirmTextAudio&&(d.audioComponent=b.options.reset[0].confirmTextAudio),a.dialogcomponent(d),a.find(".checker-pop-up").fadeIn().focus()}else b.resetTableData()}}),a.find(".start-over").sliderbutton("disable"),b.options.scormOn&&!b.isL1Scorm&&(b.scormData[b.constants.RESET_BTN]="disable")})},Gadget.Table.prototype.setupShowSolutionButton=function(){var a,b,c,d=this.jObject,e=this;e.options.showSolution instanceof Array&&$(e.options.showSolution).each(function(){e.hasShowSolution=!0,a=PearsonGL.utils.randomString(8)+PearsonGL.utils.randomString(8),d.find(".table-footer").append('<div class="show-solution"></div>'),b=$('<div tabindex="0" aria-labelledby="'+a+'" role="alertdialog" class="solution-pop-up pop-up popup-window"><div class="popup-header"></div><label id="'+a+'" class="hidden-label"></label><div class="container"></div><div class="close" data-icon="close" alt="'+e.labelOpts.closeToolTip+'" title="'+e.labelOpts.closeToolTip+'"></div></div>'),d.append(b),c=b.find(".container"),void 0!==this.solutionText&&void 0!==this.solutionText.value&&this.solutionText.value.length>0&&(c.append('<div class="main-text-col"></div>'),c.find(".main-text-col").richtextcomponent($.extend(this.options,{value:this.solutionText.value})),void 0!==this.solutionText.audioComponent&&void 0!==this.solutionText.audioComponent.src&&""!==this.solutionText.audioComponent.src&&c.find(".main-text-col").find(".gadget-textblock").audioComponent(this.solutionText.audioComponent)),void 0!==this.solutionImage&&void 0!==this.solutionImage.src&&this.solutionImage.src.length>0&&(c.append('<div class="main-img-col"></div>'),c.find(".main-img-col").imagecomponent({src:this.solutionImage.src,title:void 0!==this.solutionImage.title?this.solutionImage.title:""}),void 0!==this.solutionImage.audioComponent&&void 0!==this.solutionImage.audioComponent.src&&""!==this.solutionImage.audioComponent.src&&c.find(".main-img-col").find(".image-class-wrapper").audioComponent(this.solutionImage.audioComponent)),b.draggable({containment:e.options.popupcontainment,handle:b.find(".popup-header"),scroll:!0}).bind("keydown",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9==a.keyCode&&a.shiftKey&&(a.preventDefault(),b.find(".close").focus())}),e.isTouchDevice&&b.mouseToTouch(),b.find(".close").sliderbutton({buttonClassName:"close",slider:!1,clickFunction:function(){b.find("*").hasClass("audioToggleIdentifier")&&b.find(".audioToggleIdentifier").audioComponent("stop"),b.hide()}}),b.find(".close").sliderbutton("keyPressEventHandler",function(a){a.stopImmediatePropagation(),a.stopPropagation(),9!=a.keyCode||a.shiftKey||(a.preventDefault(),b.focus())}),this.clickFunction=function(a){a.options.enable&&(d.find(".checker").fadeOut(),d.find(".result-pop-up").hide(),d.find(".modal-dialog-window").hide(),b.show(),b.focus(),e.sendAnalytics("table_showsolution"))},this.buttonClassName="show-solution",this.buttonText||(this.buttonText=e.options.showSolution.buttonText),d.find(".show-solution").sliderbutton(this),e.isShowSolutionAlways||d.find(".show-solution").sliderbutton("disable"),e.options.scormOn&&!e.isL1Scorm&&(e.scormData[e.constants.RESET_BTN]=e.isShowSolutionAlways?"enable":"disable")})},Gadget.Table.prototype.showComfirmResetDlg=function(){var a=this.jObject,b=a.children(".checker");a.find(".result-pop-up").fadeOut(),a.find(".modal-dialog-window").hide(),b.fadeIn(),b.focus()},Gadget.Table.prototype.showValidationError=function(a,b){var c={value:a},d=this.jObject,e=this,f="1234.43122";if(!a||0===a.length){var g=b.data("cell-data");if("Number"===g.format||"Currency"===g.format||"Percentage"===g.format){if(f=parseFloat(f).toFixed(g.decimals?g.decimals:3),g.separator){var h=f.toString().split(".");h[0]=h[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),f=h.join(".")}"Percentage"===g.format?f+="%":"Currency"===g.format&&g.currency&&(f=g.currency+f)}c.value=PearsonGL.utils.formatString(this.options.validDataSample,f)}var i={isModal:!0,resultsText:c.value,dialogType:"feedback",closeToolTip:e.labelOpts.closeToolTip,keyPressEventHandler:function(){j.remove(),e.selectAndFocusCellData($(b).find("div"))}};d.dialogcomponent(i);var j=d.find(".result-pop-up");j.addClass("dialog-incorrect").fadeIn(),d.find(".modal-dialog-window").show(),j.focus(),$(j).on("closed",function(){j.remove(),d.find(".modal-dialog-window").remove(),e.selectAndFocusCellData($(b).find("div"))})},Gadget.Table.prototype.transferLabels=function(a){var b=this.options;this.labelOpts=$.extend(this.labelOpts,a),b.validDataSample=this.labelOpts.validDataSample,b.invalidRange=this.labelOpts.invalidRange,b.numberTooSmall=this.labelOpts.numberTooSmall,b.numberTooBig=this.labelOpts.numberTooBig,b.exceedMaxLen=this.labelOpts.exceedMaxLen,b.invalidDateTimeFormat=this.labelOpts.invalidDateTimeFormat,b.exceedScormDataLimit=this.labelOpts.exceedScormDataLimit},Gadget.Table.prototype.validateCellData=function(a,b){var c=$(a).data("cell-data");if(!c.format)return!0;if("Text"===c.format)return!c.maxLength||c.maxLength&&b.length<=c.maxLength?!0:(this.showValidationError(PearsonGL.utils.formatString(this.options.exceedMaxLen,c.maxLength),a),!1);if("Date"!==c.format){var d=PearsonGL.utils.isNumber(b,c.currency,"Percentage"===c.format?!0:!1);if(!d.isNumber)return this.showValidationError("",a),!1;if(c.hasOwnProperty("minValue")&&c.hasOwnProperty("maxValue")){if(parseFloat(d.value)<parseFloat(c.minValue)||parseFloat(d.value)>parseFloat(c.maxValue))return this.showValidationError(PearsonGL.utils.formatString(this.options.invalidRange,c.minValue,c.maxValue),a),!1}else{if(c.hasOwnProperty("minValue")&&parseFloat(d.value)<parseFloat(c.minValue))return this.showValidationError(PearsonGL.utils.formatString(this.options.numberTooSmall,c.minValue),a),!1;if(c.hasOwnProperty("maxValue")&&parseFloat(d.value)>parseFloat(c.maxValue))return this.showValidationError(PearsonGL.utils.formatString(this.options.numberTooBig,c.maxValue),a),!1}return!0}if("Date"===c.format){var e,f=this.getDateTimeFormat($(a).data("cell-data"));if(f||(f="mm/dd/yy"),this.validateDateFormat(f,b)===!1){var g="<p>"+PearsonGL.utils.formatString(this.options.invalidDateTimeFormat,f)+"</p>",h=f.split(/[\/, -:.]+/);for(e=0;e<h.length;e++)g+="<p>"+this.constants.DATE_FORMAT[h[e]]+"</p>";return this.showValidationError(g,a),!1}return!0}},Gadget.Table.prototype.validateDateFormat=function(a,b){var c,d,e,f=new Date,g=f.getFullYear(),h=f.getMonth(),i=f.getDate(),j=a.split(/[\/, -.]+/),k=b.split(/[\/, -.]+/),l=this.options.runtimejson.lang;for(c=0;c<k.length;c++)switch(j[c]){case"m":case"mm":if(!$.isNumeric(k[c])||k[c]<1||k[c]>12)return!1;h=1*k[c];break;case"mmm":case"mmmm":for(e=-1,d=0;d<this.monthNames[l].length;d++)if(this.monthNames[l][d].toLowerCase()===k[c].toLowerCase()){e=d;break}if(-1===e){if(Math.floor(k[c])==k[c]&&$.isNumeric(k[c])&&k[c]>=1&&k[c]<=12){h=k[c];break}return!1}h=e>11?(e-12)%12+1:e%12+1;break;case"d":case"dd":if(!$.isNumeric(k[c])||k[c]<1||k[c]>31)return!1;i=1*k[c];break;case"ddd":case"dddd":for(e=-1,d=0;d<this.dayNames[l].length;d++)if(this.dayNames[l][d].toLowerCase()===k[c].toLowerCase()){e=d;break}if(-1===e){if(Math.floor(k[c])==k[c]&&$.isNumeric(k[c])&&k[c]>=0&&k[c]<=6)break;return!1}break;case"yy":if(!k[c].match(/^\d{4}$/)&&!k[c].match(/^\d{2}$/))return!1;g=k[c];break;case"yyyy":if(!k[c].match(/^\d{4}$/))return!1;g=k[c];break;default:for(var m,n=j[c].split(/[: ]+/),o=k[c].split(/[: ]+/),p=0;p<o.length;p++)switch(m=1*o[p],n[p]){case"h":case"hh":if(isNaN(m)||1>m||m>12)return!1;break;case"HH":if(isNaN(m)||0>m||m>24)return!1;break;case"M":case"MM":case"s":case"ss":if(isNaN(m)||0>m||m>59)return!1;break;case"t":case"T":case"tt":case"TT":if("A"!==o[p].toUpperCase()&&"P"!==o[p].toUpperCase()&&"AM"!==o[p].toUpperCase()&&"PM"!==o[p].toUpperCase())return!1}}if((4===h||6===h||9===h||11===h)&&31===i)return!1;if(2==h){var q=g%4===0&&g%100!==0||g%400===0;if(i>29||29===i&&!q)return!1}return!0},Gadget.Table.prototype.parseLearnerData=function(){if(this.isCommEnabled){var a=this.options.scorm.suspendData.data;"object"==typeof a&&(this.scormData=a,this.setGadget(),this.isL1Scorm&&this.saveLearnerData())}},window.Gadget=window.Gadget||{},Gadget.Button=function(a,b,c){this.options={gadgetName:"Button",objectiveDescription:"User clicks a button to perform an action.",iframePos:{iframeWidth:"100%",iframeHeight:"100%",left:0,marginLeft:0},buttonStates:{ACTIVE:0,DOWN:1,OVER:2,UP:3,ALL:4}},this.labelOpts={closeAltText:"Close"},this.objID=0,this.constants={TT_N:"N",TT_S:"S",TT_E:"E",TT_W:"W",TT_NW:"NW",TT_NE:"NE",TT_SW:"SW",TT_SE:"SE",POP_N:"PN",POP_S:"PS",POP_E:"PE",POP_W:"PW",POP_NW:"PNW",POP_NE:"PNE",POP_SW:"PSW",POP_SE:"PSE",POP_HOSTED:"0",POP_CENTER:"1",ACTIVE_CLASS:"is-active",NOT_ACTIVE_CLASS:"is-not-active",ACTIVE_BTNS:"activeBtns",IS_TOGGLED_CLASS:"is-toggled",IS_NOT_TOGGLED_CLASS:"is-not-toggled",HAS_FOCUS:"has-focus"},this.imgButtons={down:$(),over:$(),up:$(),active:$(),tDown:$(),tOver:$(),tUp:$(),tActive:$()},PearsonGL.GadgetBase2.call(this,b,c),b&&(this.jObject=$(a),this.initialize())},Gadget.Button.prototype=Object.create(window.PearsonGL.GadgetBase2.prototype),Gadget.Button.prototype.initialize=function(){var a=this;this.initGadget(this.options.gadgetName),PearsonGL.utils.getGlobalizedLabel("button_globalization",a.globalizationComplete.bind(this),this.options.runtimejson.lang),this.addAccessibility(this.jObject),this.eventType={clicked:"clicked"}},Gadget.Button.prototype.stop=function(){this.stopAudioVideo()},Gadget.Button.prototype.globalizationComplete=function(){var a=this.jObject;if(a.data("gadget_options",this.options),a.addClass("button-identifier"),this.isTouchDevice="ontouchstart"in document.documentElement,this.hasGadgetPopup=!1,this.isToggleButton=!1,this.isRealToggleButton=!1,this.isModal=!1,this.isToggled=!1,this.isLightBoxPopup=!1,this.isNewWindow=!1,this.isTooltip=!1,this.isPopup=!1,this.isHosted=!1,this.hostMaxHeight=0,this.hostMaxWidth=0,this.hostGadgetId="",this.isPageJump=!1,this.isGlossary=!1,this.isCustomClick=!1,this.hasSetScormData=!1,this.isBtnClickAudio=!1,this.isBtnClickAudioOnly=!1,this.winWidth=0,this.winHeight=0,this.titleText="",a.hasClass("custom-btn-click")&&(this.isCustomClick=!0),void 0!==this.options.modal&&(this.winWidth=this.options.modal.width,this.winHeight=this.options.modal.height,this.options.modal.isModal?this.isModal=!0:this.isNewWindow=!0),this.options.windowProps&&this.options.windowProps.windowType&&!this.isCustomClick)switch(this.winWidth=this.options.windowProps.width,this.winHeight=this.options.windowProps.height,this.options.windowProps.windowType){case"new":this.isNewWindow=!0;break;case"lightbox":this.isModal=!0,void 0!==this.options.content&&(this.isLightBoxPopup=!0);break;case"tooltip":this.isTooltip=!0;break;case"popup":this.isPopup=!0;break;case"hosted":this.isHosted=!0}if(this.options.pageJump&&(this.isPageJump=!0),this.winHeight&&this.winWidth&&(this.options.iframePos.iframeHeight=this.winHeight+"px",this.options.iframePos.iframeWidth=this.winWidth+"px",this.options.iframePos.left="50%",this.options.iframePos.marginLeft=this.winWidth/2*-1),this.isToggleButton=this.options.toggleButton||this.isHosted?!0:!1,this.options.toggleButton&&(this.isRealToggleButton=!0),void 0!==this.options.gadgetId&&this.options.gadgetId.length>0){var b=[];this.hostGadgetId=this.options.gadgetId,b=this.hostGadgetId.split("_"),b.length>2&&(this.hostGadgetId=b.slice(2,b.length).toString())}this.setUpComponents(),this.getLearnerData({type:"other"})},Gadget.Button.prototype.setUpComponents=function(){var a,b=this,c=this.jObject,d="",e="",f="",g="",h="",i="",j="",k="",l={src:"",trigger:!0,type:"hover"};void 0!==this.options.button&&(void 0!==this.options.button.buttonImage&&0!==this.options.button.buttonImage.length||void 0!==this.options.button.buttonText&&0!==this.options.button.buttonText.length)||(this.options.button={},this.options.button.buttonText=[{buttonTitle:""}]),d=this.options.button,this.isToggleButton&&this.options.toggleButton&&(j=this.options.toggleButton[0]),links=this.options;for(keys in links){if("local"===keys){this.dataHref=links[keys][0].src;break}if(!("domain"!==keys&&"external"!==keys&&keys.indexOf("glossary")<0||(g="",$.isEmptyObject(links[keys])))){f=links[keys][0];for(key in f)"domain"==key?h=f[key]:"string"==typeof f[key]&&f[key].indexOf("=")>-1?g+=f[key]:keys.indexOf("glossary")>-1?(this.isGlossary=!0,g+=key+"="+f[key]+"&"):g+=f[key];if(""!=h){this.dataHref=PearsonGL.utils.urlResolver(this.options.runtimejson,h,keys.indexOf("glossary")>-1?"?"+g:g),keys.indexOf("glossary")>-1&&this.dataHref&&(this.dataHref=this.dataHref.substring(0,this.dataHref.length-1));break}}}if(links.pageJump&&!this.dataHref?i='id="page-button-id-'+links.pageJump[0].pageNumber+'"':links.pageJump=void 0,this.options.audioComponent&&!$.isEmptyObject(this.options.audioComponent)&&this.options.audioComponent.src.length>0||this.options.toggleButton){if(this.isBtnClickAudio=!0,this.options.toggleButton&&this.options.toggleButton[0].audioComponent&&this.options.toggleButton[0].audioComponent.src&&(l.src=this.options.toggleButton[0].audioComponent.src,-1!==l.src.indexOf(".mp3"))){c.append("<div class='toggle-button-audio hidden'></div>");var m=c.find(".toggle-button-audio");m.audioComponent(l),m.removeAttr("role").removeAttr("tabindex")}if(this.options.audioComponent&&this.options.audioComponent.src&&this.options.audioComponent.src.length>0&&(l.src=this.options.audioComponent.src,-1!==l.src.indexOf(".mp3"))){var n=c.append("<div class='button-audio hidden'></div>");n=c.find(".button-audio"),n.audioComponent(l),n.removeAttr("role").removeAttr("tabindex")}!this.isCustomClick&&(this.isPageJump||this.isGlossary||this.isNewWindow||this.isModal||this.isHosted)||(this.isBtnClickAudioOnly=!0)}if((!d.buttonText||0===d.buttonText.length)&&d.buttonImage&&d.buttonImage.length>0&&!$.isEmptyObject(d.buttonImage[0])){d.buttonText&&delete d.buttonText,b.isImageButton=!0;var o="",p="",q="",r="",s="",t="",u="",v="",w="",x="",y="",z="";if(b.isToggleButton&&j&&j.button&&j.button.buttonImage&&j.button.buttonImage.length>0){var A=j.button.buttonImage[0];
k=A.title?A.title:"",A.baseSrc&&(s=A.baseSrc),t=d.buttonImage[0].overSrc?A.overSrc:s,u=d.buttonImage[0].downSrc?A.downSrc:s,v=d.buttonImage[0].activeSrc?A.downSrc:s,w='<img class="base-button-default-toggle hidden" src="'+s+'" label="'+k+'"/>',x='<img class="base-button-over-toggle hidden" src="'+t+'" label="'+k+'"/>',y='<img class="base-button-down-toggle hidden" src="'+u+'" label="'+k+'"/>',z='<img class="base-button-active-toggle hidden" src="'+v+'" label="'+k+'"/>'}e=d.buttonImage[0].title?d.buttonImage[0].title:"",d.buttonImage[0].baseSrc&&(o=d.buttonImage[0].baseSrc),p=d.buttonImage[0].overSrc?d.buttonImage[0].overSrc:o,q=d.buttonImage[0].downSrc?d.buttonImage[0].downSrc:o,r=d.buttonImage[0].activeSrc?d.buttonImage[0].downSrc:q;var B='<img class="base-button-default" src="'+o+'" label="'+e+'"/>',C='<img class="base-button-over hidden" src="'+p+'" label="'+e+'"/>',D='<img class="base-button-down hidden" src="'+q+'" label="'+e+'"/>',E='<img class="base-button-active hidden" src="'+r+'" label="'+e+'"/>';c.append(this.isToggleButton&&s.length>0?'<div role="button" oncontextmenu="return false;" class="basic-button-class image-button-wrapper" tabindex="0" '+i+">"+B+C+D+E+w+x+y+z+"</div>":'<div role="button" oncontextmenu="return false;" class="basic-button-class image-button-wrapper" tabindex="0" '+i+">"+B+C+D+E+"</div>"),a=c.find(".image-button-wrapper"),a.attr({alt:e,title:e}),this.isCustomClick&&(a.prepend('<div class="btn-click-block"></div>'),a.find(".btn-click-block").css("height",a.height()+4))}else this.isImageButton=!1,c.append("<div "+i+' class="basic-button-class text-button sprite base-button"><div class="base-button-inside-wrap" tabindex="0" hidefocus="true" role="button" aria-disabled="false"><span class="sprite button-text" label="'+d.buttonText[0].buttonTitle+'">'+d.buttonText[0].buttonTitle+"</span></div></div>");this.isImageButton?(this.imgButtons.down=c.find("img.base-button-down"),this.imgButtons.over=c.find("img.base-button-over"),this.imgButtons.up=c.find("img.base-button-default"),this.imgButtons.active=c.find("img.base-button-active"),j&&j.length>0&&(this.imgButtons.tDown=c.find("img.base-button-toggle-down"),this.imgButtons.tOver=c.find("img.base-button-toggle-over"),this.imgButtons.tUp=c.find("img.base-button-toggle-up"),this.imgButtons.tActive=c.find("img.base-button-toggle-active")),b.isTouchDevice?a.bind("touchstart touchend",function(a){a.preventDefault(),a.stopPropagation(),"touchstart"==a.type?b.changeButtonStates(b.options.buttonStates.DOWN):"touchend"==a.type&&(b.openWindowLink(),b.fireEvent(b.eventType.clicked))}):a.mousedown(function(){""!==D&&b.changeButtonStates(b.options.buttonStates.DOWN)}).hover(function(){""!==C&&b.changeButtonStates(b.options.buttonStates.OVER)},function(){""!==B&&b.changeButtonStates(b.options.buttonStates.UP)}).mouseup(function(){b.openWindowLink(),b.fireEvent(b.eventType.clicked)}).keyup(function(a){a.keyCode===b.options.keyCodes.tab?PearsonGL.utils.focusItemOn(this):a.keyCode===b.options.keyCodes.enter&&(""!==D&&b.changeButtonStates(b.options.buttonStates.DOWN),b.openWindowLink(),b.fireEvent(b.eventType.clicked))}).blur(function(){PearsonGL.utils.focusItemOff(this)})):c.find(".text-button:last .base-button-inside-wrap").mousedown(function(){$(this).addClass("base-button-down")}).hover(function(){$(this).addClass("base-button-over")},function(){$(this).removeClass("base-button-over base-button-down")}).click(function(){if(b.isToggled=!b.isToggled,b.isToggleButton){var a=c.find(".text-button");b.isToggled&&b.options.toggleButton?(e=b.options.toggleButton[0].button.buttonText[0].buttonTitle,a.addClass(b.constants.IS_TOGGLED_CLASS)):(e=b.options.button.buttonText[0].buttonTitle,a.removeClass(b.constants.IS_TOGGLED_CLASS)),a.find(".button-text").text(e),a.attr({title:e})}b.openWindowLink(),$(this).removeClass("base-button-down"),b.fireEvent(b.eventType.clicked)}).keyup(function(a){a.keyCode===b.options.keyCodes.tab?PearsonGL.utils.focusItemOn(this):a.keyCode===b.options.keyCodes.enter&&(b.openWindowLink(),b.fireEvent(b.eventType.clicked))}).blur(function(){PearsonGL.utils.focusItemOff(this)}),this.isPageJump&&$(product).on("productCallBackFunction",function(a){var d=a.params[0]+1;"page-button-id-"+d===c.find(".image-button-wrapper").attr("id")?($(".image-button-wrapper").removeClass("image-button-selected"),b.changeButtonStates(b.options.buttonStates.ALL),c.find(".image-button-wrapper").addClass("image-button-selected"),b.changeButtonStates(b.options.buttonStates.DOWN),c.find(".image-button-wrapper").addClass("current-button-selected-"+d)):"page-button-id-"+d===c.find(".text-button").attr("id")&&($(".text-button").removeClass("text-button-selected"),c.find(".text-button").addClass("text-button-selected"),c.find(".text-button").addClass("current-button-selected-"+d)),$(".basic-button-class").hasClass("current-button-selected-"+d)||(b.changeButtonStates(b.options.buttonStates.ALL),$(".text-button").removeClass("text-button-selected"))})},Gadget.Button.prototype.changeButtonStates=function(a){var b=this,c=!1;($(b.imgButtons.up).parent().hasClass("image-button-selected")||$(b.imgButtons.up).parent().hasClass(b.constants.ACTIVE_CLASS))&&(c=!0);var d=this.jObject;switch(a){case this.options.buttonStates.DOWN:this.isToggled=!this.isToggled,this.isToggleButton&&this.isToggled?d.find(".image-button-wrapper").addClass(this.constants.IS_TOGGLED_CLASS):d.find(".image-button-wrapper").removeClass(this.constants.IS_TOGGLED_CLASS),this.isToggled&&this.options.toggleButton?(this.imgButtons.tDown.show(),this.imgButtons.tOver.hide(),this.imgButtons.tUp.hide(),this.imgButtons.tActive.hide()):(this.imgButtons.down.show(),this.imgButtons.up.hide(),this.imgButtons.over.hide(),this.imgButtons.active.hide());break;case this.options.buttonStates.OVER:c||(this.imgButtons.down.hide(),this.imgButtons.up.hide(),this.imgButtons.over.show(),this.imgButtons.active.hide());break;case this.options.buttonStates.UP:c||(this.imgButtons.down.hide(),this.imgButtons.up.show(),this.imgButtons.over.hide(),this.imgButtons.active.hide());break;case this.options.buttonStates.ACTIVE:this.imgButtons.down.hide(),this.imgButtons.up.hide(),this.imgButtons.over.hide(),this.imgButtons.active.show();break;default:$("img.base-button-down").hide(),$("img.base-button-over").hide(),$("img.base-button-active").hide(),$("img.base-button-default").show()}},Gadget.Button.prototype.buildIframeInDOM=function(){$(".iframemodal").remove(),$("body").append('<div class="iframemodal hide" tabindex="0"><div class="iframemodal-close" title="'+this.labelOpts.closeAltText+'"></div><div class="iframemodal-background"></div><span class="body-iframe-wrapper"></span></div>'),$(".body-iframe-wrapper").iframecomponent(),$(".iframemodal iframe").css({"margin-left":this.options.iframePos.marginLeft,left:this.options.iframePos.left,width:this.options.iframePos.iframeWidth,height:this.options.iframePos.iframeHeight}),$(".iframemodal-close").sliderbutton({buttonClassName:"iframemodal-close",slider:!1,clickFunction:function(){$(".iframemodal").fadeOut(500)}})},Gadget.Button.prototype.addWindowContent=function(a,b){var c=$("body").find(a);if(!(c.children().length>0)){var d=this,e={},f={},g="",h={},i={},j={},k="",l="",m="",n=!1;if(c.hide(),$.each(b,function(a,o){switch(n=b.mainImgTop,a){case"title":case"mainBody":case"leftBody":case"rightBody":g=a.slice(0,a.length-4),m=a,k=m+"Text",i=b[m+"Audio"],c.append('<div class="'+m+'"><div class="'+k+'"></div></div>'),e=c.find("."+k),e.richtextcomponent(d.createRichTextObj(o)),i.src&&i.src.length>0&&e.find(".gadget-textblock").audioComponent(i),("left"===g||"right"===g||"main"===g)&&(l=g+"Image",imgTitle=b[l+"Title"],h={src:b[l],title:imgTitle?imgTitle:""},j=b[l+"Audio"],h.src&&h.src.length>0&&("main"===g&&n?c.find("."+k).before('<div class="'+l+'"></div>'):c.find("."+k).after('<div class="'+l+'"></div>'),f=c.find("."+l),f.imagecomponent(h),!j&&j.src&&f.find(".image-class-wrapper").audioComponent(j)));break;case"mainImage":case"leftImage":case"rightImage":if(l=a,c.find("."+l).length>0)return;imgTitle=b[l+"Title"],h={src:b[l],title:imgTitle?imgTitle:""},j=b[l+"Audio"],h.src.length>0&&(c.append('<div class="'+l+'"></div>'),f=c.find("."+l),f.imagecomponent(h),j&&j.src&&f.find(".image-class-wrapper").audioComponent(j),d.addLongDescription(f,b.longDesc))}}),c.show(),b.video){var o=b.video;if(void 0!==o&&!$.isEmptyObject(o)&&(o.external&&o.external.length>0||o.local&&o.local.length>0)){var p='<div class="vid-col"><div class="video-player"></div></div>';b.videoTop?c.prepend(p):c.append(p),void 0===b.video.autoPlay&&(b.video.controls=!1),b.video.fullscreen=!1,b.video.runtimejson=this.options.runtimejson;var q=c.find(".video-player");q.videoComponent(b.video),d.addLongDescription(q,b.video.videoLongDesc)}}}},Gadget.Button.prototype.stopAudioVideo=function(){var a=this.jObject.parents(".page");a.find(".btn-gadget-pop-up .audioToggleIdentifier, .btn-gadget-pop-up-toggle .audioToggleIdentifier").each(function(){$(this).audioComponent("pause")}),a.find(".btn-gadget-pop-up .video-component-identifier, btn-gadget-pop-up-toggle .video-component-identifier").each(function(){$(this).videoComponent("pause")}),this.jObject.find(".audioToggleIdentifier").each(function(){$(this).audioComponent("pause")}),this.jObject.find(".video-component-identifier").each(function(){$(this).videoComponent("pause")})},Gadget.Button.prototype.closeAnyPopUps=function(a){a?a.remove():($(".btn-gadget-pop-up").remove(),$(document).unbind("click.buttonObj touchstart.buttonObj")),this.isToggled=!1},Gadget.Button.prototype.togglePopup=function(a){var b=a.find(".video-component-identifier"),c=a.find(".audioToggleIdentifier"),d=this.jObject;a.is(":visible")?(b.length>0&&b.videoComponent("pause"),c.length>0&&c.audioComponent("pause"),d.removeClass(this.constants.HAS_FOCUS),d.find(".image-button-wrapper").addClass(this.constants.NOT_ACTIVE_CLASS).removeClass(this.constants.ACTIVE_CLASS),d.find(".text-button").addClass(this.constants.NOT_ACTIVE_CLASS).removeClass(this.constants.ACTIVE_CLASS)):(b.length>0&&b.videoComponent("gadgetPageShowEvent"),d.addClass(this.constants.HAS_FOCUS),d.find(".image-button-wrapper").addClass(this.constants.ACTIVE_CLASS).removeClass(this.constants.NOT_ACTIVE_CLASS),d.find(".text-button").addClass(this.constants.ACTIVE_CLASS).removeClass(this.constants.NOT_ACTIVE_CLASS)),a.fadeToggle("fast")},Gadget.Button.prototype.handleButtonClickAudio=function(){this.stopAudioVideo();var a,b,c=this.jObject,d=!1,e=!1;a=c.find(".button-audio"),b=c.find(".toggle-button-audio"),d=b.length>0?!0:!1,e=a.length>0?!0:!1,this.isToggled?e&&d?(a.attr("audiostate","paused")&&a.audioComponent("play"),b.attr("audiostate","playing")&&b.audioComponent("pause")):d&&!e?b.attr("audiostate","playing")&&b.audioComponent("puase"):a.attr("audiostate","puased")&&a.audioComponent("play"):e&&d?(a.attr("audiostate","playing")&&a.audioComponent("pause"),b.attr("audiostate","paused")&&b.audioComponent("play")):d&&!e?b.attr("audiostate","paused")&&b.audioComponent("play"):a.attr("audiostate","playing")&&a.audioComponent("pause"),this.isCustomClick&&(c.find(".image-button-wrapper").unbind("click"),c.unbind("click"))},Gadget.Button.prototype.gadgetPageShowEvent=function(){var a=this.jObject.parents(".page").find(".btn-gadget-pop-up[data-btnpopid^='"+this.jObject.attr("data-id")+"_']").find(".video-component-identifier:visible");a.length>0&&a.videoComponent("gadgetPageShowEvent")},Gadget.Button.prototype.openWindowLink=function(){var a,b,c=this.jObject,d=this,e="",f={},g=$("body").find(".page:not(.hidden-page)").attr("id"),h={},i="",j=PearsonGL.utils.randomString(8)+PearsonGL.utils.randomString(8);h=$("body").find("#"+g),a=c.attr("data-id")+"_"+g,b=this.hostGadgetId+"_"+g;var k=c.parents().find(".button-identifier[data-host-btn-id]");if(k&&k.length>0&&$.each(k,function(a,c){$(c).attr("data-host-btn-id")===b&&(d.isImageButton?($(c).find(".image-button-wrapper").removeClass(d.constants.ACTIVE_CLASS),$(c).find("img.base-button-down").hide(),$(c).find("img.base-button-over").hide(),$(c).find("img.base-button-active").hide(),$(c).find("img.base-button-default").show()):$(c).find(".text-button").removeClass(d.constants.ACTIVE_CLASS))}),this.stopAudioVideo(),this.isBtnClickAudio&&this.handleButtonClickAudio(),!(!this.isBtnClickAudioOnly&&!this.isCustomClick||this.isPageJump&&this.isGlossary))return void(this.isCustomClick&&(c.find(".image-button-wrapper").unbind("click"),c.unbind("click")));if(this.hasSetScormData||(this.isCommEnabled()&&this.setLearnerData({results:[{learnerResponse:"Clicked Button",correctResponses:"Clicked Button",raw:this.options.scorm.interactions[0].objectives[0].score.max,progressMeasure:1,completionStatus:"completed",successStatus:"passed"}]}),this.hasSetScormData=!0),this.isTooltip&&(e=this.options.ttposition),this.isPopup&&this.options.popupposition&&(e="P"+this.options.popupposition),h.is(":visible"))if(this.hostGadgetId&&void 0!==this.hostGadgetId){if(f=h.find("[data-id='"+this.hostGadgetId+"']"),currGadgetPopup=f.find("[class^='btn-gadget-pop-up']"),c.attr("data-id")+"_"+g===currGadgetPopup.attr("data-btnpopid"))return this.togglePopup(currGadgetPopup),void this.setActiveButtonState();this.closeAnyPopUps(currGadgetPopup)}else this.closeAnyPopUps();if(this.isPageJump||this.isGlossary||!(this.isTooltip||this.isPopup||this.isLightBoxPopup||this.isHosted)){if(this.options.pageJump){try{global_player.pageJumpAction(this.options.pageJump[0].pageNumber-1)}catch(l){}return $(".text-button").removeClass("text-button-selected"),$(".image-button-wrapper").removeClass("image-button-selected"),this.options.pageJump[0].isSelected&&(c.find(".image-button-wrapper").addClass("image-button-selected"),c.find(".text-button").addClass("text-button-selected")),this.changeButtonStates(this.options.buttonStates.ALL),void this.changeButtonStates(this.options.buttonStates.DOWN)}if(this.isModal)this.buildIframeInDOM(),$(".iframemodal").find("iframe").attr("src",this.dataHref),$(".iframemodal").fadeIn(500,function(){$(this).focus()});else{var m="location=0,menubar=0";void 0!==this.winWidth&&void 0!==this.winHeight&&(m+=",width="+this.winWidth+",height="+this.winHeight),PearsonGL.utils.openBrowserPopupWindow(this.dataHref,"",m,!0),$(".text-button").removeClass("text-button-selected"),$(".image-button-wrapper").removeClass("image-button-selected"),this.changeButtonStates(this.options.buttonStates.UP)}}else if(this.isLightBoxPopup){$(".buttonlightBox").remove();var n=$(),o=$(),p=$(),q="<div class='buttonlightBox hide' tabindex='0' aria-labelledby='"+j+"' role='dialog'><div class='lightBoxModal hide'></div><div class='lightBoxTextContent hide' tabindex='0' role='document'></div></div>";$("body").prepend(q),n=$("body").find(".buttonlightBox"),o=n.find(".lightBoxModal"),p=n.find(".lightBoxTextContent"),p.css({width:this.winWidth+"px",height:this.winHeight+"px","overflow-y":"auto"}),this.addWindowContent(".lightBoxTextContent",d.options.content[0]),n.append("<div class='close' tabindex='0' data-icon='ic-ps-close' title='"+d.labelOpts.closeAltText+"'></div>");var r=n.find(".close");r.sliderbutton({buttonClassName:"close",slider:!1,clickFunction:function(){n.remove()}}),window.setTimeout(function(){n.fadeIn(200,function(){o.fadeIn(300),p.fadeIn(400),n.focus(),PearsonGL.utils.initMathJax(n[0])})},100)}else{$(".buttonlightBox").remove();var s;this.isHosted&&h.is(":visible")?(f=h.find(".gadget[data-id='"+this.hostGadgetId+"']"),i="btn-gadget-pop-up-toggle",this.hostMaxHeight=f.height(),this.hostMaxWidth=f.width()):i="btn-gadget-pop-up";var t='<div role="dialog" class="'+i+'" data-btnpopid="'+a+'"  data-popgadgetid="'+this.hostGadgetId+'"><div class="popup-header"></div><div class="buttonPopUpText"><div class="popInnerWrapper  tabindex="0" role="document"></div></div></div>';if(this.isTooltip)c.append(t);else{if(this.isHosted){if(f.is(":visible")){c.attr("data-host-btn-id",b),this.isToggled=!0;var u=$(".header, .page:visible, .footer").find(".button-identifier ."+d.constants.IS_TOGGLED_CLASS);u.length>0&&$.each(u,function(a,b){$(b).hasClass(d.constants.ACTIVE_CLASS)||$(b).removeClass(d.constants.IS_TOGGLED_CLASS).addClass(d.constants.IS_NOT_TOGGLED_CLASS)}),c.find(".image-button-wrapper").addClass(this.constants.ACTIVE_CLASS),this.isToggleButton&&c.find(".image-button-wrapper").removeClass(d.constants.IS_NOT_TOGGLED_CLASS).addClass(d.constants.IS_TOGGLED_CLASS),c.find(".text-button").addClass(this.constants.ACTIVE_CLASS),this.isToggleButton&&c.find(".text-button").removeClass(d.constants.IS_NOT_TOGGLED_CLASS).addClass(d.constants.IS_TOGGLED_CLASS),f.prepend(t),s=h.find("[data-btnpopid='"+a+"']")}}else h.is(":visible")&&0===h.find("."+i).length&&h.prepend(t);this.setActiveButtonState()}s=$("body").find("[data-btnpopid='"+a+"']"),popInnerWrapper=s.find(".popInnerWrapper"),s.hide(),this.addWindowContent(popInnerWrapper,this.options.content[0]),this.isHosted&&!this.hasGadgetPopup&&(this.hasGadgetPopup=!0),window.setTimeout(function(){d.positionIt(s,e),s.append('<div class="close" tabindex="0" data-icon="ic-ps-close" title="'+d.labelOpts.closeAltText+'" title="'+d.options.closeToolTip+'"></div>');var a=s.find(".close");a.sliderbutton({buttonClassName:"close",slider:!1,clickFunction:function(){d.closeAnyPopUps(s),this.contentAdded=!1}}),a.hide(),d.isPopup||d.options.popupClosesBy&&"button"===d.options.popupClosesBy?a.show():a.hide(),s.fadeIn({duration:500,done:function(){popInnerWrapper.focus(),PearsonGL.utils.initMathJax(s[0]);var a=s.find(".video-player");a.length>0&&a.videoComponent("isReady"),d.isTooltip&&$(document).bind("click.buttonObj touchstart.buttonObj",function(a){0===s.has(a.target).length&&(d.closeAnyPopUps(s),this.contentAdded=!1)}).keyup(function(a){a.keyCode===d.options.keyCodes.enter&&0===s.has(a.target).length&&(d.closeAnyPopUps(s),this.contentAdded=!1)})}})},100)}},Gadget.Button.prototype.setActiveButtonState=function(){var a=$(".header, .page:not(.hidden-page), .footer").find(".image-button-wrapper."+this.constants.ACTIVE_CLASS);a.length>0&&$.each(a,function(a,b){var c={down:$(b).find("img.base-button-down"),over:$(b).find("img.base-button-over"),up:$(b).find("img.base-button-default"),active:$(b).find("img.base-button-active")};c.down.hide(),c.up.hide(),c.over.hide(),c.active.show()})},Gadget.Button.prototype.positionIt=function(a,b){if(a){var c,d,e,f=this,g=this.jObject,h=a.find(".buttonPopUpText"),i=a.find(".popInnerWrapper"),j=!1,k=!1,l="",m=$(window).width(),n=$(window).height(),o=0,p=0,q=0,r=0;l=$("body").find(".navbar").children().length>0?"body":"document";var s=f.options.button.buttonText?".base-button-inside-wrap":".base-button-default",t=g.find(s);q=t.position().left,r=t.position().top;var u,v,w,x,y=200,z=100,A=100,B=100,C=19,D=6,E=0,F="auto",G=!1,H=10,I=0;switch(H+=a.find(".popup-header").height(),!f.isHosted&&f.isTooltip?(!t.hasOwnProperty("context")||"N"!==f.options.ttposition&&"S"!==f.options.ttposition?(o=t.width(),p=t.height()):(p=t.context.clientHeight,o=t.context.clientWidth),a.removeClass("window").addClass("tooltip"),a.find(".popup-header").hide()):(a.removeClass("tooltip").addClass("window"),f.options.responsive&&(j=this.options.responsive),j&&a.addClass("responsive-fixed-coord"),f.options.draggable&&(k=this.options.draggable),a.find(".popup-header").show().on("mousedown",function(){$(this).toggleClass("dragging","stopped")}).on("mouseup",function(){$(this).toggleClass("stopped","dragging")})),f.winWidth>0?(y=A=f.winWidth,A+="px"):y=Math.floor(m/2),f.winHeight>0?(z=f.winHeight,I=f.winHeight-parseInt(H,0)):(z=h.height(),I=h.height()-parseInt(H,0)),f.isHosted&&(b=f.constants.POP_HOSTED,A=this.hostMaxWidth,B=this.hostMaxHeight),E=25*o/100,b){case f.constants.TT_S:h.addClass("posArrowN"),e=p+D,c=(o-parseInt(y,10))/2;break;case f.constants.TT_N:h.addClass("posArrowS"),e=-1*z+16,c=(o-parseInt(y,10))/2;break;case f.constants.TT_E:h.addClass("posArrowE"),e=(z-p)/2*-1,c=q+o+C;break;case f.constants.TT_W:h.addClass("posArrowW"),e=(z-p)/2*-1,c=parseInt(-1*o)-E-C;break;case f.constants.TT_NW:h.addClass("posArrowSE"),e=-1*z-24,c=-1*(q+E);break;case f.constants.TT_NE:h.addClass("posArrowSW"),e=-1*z-24,c=q+o-E;break;case f.constants.TT_SW:h.addClass("posArrowNE"),e=p+C,c=-1*(q+E);break;case f.constants.TT_SE:h.addClass("posArrowNW"),e=p+C,c=q+o-E;break;case f.constants.POP_HOSTED:j=!1,a.addClass("frameless"),e=0,c=0,z="100%",y="100%",I="100%",F="auto",a.find(".popup-header").hide();break;case f.constants.POP_CENTER:G=!0,u=$(window),v="center",w="center";break;case f.constants.POP_N:e=80,c=(m-y)/2,d=null;break;case f.constants.POP_NE:e=50,c=null,d=0;break;case f.constants.POP_NW:e=50,c=0,d=null;break;case f.constants.POP_S:e=n-z-50,c=(m-y)/2,d=null;break;case f.constants.POP_SE:e=n-z-50,c=null,d=0;break;case f.constants.POP_SW:e=n-z-50,c=0,d=null;break;case f.constants.POP_E:e=(n-z)/2,c=null,d=0;break;case f.constants.POP_W:e=(n-z)/2,c=0,d=null;break;default:e=(n-z)/2,c=(m-y)/2,d=null}if(this.isPopup&&this.options.popupX&&this.options.popupY&&(e=this.options.popupY+"px",c=this.options.popupX+"px"),this.isPopup&&this.options.windowProps.unit&&"percent"==this.options.windowProps.unit&&!this.isHosted){var J=0,K=0;switch(f.winWidth>0?(A=f.winWidth+"%",J=f.winWidth):(J=A,A+="%"),y="100%",f.winHeight>0?(z=$(window).height()*(f.winHeight/100),K=f.winHeight):(z=.5*$(window).height(),K=50),I=z,b){case f.constants.POP_CENTER:e=(100-K)/2+"%",c=(100-J)/2+"%",d=null;break;case f.constants.POP_N:e="5%",c=(100-J)/2+"%",d=null;break;case f.constants.POP_NE:e="5%",c=null,d=0;break;case f.constants.POP_NW:e="5%",c=0,d=null;break;case f.constants.POP_S:e=100-K+"%",c=(100-J)/2+"%",d=null;break;case f.constants.POP_SE:e=100-K+"%",c=null,d=0;break;case f.constants.POP_SW:e=100-K+"%",c=0,d=null;break;case f.constants.POP_E:e=(100-K)/2+"%",c=null,d=0;break;case f.constants.POP_W:e=(100-K)/2+"%",c=0,d=null;break;default:e=(100-K)/2+"%",c=(100-J)/2+"%",d=null}$(window).bind("resize.hotspot",function(){z=f.winHeight>0?$(window).height()*(f.winHeight/100):.5*$(window).height(),I=z,i.css({height:I})})}var L={"max-width":A,width:y,height:z,top:e,left:c,right:d},M={"max-width":A,"max-height":B,width:y,height:z};i.css(this.isHosted?{"max-height":B,height:I}:{height:I}),k&&a.draggable({containment:l,handle:a.find(".popup-header"),scroll:!0}),G?(a.css(M),a.position({my:v,at:w,offset:x,of:u})):a.css(this.isHosted?M:L)}},Gadget.Button.prototype.checkTooltipBounds=function(){{var a=this.jObject,b=a.find(".tooltip"),c=$(window);c.width(),c.height(),b.offset(),b.height()}},Gadget.Button.prototype.fireEvent=function(a){$(window).trigger(a,{sourceId:this.gadgetUniqueId})};var globalRuntimeJsonObj,globalPlayerJsonObj;window.PearsonGL=window.PearsonGL||{},PearsonGL.SectionItem=function(a){this.options={gadgetArray:[],id:"h0",name:""},$.extend(this.options,a)},PearsonGL.Section=function(a,b,c,d){this.options={itemArray:[],currItemIndex:0,runtimejson:{}},this.initialize(a,b,c,d)},PearsonGL.Section.prototype={initialize:function(a,b,c,d){var e,f=b.pages.length,g=this;for($.extend(!0,this.options,b),this.gadgetsOnPage={},this.selector=a,this.sectionLoadedDeferred=c,e=0;f>e;e++)this.options.itemArray.push(new PearsonGL.SectionItem(b.pages[e]));return 0===this.options.itemArray.length?($(this.selector).remove(),void(this.sectionLoadedDeferred&&this.sectionLoadedDeferred.resolve())):(globalRuntimeJsonObj?g.options.runtimejson=globalRuntimeJsonObj:$.extend(g.options.runtimejson,d),("header"==g.options.type||"footer"==g.options.type)&&(g.options.runtimejson.highlightingEnabled=!1),void g.populateSection())},populateSection:function(){var a=this,b="";this.options.itemArray.length>0&&(b=this.options.itemArray[this.options.currItemIndex].options,$.ajax({type:"GET",url:"model/"+b.name+".html",dataType:"html",cache:!0,limit:20,success:function(c){a.gotItemModel(c,b)}}))},gotItemModel:function(a,b){var c=this,d={},e=$("<div/>").replaceWith(a),f=b.collapsed;e.attr("id",this.options.type+c.options.itemArray[c.options.currItemIndex].options.id),e.find("[data-id]").each(function(){var a={},e=$(this).attr("data-id");f.contains(e)?$(this).remove():(a.type=$(this).attr("data-gadget"),a.json=b.gadgets[e],d[e]=a,c.gadgetsOnPage[c.options.currItemIndex]=d)});var g="#"+this.options.type+c.options.itemArray[c.options.currItemIndex].options.id;$(g).length<=0&&!$(g).length&&($(this.selector).append(e),this.populateGadgets(c.gadgetsOnPage[c.options.currItemIndex])),$(product).triggerHandler({type:"onloadHeader"}),this.sectionLoadedDeferred&&this.sectionLoadedDeferred.resolve()},populateGadgets:function(a){var b=this;$("#"+this.options.type+b.options.itemArray[b.options.currItemIndex].options.id).find("[data-gadget]").each(function(){var c=$(this).attr("data-id");b.populateGadget($(this),a,c)})},populateGadget:function(a,b,c){try{if(b[c].json){var d,e=this;b[c].json.runtimejson={},$.extend(b[c].json.runtimejson,this.options.runtimejson);var f=this.options.id+"_"+this.options.itemArray[e.options.currItemIndex].options.id+"_"+c;d=new window.Gadget[b[c].type](a,b[c].json,f),e.options.itemArray[e.options.currItemIndex].options.gadgetArray.push(d)}else window.location.href.indexOf("playerdev.html")>-1?(PearsonGL.logger.error("Oh snap the gadget didn't have options."),$(a).append("<b>THIS "+b[c].type.toUpperCase()+" IS MISSING ITS OPTIONS!</b>"),$(a).addClass("gadget-fail")):$(a).remove()}catch(g){window.location.href.indexOf("playerdev.html")>-1&&(PearsonGL.logger.error("Oh snap the gadget didn't load because... "+g),$(a).append("<b>THIS GADGET FAILED TO LOAD!</b>"),$(a).addClass("gadget-fail"))}}};var globalRuntimeJsonObj,globalPlayerJsonObj;window.PearsonGL=window.PearsonGL||{},PearsonGL.Page=function(a){this.options={gadgetArray:[],id:"p0",name:"",objectType:"page",scorm:{}},this.initialize(a)},PearsonGL.Page.prototype={initialize:function(a){$.extend(this.options,a),this.isDone=0}},PearsonGL.Pages=function(a,b,c){this.labelOpts={utilSkipNavText:"Skip navigation",utilSkipLinkText:"Screen reader users click here for an Alternate Activity.",utilDlinkText:"Click for more descriptive text",utilDlinkWinTitle:"Alternate Activity for visually impaired users.",utilDlinkPointsText:"Press Enter to receive points for this activity.",utilCloseDlinkText:"Close Activity.",utilLongDescTitle:"Descriptive Text for visually impaired users.",utilLongDescText:"Screen reader users click for additional information.",utilScreenReaderMode:"Enable screen reader optimization.",utilScreenReaderModeFeedback:"You are currently in optimized navigation mode.",utilCloseDescText:"Close Description.",previousButtonHover:"Previous",nextButtonHover:"Next",of:"of",loading:"Loading...",aboutText:"About:\nProduct Version: {PV} \nBase Version:{BV}\nId: {ID}",printToolTip:"Print",refreshToolTip:"Reset",defaultSubmitHeaderButtonTooltip:"Go to pages and or turn in your work.",altSubmitHeaderButtonTooltip:"Turn in your work.",browseModeSubmitHeaderButtonTooltip:"Your Progress",cancelButtonLabel:"Cancel",finishButtonLabel:"Turn In",submitButtonLabel:"Submit",confirmFinishTitle:"",confirmFinishMessage:"Are you sure you want<br />to turn in your work?",finalConfirmationMessage:"Your work has been turned in.",footerMessage:"You turned in your work.<br />New changes will not be saved.",headerTitle:"Your Progress",listTitle:"Page Number",closeButtonHover:"Close",reviewModeMessage:"You turned in your work.<br />New changes will not be saved.",describedByAccesibleContent:"You can jump to pages by page number",submitFooterAccessibleContent:"To turn in your work, click the Turn In button, or click cancel to close this window.",submitSkipPageLinksContent:"Screen reader users click here to skip to the turn in button.",goToPagePhrase:"Go to page",pageNotDone:"this page is not done.",pageIsDone:"this page is done.",exitButtonLabel:"Exit",mdSubmitHeaderButtonTooltip:"Finish",mdConfirmSubmitTitle:"",mdConfirmExitMessage:"Are you sure you are<br />ready to exit this lesson?",mdFooterExitMessage:"This lesson has been exited.<br />Please close the browser window.",mdConfirmSubmitMessage:"Are you sure you are<br />ready to submit this lesson?",mdFooterSubmitMessage:"This lesson has been submitted.<br />Please close the browser window."},this.options={currPageIndex:0,totalPages:1,id:"",scoTotals:{},runtimejson:{}},this.initialize(a,b,c)},PearsonGL.Pages.prototype={initialize:function(a,b,c){var d=this;this.selector=a,this.jObject=jQuery(a),$.extend(this.options,b),this.options.totalPages=b.pages.length,this.gadgetsOnPage={},this.done(),this.print(),this.refresh(),this.lmsconnected=!1,this.scormMode="",this.scormData={},this.isProgressIndicator=!1,this.isQuitActivity=!1,this.isNoDialog=!1,this.isPageLevelScorm=!1,this.isPageGadgetScorm=!1,this.isHeaderSubmit=!1,this.isFooterSubmit=!1,this.isSubmitted=!1,this.startTime=new Date,this.printAdded=!1,this.presentation=null,this.pageArray=[],this.supplementalPageArray=[],this.isFirstPageLoaded=!1,this.isNextDisabled=!1,this.isPrevDisabled=!1,this.isNextLocked=!1,this.DT_PROGRESS_DIALOG="progressDialog",this.DT_CONFIRM_DIALOG="confirmationDialog",this.DT_NO_DIALOG="noDialog",this.DT_QUIT_DIALOG="quitDialog",this.dialogType="",this.options.runtimejson=c,this.analyticsData={category:"Player",eventType:"event",action:this.options.runtimejson.product+" "+PearsonGL.utils.getScoId()},this.continueLoad(),$(window).on("played",function(a,b){void 0!==this.curPlayingComp&&this.curPlayingComp.stop(),this.curPlayingComp=b.source?b.source:b}),$(window).on("paused",function(a,b){(this.curPlayingComp===b||this.curPlayingComp===b.source)&&(this.curPlayingComp=void 0)}),this.options.runtimejson.lockstep&&$(window).on("LearnerDataLoaded",function(){d.updatePageLock()})},continueLoad:function(){var a,b=this,c=this.options.pages.length;""!==PearsonGL.utils.getQuerystring("lang","",!0)&&(this.options.runtimejson.lang=PearsonGL.utils.getQuerystring("lang","en",!0));var d=PearsonGL.utils.getQuerystring("debug","",!0),e=PearsonGL.utils.getQuerystring("logger","",!0);for(("true"===d||"1"===d||"true"===e||"1"===e)&&PearsonGL.logger.enable(),b.lmsconnected=PearsonGL.globals.comm.isConnected(),b.scormMode=PearsonGL.globals.comm.getMode(),b.dialogType=this.options.runtimejson.dialogType,"review"!==b.scormMode&&this.options.runtimejson.cmiMode&&(b.scormMode=this.options.runtimejson.cmiMode),"review"===b.scormMode&&b.disableAllGadgets(),a=0;c>a;a++)b.pageArray.push(new PearsonGL.Page(b.options.pages[a]));b.getBookmark(),b.setBookmark(),global_player.about(),b.sendAnalytics("sco_accessed"),b.sendAnalytics("sco_opened_page# "+(this.options.currPageIndex+1)),$("body").find(".info-bar-done").hide(),$(product).on("onloadHeader",function(){b.loadHeaderEvents()}),PearsonGL.utils.getGlobalizedLabel("player_globalization",function(a){b.transferLabels(a),b.globalizationComplete()},this.options.runtimejson.lang),globalRuntimeJsonObj||b.setSubmitDialogProperties()},sendAnalytics:function(a){this.analyticsData.label=a,PearsonGL.globals.comm.sendAnalytics(this.analyticsData)},transferLabels:function(a){var b=this.options,c=$.extend(!0,this.labelOpts,a);b.submitDialogText=c.submitDialogText,b.previousButtonHover=c.previousButtonHover,b.nextButtonHover=c.nextButtonHover,b.of=c.of,b.loading=c.loading,b.aboutText=c.aboutText,b.printToolTip=c.printToolTip,b.refreshToolTip=c.refreshToolTip,b.submitHeaderButtonTooltip=this.dialogType===this.DT_PROGRESS_DIALOG?"normal"===this.scormMode?c.defaultSubmitHeaderButtonTooltip:c.browseModeSubmitHeaderButtonTooltip:c.altSubmitHeaderButtonTooltip,b.confirmFinishTitle=c.confirmFinishTitle,b.confirmFinishMessage=c.confirmFinishMessage,b.finishButtonLabel=c.finishButtonLabel,b.cancelButtonLabel=c.cancelButtonLabel,b.finalConfirmationMessage=c.finalConfirmationMessage,b.footerMessage=c.footerMessage,b.headerTitle=c.headerTitle,b.listTitle=c.listTitle,b.closeButtonHover=c.closeButtonHover,b.reviewModeMessage=c.reviewModeMessage,b.describedByAccesibleContent=c.describedByAccesibleContent,b.submitFooterAccessibleContent=c.submitFooterAccessibleContent,b.submitSkipPageLinksContent=c.submitSkipPageLinksContent,b.goToPagePhrase=c.goToPagePhrase,b.pageNotDone=c.pageNotDone,b.pageIsDone=c.pageIsDone,"object"!=typeof customSubmitContent||this.lmsconnected||(b.submitHeaderButtonTooltip=c.mdSubmitHeaderButtonTooltip,b.confirmFinishTitle=c.mdConfirmSubmitTitle,b.confirmFinishMessage=c.mdConfirmExitMessage,b.finishButtonLabel=c.exitButtonLabel,b.footerMessage=c.mdFooterExitMessage,b.finalConfirmationMessage=c.mdFooterExitMessage),global_player.utilDlinkText=c.utilDlinkText,global_player.utilSkipNavText=c.utilSkipNavText,global_player.utilSkipLinkText=c.utilSkipLinkText,global_player.utilDlinkWinTitle=c.utilDlinkWinTitle,global_player.utilDlinkPointsText=c.utilDlinkPointsText,global_player.utilCloseDlinkText=c.utilCloseDlinkText,global_player.utilLongDescText=c.utilLongDescText,global_player.utilLongDescTitle=c.utilLongDescTitle,global_player.utilScreenReaderMode=c.utilScreenReaderMode,global_player.utilScreenReaderModeFeedback=c.utilScreenReaderModeFeedback,global_player.utilCloseDescText=c.utilCloseDescText
},globalizationComplete:function(){this.done(),this.print(),this.refresh(),$("html").attr("lang",this.options.runtimejson.lang),$("#next").attr("title",this.options.nextButtonHover),$("#prev").attr("title",this.options.previousButtonHover),$(".info-bar-print").attr("title",this.options.printToolTip),$(".info-bar-refresh").attr("title",this.options.refreshToolTip),$(".info-bar-done-hover").attr("title",this.options.submitHeaderButtonTooltip),$(".logo").removeAttr("tabindex"),this.updateIndex(this.options.currPageIndex+1,this.options.totalPages)},loadHeaderEvents:function(){this.globalizationComplete()},triggerPageShowEvent:function(){var a={pageIndex:this.options.currPageIndex+1,totalPages:this.options.totalPages,lmsconnected:this.lmsconnected,scormMode:this.scormMode};$(document).triggerHandler("PageShowEvent",a)},setSubmitDialogProperties:function(){var a=this.options.runtimejson,b=this;if(a.pageScorm&&(b.isPageLevelScorm=!0),b.isPageLevelScorm&&PearsonGL.globals.comm&&(b.isPageGadgetScorm=!0),(b.isPageLevelScorm||b.isPageGadgetScorm)&&b.options.scoTotals){var c=parseInt(b.options.totalPages,10);b.options.scoTotals.totalInteractions=parseInt(b.options.scoTotals.totalInteractions,10)+c,b.options.scoTotals.totalObjectives=parseInt(b.options.scoTotals.totalObjectives,10)+c,0===parseInt(a.pageScorm.interactions[0].objectives[0].score.max)?b.options.scoTotals.scoreMax=c:parseInt(a.pageScorm.interactions[0].objectives[0].score.max,10)>0&&(b.options.scoTotals.scoreMax=parseInt(b.options.scoTotals.scoreMax,10)+parseInt(a.pageScorm.interactions[0].objectives[0].score.max*c,10)),b.options.scoTotals.scoreMin=parseInt(b.options.scoTotals.scoreMin+0,10)}if(PearsonGL.globals.comm.setTotalScore(b.options.scoTotals),a.hasOwnProperty("dialogType")){if(a.dialogType===b.DT_NO_DIALOG)return void $("body").find(".info-bar-done").remove();"object"==typeof customSubmitContent&&(b.isQuitActivity=!0),b.lmsconnected&&(b.isQuitActivity=!1),b.isProgressIndicator=b.dialogType===b.DT_PROGRESS_DIALOG?!0:!1,void 0===a.submitLocation||"both"===a.submitLocation?(b.isHeaderSubmit=!0,b.isFooterSubmit=!0):"lastPage"===a.submitLocation?(b.isHeaderSubmit=!1,b.isFooterSubmit=!0):(b.isHeaderSubmit=!0,b.isFooterSubmit=!1)}else b.dialogType=b.DT_NO_DIALOG;b.dialogType===b.DT_NO_DIALOG||b.dialogType===b.DT_CONFIRM_DIALOG&&("review"===b.scormMode||"browse"===b.scormMode)?$(".info-bar-done").hide():b.isFooterSubmit&&!b.isHeaderSubmit?$(".info-bar-done").hide():$(".info-bar-done").show(),b.isFooterSubmit&&1==b.options.totalPages&&"normal"===b.scormMode&&b.dialogType!=b.DT_NO_DIALOG&&$("#next").addClass("next-submit-button")},setPageLevelScorm:function(a){var b,c,d,e=[],f=[],g=0,h=this.pageArray[this.options.currPageIndex];if(1!==h.isDone){var i=this.options.id+"_"+this.pageArray[this.options.currPageIndex].options.id+"_"+h.options.name;if(h.options.gadgetName="page_scorm_"+h.options.id,$.extend(h.options.scorm,this.options.runtimejson.pageScorm),PearsonGL.globals.comm.getLearnerData({id:i,objectiveDesc:h.options.name+" is presented to the Learner",name:h.options.gadgetName,objectType:h.options.objectType,data:h.options.scorm,weighting:1}),PearsonGL.globals.comm.setLearnerData({id:i,data:h.options.scorm,results:[{raw:h.options.scorm.interactions[0].objectives[0].score.max,max:h.options.scorm.interactions[0].objectives[0].score.max,progressMeasure:1,completionStatus:"completed",successStatus:"passed"}]}),h.options.scorm.interactions.length>0)for(f=h.options.scorm.interactions,g=f.length,b=0;g>b;b++)for(d=h.options.scorm.interactions[b],e=d.objectives,c=0;c<e.length;c++)e[c].score.max=isNaN(e[c].score.max)?0:e[c].score.max,e[c].score.min=isNaN(e[c].score.min)?0:e[c].score.min;h.isDone=this.isPageGadgetScorm?1===a?1:0:1}},unloadAllGadgets:function(){this.sendAnalytics("sco_closedduration: "+PearsonGL.utils.getFormattedDate((new Date).getTime()-this.startTime.getTime()));var a,b=this.pageArray[this.options.currPageIndex],c=b.options.gadgetArray;for(a=0;a<c.length;a++)c[a].gadgetUnload();PearsonGL.globals.comm.commit(),this.stopAll()},stopAll:function(){var a,b,c,d=this.pageArray[this.options.currPageIndex],e=d.options.gadgetArray,f=e.length;for(a=0;f>a;a++)e[a].stop(),b=e[a].getjObject(),b&&(c=$(b).find(".video-component-identifier"),c.length>0&&c.videoComponent("stop"))},pageShowEvent:function(a,b){var c,d,e,f=a[b],g=f.options.gadgetArray,h=g.length;for(c=0;h>c;c++)g[c].gadgetPageShowEvent(),d=g[c].getjObject(),d&&(e=$(d).find(".video-component-identifier:visible"),e.length>0&&e.videoComponent("gadgetPageShowEvent"));this.isFirstPageLoaded||(this.isFirstPageLoaded=!0,this.isPageLevelScorm&&this.checkGadgetsCompleted()),this.triggerPageShowEvent()},next:function(){return this.checkGadgetsCompleted(),this.hideDialogBoxes(),this.options.currPageIndex<this.options.totalPages-1&&(this.sendAnalytics("player_pagenext"),this.stopAll(),this.options.currPageIndex++,this.populatePage(),this.isPrevDisabled=!1,$("#prev").removeClass("prev-disable")),this.options.currPageIndex>=this.options.totalPages-1&&(this.isNextDisabled=!0,$("#next").addClass(this.getNextButtonStyle())),this.setBookmark(!0),window.scroll(0,0),this.options.currPageIndex+1},prev:function(){return this.checkGadgetsCompleted(),this.hideDialogBoxes(),this.options.currPageIndex>0&&(this.sendAnalytics("player_pageback"),this.stopAll(),this.options.currPageIndex--,this.populatePage(),this.isNextDisabled=!1,$("#next").removeClass("next-disable").removeClass("next-submit-button")),0===this.options.currPageIndex&&(this.isPrevDisabled=!0,$("#prev").addClass("prev-disable")),this.options.currPageIndex+1<this.options.totalPages&&$("#next").removeClass("next-disable").removeClass("next-submit-button"),this.setBookmark(!0),window.scroll(0,0),this.options.currPageIndex+1},done:function(){var a=this;$(".info-bar-done-hover").sliderbutton({buttonClassName:"info-bar-done-hover",slider:!1,clickFunction:function(b,c){"click"===c&&a.submit()}}),$(".info-bar-done-hover").sliderbutton("keyUpEventHandler",function(){a.submit(!0)})},submit:function(a){var b=$(".dialog-modal");switch(this.stopAll(),0===b.length?($("body").append('<div class="dialog-modal"></div>'),b.show()):b.show(),this.dialogType){case this.DT_PROGRESS_INDICATOR_DIALOG:this.createProgressDialog(a,this.isQuitActivity);break;case this.DT_CONFIRM_DIALOG:this.createConfirmDialog(!1,this.isQuitActivity);break;default:this.createProgressDialog(a,this.isQuitActivity)}},toggleTabbing:function(a){a?($(".sco div").find("[tabindex]").attr("tabindex","0"),$("textarea, input, button").removeAttr("disabled"),$(".logo").focus()):($(".sco div").find("[tabindex]").attr("tabindex","-1"),$("textarea, input, button").attr("disabled","disabled"))},disableAllGadgets:function(){var a=this;$("text,textarea,select").attr("disabled","disabled");var b=$("div.disableField");0===b.length&&$("#main-id").append("<div class='disableField'><p>"+a.options.reviewModeMessage+"</p></div>")},print:function(){var a=this,b=$(".info-bar-print");b.on("click",function(){}).sliderbutton({buttonClassName:"info-bar-print",slider:!1,clickFunction:function(){a.printCurrentPage()}})},refresh:function(){$(".info-bar-refresh").on("click",function(){location.reload(!0)}).sliderbutton({buttonClassName:"info-bar-refresh",slider:!1})},setSupplementalPages:function(a){var b;for(this.supplementalJsonData=a,this.supplementalPageArray=[],b=0;b<a.pages.length;b++)this.supplementalPageArray.push(new PearsonGL.Page(a.pages[b]))},populatePage:function(a,b,c,d){var e=this;if(a=a||this.pageArray,b=b||this.options.currPageIndex,c=c||"",d=d||this.options.id,a.length>0){var f=a[b].options;$("<div></div>").load("model/"+f.name+".html?q="+PearsonGL.utils.getQuerystring("q",""),function(g){e.gotPageModel(g,f,a,b,c,d)})}else $(".loading,.dialog-modal").remove(),alert("No pages were found.")},gotPageModel:function(a,b,c,d,e,f){c=c||this.pageArray,d=d||this.options.currPageIndex,f=f||this.options.id,e=e||"";var g,h=this,i={},j=$(a),k=b.collapsed,l=k.length,m="#"+e+c[d].options.id,n=!1;if($(".page:visible").attr("aria-hidden","true").addClass("hidden-page"),$(m).length<=0){for(j.attr("id",e+c[d].options.id),g=0;l>g;g++)j.find("[data-id='"+k[g]+"']").remove();j.find("[data-gadget]").each(function(){var a={},c=$(this).attr("data-id");a.type=$(this).attr("data-gadget"),a.json=b.gadgets[c],i[c]=a,h.gadgetsOnPage[m]=i}),$(".main").append(j),this.presentation=null;var o=h.populateGadgets(h.gadgetsOnPage[m],c,d,e,f);this.presentation&&(this.presentation.initialize(j,o),this.presentation.start()),n=!0}else j=$(m);var p=$("body").find(".page-title");p.hide(),p.not("[data-move='g_title']")?$(".logo").after($(m).find(".page-title").attr("id","page-title-"+d)):$(m).find(".page-title").attr("id","page-title-"+d),$("[data-place]").hide();var q,r;$("[data-move]").hide().attr("aria-hidden","true").attr("tabindex","-1"),$(m).find("[data-move]").attr("data--move-id",d),$(m).find("[data-move]").each(function(){q=$("[data-place='"+$(this).attr("data-move")+"']"),q.length>0?(r=q.find("[data--move-id='"+$(this).attr("data--move-id")+"']"),r.length>0&&r.remove(),q.append($(this))):$(this).remove()});var s=$("[data--move-id='"+d+"']");s.attr("aria-hidden","false").attr("tabindex","1").show(),s.parent("[data-place]").show(),$("#page-title-"+d).show(),$("#page-title-"+d).find(".gadget-textblock").focus(),$(".logo").show(),n?(j.attr({role:"presentation","aria-hidden":"false"}),PearsonGL.utils.initMathJax([j[0],$(".header")[0]])):j.removeClass("hidden-page").attr("aria-hidden","false"),this.pageShowEvent(c,d),$(".loading,.dialog-modal").remove(),$(product).triggerHandler({type:"productCallBackFunction",params:[d]}),0===$("#header-skip").length&&($(".sco").prepend('<button type="button" class="screen-reader-mode hidden-label">'+global_player.utilScreenReaderMode+'</button><div class="hidden-label screen-reader-mode-feedback" aria-hidden="true" tabindex="-1">'+global_player.utilScreenReaderModeFeedback+'</div><button type="button" id="header-skip" class="skip-link accessibility-links">'+global_player.utilSkipNavText+"</button>"),global_player.inScreenReaderMode=!1,$("#header-skip").click(function(){h.findSkipGadget()}),$(".screen-reader-mode").attr({role:"button"}).click(function(){h.removeScreenReaderOption=!0,global_player.inScreenReaderMode=!0,h.enterScreenReaderMode(),$(".screen-reader-mode-feedback").attr({"aria-hidden":!1,tabindex:"0"}).focus()}).keypress(function(a){13===a.keyCode&&(global_player.inScreenReaderMode=!0,h.enterScreenReaderMode(),$(".screen-reader-mode-feedback").attr({"aria-hidden":!1,tabindex:"0"}).focus())})),0!==$(".screen-reader-mode").length?$(".screen-reader-mode").focus():$("#header-skip").focus(),this.handleInlineDisplay(this),this.updatePageLock()},handleInlineDisplay:function(a){for(var b=PearsonGL.utils.getQuerystring("pr","").split(","),c=!1,d=!1,e=!1,f=!1,g=!1,h=a.options.totalPages,i=$("body").find(".header"),j=$("body").find(".footer"),k=b.length,l="",m=0;k>m;m++)"sp"===b[m]&&(l=b[m]),"vb"===b[m]&&(c=!0),"vf"===b[m]&&(d=!0),"vh"===b[m]&&(e=!0),"lb"===b[m]&&(f=!0);if("sp"===l){var n=j.find("*");$("html").addClass("pr-sp"),c===!0&&$("html").addClass("vb"),e===!0&&$("html").addClass("vh"),d===!0&&$("html").addClass("vf"),f===!0&&$("html").addClass("lb"),a.options.totalPages>1?g=!0:n.length>1?$.each(n,function(a,b){$(b).hasClass("gadget")&&(g=!0)}):g=!1,e&&i.show(),d||g?(1===h?j.addClass("no-paging"):j.removeClass("no-paging"),j.show()):j.hide()}else i.show(),j.show()},enterScreenReaderMode:function(){var a,b=this.pageArray[this.options.currPageIndex],c=b.options.gadgetArray,d=c.length;for(a=0;d>a;a++)c[a].setScreenReaderMode()},findSkipGadget:function(){var a=null,b=$('div[id="p'+this.options.currPageIndex+'"]');void 0!==b[0]&&(a=b),a.find("[tabindex]").each(function(){return"none"!==$(this).css("display")?(this.focus(),!1):void 0})},populateGadgets:function(a,b,c,d,e){var f,g=this,h=[];return b=b||this.pageArray,c=c||this.options.currPageIndex,e=e||this.options.id,d=d||"",$("#"+d+b[c].options.id).find("[data-gadget]").each(function(){f=$(this).attr("data-id"),h.push(f),g.populateGadget($(this),a,f,b,c,e)}),b.isSubmitted&&g.toggleTabbing(!1),g.isPageLevelScorm&&g.checkGadgetsCompleted(),$(".loading,.dialog-modal").remove(),h},populateGadget:function(a,b,c,d,e,f){try{if(void 0!==b[c].json){var g,h,i;b[c].json.runtimejson={},$.extend(b[c].json.runtimejson,this.options.runtimejson),$.extend(b[c].json,{pageType:d[e].options.name}),"g_title"===c&&(b[c].json.runtimejson.highlightingEnabled=!1);var j=f+"_"+d[e].options.id+"_"+c;if(g=new window.Gadget[b[c].type](a,b[c].json,j),"Presentation"===b[c].type&&(this.presentation=g),d[e].options.gadgetArray.push(g),"function"==typeof g.setGadgetId&&(g.setGadgetId(j),g.setInitScormData()),(g.options.scormOn||g.isCommEnabled())&&g.options.scorm.interactions.length>0)for(interactions=g.options.scorm.interactions,h=0;h<interactions.length;h++)for(currInteraction=g.options.scorm.interactions[h],objectives=currInteraction.objectives,i=0;i<objectives.length;i++)objectives[i].score.min=isNaN(objectives[i].score.min)?0:objectives[i].score.min}else window.location.href.indexOf("playerdev.html")>-1?(PearsonGL.logger.error("Oh snap the gadget didn't have options."),$(a).append("<b>THIS "+b[c].type.toUpperCase()+" IS MISSING ITS OPTIONS!</b>"),$(a).addClass("gadget-fail")):$(a).remove()}catch(k){window.location.href.indexOf("playerdev.html")>-1&&(PearsonGL.logger.error("Oh snap the gadget didn't load because... "+k),$(a).append("<b>THIS "+b[c].type.toUpperCase()+" FAILED TO LOAD!</b>"),$(a).addClass("gadget-fail"))}},getBookmark:function(){var a=PearsonGL.globals.comm.getBookmark(),b=this;if("review"===this.scormMode)this.callPageDirect(PearsonGL.utils.getQuerystring(this.options.pages[0]?this.options.pages[0].id:"p0"));else if(PearsonGL.utils.getQuerystring("pageId"))this.callPageDirect(PearsonGL.utils.getQuerystring("pageId"));else if(a.length>0){var c=a.indexOf("_");pageId=a.substring(c+1,a.length);var d,e=$.parseJSON(PearsonGL.globals.comm.getSuspendData()),f=null,g=null,h=b.pageArray,i=b.pageArray.length;e.hasOwnProperty("pages")&&$.each(e.pages,function(a,b){for(f=b,c=f.id.indexOf("_"),g=f.id.substring(c+1,f.length),d=0;i>d;d++)if(h[d].options.id===g)return void(h[d].isDone=f.data.pageDone)}),this.callPageDirect(pageId)}else this.callPageDirect(PearsonGL.utils.getQuerystring(this.options.pages[0]?this.options.pages[0].id:"p0"))},setBookmark:function(a){if(!this.isSubmitted&&"browse"!==this.scormMode&&"review"!==this.scormMode&&this.pageArray.length>0){var b=this.options.id,c=this.pageArray[this.options.currPageIndex].options.name,d=this.pageArray[this.options.currPageIndex].options.id,e=this.pageArray[this.options.currPageIndex],f=b+"_"+d,g={pageDone:e.isDone};PearsonGL.globals.comm&&(PearsonGL.globals.comm.setBookmark(f),PearsonGL.globals.comm.setSuspendDataById(f,c,g),a&&PearsonGL.globals.comm.commit())}},updatePageLock:function(){var a,b,c,d,e,f=this.pageArray[this.options.currPageIndex],g=f.options.gadgetArray,h=!0;if(this.options.runtimejson.lockstep&&"normal"===this.scormMode){if(!f.isDone)a:for(a=0;a<g.length;a++)if(d=g[a].options,void 0!==d.scorm&&void 0!==d.scorm.interactions)for(b=0;b<d.scorm.interactions.length;b++)for(e=d.scorm.interactions[b],c=0;c<e.objectives.length;c++)if("completed"!==e.objectives[c].completion_status){h=!1;break a}this.isNextLocked=!h,this.setPagingButtonState(!0)}},checkGadgetsCompleted:function(){var a,b,c,d=this.pageArray[this.options.currPageIndex],e=d.options.gadgetArray,f=e.length,g=1,h=1,i=[],j=0,k=[],l=0,m=[],n=0;if(PearsonGL.globals.comm)for(m=[],a=0;f>a;a++){var o=e[a].options;if(void 0!==o.scorm&&void 0!==o.scorm.interactions)for(i=o.scorm.interactions,j=o.scorm.interactions.length,b=0;j>b;b++)for(currInteraction=i[b],k=currInteraction.objectives,l=k.length,c=0;l>c;c++){var p=k[c].completion_status;h="completed"===p?1:0,m.push(h)}}for(n=m.length,b=0;n>b;b++)0===m[b]&&(h=0,g=0);this.isPageLevelScorm||this.isPageGadgetScorm?this.setPageLevelScorm(h):d.isDone=g,this.setBookmark()},goToPage:function(a){this.stopAll(),this.callPageDirect(a)},callPageDirect:function(a){var b,c=["main"],d=0;if(void 0!==a&&(c=a.split(":")),("supplemental"===c[0].toLowerCase()||"supp"===c[0].toLowerCase())&&2===c.length&&parseInt(c[1],10)<=this.supplementalPageArray.length)return void this.populatePage(this.supplementalPageArray,parseInt(c[1],10)-1,"supplemental",this.supplementalJsonData.id);if("main"===c[0].toLowerCase()&&2===c.length)d=parseInt(c[1],10)-1;else if($.isNumeric(a)||"supplemental"===c[0].toLowerCase()||"supp"===c[0].toLowerCase())$.isNumeric(a)&&(d=parseInt(a,10)-1);else if(void 0!==a)for(b=0;b<this.pageArray.length;b++)if(a==this.pageArray[b].options.id){d=b;break}d>=this.pageArray.length&&(d=0),this.options.currPageIndex=parseInt(d),this.populatePage(),this.setPagingButtonState(),this.hideDialogBoxes(),this.setBookmark(!0)},updateIndex:function(a,b){var c=this,d=$("#next");$("#pageIndex").html("<span class='currentPageHighlight'>"+a+"</span> "+c.options.of+" "+b),this.removeScreenReaderOption&&$(".screen-reader-mode").remove(),c.isFooterSubmit&&"normal"===c.scormMode&&(1===a&&b>1&&b>a?(d.removeClass("next-submit-button"),d.attr("title",c.labelOpts.nextButtonHover)):a===b&&(d.addClass("next-submit-button"),d.attr("title",c.labelOpts.nextButtonHover)),d.hasClass("next-submit-button")?d.attr("title",c.labelOpts.altSubmitHeaderButtonTooltip):d.attr("title",c.labelOpts.nextButtonHover))},setPagingButtonState:function(a){var b=$("#prev"),c=$("#next"),d=this.options.totalPages,e=this.options.currPageIndex+1;parseInt(e)<=d&&1===parseInt(e)?(this.isNextDisabled=!1,this.isPrevDisabled=!0,b.addClass("prev-disable"),c.removeClass(this.getNextButtonStyle())):(this.isNextDisabled=!1,this.isPrevDisabled=!1,b.removeClass("prev-disable"),c.removeClass("next-disable").removeClass("next-submit-button")),parseInt(e)>=d&&(this.isNextDisabled=!0,this.isPrevDisabled=!1,b.removeClass("prev-disable"),c.addClass(this.getNextButtonStyle())),(1===d||0===d)&&(this.isNextDisabled=!0,this.isPrevDisabled=!0,b.addClass("prev-disable"),c.addClass("next-disable")),this.isNextLocked&&(this.isNextDisabled=!0,c.addClass("next-disable")),a||this.updateIndex(parseInt(this.options.currPageIndex)+1,this.options.totalPages)},getNextButtonStyle:function(){var a="";return a=this.isNextLocked||this.dialogType===this.DT_NO_DIALOG||"normal"!==this.scormMode||this.options.currPageIndex+1!==this.options.totalPages?"next-disable":this.isFooterSubmit?"next-submit-button":"next-disable"},createProgressDialog:function(a,b){var c,d=this,e="",f=0,g=d.pageArray.length,h="page-item-icon-not-complete",i="",j="";if(d.dialogType!==d.DT_PROGRESS_DIALOG&&d.dialogType!==d.DT_QUIT_DIALOG)return $("body").find("#info-bar-id").remove(),void d.hideModalAndDialogs();if(e=g>4?"dialog-confirm":"dialog-confirm-short",d.hideDialogBoxes(),d.isSubmitted){$("#"+e+" #dialog-footer").empty().append("<p></p>");var k=$("#"+e+" #dialog-footer p");return k.html().length<=0&&k.append(d.options.reviewModeMessage),$("#"+e).find("#skip-page-links").remove(),$("#"+e+", .dialog-modal").show(),$("#"+e).find("div.dialog-close-btn").focus(),d.toggleTabbing(!1),void d.disableAllGadgets()}j="review"===d.scormMode?"<p>"+d.options.reviewModeMessage+"</p>":"browse"===d.scormMode?"<p></p>":'<div class="continue-btn" role="button" tabindex="0"><div><span class="hidden-label">Go back to your work</span>'+d.options.cancelButtonLabel+'</div></div><div class="submit-btn submit-btn-button-disable" role="button" tabindex="0"><div><span class="submit-button-tab-looper"></span><span class="hidden-label">Turn in your work</span>'+d.options.finishButtonLabel+"</div></div>",0===$("#"+e).length?($("body").prepend('<div role="alertdialog" tabindex="0" aria-describedby="'+d.options.describedByAccesibleContent+'" aria-labelledby="your-progress" id="'+e+'" class="progress-indicator"><div id="your-progress" class="dialog-header"><h1 tabindex="0" class="dialog-title">'+d.options.headerTitle+'</h1><span id="skip-page-links" class="skip-link accessibility-links" role="button" tabindex="0">'+d.options.submitSkipPageLinksContent+'</span><div class="dialog-close-btn" title="'+d.options.closeButtonHover+'" tabindex="0" data-icon="close-button" role="button"></div></div><div id="results-page-scoller" class="progress-indicator-dialog"><div class="list-header"><h2 class="list-header-page-number">'+d.options.listTitle+'</h2></div><div class="results-page-scoller-wrapper submit-button-tab-looper" tabindex="0"><ul role="navigation"></ul></div></div><div id="dialog-footer" tabindex="0" aria-describedby="'+d.options.submitFooterAccessibleContent+'">'+j+"</div></div>"),d.addSharedDialogButtonHandlers(e),$("#skip-page-links").click(function(){$("#dialog-footer").find(".continue-btn").focus()}).keyup(function(a){13===a.keyCode&&$("#dialog-footer").find(".continue-btn").focus(),40===a.keyCode&&$("#"+e).find(".dialog-close-btn").focus()}),$("#"+e).find(".submit-btn").unbind().click(function(){$(this).hasClass("submit-btn-button-disable")||d.createConfirmDialog(b)}).keyup(function(a){13!==a.keyCode||$(this).hasClass("submit-btn-button-disable")||d.createConfirmDialog(b),38===a.keyCode&&$("#"+e).find(".continue-btn").focus()}).sliderbutton({buttonClassName:"submit-btn",slider:!1}),$(".submit-button-tab-looper").keyup(function(a){(9===a.keyCode||40===a.keyCode)&&$(".results-page-scoller-wrapper").find("ul").focus()})):$("#"+e+", .dialog-modal").show(),d.checkGadgetsCompleted(),$("#results-page-scoller").find(".results-page-scoller-wrapper").find("ul").empty();var l="";for(c=0;g>c;c++){var m=d.pageArray[c];f=c+1,1===m.isDone?(h="page-item-icon-complete",i=d.options.pageIsDone):(h="page-item-icon-not-complete",i=d.options.pageNotDone),l+='<li role="button" id="'+f+'"tabindex="0" class="results-page-item" data-results-id="'+m.options.id+'"><div class="page-item-txt"><span class=\'hidden-label\'>'+d.options.goToPagePhrase+"</span>"+f+"<span class='hidden-label'>"+i+'</span></div><span id="page-item-icon-p'+f+'"class="page-item-icon '+h+'"></span></li>'}$("#results-page-scoller").find(".results-page-scoller-wrapper").find("ul").append(l),$("#results-page-scoller").find(".results-page-item").each(function(){parseInt($(this).attr("id"),10)===d.options.currPageIndex+1&&$(this).addClass("selected text-button-focus").focus()}),$("#results-page-scoller").find(".results-page-item").unbind().click(function(){d.callPageDirect($(this).attr("data-results-id")),d.toggleTabbing(!0)}).keyup(function(a){var b,c=$(this),e=$(".results-page-item").length;switch(a.keyCode){case 13:d.callPageDirect($(c).attr("data-results-id")),d.toggleTabbing(!0);break;case 9:d.focusItemOn(this),$(this).focus();break;case 40:b=parseInt($(this).next().attr("id"),10),c=$('li[id~="'+b.toString()+'"]'),parseInt($(c).attr("id"),10)>=1&&(d.focusItemOn($(c)),$(this).removeClass("selected text-button-focus"),$(c).addClass("selected text-button-focus").focus(),b+=1);break;case 38:b=parseInt($(this).prev().attr("id"),10),c=$('li[id~="'+b.toString()+'"]'),parseInt($(c).attr("id"),10)<=e&&(d.focusItemOn($(c)),$(this).removeClass("selected text-button-focus"),$(c).addClass("selected text-button-focus").focus(),b-=1)}}).blur(function(){PearsonGL.utils.focusItemOff(this)}),$("#results-page-scoller").find(".results-page-scoller-wrapper").find("ul").on("keyup","li:first-child",function(a){switch(a.keyCode){case 38:$("#"+e).find(".dialog-close-btn").focus()}}),$("#results-page-scoller").find(".results-page-scoller-wrapper").find("ul").on("keyup","li:last-child",function(a){switch(a.keyCode){case 40:$("#dialog-footer").find(".continue-btn").focus()}}),d.toggleTabbing(!1)},addSharedDialogButtonHandlers:function(a){var b=this;a="#"+a,"#dialog-final-confirm"!==a&&("normal"===b.scormMode&&$(a).find(".submit-btn").removeClass("submit-btn-button-disable"),$(a).find(".continue-btn").unbind().click(function(){b.hideDialogBoxes(),$(".dialog-modal").hide(),b.toggleTabbing(!0)}).keyup(function(c){switch(c.keyCode){case 13:b.hideDialogBoxes(),$(".dialog-modal").hide(),b.toggleTabbing(!0);break;case 40:$(a).find(".submit-btn").focus();break;case 38:"#dialog-confirm"===a||"#dialog-confirm-short"===a?$("#results-page-scoller").find(".results-page-scoller-wrapper").find("ul").find("li:last-child").focus():$(a).find(".dialog-close-btn").focus()}}).sliderbutton({buttonClassName:"continue-btn",slider:!1})),$(a).find(".dialog-close-btn").unbind().click(function(){b.hideModalAndDialogs(),$(".dialog-modal").hide(),b.toggleTabbing(!0)}).keyup(function(c){switch(c.keyCode){case 13:b.hideModalAndDialogs(),$(".dialog-modal").hide(),b.toggleTabbing(!0);break;case 40:"#dialog-confirm"===a||"#dialog-confirm-short"===a?$("#results-page-scoller").find(".results-page-scoller-wrapper").find("ul").find("li:first-child").focus():$("#dialog-footer").find(".continue-btn").focus();break;case 38:$("#skip-page-links").focus()}}).sliderbutton({buttonClassName:"dialog-close-btn",slider:!1}),$(a).find(".dialog-close-btn").hover(function(){$(this).toggleClass("dialog-close-btn-over")}).mousedown(function(){$(this).addClass("dialog-close-btn-down")}).mouseup(function(){$(this).removeClass("dialog-close-btn-down")})},hideModalAndDialogs:function(){this.hideDialogBoxes(),$(".dialog-modal").hide(),this.isSubmitted&&this.lmsconnected&&$(".dialog-modal, .disableField").remove()},createConfirmDialog:function(a){var b=this;if(a)return void b.finalConfirmation(a);if(b.hideDialogBoxes(),b.isSubmitted)return $("#dialog-final-confirm").find(".dialog-message").empty().append(b.options.reviewModeMessage),$("#dialog-final-confirm").show(),b.toggleTabbing(!1),void b.disableAllGadgets();var c='<div id="dialog-confirm-before-submit" tabindex="0" role="alertdialog" aria-describedby="'+b.options.describedByAccesibleContent+'" aria-labelledby="your-progress"><div class="dialog-close-btn" data-icon="close button" role="button" title="'+b.options.closeButtonHover+'" tabindex="0"></div><div class="content-wrapper"><h1 class="dialog-message"><label id="your-progress" class="hidden-label">'+b.options.confirmFinishMessage+"</label>"+b.options.confirmFinishMessage+'</h1></div><div id="dialog-footer" tabindex="0"><div class="continue-btn" role="button"><div><span class="hidden-label">Go back to your work</span>'+b.options.cancelButtonLabel+'</div></div><div class="submit-btn submit-btn-button-disable" role="button" tabindex="0"><div><span class="hidden-label" tabindex="0" >Turn in your work</span>'+b.options.finishButtonLabel+"</div></div></div>";0===$("#dialog-confirm-before-submit").length?($("body").prepend(c),this.addSharedDialogButtonHandlers("dialog-confirm-before-submit"),$("#dialog-confirm-before-submit").find(".submit-btn").unbind().click(function(){$(this).hasClass("submit-btn-button-disable")||b.finalConfirmation(a)}).keyup(function(c){13!==c.keyCode||$(this).hasClass("submit-btn-button-disable")||b.finalConfirmation(a),38===c.keyCode&&$("#dialog-confirm-before-submit").find(".continue-btn").focus()}).sliderbutton({buttonClassName:"submit-btn",slider:!1})):(b.isSubmitted&&($("#dialog-confirm-before-submit").find(".content-wrapper").find(".dialog-message").empty().append(b.options.reviewModeMessage),$("#dialog-confirm-before-submit").find(".dialog-footer").empty()),$("#dialog-confirm-before-submit").show()),$("#dialog-confirm-before-submit").find(".dialog-close-btn").focus()},finalConfirmation:function(a){var b=this,c=$("#dialog-final-confirm");b.hideDialogBoxes();try{new Finalize({}),$(".dialog-modal").hide()}catch(d){PearsonGL.logger.log(d)}0===c.length?($("body").prepend('<div id="dialog-final-confirm" tabindex="0" role="alertdialog" aria-describedby="'+b.options.describedByAccesibleContent+'" aria-labelledby="your-progress"><div class="dialog-close-btn" data-icon="close-button" role="button" title="'+b.options.closeButtonHover+'" tabindex="0"></div><div class="content-wrapper"><h1 class="dialog-message" aria-labelledby="your-progress"><label id="your-progress" class="hidden-label">'+b.options.finalConfirmationMessage+"</label>"+b.options.finalConfirmationMessage+"</h1></div></div>"),this.addSharedDialogButtonHandlers("dialog-final-confirm")):c.show(),a&&!this.lmsconnected?$("#dialog-final-confirm").find("div.dialog-close-btn").hide():$("#dialog-final-confirm").find("div.dialog-close-btn").show(),$("#dialog-footer").empty().append("<p>"+b.options.footerMessage+"</p>"),$("body").find("#dialog-final-confirm").find("div.dialog-close-btn").focus(),b.toggleTabbing(!1),b.isSubmitted=!0,b.disableAllGadgets(),PearsonGL.globals.comm.finish()},hideDialogBoxes:function(){$("#dialog-confirm-before-submit, #dialog-confirm, #dialog-confirm-short, #dialog-final-confirm").hide(),$(".description-pop-up").remove()},printCurrentPage:function(){PearsonGL.utils.addJavascriptFileToDOM("js/html2canvas.min.js");var a,b,c,d,e=this,f=this.pageArray[this.options.currPageIndex],g=f.options.gadgetArray,h=[],i=g.length,j=this.pageArray[this.options.currPageIndex].options.id,k="",l="",m=!1;for($(".footer").hide(),c=0;i>c;c++)if(b=g[c].options,"HotSpot"===b.gadgetName)$(".hotspot").css("width","960px"),$(".pop-up").css({position:"relative","max-height":"none"}),$(".pop-up .container").css({"max-height":"none"});else if("MultipleLayers"===b.gadgetName){this.jObject.find(".multiple-layers").css("width","960px");var n=[],o=this.jObject.find(".ui-accordion-content");for(d=0;d<$(".ui-accordion-content").length;d++)"block"===o[d].style.display&&n.push(d);o.show(),this.jObject.find(".multi-layer-info-box").css({position:"relative"}),this.jObject.find(".info-layer-all").css({height:"auto","max-height":"none"})}html2canvas(document.body,{onrendered:function(f){for($(".print-shot").remove(),$("body").append('<div class="print-shot"></div>'),e.stopAll(),c=0;i>c;c++)if(b=g[c].options,void 0!==b.scorm&&void 0!==b.scorm.interactions)for(d=0;d<b.scorm.interactions.length;d++)h.push(b.scorm.interactions[d].description);e.options.runtimejson.printOptions&&e.options.runtimejson.printOptions.addCommonCore&&$(".sco").prepend('<div class="print-common-core" style="height:0">'+$(".footer-text").html()+"</div>"),k=$(".sco-title").html(),e.options.runtimejson.printOptions&&e.options.runtimejson.printOptions.addScoTitle&&void 0!==k&&$(".sco").prepend('<div class="print-sco-title" style="height:0">'+k+"</div>"),0===$(".print-div").length&&$(".print-shot").append('<div class="print-div"></div>'),a=$(".print-div"),$("#"+j+" textarea").each(function(){$(this).parent().hasClass("max-len-wrapper")&&($(".max-length-found").remove(),$(this).unwrap());var b=$(this).parent().find(".gadget-textblock").html(),c=$(this).parent().attr("id");if($(this).get(0).scrollHeight>$(this).height()&&(m=!0),""!==$(this).val()&&null!==$(this).val()){if(void 0!==b)a.append('<span class="print-title">'+b+"</span><br /><br />");else{var d=c.replace(/[^0-9]/g,"");l!==c&&(void 0!==h[d]&&a.append('<span class="group-title">'+h[d]+"</span><br /><br />"),l=c)}$(this).val()!==$(this).attr("placeholder")&&a.append($(this).val()+"<br /><br />")}}),m||a.remove(),$(".print-shot").prepend(f),$(".sco").hide(),window.print(),window.setTimeout(function(){if($(".first-page-title").remove(),$(".print-sco-title").remove(),$(".print-common-core").remove(),a.remove(),$(".print-shot").remove(),$(".footer").show(),$(".sco").show(),$(".hotspot").css("width",""),$(".pop-up").css({position:"absolute","max-height":""}),$(".pop-up .container").css({"max-height":""}),$(".ui-accordion-content").hide(),n)for(var b=0;b<n.length;b++)$(".ui-accordion-content")[n[b]].style.display="block";$(".multiple-layers").css("width",""),$(".info-layer-all").css({height:"","max-height":""}),$(".multi-layer-info-box").css({position:"",height:""})},500)}})}};var globalRuntimeJsonObj,product={},localData;window.PearsonGL=window.PearsonGL||{},window.PearsonGL.globals=window.PearsonGL.globals||{},window.PearsonGL.Player=function(){this.initialize()},window.PearsonGL.Player.prototype={initialize:function(){function a(a){var c;
PearsonGL.globals.useLocalStorage=b.settings.useLocalStorage,PearsonGL.globals.hasLocalStorage=!1,PearsonGL.globals.comm=new PearsonGL.CommunicationLayer(b.settings),page_theme="/theme/"+a.theme,$("link[data-themeLink=true]").attr("href","css"+page_theme+"/"+a.theme+".css").attr("data-theme-name",a.theme),PearsonGL.globals.comm.subscribeToPostMessages(b.processPostMessage.bind(b)),b.parmJson&&PearsonGL.parmMgr&&PearsonGL.parmMgr.parseParmJson(b.parmJson);var d=$.Deferred();b.sectionDeferreds=[],b.sectionDeferredMap={};var e=a.sections;for(c=0;c<e.length;c++)("footer"===e[c].sectiontype.toLowerCase()||"header"===e[c].sectiontype.toLowerCase())&&(b.sectionDeferredMap[e[c].sectiontype]=b.sectionDeferreds.length,b.sectionDeferreds[b.sectionDeferreds.length]=$.Deferred()),$("<div></div>").load(b.globalScoRootPath+"auth/"+e[c].sectionName+".json?q="+PearsonGL.utils.getQuerystring("q",""),function(c,e){if("error"!==e){var f=$.parseJSON(c);PearsonGL.utils.findAuthAssetUrl(f),b.sectionSelector(f,a,d,b.settings)}})}this.options={totalPages:0,pages:[]},this.utilDlinkText="",this.utilSkipNavText="",this.utilSkipLinkText="",this.utilDlinkWinTitle="",this.utilDlinkPointsText="",this.utilCloseDlinkText="",this.utilLongDescText="",this.utilLongDescTitle="",this.utilScreenReaderMode="",this.utilScreenReaderModeFeedback="",this.utilCloseDescText="",this.isTouch="ontouchstart"in document.documentElement,this.sectionLoadedDeferred=$.Deferred(),this.parmDeferred=$.Deferred(),this.hasShownFlashTrustedAlert=!1,this.settings={},this.scoJson={},this.globalScoRootPath="",PearsonGL.utils.browserDetect(),-1!==document.location.href.indexOf("player.html")?this.globalScoRootPath=document.location.href.split("player.html")[0]:-1!==document.location.href.indexOf("playerdev.html")&&(this.globalScoRootPath=document.location.href.split("playerdev.html")[0]);var b=this,c=this.globalScoRootPath+"auth/sco.json?q="+PearsonGL.utils.getQuerystring("q","");if(void 0!==c){var d=this;globalRuntimeJsonObj?(b.settings=globalRuntimeJsonObj,$.getJSON(c,function(c){b.scoJson=c,a(c)})):$.when($.getJSON(c,function(a){b.scoJson=a}),$.getJSON("config/runtime.json?q="+PearsonGL.utils.getQuerystring("q",""),function(a){$.extend(!0,b.settings,a),b.runtimeJson=a,b.runtimeJson.hasParmContent?$.getJSON("auth/parameters.json",function(a){b.parmJson=a}).always(function(){b.parmDeferred.resolve()}):b.parmDeferred.resolve()}),b.parmDeferred).then(function(){$.getJSON(b.globalScoRootPath+"auth/player.json?q="+PearsonGL.utils.getQuerystring("q",""),function(c){$.extend(!0,b.settings,c),a(b.scoJson)})}),$(window).bind("scroll.headerfix",function(){var a,b=$(window).scrollTop();void 0!==$("#header-id").offset()&&(a=$("#header-id").offset().top,Math.abs(b-a)>1&&($("#header-id").css("position","absolute"),window.setTimeout(function(){$("#header-id").css("position","fixed")},1)))}),$(window).bind("beforeunload",function(){d.exit()});var e=this;$("body").bind("touchstart",function(a){if(!(e.textInputType(a.target)&&a.target!==document.activeElement||$(a.target).hasClass("hackclass"))){var b=$("body").data("browserData"),c=b&&b.specialFlags&&b.specialFlags.isiOS8OrGreater;c||(e.textInputType()&&a.preventDefault(),window.top.postMessage({type:"touched"},"*"))}})}},textInputType:function(a){var b=a?a:document.activeElement,c=$(b).prop("tagName");return"TEXTAREA"===c||"INPUT"===c&&"text"===$(b).attr("type")||"INPUT"===c&&"password"===$(b).attr("type")||$(b).attr("contenteditable")?!0:!1},fixBlur:function(){this.isTouch&&this.textInputType()&&$("#header-skip").focus().blur()},processPostMessage:function(a){var b=$("body");if("string"==typeof a)try{if(a=$.parseJSON(evt.data),!a)return}catch(c){return}"touched"===a.type?this.fixBlur():"view"===a.type&&("setFont"===a.method&&a.payload?(b.toggleClass("nextext-small","small"===a.payload.fontSize),b.toggleClass("nextext-medium","medium"===a.payload.fontSize),b.toggleClass("nextext-large","large"===a.payload.fontSize)):"setMode"===a.method&&a.payload&&(b.toggleClass("nextext-default","default"===a.payload.mode),b.toggleClass("nextext-night","night"===a.payload.mode),b.toggleClass("nextext-sepia","sepia"===a.payload.mode)))},sectionSelector:function(a,b,c){var d=this;if("main"==a.type.toLowerCase())$.when.apply($,this.sectionDeferreds).done(function(){a.scoTotals=b.scoTotals,d.options.pages=new PearsonGL.Pages("."+a.type,a,d.settings),d.options.totalPages=a.pages.length,globalRuntimeJsonObj&&(d.options.pages.dialogType=globalRuntimeJsonObj.dialogType,d.options.pages.setSubmitDialogProperties()),d.setPagingButtonsEvents(),c.resolveWith(d)});else if("supplemental"===a.type.toLowerCase())c.done(function(){this.options.pages.setSupplementalPages(a)});else{var e;("footer"===a.type.toLowerCase()||"header"===a.type.toLowerCase())&&(e=this.sectionDeferreds[this.sectionDeferredMap[a.type]]),this.options[a.type]=new PearsonGL.Section("."+a.type,a,e,this.settings)}},loadingModal:function(){(void 0===this.options.pages.options.runtimejson.spinner||1==this.options.pages.options.runtimejson.spinner)&&($("body").append('<div class="loading"></div><div class="dialog-modal"></div>'),this.spinner=new Spinner({color:"#0072B4"}).spin(),$("body").find(".loading").append(this.spinner.el))},listenForKey:function(a,b){13===b.keyCode||32===b.keyCode?"next"===a?this.options.pages.updateIndex(this.options.pages.next(),this.options.totalPages):this.options.pages.updateIndex(this.options.pages.prev(),this.options.totalPages):9===b.keyCode&&"next"===a&&$(".logo").focus()},setPagingButtonsEvents:function(){var a=this,b=this.options.pages,c={buttonClassName:"prev",slider:!1},d={buttonClassName:"next",slider:!1};$("#prev").click(function(){b.isPrevDisabled||(global_player.loadingModal(),a.options.pages.updateIndex(a.options.pages.prev(),a.options.totalPages))}).keydown(function(c){b.isPrevDisabled||a.listenForKey("prev",c)}).sliderbutton(c),$("#next").click(function(){b.isNextDisabled?"noDialog"!==b.dialogType&&"review"!==b.scormMode&&"browse"!==b.scormMode&&b.isFooterSubmit&&!b.isNextLocked&&b.submit():(global_player.loadingModal(),a.options.pages.updateIndex(a.options.pages.next(),a.options.totalPages))}).keydown(function(c){b.isNextDisabled?"noDialog"!==b.dialogType&&"review"!==b.scormMode&&"browse"!==b.scormMode&&b.isFooterSubmit&&!b.isNextLocked&&13===c.keyCode&&b.submit():a.listenForKey("next",c)}).sliderbutton(d)},pageJumpAction:function(a){var b=this.options.pages;b.options.currPageIndex=a,b.populatePage(),b.setPagingButtonState()},about:function(){var a=this;$("body").click(function(b){if(b.altKey){var c=a.options.pages.options.aboutText;c=c.replace(/\{PV}/g,a.options.pages.options.runtimejson.productVersion),c=c.replace(/\{BV}/g,a.options.pages.options.runtimejson.base),c=c.replace(/\{ID}/g,PearsonGL.utils.getScoId()),alert(c)}})},exit:function(){this.options.pages.unloadAllGadgets(),global_player.options.pages.done(),PearsonGL.globals.comm.exit()},loadLocalStorage:function(a){a===!0&&(PearsonGL.globals.useLocalStorage=!0)},getCurrentPageData:function(){var a=this.options.pages;return{id:a.pageArray[a.options.currPageIndex].options.id,index:a.options.currPageIndex}},goToPage:function(a){this.options.pages.goToPage(a)}},PearsonGL.globals.player=new PearsonGL.Player,global_player=PearsonGL.globals.player;