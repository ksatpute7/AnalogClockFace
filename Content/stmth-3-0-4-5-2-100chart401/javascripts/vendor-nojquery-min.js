function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){FastClick.prototype.onClick.apply(c,arguments)},this.onTouchStart=function(){FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){FastClick.prototype.onTouchCancel.apply(c,arguments)},"undefined"!=typeof window.ontouchstart&&(a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}!function(){"use strict";var a="undefined"!=typeof window?window:global;if("function"!=typeof a.require){var b={},c={},d=function(a,b){return{}.hasOwnProperty.call(a,b)},e=function(a,b){var d,e,c=[];d=/^\.\.?(\/|$)/.test(b)?[a,b].join("/").split("/"):b.split("/");for(var f=0,g=d.length;g>f;f++)e=d[f],".."===e?c.pop():"."!==e&&""!==e&&c.push(e);return c.join("/")},f=function(a){return a.split("/").slice(0,-1).join("/")},g=function(b){return function(c){var d=f(b),g=e(d,c);return a.require(g)}},h=function(a,b){var d={id:a,exports:{}};b(d.exports,g(a),d);var e=c[a]=d.exports;return e},i=function(a){var f=e(a,".");if(d(c,f))return c[f];if(d(b,f))return h(f,b[f]);var g=e(f,"./index");if(d(c,g))return c[g];if(d(b,g))return h(g,b[g]);throw new Error('Cannot find module "'+a+'"')},j=function(a,c){if("object"==typeof a)for(var e in a)d(a,e)&&(b[e]=a[e]);else b[a]=c};a.require=i,a.require.define=j,a.require.register=j,a.require.brunch=!0}}(),function(){"use strict";var a="undefined"!=typeof window?window:global;if("function"!=typeof a.require){var b={},c={},d=function(a,b){return{}.hasOwnProperty.call(a,b)},e=function(a,b){var d,e,c=[];d=/^\.\.?(\/|$)/.test(b)?[a,b].join("/").split("/"):b.split("/");for(var f=0,g=d.length;g>f;f++)e=d[f],".."===e?c.pop():"."!==e&&""!==e&&c.push(e);return c.join("/")},f=function(a){return a.split("/").slice(0,-1).join("/")},g=function(b){return function(c){var d=f(b),g=e(d,c);return a.require(g)}},h=function(a,b){var d={id:a,exports:{}};b(d.exports,g(a),d);var e=c[a]=d.exports;return e},i=function(a){var f=e(a,".");if(d(c,f))return c[f];if(d(b,f))return h(f,b[f]);var g=e(f,"./index");if(d(c,g))return c[g];if(d(b,g))return h(g,b[g]);throw new Error('Cannot find module "'+a+'"')},j=function(a,c){if("object"==typeof a)for(var e in a)d(a,e)&&(b[e]=a[e]);else b[a]=c};a.require=i,a.require.define=j,a.require.register=j,a.require.brunch=!0}}(),function(a){for(var b,c=function(){},d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");b=d.pop();)a[b]=a[b]||c}(window.console=window.console||{}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?(this._wrapped=a,void 0):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var c,b=!1;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var g,a=this,b=a.Backbone,c=[],d=c.push,e=c.slice,f=c.splice;g="undefined"!=typeof exports?exports:a.Backbone={},g.VERSION="1.0.0";var h=a._;h||"undefined"==typeof require||(h=require("underscore")),g.$=a.jQuery||a.Zepto||a.ender||a.$,g.noConflict=function(){return a.Backbone=b,this},g.emulateHTTP=!1,g.emulateJSON=!1;var i=g.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=e.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(g,i);var n=g.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),b.trigger("sync",b,d,a),void 0):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),i.trigger("sync",i,a,c),void 0)},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=e.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=g.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,e,g,j,k,l=b.at,m=this.comparator&&null==l&&b.sort!==!1,n=h.isString(this.comparator)?this.comparator:null,o=[],p=[],q={};for(c=0,e=a.length;e>c;c++)(g=this._prepareModel(a[c],b))&&((j=this.get(g))?(b.remove&&(q[j.cid]=!0),b.merge&&(j.set(g.attributes,b),m&&!k&&j.hasChanged(n)&&(k=!0))):b.add&&(o.push(g),g.on("all",this._onModelEvent,this),this._byId[g.cid]=g,null!=g.id&&(this._byId[g.id]=g)));if(b.remove){for(c=0,e=this.length;e>c;++c)q[(g=this.models[c]).cid]||p.push(g);p.length&&this.remove(p,b)}if(o.length&&(m&&(k=!0),this.length+=o.length,null!=l?f.apply(this.models,[l,0].concat(o)):d.apply(this.models,o)),k&&this.sort({silent:!0}),b.silent)return this;for(c=0,e=o.length;e>c;c++)(g=o[c]).trigger("add",g,this,b);return k&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=e.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=g.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof g.$?a:g.$(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var a=h.extend({},h.result(this,"attributes"));this.id&&(a.id=h.result(this,"id")),this.className&&(a["class"]=h.result(this,"className"));var b=g.$("<"+h.result(this,"tagName")+">").attr(a);this.setElement(b,!1)}}}),g.sync=function(a,b,c){var d=y[a];h.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var e={type:d,dataType:"json"};if(c.url||(e.url=h.result(b,"url")||K()),null!=c.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(e.contentType="application/json",e.data=JSON.stringify(c.attrs||b.toJSON(c))),c.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{}),c.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===d)){e.type="POST",c.emulateJSON&&(e.data._method=d);var f=c.beforeSend;c.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",d),f?f.apply(this,arguments):void 0}}"GET"===e.type||c.emulateJSON||(e.processData=!1),"PATCH"!==e.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(e.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=c.xhr=g.ajax(h.extend(e,c));return b.trigger("request",b,i,c),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var z=g.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(a,b,c){h.isRegExp(a)||(a=this._routeToRegExp(a)),h.isFunction(b)&&(c=b,b=""),c||(c=this[b]);var d=this;return g.history.route(a,function(e){var f=d._extractParameters(a,e);c&&c.apply(d,f),d.trigger.apply(d,["route:"+b].concat(f)),d.trigger("route",b,f),g.history.trigger("route",d,b,f)}),this},navigate:function(a,b){return g.history.navigate(a,b),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=g.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)
},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(a){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var b=this.getFragment(),c=document.documentMode,d=H.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);this.root=("/"+this.root+"/").replace(G,"/"),d&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?g.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?g.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b;var e=this.location,f=e.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&f&&e.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),g.history=new E;var J=function(a,b){var d,c=this;d=a&&h.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)},h.extend(d,c,b);var e=function(){this.constructor=d};return e.prototype=c.prototype,d.prototype=new e,a&&h.extend(d.prototype,a),d.__super__=c.prototype,d};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),function(){var a={backbone:window.Backbone,underscore:window._};for(var b in a)!function(b){var c={};c[b]=function(c,d,e){e.exports=a[b]};try{require(item)}catch(d){require.define(c)}}(b)}(),require.define({"chaplin/application":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l;l=b("underscore"),e=b("backbone"),k=b("chaplin/mediator"),g=b("chaplin/dispatcher"),i=b("chaplin/views/layout"),f=b("chaplin/composer"),j=b("chaplin/lib/router"),h=b("chaplin/lib/event_broker"),c.exports=d=function(){function a(){}return a.extend=e.Model.extend,l.extend(a.prototype,h),a.prototype.title="",a.prototype.dispatcher=null,a.prototype.layout=null,a.prototype.router=null,a.prototype.composer=null,a.prototype.initialize=function(){},a.prototype.initDispatcher=function(a){return this.dispatcher=new g(a)},a.prototype.initLayout=function(a){var b;return null==a&&(a={}),null==(b=a.title)&&(a.title=this.title),this.layout=new i(a)},a.prototype.initComposer=function(a){return null==a&&(a={}),this.composer=new f(a)},a.prototype.initRouter=function(a,b){return this.router=new j(b),"function"==typeof a?a(this.router.match):void 0},a.prototype.startRouting=function(){return this.router.startHistory()},a.prototype.disposed=!1,a.prototype.dispose=function(){var a,b,c,d;if(!this.disposed){for(b=["dispatcher","layout","router","composer"],c=0,d=b.length;d>c;c++)a=b[c],null!=this[a]&&(this[a].dispose(),delete this[a]);return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},a}()}}),require.define({"chaplin/mediator":function(a,b,c){"use strict";var d,e,f,g;d=b("backbone"),f=b("chaplin/lib/support"),g=b("chaplin/lib/utils"),e={},e.subscribe=d.Events.on,e.unsubscribe=d.Events.off,e.publish=d.Events.trigger,e._callbacks=null,g.readonly(e,"subscribe","unsubscribe","publish"),e.seal=function(){return f.propertyDescriptors&&Object.seal?Object.seal(e):void 0},g.readonly(e,"seal"),c.exports=e}}),require.define({"chaplin/dispatcher":function(a,b,c){"use strict";var d,e,f,g,h;h=b("underscore"),d=b("backbone"),g=b("chaplin/lib/utils"),f=b("chaplin/lib/event_broker"),c.exports=e=function(){function a(){this.initialize.apply(this,arguments)}return a.extend=d.Model.extend,h.extend(a.prototype,f),a.prototype.previousRoute=null,a.prototype.currentController=null,a.prototype.currentRoute=null,a.prototype.currentParams=null,a.prototype.initialize=function(a){return null==a&&(a={}),this.settings=h.defaults(a,{controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("router:match",this.dispatch)},a.prototype.dispatch=function(a,b,c){var d,e,f=this;return b=b?h.clone(b):{},c=c?h.clone(c):{},c.changeURL!==!1&&(c.changeURL=!0),c.forceStartup!==!0&&(c.forceStartup=!1),c.forceStartup||(null!=(d=this.currentRoute)?d.controller:void 0)!==a.controller||(null!=(e=this.currentRoute)?e.action:void 0)!==a.action||!h.isEqual(this.currentParams,b)?this.loadController(a.controller,function(d){return f.controllerLoaded(a,b,c,d)}):void 0},a.prototype.loadController=function(a,c){var d,e;return d=a+this.settings.controllerSuffix,e=this.settings.controllerPath+d,("undefined"!=typeof define&&null!==define?define.amd:void 0)?b([e],c):c(b(e))},a.prototype.controllerLoaded=function(a,b,c,d){var e;return this.previousRoute=this.currentRoute,this.currentRoute=h.extend({},a,{previous:g.beget(this.previousRoute)}),e=new d(b,this.currentRoute,c),this.executeBeforeAction(e,this.currentRoute,b,c)},a.prototype.executeAction=function(a,b,c,d){return this.currentController&&(this.publishEvent("beforeControllerDispose",this.currentController),this.currentController.dispose(c,b,d)),a[b.action](c,b,d),this.currentController=a,this.currentParams=c,a.redirected?void 0:(this.adjustURL(b,c,d),this.publishEvent("dispatcher:dispatch",this.currentController,c,b,d))},a.prototype.executeBeforeAction=function(a,b,c,d){var e,f,g,h=this;if(e=a.beforeAction,f=function(){return a.redirected||h.currentRoute&&b!==h.currentRoute?(a.dispose(),void 0):h.executeAction(a,b,c,d)},!e)return f(),void 0;if("function"!=typeof e)throw new TypeError("Controller#beforeAction: function expected. Old object-like form is not supported.");return g=a.beforeAction(c,b,d),g&&g.then?g.then(f):f()},a.prototype.adjustURL=function(a,b,c){var d;if(null!=a.path)return d=a.path+(a.query?"?"+a.query:""),c.changeURL?this.publishEvent("!router:changeURL",d,c):void 0},a.prototype.disposed=!1,a.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},a}()}}),require.define({"chaplin/composer":function(a,b,c){"use strict";var d,e,f,g,h,i;i=b("underscore"),d=b("backbone"),h=b("chaplin/lib/utils"),f=b("chaplin/lib/composition"),g=b("chaplin/lib/event_broker"),c.exports=e=function(){function a(){this.initialize.apply(this,arguments)}return a.extend=d.Model.extend,i.extend(a.prototype,g),a.prototype.compositions=null,a.prototype.initialize=function(a){return null==a&&(a={}),this.compositions={},this.subscribeEvent("!composer:compose",this.compose),this.subscribeEvent("!composer:retrieve",this.retrieve),this.subscribeEvent("dispatcher:dispatch",this.cleanup)},a.prototype.compose=function(a,b,c){return"function"==typeof b?c||b.prototype.dispose?b.prototype instanceof f?this._compose(a,{composition:b,options:c}):this._compose(a,{options:c,compose:function(){var a,c;return this.item=new b(this.options),a=this.item.autoRender,c=void 0===a||!a,c&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(a,{compose:b}):"function"==typeof c?this._compose(a,{compose:c,options:b}):this._compose(a,b)},a.prototype._compose=function(a,b){var c,d;if("function"!=typeof b.compose&&null==b.composition)throw new Error("Composer#compose was used incorrectly");return null!=b.composition?c=new b.composition(b.options):(c=new f(b.options),c.compose=b.compose,b.check&&(c.check=b.check)),d=this.compositions[a],d&&d.check(c.options)?d.stale(!1):(d&&d.dispose(),c.compose(c.options),c.stale(!1),this.compositions[a]=c),this.compositions[a]},a.prototype.retrieve=function(a,b){var c,d;return c=this.compositions[a],d=c&&!c.stale()?c.item:void 0,b(d)},a.prototype.cleanup=function(){var a,b,c;c=this.compositions;for(b in c)a=c[b],a.stale()?(a.dispose(),delete this.compositions[b]):a.stale(!0)},a.prototype.dispose=function(){var a,b,c;if(!this.disposed){this.unsubscribeAllEvents(),c=this.compositions;for(b in c)a=c[b],a.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},a}()}}),require.define({"chaplin/controllers/controller":function(a,b,c){"use strict";var d,e,f,g,h={}.hasOwnProperty;g=b("underscore"),d=b("backbone"),f=b("chaplin/lib/event_broker"),c.exports=e=function(){function a(){this.initialize.apply(this,arguments)}return a.extend=d.Model.extend,g.extend(a.prototype,d.Events),g.extend(a.prototype,f),a.prototype.view=null,a.prototype.redirected=!1,a.prototype.initialize=function(){},a.prototype.beforeAction=function(){},a.prototype.adjustTitle=function(a){return this.publishEvent("!adjustTitle",a)},a.prototype.compose=function(a,b,c){var d;return 1===arguments.length?(d=null,this.publishEvent("!composer:retrieve",a,function(a){return d=a}),d):this.publishEvent("!composer:compose",a,b,c)},a.prototype.redirectTo=function(a,b){return null==b&&(b={}),this.redirected=!0,this.publishEvent("!router:route",a,b,function(a){if(!a)throw new Error("Controller#redirectTo: no route matched")})},a.prototype.redirectToRoute=function(a,b,c){return this.redirected=!0,this.publishEvent("!router:routeByName",a,b,c,function(a){if(!a)throw new Error("Controller#redirectToRoute: no route matched")})},a.prototype.disposed=!1,a.prototype.dispose=function(){var a,b;if(!this.disposed){for(b in this)h.call(this,b)&&(a=this[b],a&&"function"==typeof a.dispose&&(a.dispose(),delete this[b]));return this.unsubscribeAllEvents(),this.stopListening(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},a}()}}),require.define({"chaplin/models/collection":function(a,b,c){"use strict";var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};i=b("underscore"),d=b("backbone"),f=b("chaplin/lib/event_broker"),g=b("chaplin/models/model"),h=b("chaplin/lib/utils"),c.exports=e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return k(b,a),i.extend(b.prototype,f),b.prototype.model=g,b.prototype.serialize=function(){return this.map(h.serialize)},b.prototype.disposed=!1,b.prototype.dispose=function(){var a,b,c,d;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),b=["model","models","_byId","_byCid","_callbacks"],c=0,d=b.length;d>c;c++)a=b[c],delete this[a];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},b}(d.Collection)}}),require.define({"chaplin/models/model":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function d(){this.constructor=a}for(var c in b)k.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};j=b("underscore"),d=b("backbone"),i=b("chaplin/lib/utils"),e=b("chaplin/lib/event_broker"),g=function(a,b,c){var e,f,g,j,k,l,m,n;e=i.beget(b),null==c&&(c={}),c[a.cid]=!0;for(f in b)if(k=b[f],k instanceof d.Model)e[f]=h(k,a,c);else if(k instanceof d.Collection){for(j=[],n=k.models,l=0,m=n.length;m>l;l++)g=n[l],j.push(h(g,a,c));e[f]=j}return delete c[a.cid],e},h=function(a,b,c){var d;return a===b||j.has(c,a.cid)?null:(d="function"==typeof a.getAttributes?a.getAttributes():a.attributes,g(a,d,c))},c.exports=f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return l(b,a),j.extend(b.prototype,e),b.prototype.getAttributes=function(){return this.attributes},b.prototype.serialize=function(){return g(this,this.getAttributes())},b.prototype.disposed=!1,b.prototype.dispose=function(){var a,b,c,d;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),b=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],c=0,d=b.length;d>c;c++)a=b[c],delete this[a];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},b}(d.Model)}}),require.define({"chaplin/views/layout":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l={}.hasOwnProperty,m=function(a,b){function d(){this.constructor=a}for(var c in b)l.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};j=b("underscore"),e=b("backbone"),i=b("chaplin/lib/utils"),f=b("chaplin/lib/event_broker"),h=b("chaplin/views/view"),d=e.$,c.exports=g=function(a){function b(a){null==a&&(a={}),this.openLink=k(this.openLink,this),this.globalRegions=[],this.title=a.title,a.regions&&(this.regions=a.regions),this.settings=j.defaults(a,{titleTemplate:j.template("<%= subtitle %> – <%= title %>"),openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),b.__super__.constructor.apply(this,arguments),this.settings.routeLinks&&this.startLinkRouting()}return m(b,a),b.prototype.el="body",b.prototype.keepElement=!0,b.prototype.title="",b.prototype.globalRegions=null,b.prototype.listen={"beforeControllerDispose mediator":"scroll","!adjustTitle mediator":"adjustTitle","!region:show mediator":"showRegion","!region:register mediator":"registerRegionHandler","!region:unregister mediator":"unregisterRegionHandler"},b.prototype.scroll=function(){var b;return b=this.settings.scrollTo,b?window.scrollTo(b[0],b[1]):void 0},b.prototype.adjustTitle=function(a){var b;return null==a&&(a=""),b=this.settings.titleTemplate({title:this.title,subtitle:a}),setTimeout(function(){return document.title=b},50)},b.prototype.startLinkRouting=function(){var a;return a=this.settings.routeLinks,a?this.$el.on("click",a,this.openLink):void 0},b.prototype.stopLinkRouting=function(){var a;return a=this.settings.routeLinks,a?this.$el.off("click",a):void 0},b.prototype.isExternalLink=function(a){var b,c;return"_blank"===a.target||"external"===a.rel||"http:"!==(b=a.protocol)&&"https:"!==b&&"file:"!==b||(c=a.hostname)!==location.hostname&&""!==c},b.prototype.openLink=function(a){var b,c,e,f,g,h,j,k,l,m,n,o;if(!(i.modifierKeyPressed(a)||(e=a.currentTarget,b=d(e),h="A"===e.nodeName,g=b.attr("href")||b.data("href")||null,null===g||void 0===g||""===g||"#"===g.charAt(0)||(m=this.settings.skipRouting,n=typeof m,"function"===n&&!m(g,e)||"string"===n&&b.is(m))))){if(f=h&&this.isExternalLink(e))return this.settings.openExternalToBlank&&(a.preventDefault(),window.open(e.href)),void 0;h?(k=e.pathname,l=e.search.substring(1),"/"!==k.charAt(0)&&(k="/"+k)):(o=g.split("?"),k=o[0],l=o[1],null==l&&(l="")),j={query:l},c=function(b){b?a.preventDefault():h||(location.href=k)},this.publishEvent("!router:route",k,j,c)}},b.prototype.registerRegionHandler=function(a,b,c){return null!=b?this.registerGlobalRegion(a,b,c):this.registerGlobalRegions(a)},b.prototype.registerGlobalRegion=function(a,b,c){return this.unregisterGlobalRegion(a,b),this.globalRegions.unshift({instance:a,name:b,selector:c})},b.prototype.registerGlobalRegions=function(a){var b,c,d,e,f,g;for(g=i.getAllPropertyVersions(a,"regions"),e=0,f=g.length;f>e;e++){d=g[e];for(c in d)b=d[c],this.registerGlobalRegion(a,b,c)}},b.prototype.unregisterRegionHandler=function(a,b){return null!=b?this.unregisterGlobalRegion(a,b):this.unregisterGlobalRegions(a)},b.prototype.unregisterGlobalRegion=function(a,b){var c;return c=a.cid,this.globalRegions=j.filter(this.globalRegions,function(a){return a.instance.cid!==c||a.name!==b})},b.prototype.unregisterGlobalRegions=function(a){return this.globalRegions=j.filter(this.globalRegions,function(b){return b.instance.cid!==a.cid})},b.prototype.showRegion=function(a,b){var c;if(c=j.find(this.globalRegions,function(b){return b.name===a&&!b.instance.stale}),!c)throw new Error("No region registered under "+a);return b.container=""===c.selector?c.instance.$el:c.instance.$(c.selector)},b.prototype.dispose=function(){var a,c,d,e;if(!this.disposed){for(this.stopLinkRouting(),e=["globalRegions","title","route"],c=0,d=e.length;d>c;c++)a=e[c],delete this[a];return b.__super__.dispose.apply(this,arguments)}},b}(h)}}),require.define({"chaplin/views/view":function(a,b,c){"use strict";var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};i=b("underscore"),e=b("backbone"),h=b("chaplin/lib/utils"),f=b("chaplin/lib/event_broker"),d=e.$,c.exports=g=function(a){function b(a){var c,d=this;a&&i.extend(this,i.pick(a,["autoAttach","autoRender","container","containerMethod","region"])),c=this.render,this.render=function(){return d.disposed?!1:(c.apply(d,arguments),d.autoAttach&&d.attach.apply(d,arguments),d)},this.subviews=[],this.subviewsByName={},b.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",function(a){return a&&a!==d.collection?void 0:d.dispose()}),null!=this.regions&&this.publishEvent("!region:register",this),this.autoRender&&this.render()}return k(b,a),i.extend(b.prototype,f),b.prototype.keepElement=!1,b.prototype.autoRender=!1,b.prototype.autoAttach=!0,b.prototype.container=null,b.prototype.containerMethod="append",b.prototype.regions=null,b.prototype.region=null,b.prototype.subviews=null,b.prototype.subviewsByName=null,b.prototype.stale=!1,b.prototype.delegate=function(a,b,c){var d,e,f,g,h,j=this;if("string"!=typeof a)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)f=b;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(h=b,"string"!=typeof h)throw new TypeError("View#delegate: second argument must be a string");f=c}if("function"!=typeof f)throw new TypeError("View#delegate: handler argument must be function");return g=i.map(a.split(" "),function(a){return""+a+".delegate"+j.cid}),e=g.join(" "),d=i.bind(f,this),this.$el.on(e,h||null,d),d},b.prototype._delegateEvents=function(a){var b,c,d,e,f,g,h;for(e in a){if(h=a[e],d="function"==typeof h?h:this[h],!d)throw new Error("Method '"+d+"' does not exist");f=e.match(/^(\S+)\s*(.*)$/),c=""+f[1]+".delegateEvents"+this.cid,g=f[2],b=i.bind(d,this),this.$el.on(c,g||null,b)}},b.prototype.delegateEvents=function(a){var b,c,d,e;if(this.undelegateEvents(),a)return this._delegateEvents(a),void 0;if(this.events)for(e=h.getAllPropertyVersions(this,"events"),c=0,d=e.length;d>c;c++){if(b=e[c],"function"==typeof b)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(b)}},b.prototype.undelegate=function(){return this.$el.unbind(".delegate"+this.cid)},b.prototype.delegateListeners=function(){var a,b,c,d,e,f,g,i,j;if(this.listen)for(i=h.getAllPropertyVersions(this,"listen"),f=0,g=i.length;g>f;f++){e=i[f];for(b in e){if(c=e[b],"function"!=typeof c&&(c=this[c]),"function"!=typeof c)throw new Error("View#delegateListeners: "+(""+c+" must be function"));j=b.split(" "),a=j[0],d=j[1],this.delegateListener(a,d,c)}}},b.prototype.delegateListener=function(a,b,c){var d;"model"===b||"collection"===b?(d=this[b],d&&this.listenTo(d,a,c)):"mediator"===b?this.subscribeEvent(a,c):b||this.on(a,c,this)},b.prototype.registerRegion=function(a,b){return this.publishEvent("!region:register",this,b,a)},b.prototype.unregisterRegion=function(a){return this.publishEvent("!region:unregister",this,a)},b.prototype.unregisterAllRegions=function(){return this.publishEvent("!region:unregister",this)},b.prototype.subview=function(a,b){var c,d;return d=this.subviews,c=this.subviewsByName,a&&b?(this.removeSubview(a),d.push(b),c[a]=b,b):a?c[a]:void 0},b.prototype.removeSubview=function(a){var b,c,d,e,f,g,h;if(a){if(g=this.subviews,b=this.subviewsByName,"string"==typeof a)d=a,h=b[d];else{h=a;for(e in b)if(f=b[e],h===f){d=e;break}}if(d&&h&&h.dispose)return h.dispose(),c=i.indexOf(g,h),-1!==c&&g.splice(c,1),delete b[d]}},b.prototype.getTemplateData=function(){var a,b;return a=this.model?h.serialize(this.model):this.collection?{items:h.serialize(this.collection),length:this.collection.length}:{},b=this.model||this.collection,b&&("function"!=typeof b.isSynced||"synced"in a||(a.synced=b.isSynced())),a},b.prototype.getTemplateFunction=function(){throw new Error("View#getTemplateFunction must be overridden")},b.prototype.render=function(){var a,b;return this.disposed?!1:(b=this.getTemplateFunction(),"function"==typeof b&&(a=b(this.getTemplateData()),this.$el.html(a)),this)},b.prototype.attach=function(){return null!=this.region&&this.publishEvent("!region:show",this.region,this),this.container?(d(this.container)[this.containerMethod](this.el),this.trigger("addedToDOM")):void 0},b.prototype.disposed=!1,b.prototype.dispose=function(){var a,b,c,d,e,f,g,h;if(!this.disposed){for(this.unregisterAllRegions(),h=this.subviews,d=0,f=h.length;f>d;d++)c=h[d],c.dispose();for(this.unsubscribeAllEvents(),this.off(),this.keepElement?(this.undelegateEvents(),this.undelegate(),this.stopListening()):this.remove(),b=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],e=0,g=b.length;g>e;e++)a=b[e],delete this[a];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},b}(e.View)}}),require.define({"chaplin/views/collection_view":function(a,b,c){"use strict";var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};h=b("underscore"),e=b("backbone"),g=b("chaplin/views/view"),d=e.$,c.exports=f=function(a){function b(a){this.renderAllItems=i(this.renderAllItems,this),this.toggleFallback=i(this.toggleFallback,this),this.itemsReset=i(this.itemsReset,this),this.itemRemoved=i(this.itemRemoved,this),this.itemAdded=i(this.itemAdded,this),a&&h.extend(this,h.pick(a,["renderItems","itemView"])),this.visibleItems=[],b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.itemView=null,b.prototype.autoRender=!0,b.prototype.renderItems=!0,b.prototype.animationDuration=500,b.prototype.useCssAnimation=!1,b.prototype.animationStartClass="animated-item-view",b.prototype.animationEndClass="animated-item-view-end",b.prototype.listSelector=null,b.prototype.$list=null,b.prototype.fallbackSelector=null,b.prototype.$fallback=null,b.prototype.loadingSelector=null,b.prototype.$loading=null,b.prototype.itemSelector=null,b.prototype.filterer=null,b.prototype.filterCallback=function(a,b){return a.$el.stop(!0,!0).toggle(b)},b.prototype.visibleItems=null,b.prototype.initialize=function(a){return null==a&&(a={}),this.addCollectionListeners(),null!=a.filterer?this.filter(a.filterer):void 0},b.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},b.prototype.getTemplateData=function(){var a;return a={length:this.collection.length},"function"==typeof this.collection.isSynced&&(a.synced=this.collection.isSynced()),a},b.prototype.getTemplateFunction=function(){},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$list=this.listSelector?this.$(this.listSelector):this.$el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},b.prototype.itemAdded=function(a,b,c){return this.insertView(a,this.renderItem(a),c.at)},b.prototype.itemRemoved=function(a){return this.removeViewForItem(a)},b.prototype.itemsReset=function(){return this.renderAllItems()},b.prototype.initFallback=function(){return this.fallbackSelector?(this.$fallback=this.$(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},b.prototype.toggleFallback=function(){var a;return a=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),this.$fallback.toggle(a)},b.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(this.$loading=this.$(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},b.prototype.toggleLoadingIndicator=function(){var a;return a=0===this.collection.length&&this.collection.isSyncing(),this.$loading.toggle(a)},b.prototype.getItemViews=function(){var a,b,c,d;if(a={},this.subviews.length>0){d=this.subviewsByName;for(b in d)c=d[b],"itemView:"===b.slice(0,9)&&(a[b.slice(9)]=c)}return a},b.prototype.filter=function(a,b){var c,d,e,f,g,i,j;if(this.filterer=a,b&&(this.filterCallback=b),null==b&&(b=this.filterCallback),!h.isEmpty(this.getItemViews()))for(j=this.collection.models,d=g=0,i=j.length;i>g;d=++g){if(e=j[d],c="function"==typeof a?a(e,d):!0,f=this.subview("itemView:"+e.cid),!f)throw new Error("CollectionView#filter: "+("no view found for "+e.cid));this.filterCallback(f,c),this.updateVisibleItems(f.model,c,!1)}return this.trigger("visibilityChange",this.visibleItems)},b.prototype.renderAllItems=function(){var a,b,c,d,e,f,g,h,i,k,l;for(d=this.collection.models,this.visibleItems=[],e={},g=0,i=d.length;i>g;g++)c=d[g],f=this.subview("itemView:"+c.cid),f&&(e[c.cid]=f);l=this.getItemViews();for(a in l)j.call(l,a)&&(f=l[a],a in e||this.removeSubview("itemView:"+a));for(b=h=0,k=d.length;k>h;b=++h)c=d[b],f=this.subview("itemView:"+c.cid),f?this.insertView(c,f,b,!1):this.insertView(c,this.renderItem(c),b);return 0===d.length?this.trigger("visibilityChange",this.visibleItems):void 0},b.prototype.renderItem=function(a){var b;return b=this.subview("itemView:"+a.cid),b||(b=this.initItemView(a),this.subview("itemView:"+a.cid,b)),b.render(),b},b.prototype.initItemView=function(a){if(this.itemView)return new this.itemView({model:a,autoRender:!1});throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},b.prototype.insertView=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=this;null==d&&(d=!0),0===this.animationDuration&&(d=!1),"number"!=typeof c&&(c=this.collection.indexOf(a)),k="function"==typeof this.filterer?this.filterer(a,c):!0,p=b.el,h=b.$el,k&&d&&(this.useCssAnimation?h.addClass(this.animationStartClass):h.css("opacity",0)),this.filterer&&this.filterCallback(b,k),n=this.collection.length,l=c>0&&n>c,m=function(a){return 0===a||c===a},e=this.$list,l||this.itemSelector?(i=e.children(this.itemSelector),j=i.length,i.get(c)!==p&&(m(j)?e.append(p):0===c?(f=i.eq(c),f.before(p)):(g=i.eq(c-1),g.after(p)))):(o=m(n)?"append":"prepend",e[o](p)),b.trigger("addedToParent"),this.updateVisibleItems(a,k),k&&d&&(this.useCssAnimation?setTimeout(function(){return h.addClass(q.animationEndClass)},0):h.animate({opacity:1},this.animationDuration))},b.prototype.removeViewForItem=function(a){return this.updateVisibleItems(a,!1),this.removeSubview("itemView:"+a.cid)},b.prototype.updateVisibleItems=function(a,b,c){var d,e,f;return null==c&&(c=!0),e=!1,f=h.indexOf(this.visibleItems,a),d=-1!==f,b&&!d?(this.visibleItems.push(a),e=!0):!b&&d&&(this.visibleItems.splice(f,1),e=!0),e&&c&&this.trigger("visibilityChange",this.visibleItems),e},b.prototype.dispose=function(){var a,c,d,e;if(!this.disposed){for(c=["$list","$fallback","$loading","visibleItems"],d=0,e=c.length;e>d;d++)a=c[d],delete this[a];return b.__super__.dispose.apply(this,arguments)}},b}(g)}}),require.define({"chaplin/lib/route":function(a,b,c){"use strict";var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty;h=b("underscore"),d=b("backbone"),f=b("chaplin/lib/event_broker"),e=b("chaplin/controllers/controller"),c.exports=g=function(){function b(a,b,c,d){var f;if(this.pattern=a,this.controller=b,this.action=c,this.handler=i(this.handler,this),this.addParamName=i(this.addParamName,this),h.isRegExp(this.pattern))throw new Error("Route: RegExps are not supported.        Use strings with :names and `constraints` option of route");if(this.options=d?h.clone(d):{},null!=this.options.name&&(this.name=this.options.name),this.name&&-1!==this.name.indexOf("#"))throw new Error('Route: "#" cannot be used in name');if(null==(f=this.name)&&(this.name=this.controller+"#"+this.action),this.paramNames=[],h.has(e.prototype,this.action))throw new Error("Route: You should not use existing controller properties as action names");this.createRegExp(),"function"==typeof Object.freeze&&Object.freeze(this)}var a;return b.extend=d.Model.extend,h.extend(b.prototype,f),a=/[-[\]{}()+?.,\\^$|#\s]/g,b.prototype.matches=function(a){var b,c,d,e,f;if("string"==typeof a)return a===this.name;for(f=["name","action","controller"],d=0,e=f.length;e>d;d++)if(b=f[d],c=a[b],c&&c!==this[b])return!1;return!0},b.prototype.reverse=function(a){var b,c,d,e,f,g,i;if(d=this.pattern,h.isArray(a)){if(a.length<this.paramNames.length)return!1;b=0,d=d.replace(/[:*][^\/\?]+/g,function(){var d;return d=a[b],b+=1,d})}else for(i=this.paramNames,f=0,g=i.length;g>f;f++){if(c=i[f],e=a[c],void 0===e)return!1;d=d.replace(RegExp("[:*]"+c,"g"),e)}return this.test(d)?d:!1},b.prototype.createRegExp=function(){var b;return b=this.pattern.replace(a,"\\$&").replace(/(?::|\*)(\w+)/g,this.addParamName),this.regExp=RegExp("^"+b+"(?=\\?|$)")},b.prototype.addParamName=function(a,b){return this.paramNames.push(b),":"===a.charAt(0)?"([^/?]+)":"(.*?)"},b.prototype.test=function(a){var b,c,d,e,f;if(d=this.regExp.test(a),!d)return!1;if(c=this.options.constraints){f=this.extractParams(a);for(e in c)if(j.call(c,e)&&(b=c[e],!b.test(f[e])))return!1}return!0},b.prototype.handler=function(a,b){var c,d,e,f;return b=b?h.clone(b):{},d=null!=(f=b.query)?f:this.getCurrentQuery(),c=this.buildParams(a,d),e={path:a,action:this.action,controller:this.controller,name:this.name,query:d},delete b.query,this.publishEvent("router:match",e,c,b)
},b.prototype.getCurrentQuery=function(){return location.search.substring(1)},b.prototype.buildParams=function(a,b){return h.extend({},this.extractQueryParams(b),this.extractParams(a),this.options.params)},b.prototype.extractParams=function(a){var b,c,d,e,f,g,h,i;for(f={},d=this.regExp.exec(a),i=d.slice(1),b=g=0,h=i.length;h>g;b=++g)c=i[b],e=this.paramNames.length?this.paramNames[b]:b,f[e]=c;return f},b.prototype.extractQueryParams=function(a){var b,c,d,e,f,g,h,i,j;if(f={},!a)return f;for(e=a.split("&"),h=0,i=e.length;i>h;h++)d=e[h],d.length&&(j=d.split("="),c=j[0],g=j[1],c.length&&(c=decodeURIComponent(c),g=decodeURIComponent(g),b=f[c],b?b.push?b.push(g):f[c]=[b,g]:f[c]=g));return f},b}()}}),require.define({"chaplin/lib/router":function(a,b,c){"use strict";var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}};i=b("underscore"),d=b("backbone"),e=b("chaplin/lib/event_broker"),f=b("chaplin/lib/route"),h=b("chaplin/lib/utils"),c.exports=g=function(){function a(a){this.options=null!=a?a:{},this.route=j(this.route,this),this.match=j(this.match,this),i.defaults(this.options,{pushState:!0,root:"/"}),this.removeRoot=new RegExp("^"+h.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.routeHandler),this.subscribeEvent("!router:routeByName",this.routeByNameHandler),this.subscribeEvent("!router:reverse",this.reverseHandler),this.subscribeEvent("!router:changeURL",this.changeURLHandler),this.createHistory()}return a.extend=d.Model.extend,i.extend(a.prototype,e),a.prototype.createHistory=function(){return d.history||(d.history=new d.History)},a.prototype.startHistory=function(){return d.history.start(this.options)},a.prototype.stopHistory=function(){return d.History.started?d.history.stop():void 0},a.prototype.match=function(a,b,c){var e,g,h,i;if(null==c&&(c={}),2===arguments.length&&"object"==typeof b){if(c=b,g=c.controller,e=c.action,!g||!e)throw new Error("Router#match must receive either target or options.controller & options.action")}else{if(g=c.controller,e=c.action,g||e)throw new Error("Router#match cannot use both target and options.controller / options.action");i=b.split("#"),g=i[0],e=i[1]}return h=new f(a,g,e,c),d.history.handlers.push({route:h,callback:h.handler}),h},a.prototype.route=function(a,b){var c,e,f,g;for(b=b?i.clone(b):{},i.defaults(b,{changeURL:!0}),a=a.replace(this.removeRoot,""),g=d.history.handlers,e=0,f=g.length;f>e;e++)if(c=g[e],c.route.test(a))return c.callback(a,b),!0;return!1},a.prototype.routeHandler=function(a,b,c){var d;return 2===arguments.length&&"function"==typeof b&&(c=b,b={}),d=this.route(a,b),"function"==typeof c?c(d):void 0},a.prototype.routeByNameHandler=function(a,b,c,d){var e,f;return 3===arguments.length&&"function"==typeof c&&(d=c,c={}),e=this.reverse(a,b),"string"==typeof e?(f=this.route(e,c),"function"==typeof d?d(f):void 0):"function"==typeof d?d(!1):void 0},a.prototype.reverse=function(a,b){var c,e,f,g,h,i,j;for(g=this.options.root,e=d.history.handlers,i=0,j=e.length;j>i;i++)if(c=e[i],c.route.matches(a)&&(f=c.route.reverse(b),f!==!1))return h=g?g+f:f;return!1},a.prototype.reverseHandler=function(a,b,c){return c(this.reverse(a,b))},a.prototype.changeURL=function(a,b){var c;return null==b&&(b={}),c={trigger:b.trigger===!0,replace:b.replace===!0},d.history.navigate(a,c)},a.prototype.changeURLHandler=function(a,b){return this.changeURL(a,b)},a.prototype.disposed=!1,a.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete d.history,this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},a}()}}),require.define({"chaplin/lib/delayer":function(a,b,c){"use strict";var d;d={setTimeout:function(a,b,c){var d,e,f,g=this;return null==(f=this.timeouts)&&(this.timeouts={}),this.clearTimeout(a),e=function(){return delete g.timeouts[a],c()},d=setTimeout(e,b),this.timeouts[a]=d,d},clearTimeout:function(a){this.timeouts&&null!=this.timeouts[a]&&(clearTimeout(this.timeouts[a]),delete this.timeouts[a])},clearAllTimeouts:function(){var a,b,c;if(this.timeouts){c=this.timeouts;for(b in c)a=c[b],this.clearTimeout(b)}},setInterval:function(a,b,c){var d,e;return this.clearInterval(a),null==(e=this.intervals)&&(this.intervals={}),d=setInterval(c,b),this.intervals[a]=d,d},clearInterval:function(a){this.intervals&&this.intervals[a]&&(clearInterval(this.intervals[a]),delete this.intervals[a])},clearAllIntervals:function(){var a,b,c;if(this.intervals){c=this.intervals;for(b in c)a=c[b],this.clearInterval(b)}},clearDelayed:function(){this.clearAllTimeouts(),this.clearAllIntervals()}},"function"==typeof Object.freeze&&Object.freeze(d),c.exports=d}}),require.define({"chaplin/lib/event_broker":function(a,b,c){"use strict";var d,e,f=[].slice;e=b("chaplin/mediator"),d={subscribeEvent:function(a,b){if("string"!=typeof a)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof b)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return e.unsubscribe(a,b,this),e.subscribe(a,b,this)},unsubscribeEvent:function(a,b){if("string"!=typeof a)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof b)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return e.unsubscribe(a,b)},unsubscribeAllEvents:function(){return e.unsubscribe(null,null,this)},publishEvent:function(){var a,b;if(b=arguments[0],a=2<=arguments.length?f.call(arguments,1):[],"string"!=typeof b)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return e.publish.apply(e,[b].concat(f.call(a)))}},"function"==typeof Object.freeze&&Object.freeze(d),c.exports=d}}),require.define({"chaplin/lib/support":function(a,b,c){"use strict";var d;d={propertyDescriptors:function(){var a;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return a={},Object.defineProperty(a,"foo",{value:"bar"}),"bar"===a.foo}catch(b){return!1}}()},c.exports=d}}),require.define({"chaplin/lib/composition":function(a,b,c){"use strict";var d,e,f,g,h={}.hasOwnProperty;g=b("underscore"),d=b("backbone"),f=b("chaplin/lib/event_broker"),c.exports=e=function(){function a(a){null!=a&&(this.options=g.clone(a)),this.item=this,this.initialize(this.options)}return a.extend=d.Model.extend,g.extend(a.prototype,d.Events),g.extend(a.prototype,f),a.prototype.item=null,a.prototype.options=null,a.prototype._stale=!1,a.prototype.initialize=function(){},a.prototype.compose=function(){},a.prototype.check=function(a){return g.isEqual(this.options,a)},a.prototype.stale=function(a){var b,c;if(null==a)return this._stale;this._stale=a;for(c in this)b=this[c],b&&b!==this&&g.has(b,"stale")&&(b.stale=a)},a.prototype.disposed=!1,a.prototype.dispose=function(){var a,b,c,d,e;if(!this.disposed){for(b in this)h.call(this,b)&&(a=this[b],a&&"function"==typeof a.dispose&&a!==this&&(a.dispose(),delete this[b]));for(this.unsubscribeAllEvents(),this.stopListening(),c=["redirected"],d=0,e=c.length;e>d;d++)b=c[d],delete this[b];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},a}()}}),require.define({"chaplin/lib/sync_machine":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m;for(h="unsynced",f="syncing",e="synced",d="syncStateChange",g={_syncState:h,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===h},isSynced:function(){return this._syncState===e},isSyncing:function(){return this._syncState===f},unsync:function(){var a;((a=this._syncState)===f||a===e)&&(this._previousSync=this._syncState,this._syncState=h,this.trigger(this._syncState,this,this._syncState),this.trigger(d,this,this._syncState))},beginSync:function(){var a;((a=this._syncState)===h||a===e)&&(this._previousSync=this._syncState,this._syncState=f,this.trigger(this._syncState,this,this._syncState),this.trigger(d,this,this._syncState))},finishSync:function(){this._syncState===f&&(this._previousSync=this._syncState,this._syncState=e,this.trigger(this._syncState,this,this._syncState),this.trigger(d,this,this._syncState))},abortSync:function(){this._syncState===f&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(d,this,this._syncState))}},m=[h,f,e,d],j=function(a){return g[a]=function(b,c){return null==c&&(c=this),this.on(a,b,c),this._syncState===a?b.call(c):void 0}},k=0,l=m.length;l>k;k++)i=m[k],j(i);"function"==typeof Object.freeze&&Object.freeze(g),c.exports=g}}),require.define({"chaplin/lib/utils":function(a,b,c){"use strict";var d,e,f,g=[].slice,h=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};f=b("underscore"),d=b("chaplin/lib/support"),e={beget:function(){var a;return"function"==typeof Object.create?Object.create:(a=function(){},function(b){return a.prototype=b,new a})}(),serialize:function(a){if("function"==typeof a.serialize)return a.serialize();if("function"==typeof a.toJSON)return a.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var a;return d.propertyDescriptors?(a={writable:!1,enumerable:!0,configurable:!1},function(){var b,c,d,e,f;for(b=arguments[0],d=2<=arguments.length?g.call(arguments,1):[],e=0,f=d.length;f>e;e++)c=d[e],a.value=b[c],Object.defineProperty(b,c,a);return!0}):function(){return!1}}(),getPrototypeChain:function(a){var b,c;for(b=[a.constructor.prototype];a=null!=(c=a.constructor)?c.__super__:void 0;)b.push(a);return b},getAllPropertyVersions:function(a,b){var c,d,f,g,i,j;for(d=[],j=e.getPrototypeChain(a),g=0,i=j.length;i>g;g++)c=j[g],f=c[b],f&&h.call(d,f)<0&&d.push(f);return d.reverse()},upcase:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},escapeRegExp:function(a){return String(a||"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(a){return a.shiftKey||a.altKey||a.ctrlKey||a.metaKey}},"function"==typeof Object.seal&&Object.seal(e),c.exports=e}}),require.define({"chaplin/lib/helpers":function(a,b,c){"use strict";var d,e;e=b("chaplin/mediator"),d={reverse:function(a,b){var c;return c=null,e.publish("!router:reverse",a,b,function(a){if(a===!1)throw new Error("Chaplin.helpers.reverse: invalid route specified.");return c=a}),c}},c.exports=d}}),require.define({chaplin:function(a,b,c){c.exports={Application:b("chaplin/application"),mediator:b("chaplin/mediator"),Dispatcher:b("chaplin/dispatcher"),Controller:b("chaplin/controllers/controller"),Composer:b("chaplin/composer"),Composition:b("chaplin/lib/composition"),Collection:b("chaplin/models/collection"),Model:b("chaplin/models/model"),Layout:b("chaplin/views/layout"),View:b("chaplin/views/view"),CollectionView:b("chaplin/views/collection_view"),Route:b("chaplin/lib/route"),Router:b("chaplin/lib/router"),Delayer:b("chaplin/lib/delayer"),EventBroker:b("chaplin/lib/event_broker"),helpers:b("chaplin/lib/helpers"),support:b("chaplin/lib/support"),SyncMachine:b("chaplin/lib/sync_machine"),utils:b("chaplin/lib/utils")}}}),this.Handlebars={},function(a){a.VERSION="1.0.rc.1",a.helpers={},a.partials={},a.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},a.registerPartial=function(a,b){this.partials[a]=b},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new Error("Could not find property '"+a+"'")});var b=Object.prototype.toString,c="[object Function]";a.registerHelper("blockHelperMissing",function(d,e){var f=e.inverse||function(){},g=e.fn,i=b.call(d);return i===c&&(d=d.call(this)),d===!0?g(this):d===!1||null==d?f(this):"[object Array]"===i?d.length>0?a.helpers.each(d,e):f(this):g(d)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.registerHelper("each",function(b,c){var g,d=c.fn,e=c.inverse,f="";if(c.data&&(g=a.createFrame(c.data)),b&&b.length>0)for(var h=0,i=b.length;i>h;h++)g&&(g.index=h),f+=d(b[h],{data:g});else f=e(this);return f}),a.registerHelper("if",function(d,e){var f=b.call(d);return f===c&&(d=d.call(this)),!d||a.Utils.isEmpty(d)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,a.helpers["if"].call(this,b,c)}),a.registerHelper("with",function(a,b){return b.fn(a)}),a.registerHelper("log",function(b){a.log(b)})}(this.Handlebars),Handlebars.Exception=function(){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():null==a||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return"undefined"==typeof a?!0:null===a?!0:a===!1?!0:"[object Array]"===Object.prototype.toString.call(a)&&0===a.length?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:d=this.programs[a]=Handlebars.VM.program(b)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){var g={helpers:d,partials:e,data:f};if(void 0===a)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g);if(Handlebars.compile)return e[b]=Handlebars.compile(a,{data:void 0!==f}),e[b](c,g);throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"input":return a.disabled;case"label":case"video":return!0;default:return/\bneedsclick\b/.test(a.className)}},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.targetTouches[0];return Math.abs(b.pageX-this.touchStartX)>10||Math.abs(b.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=a.target,g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onClick=function(a){"use strict";var b;return this.targetElement?a.forwardedTouchEvent?!0:(b=this.targetElement,this.targetElement=null,this.trackingClick?(this.trackingClick=!1,!0):a.cancelable?"submit"===a.target.type&&0===a.detail?!0:!this.needsClick(b)||this.cancelNextClick?(this.cancelNextClick=!1,a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0):!0},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},"undefined"!=typeof define&&define.amd&&define(function(){"use strict";return FastClick}),"undefined"!=typeof module&&module.exports&&(module.exports=function(a){"use strict";return new FastClick(a)},module.exports.FastClick=FastClick),function(){var a={},b=null,c=!0,d=!1;if("undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:"undefined"!=typeof Audio?c=!1:(c=!1,d=!0),c){var e="undefined"==typeof b.createGain?b.createGainNode():b.createGain();e.gain.value=1,e.connect(b.destination)}var f=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this._howls=[]};f.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a&&a>=0&&1>=a){b._volume=a,c&&(e.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var f=0;f<b._howls[d]._audioNode.length;f++)b._howls[d]._audioNode[f].volume=b._howls[d]._volume*b._volume;return b}return c?e.gain.value:b._volume},mute:function(){var a=this;a._muted=!0,c&&(e.gain.value=0);for(var b in a._howls)if(a._howls.hasOwnProperty(b)&&a._howls[b]._webAudio===!1)for(var d=0;d<a._howls[b]._audioNode.length;d++)a._howls[b]._audioNode[d].muted=!0;return a},unmute:function(){var a=this;a._muted=!1,c&&(e.gain.value=a._volume);for(var b in a._howls)if(a._howls.hasOwnProperty(b)&&a._howls[b]._webAudio===!1)for(var d=0;d<a._howls[b]._audioNode.length;d++)a._howls[b]._audioNode[d].muted=!1;return a}};var g=new f,h=null;if(!d){h=new Audio;var i={mp3:!!h.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!h.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var j=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=a.volume||1,b._urls=a.urls||[],b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),g._howls.push(b),b.load()};if(j.prototype={load:function(){var b=this,c=null;if(d)return b.on("loaderror"),void 0;for(var e={mp3:i.mp3,opus:i.opus,ogg:i.ogg,wav:i.wav,m4a:i.m4a,weba:i.webm},f=0;f<b._urls.length;f++){var h;if(b._format?h=b._format:(h=b._urls[f].toLowerCase().match(/.+\.([^?]+)(\?|$)/),h=h&&h.length>=2?h[1]:b._urls[f].toLowerCase().match(/data\:audio\/([^?]+);/)[1]),e[h]){c=b._urls[f];break}}if(!c)return b.on("loaderror"),void 0;if(b._src=c,b._webAudio)k(b,c);else{var j=new Audio;b._audioNode.push(j),j.src=c,j._pos=0,j.preload="auto",j.volume=g._muted?0:b._volume*g.volume(),a[c]=b;var l=function(){b._duration=j.duration,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),j.removeEventListener("canplaythrough",l,!1)};j.addEventListener("canplaythrough",l,!1),j.load()}return b},urls:function(a){var b=this;return a?(b._urls=a,b._loaded=!1,b.stop(),b.load(),b):b._urls},play:function(a,c){var d=this;return a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var k,f=e._pos>0?e._pos:d._sprite[a][0]/1e3,h=d._sprite[a][1]/1e3-e._pos,i=!(!d._loop&&!d._sprite[a][2]),j="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:j,sprite:a,loop:i};k=setTimeout(function(){!d._webAudio&&i&&d.stop(b.id,b.timer).play(a,b.id),d._webAudio&&!i&&(d._nodeById(b.id).paused=!0),d._webAudio||i||d.stop(b.id,b.timer),d.on("end",j)},1e3*h),d._onendTimer.push(k),b.timer=d._onendTimer[d._onendTimer.length-1]}(),d._webAudio)e.id=j,e.paused=!1,m(d,[i,f,h],j),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,f,h):e.bufferSource.start(0,f,h);else{if(4!==e.readyState)return d._clearEndTimer(k),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.id=j,e.currentTime=f,e.muted=g._muted,e.volume=d._volume*g.volume(),e.play()}return d.on("play"),"function"==typeof c&&c(j),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a,c){var d=this;if(!d._loaded)return d.on("play",function(){d.pause(a)}),d;d._clearEndTimer(c||0);var e=a?d._nodeById(a):d._activeNode();if(e)if(d._webAudio){if(!e.bufferSource)return d;e.paused=!0,e._pos+=b.currentTime-d._playStart,"undefined"==typeof e.bufferSource.stop?e.bufferSource.noteOff(0):e.bufferSource.stop(0)}else e._pos=e.currentTime,e.pause();return d.on("pause"),d},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.volume=0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.volume=b._volume),b},volume:function(a,b){var c=this;if(a=parseFloat(a),!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;if(a>=0&&1>=a){c._volume=a;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*g.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),d;var e=c?d._nodeById(c):d._activeNode();return e?d._webAudio?a>=0?(e._pos=a,d.pause(c).play(e._sprite,c),d):e._pos+(b.currentTime-d._playStart):a>=0?(e.currentTime=a,d):e.currentTime:void 0},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c))}return e},fadeIn:function(a,b,c){var d=this,e=a,f=e/.01,g=b/f;if(!d._loaded)return d.on("load",function(){d.fadeIn(a,b,c)}),d;d.volume(0).play();for(var h=1;f>=h;h++)!function(){var b=Math.round(1e3*(d._volume+.01*h))/1e3,e=a;setTimeout(function(){d.volume(b),b===e&&c&&c()},g*h)}();return d},fadeOut:function(a,b,c,d){var e=this,f=e._volume-a,g=f/.01,h=b/g;if(!e._loaded)return e.on("play",function(){e.fadeOut(a,b,c,d)}),e;for(var i=1;g>=i;i++)!function(){var b=Math.round(1e3*(e._volume-.01*i))/1e3,f=a;setTimeout(function(){e.volume(b,d),b===f&&(c&&c(),e.pause(d),e.on("end"))},h*i)}();return e},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener("loadedmetadata",function(){a(e)}))}},_drainPool:function(){var c,a=this,b=0;for(c=0;c<a._audioNode.length;c++)a._audioNode[c].paused&&b++;for(c=a._audioNode.length-1;c>=0&&!(5>=b);c--)a._audioNode[c].paused&&(b--,a._audioNode.splice(c,1))},_clearEndTimer:function(a){var b=this,c=b._onendTimer.indexOf(a);c=c>=0?c:0,b._onendTimer[c]&&(clearTimeout(b._onendTimer[c]),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(e),c[d].panner=b.createPanner(),c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=b.toString(),f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}return c}},c)var k=function(c,d){if(d in a)c._duration=a[d].duration,l(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,l(c,b))})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},l=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},m=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2])};"function"==typeof define&&define.amd?define("Howler",function(){return{Howler:g,Howl:j}}):(window.Howler=g,window.Howl=j)}(),function(){function b(b){this.tokens=[],this.tokens.links={},this.options=b||j.defaults,this.rules=a.normal,this.options.gfm&&(this.rules=this.options.tables?a.tables:a.gfm)}function d(a,b){if(this.options=b||j.defaults,this.links=a,this.rules=c.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?c.breaks:c.gfm:this.options.pedantic&&(this.rules=c.pedantic)}function e(a){this.tokens=[],this.token=null,this.options=a||j.defaults}function f(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function g(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function h(){}function i(a){for(var c,d,b=1;b<arguments.length;b++){c=arguments[b];for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}function j(a,c,d){if(d||"function"==typeof c){d||(d=c,c=null),c&&(c=i({},j.defaults,c));var g=b.lex(g,c),h=c.highlight,k=0,l=g.length,m=0;if(!h||h.length<3)return d(null,e.parse(g,c));for(var n=function(){delete c.highlight;var a=e.parse(g,c);return c.highlight=h,d(null,a)};l>m;m++)!function(a){return"code"===a.type?(k++,h(a.text,a.lang,function(b,c){return null==c||c===a.text?--k||n():(a.text=c,a.escaped=!0,--k||n(),void 0)})):void 0}(g[m])}else try{return c&&(c=i({},j.defaults,c)),e.parse(b.lex(a,c),c)}catch(o){if(o.message+="\nPlease report this to https://github.com/chjj/marked.",(c||j.defaults).silent)return"<p>An error occured:</p><pre>"+f(o.message+"",!0)+"</pre>";throw o}}var a={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:h,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:h,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:h,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};a.bullet=/(?:[*+-]|\d+\.)/,a.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,a.item=g(a.item,"gm")(/bull/g,a.bullet)(),a.list=g(a.list)(/bull/g,a.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),a._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",a.html=g(a.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,a._tag)(),a.paragraph=g(a.paragraph)("hr",a.hr)("heading",a.heading)("lheading",a.lheading)("blockquote",a.blockquote)("tag","<"+a._tag)("def",a.def)(),a.normal=i({},a),a.gfm=i({},a.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),a.gfm.paragraph=g(a.paragraph)("(?!","(?!"+a.gfm.fences.source.replace("\\1","\\2")+"|")(),a.tables=i({},a.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),b.rules=a,b.lex=function(a,c){var d=new b(c);
return d.lex(a)},b.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},b.prototype.token=function(b,c){for(var d,e,f,g,h,i,j,k,l,b=b.replace(/^ +$/gm,"");b;)if((f=this.rules.newline.exec(b))&&(b=b.substring(f[0].length),f[0].length>1&&this.tokens.push({type:"space"})),f=this.rules.code.exec(b))b=b.substring(f[0].length),f=f[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?f:f.replace(/\n+$/,"")});else if(f=this.rules.fences.exec(b))b=b.substring(f[0].length),this.tokens.push({type:"code",lang:f[2],text:f[3]});else if(f=this.rules.heading.exec(b))b=b.substring(f[0].length),this.tokens.push({type:"heading",depth:f[1].length,text:f[2]});else if(c&&(f=this.rules.nptable.exec(b))){for(b=b.substring(f[0].length),i={type:"table",header:f[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:f[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:f[3].replace(/\n$/,"").split("\n")},k=0;k<i.align.length;k++)i.align[k]=/^ *-+: *$/.test(i.align[k])?"right":/^ *:-+: *$/.test(i.align[k])?"center":/^ *:-+ *$/.test(i.align[k])?"left":null;for(k=0;k<i.cells.length;k++)i.cells[k]=i.cells[k].split(/ *\| */);this.tokens.push(i)}else if(f=this.rules.lheading.exec(b))b=b.substring(f[0].length),this.tokens.push({type:"heading",depth:"="===f[2]?1:2,text:f[1]});else if(f=this.rules.hr.exec(b))b=b.substring(f[0].length),this.tokens.push({type:"hr"});else if(f=this.rules.blockquote.exec(b))b=b.substring(f[0].length),this.tokens.push({type:"blockquote_start"}),f=f[0].replace(/^ *> ?/gm,""),this.token(f,c),this.tokens.push({type:"blockquote_end"});else if(f=this.rules.list.exec(b)){for(b=b.substring(f[0].length),g=f[2],this.tokens.push({type:"list_start",ordered:g.length>1}),f=f[0].match(this.rules.item),d=!1,l=f.length,k=0;l>k;k++)i=f[k],j=i.length,i=i.replace(/^ *([*+-]|\d+\.) +/,""),~i.indexOf("\n ")&&(j-=i.length,i=this.options.pedantic?i.replace(/^ {1,4}/gm,""):i.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&k!==l-1&&(h=a.bullet.exec(f[k+1])[0],g===h||g.length>1&&h.length>1||(b=f.slice(k+1).join("\n")+b,k=l-1)),e=d||/\n\n(?!\s*$)/.test(i),k!==l-1&&(d="\n"===i[i.length-1],e||(e=d)),this.tokens.push({type:e?"loose_item_start":"list_item_start"}),this.token(i,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(f=this.rules.html.exec(b))b=b.substring(f[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===f[1]||"script"===f[1],text:f[0]});else if(c&&(f=this.rules.def.exec(b)))b=b.substring(f[0].length),this.tokens.links[f[1].toLowerCase()]={href:f[2],title:f[3]};else if(c&&(f=this.rules.table.exec(b))){for(b=b.substring(f[0].length),i={type:"table",header:f[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:f[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:f[3].replace(/(?: *\| *)?\n$/,"").split("\n")},k=0;k<i.align.length;k++)i.align[k]=/^ *-+: *$/.test(i.align[k])?"right":/^ *:-+: *$/.test(i.align[k])?"center":/^ *:-+ *$/.test(i.align[k])?"left":null;for(k=0;k<i.cells.length;k++)i.cells[k]=i.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(i)}else if(c&&(f=this.rules.paragraph.exec(b)))b=b.substring(f[0].length),this.tokens.push({type:"paragraph",text:"\n"===f[1][f[1].length-1]?f[1].slice(0,-1):f[1]});else if(f=this.rules.text.exec(b))b=b.substring(f[0].length),this.tokens.push({type:"text",text:f[0]});else if(b)throw new Error("Infinite loop on byte: "+b.charCodeAt(0));return this.tokens};var c={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:h,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:h,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};c._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,c._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,c.link=g(c.link)("inside",c._inside)("href",c._href)(),c.reflink=g(c.reflink)("inside",c._inside)(),c.normal=i({},c),c.pedantic=i({},c.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),c.gfm=i({},c.normal,{escape:g(c.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:g(c.text)("]|","~]|")("|","|https?://|")()}),c.breaks=i({},c.gfm,{br:g(c.br)("{2,}","*")(),text:g(c.gfm.text)("{2,}","*")()}),d.rules=c,d.output=function(a,b,c){var e=new d(b,c);return e.output(a)},d.prototype.output=function(a){for(var c,d,e,g,b="";a;)if(g=this.rules.escape.exec(a))a=a.substring(g[0].length),b+=g[1];else if(g=this.rules.autolink.exec(a))a=a.substring(g[0].length),"@"===g[2]?(d=":"===g[1][6]?this.mangle(g[1].substring(7)):this.mangle(g[1]),e=this.mangle("mailto:")+d):(d=f(g[1]),e=d),b+='<a href="'+e+'">'+d+"</a>";else if(g=this.rules.url.exec(a))a=a.substring(g[0].length),d=f(g[1]),e=d,b+='<a href="'+e+'">'+d+"</a>";else if(g=this.rules.tag.exec(a))a=a.substring(g[0].length),b+=this.options.sanitize?f(g[0]):g[0];else if(g=this.rules.link.exec(a))a=a.substring(g[0].length),b+=this.outputLink(g,{href:g[2],title:g[3]});else if((g=this.rules.reflink.exec(a))||(g=this.rules.nolink.exec(a))){if(a=a.substring(g[0].length),c=(g[2]||g[1]).replace(/\s+/g," "),c=this.links[c.toLowerCase()],!c||!c.href){b+=g[0][0],a=g[0].substring(1)+a;continue}b+=this.outputLink(g,c)}else if(g=this.rules.strong.exec(a))a=a.substring(g[0].length),b+="<strong>"+this.output(g[2]||g[1])+"</strong>";else if(g=this.rules.em.exec(a))a=a.substring(g[0].length),b+="<em>"+this.output(g[2]||g[1])+"</em>";else if(g=this.rules.code.exec(a))a=a.substring(g[0].length),b+="<code>"+f(g[2],!0)+"</code>";else if(g=this.rules.br.exec(a))a=a.substring(g[0].length),b+="<br>";else if(g=this.rules.del.exec(a))a=a.substring(g[0].length),b+="<del>"+this.output(g[1])+"</del>";else if(g=this.rules.text.exec(a))a=a.substring(g[0].length),b+=f(g[0]);else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return b},d.prototype.outputLink=function(a,b){return"!"!==a[0][0]?'<a href="'+f(b.href)+'"'+(b.title?' title="'+f(b.title)+'"':"")+">"+this.output(a[1])+"</a>":'<img src="'+f(b.href)+'" alt="'+f(a[1])+'"'+(b.title?' title="'+f(b.title)+'"':"")+">"},d.prototype.smartypants=function(a){return this.options.smartypants?a.replace(/--/g,"—").replace(/'([^']*)'/g,"‘$1’").replace(/"([^"]*)"/g,"“$1”").replace(/\.{3}/g,"…"):a},d.prototype.mangle=function(a){for(var e,b="",c=a.length,d=0;c>d;d++)e=a.charCodeAt(d),Math.random()>.5&&(e="x"+e.toString(16)),b+="&#"+e+";";return b},e.parse=function(a,b){var c=new e(b);return c.parse(a)},e.prototype.parse=function(a){this.inline=new d(a.links,this.options),this.tokens=a.reverse();for(var b="";this.next();)b+=this.tok();return b},e.prototype.next=function(){return this.token=this.tokens.pop()},e.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},e.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},e.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var a=this.options.highlight(this.token.text,this.token.lang);null!=a&&a!==this.token.text&&(this.token.escaped=!0,this.token.text=a)}return this.token.escaped||(this.token.text=f(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var c,d,e,g,h,b="";for(b+="<thead>\n<tr>\n",d=0;d<this.token.header.length;d++)c=this.inline.output(this.token.header[d]),b+=this.token.align[d]?'<th align="'+this.token.align[d]+'">'+c+"</th>\n":"<th>"+c+"</th>\n";for(b+="</tr>\n</thead>\n",b+="<tbody>\n",d=0;d<this.token.cells.length;d++){for(e=this.token.cells[d],b+="<tr>\n",h=0;h<e.length;h++)g=this.inline.output(e[h]),b+=this.token.align[h]?'<td align="'+this.token.align[h]+'">'+g+"</td>\n":"<td>"+g+"</td>\n";b+="</tr>\n"}return b+="</tbody>\n","<table>\n"+b+"</table>\n";case"blockquote_start":for(var b="";"blockquote_end"!==this.next().type;)b+=this.tok();return"<blockquote>\n"+b+"</blockquote>\n";case"list_start":for(var i=this.token.ordered?"ol":"ul",b="";"list_end"!==this.next().type;)b+=this.tok();return"<"+i+">\n"+b+"</"+i+">\n";case"list_item_start":for(var b="";"list_item_end"!==this.next().type;)b+="text"===this.token.type?this.parseText():this.tok();return"<li>"+b+"</li>\n";case"loose_item_start":for(var b="";"list_item_end"!==this.next().type;)b+=this.tok();return"<li>"+b+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},h.exec=h,j.options=j.setOptions=function(a){return i(j.defaults,a),j},j.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},j.Parser=e,j.parser=e.parse,j.Lexer=b,j.lexer=b.lex,j.InlineLexer=d,j.inlineLexer=d.output,j.parse=j,"object"==typeof exports?module.exports=j:"function"==typeof define&&define.amd?define(function(){return j}):this.marked=j}.call(function(){return this||("undefined"!=typeof window?window:global)}()),window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a){var e=a[d];if(!G(e,"-")&&j[e]!==c)return"pfx"==b?e:!0}return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function K(){e.input=function(c){for(var d=0,e=c.length;e>d;d++)u[c[d]]=!!(c[d]in k);return u.list&&(u.list=!(!b.createElement("datalist")||!a.HTMLDataListElement)),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var e,f,h,d=0,i=a.length;i>d;d++)k.setAttribute("type",f=a[d]),e="text"!==k.type,e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&"textfield"!==h.getComputedStyle(k,null).WebkitAppearance&&0!==k.offsetHeight,g.removeChild(k)):/^(search|tel)$/.test(f)||(e=/^(url|email)$/.test(f)?k.checkValidity&&k.checkValidity()===!1:k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var x,C,d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d="absolute"==(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty;C=F(B,"undefined")||F(B.call,"undefined")?function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")}:function(a,b){return B.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=w.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(w.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(w.call(arguments)))};return d}),s.flexbox=function(){return J("flexWrap")},s.flexboxlegacy=function(){return J("boxDirection")},s.canvas=function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},s.canvastext=function(){return!(!e.canvas||!F(b.createElement("canvas").getContext("2d").fillText,"function"))},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},s.geolocation=function(){return"geolocation"in navigator},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!J("indexedDB",a)},s.hashchange=function(){return A("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!(!a.history||!history.pushState)},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return""===b.createElement("div").style.textShadow},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.csscolumns=function(){return J("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.cssreflections=function(){return J("boxReflect")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&0===g.indexOf(d.split(" ")[0])}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var L in s)C(s,L)&&(x=L.toLowerCase(),e[x]=s[L](),v.push((e[x]?"":"no-")+x));return e.input||K(),e.addTest=function(a,b){if("object"==typeof a)for(var d in a)C(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,"undefined"!=typeof f&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},D(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return"string"==typeof a?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){if(c||(c=b),j)return c.createElement(a);f||(f=m(c));var g;return g=f.cache[a]?f.cache[a].cloneNode():e.test(a)?(f.cache[a]=f.createElem(a)).cloneNode():f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){if(a||(a=b),j)return a.createDocumentFragment();c=c||m(a);for(var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;g>e;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return!r.shivCSS||f||c.hasCSS||(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var f,j,c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",h=0,i={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){f=!0,j=!0}}();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,e.prefixed=function(a,b,c){return b?J(a,b,c):J(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),window.require.register("core",function(a,b,c){c.exports={Application:b("core/application"),Model:b("core/models/base/model"),Collection:b("core/models/base/collection"),View:b("core/views/base/view"),CollectionView:b("core/views/base/collection-view"),Engine:b("core/controllers/engine-controller"),EngineModel:b("core/models/engine/model"),EngineView:b("core/views/engine/view")}}),window.require.register("core/application",function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r={}.hasOwnProperty,s=function(a,b){function d(){this.constructor=a}for(var c in b)r.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("chaplin"),m=b("core/controllers/session-controller"),j=b("core/controllers/navigation-controller"),n=b("core/controllers/tool-controller"),l=b("core/controllers/score-controller"),k=b("core/controllers/save-controller"),g=b("core/controllers/instructions-controller"),i=b("core/controllers/modal-controller"),h=b("core/views/layout"),f=b("core/dispatcher"),o=b("core/mediator"),p=b("core/routes"),c.exports=d=function(a){function b(){return q=b.__super__.constructor.apply(this,arguments)}return s(b,a),b.prototype.title="",b.prototype.initialize=function(a){return null==a&&(a={}),b.__super__.initialize.apply(this,arguments),_(a).defaults({localStorage:!0}),this.options=a,window.INTERACTIVE_CONTAINER_ID="interactive-container",window.PAGE_CONTAINER_ID="page-container",window.MENU_CONTAINER_ID="menu-container",this.initDispatcher({controllerPath:"core/controllers/",controllerSuffix:"-controller"}),this.initLayout(),this.initMediator(),this.modalController=new i,this.subscribeEvent("!manifest:loaded",this.start),this.initSession()},b.prototype.start=function(){return this.initControllers(),this.initRouter(p,{pushState:!1,root:"./"}),this.startRouting(),"function"==typeof Object.freeze?Object.freeze(this):void 0},b.prototype.initDispatcher=function(a){return this.dispatcher=new f(a)},b.prototype.initSession=function(){return this.session=new m,this.session.initData()},b.prototype.initLayout=function(){return this.layout=new h({title:this.title})},b.prototype.initControllers=function(){return this.navController=new j,new n,new l,new k,new g},b.prototype.initMediator=function(){return o.seal()},b}(e.Application)}),window.require.register("core/controllers/404-controller",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.index=function(){return this.redirectToLastVisited()},b}(d)}),window.require.register("core/controllers/base/controller",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.page=null,b.prototype.redirect=function(a){var b,c;return this.redirectTo(c=null,b=a)},b.prototype.redirectToLastVisited=function(a){return null==a&&(a={}),this.redirected=!0,App.pages.redirectToLastVisited(a)},b.prototype.redirectTo=function(a,b){return null==b&&(b={}),this.redirected=!0,App.pages.redirect(0,b)},b.prototype.showModal=function(a){return App.modalController.showModal(a)},b.prototype.dispose=function(){return null!=this.page&&(this.page.save(),delete this.page),b.__super__.dispose.apply(this,arguments)},b}(d.Controller)}),window.require.register("core/controllers/engine-controller",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(a){return null==a&&(a={}),b.__super__.initialize.apply(this,arguments),this},b.prototype.dispose=function(){return b.__super__.dispose.apply(this,arguments)},b}(d)}),window.require.register("core/controllers/instructions-controller",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),h=b("core/models/base/model"),e=b("core/views/instructions/button-view"),g=b("core/views/instructions/view"),c.exports=f=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.view=new e,this.view.render(),this.subscribeEvent("!instructions:show",this.showInstructions),this},b.prototype.showInstructions=function(){var a,b,c,d;return c=App.pages.getCurrentPage(),a=c.getInstructions(),null!=a?(c.set({instructionsShown:!0}),b=new h({instructions:a}),d=new g({model:b}),this.showModal(d)):void 0},b}(d)}),window.require.register("core/controllers/modal-controller",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),e=b("core/views/error/view"),f=b("core/views/info/view"),c.exports=g=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.subscribeEvent("!displayInModal",this.displayInModal)},b.prototype.showModal=function(a){return null!=this.modalView&&this.closeModal(this.modalView),this.modalView=a,this.modalView.render(),this.listenTo(this.modalView,"!modal:close",this.closeModal)},b.prototype.displayInModal=function(a){var b;return null==a&&(a={}),"error"===a.type&&(b=new e(a),this.showModal(b)),"info"===a.type?(b=new f(a),this.showModal(b)):void 0},b.prototype.closeModal=function(){return null!=this.modalView?(this.modalView.remove(),this.modalView.dispose(),this.modalView=null):void 0},b}(d)}),window.require.register("core/controllers/navigation-controller",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),f=b("core/views/navigation/view"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.view=new f({collection:App.pages}),this.view.render()},b}(d)}),window.require.register("core/controllers/page-controller",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),e=b("core/models/engine/model"),f=b("core/views/engine/view"),c.exports=g=function(a){function c(){return h=c.__super__.constructor.apply(this,arguments)}return j(c,a),c.prototype.initialize=function(a){return null==a&&(a={}),c.__super__.initialize.apply(this,arguments)},c.prototype.show=function(a){var c,d,g,h,i;if(g=App.pages.getPage(a.page),!g)return this.redirect(),void 0;if(d=g.get("engine"),d.payload.index=a.page,c=b(d.module),this.engine=new c(d.payload),(null!=(h=this.engine.model)?h.get("canShowPage"):void 0)===!1)return null!=(i=this.engine.view)&&i.dispose(),g._setVisitedState(!1),this.redirect(),void 0;if(!(null!=this.engine.model&&this.engine.model instanceof e))throw new Error("engine must have an Engine Model");if(!(null!=this.engine.view&&this.engine.view instanceof f))throw new Error("engine must have an Engine View");return this.view=this.engine.view,g.setModelDelegate(this.engine.model),g.setViewDelegate(this.engine.view),this.publishEvent("!page:change",g)},c}(d)}),window.require.register("core/controllers/save-controller",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),e=b("core/views/save/button-view"),g=b("core/views/save/view"),c.exports=f=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.view=new e,this.view.render(),this.subscribeEvent("!save:show",this.showSaveModal),this.subscribeEvent("!save:canvas",this.saveToCanvas),this.subscribeEvent("!save:state",this.saveState),this},b.prototype.showSaveModal=function(){var a;return a=new g,this.showModal(a)},b.prototype.saveToCanvas=function(){return App.pages.getCurrentPage().canSave()?App.session.saveToCanvas():this.publishEvent("!save:canvas:error","Oops can't save work!")},b.prototype.saveState=function(){return App.pages.getCurrentPage().canSave()?App.session.saveState():this.publishEvent("!save:state:error","Oops can't save work!")},b}(d)}),window.require.register("core/controllers/score-controller",function(a,b,c){var d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),e=b("core/models/base/model"),f=b("core/views/score/button-view"),h=b("core/views/score/view"),c.exports=g=function(a){function b(){return i=b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.view=new f,this.view.render(),this.subscribeEvent("!score:show",this.showScore),this},b.prototype.showScore=function(){var a,b,c;return b=App.pages.getCurrentPage().getScore(),null!=b?(a=new e({score:b}),c=new h({model:a}),this.showModal(c)):void 0},b}(d)}),window.require.register("core/controllers/session-controller",function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),e=b("core/models/page/collection"),g=b("core/models/user/model"),c.exports=f=function(a){function b(){return h=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.subscribeEvent("#willClose",this._willClose)},b.prototype.initData=function(){return this._initUserContext(),this._initPageCollection(),this._getSavedState()},b.prototype._initUserContext=function(a){var b;return null==a&&(a={}),b=this._queryParamsToJSON(),this._useNativeBridge=null!=window.NativeBridge?!0:!1,this._useLocalStorage=!this._useNativeBridge,this._userContext=new g(b,a)
},b.prototype._queryParamsToJSON=function(){var a,b,c,d,e,f,g;for(e=window.location.search,e=e.replace("?",""),d=e.split("&"),b={},f=0,g=d.length;g>f;f++)c=d[f],a=c.split("="),b[a[0]]=a[1];return b},b.prototype._initPageCollection=function(){return App.pages=new e({},{manifestFileName:this._userContext.getManifestFileName()})},b.prototype._getSavedState=function(){var a;return this._useLocalStorage&&(console.warn("attempting to load manifest from local storage"),a=this._loadFromLocalStorage(),null!=a)?(console.warn("manifest loaded from local storage"),this._initPagesWithSavedState(JSON.parse(a)),void 0):this._useNativeBridge&&(console.warn("fetching saved manifest from Native Bridge"),a=this._fetch({type:"state",manifestFileName:this._userContext.getManifestFileName()}),null!=a)?(console.warn("manifest loaded from Native Bridge"),this._initPagesWithSavedState(JSON.parse(a)),void 0):(console.warn("no saved manifest in local storage or Native Bridge; fetching default"),this._initPages(),void 0)},b.prototype._initPages=function(){return App.pages.fetch({reset:!0,error:function(){throw new Error("Invalid JSON in manifest")}})},b.prototype._initPagesWithSavedState=function(a){return App.pages.initWithSavedState(a)},b.prototype.saveState=function(a){var b,c;return null==a&&(a={}),console.log("saving to system"),b=App.pages.saveToManifest(),this._useLocalStorage?(this._saveToLocalStorage(b),console.warn("saving to local storage"),this.publishEvent("!saved:state",!0),this.trigger("_saved:state",!0),void 0):(this._useNativeBridge&&(console.warn("publishing save state"),c=this._save({type:"state",data:b}),this.publishEvent("!saved:state",c),this.trigger("_saved:state",c)),void 0)},b.prototype._fetch=function(a){var b;return null==a&&(a={}),b=null,this.publishEvent("#fetch",a,function(a){return b=a}),b},b.prototype._save=function(a){var b;return null==a&&(a={}),b=null,this.publishEvent("#save",a,function(a){return b=a}),b},b.prototype._willClose=function(a){return null==a&&(a={}),this.on("_saved:state",this._publishClose),a.promptUser===!0?App.pages.getCurrentPage().canSave()?(this.subscribeEvent("!save:cancelled",this._publishClose),this.publishEvent("!save:show")):this.saveState():this.saveState()},b.prototype._publishClose=function(){return console.warn("publishing #close"),this.publishEvent("#close"),this.unsubscribeEvent("!save:cancelled",this._publishClose),this.off("_saved:state",this._publishClose)},b.prototype._getStorageName=function(){return this._userContext.getLocalStorageName()},b.prototype._saveToLocalStorage=function(a){return localStorage.setItem(this._getStorageName(),a)},b.prototype._loadFromLocalStorage=function(){return localStorage.getItem(this._getStorageName())},b}(d)}),window.require.register("core/controllers/tool-controller",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/controllers/base/controller"),f=b("core/views/tool/view"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.view=new f,this.view.render()},b}(d)}),window.require.register("core/dispatcher",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.executeAction=function(a,b,c,d){return this.currentController&&(this.publishEvent("beforeControllerDispose",this.currentController),this.currentController.dispose(c,b,d)),this.currentController=a,this.currentParams=c,a[b.action](c,b,d),a.redirected?void 0:(this.adjustURL(b,c,d),this.publishEvent("dispatcher:dispatch",this.currentController,c,b,d))},b}(d.Dispatcher)}),window.require.register("core/lib/utils",function(a,b,c){var d,e;d=b("chaplin"),e=d.utils.beget(d.utils),"function"==typeof Object.seal&&Object.seal(e),c.exports=e}),window.require.register("core/lib/view-helper",function(){var d=[].slice;Handlebars.registerHelper("with",function(a,b){return!a||Handlebars.Utils.isEmpty(a)?b.inverse(this):b.fn(a)}),Handlebars.registerHelper("without",function(a,b){var c;return c=b.inverse,b.inverse=b.fn,b.fn=c,Handlebars.helpers["with"].call(this,a,b)}),Handlebars.registerHelper("url",function(){var a,b,c,e;return c=arguments[0],b=3<=arguments.length?d.call(arguments,1,e=arguments.length-1):(e=1,[]),a=arguments[e++],Chaplin.helpers.reverse(c,b)})}),window.require.register("core/mediator",function(a,b,c){c.exports=b("chaplin").mediator}),window.require.register("core/models/base/collection",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),f=b("core/models/base/model"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.model=f,b}(d.Collection)}),window.require.register("core/models/base/model",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b}(d.Model)}),window.require.register("core/models/engine/model",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/models/base/model"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.defaults={canShowScore:!1,canNavigate:!0,canSave:!0,shouldShowInstructions:!1},b.prototype.save=function(){return this.toJSON()},b.prototype._getCanNavigate=function(){return this.get("canNavigate")},b.prototype._getCanShowScore=function(){return this.get("canShowScore")},b.prototype._getCanSave=function(){return this.get("canSave")},b.prototype._getShouldShowInstructions=function(){return this.get("shouldShowInstructions")},b}(e)}),window.require.register("core/models/navigation/model",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/models/base/model"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b}(d)}),window.require.register("core/models/page/collection",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/models/base/collection"),f=b("core/models/page/model"),c.exports=e=function(a){function b(){return this.pagesLoaded=h(this.pagesLoaded,this),this.initWithSavedState=h(this.initWithSavedState,this),g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.model=f,b.prototype.initWithSavedState=function(a){return this.reset(this.parse(a))},b.prototype.initialize=function(a,c){return null==c&&(c={}),b.__super__.initialize.apply(this,arguments),this._manifestFileName=c.manifestFileName||"manifest.json",this.on("reset",this.pagesLoaded),this.subscribeEvent("!setOnPagePayload",this._setOnPagePayload),this.subscribeEvent("!getPagePayload",this._getPagePayload)},b.prototype.url=function(){return"./"+this._manifestFileName},b.prototype.parse=function(a){return this.manifest=a,this.options=a.options,a.pages},b.prototype.pagesLoaded=function(){return this.length<=0?void 0:this.publishEvent("!manifest:loaded")},b.prototype.setOption=function(a,b){return this.options[a]=b,this.options},b.prototype.saveToManifest=function(){return this.saveManifestOptions(),this.saveAllManifestPages(),this.savedManifest()},b.prototype.saveManifestPage=function(a,b){return this.manifest.pages[b]=a},b.prototype.saveManifestOptions=function(){return this.manifest.options=_.clone(this.options)},b.prototype.saveAllManifestPages=function(){var a,b,c,d,e;for(d=this.models,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.save());return e},b.prototype.savedManifest=function(){return JSON.stringify(this.manifest)},b.prototype.getPage=function(a){var b;return b=this.at(a),null==b?null:(this._setPageContext(b),b)},b.prototype.getCurrentPage=function(){return null==this._currentPageModel&&this._setPageContext(),this._currentPageModel},b.prototype.jumpPage=function(a){return a>this._currentPageIndex&&!this._currentPageModel.canNavigate("next")?void 0:(this.publishEvent("!goToPage:jumpPage"),this.goToPage(a))},b.prototype.goToNextPage=function(){return this._currentPageModel.canNavigate("next")?(this.publishEvent("!goToPage:nextPage"),this.goToPage(this._getNextPageIndex())):void 0},b.prototype.goToPreviousPage=function(){return this.publishEvent("!goToPage:previousPage"),this.goToPage(this._getPreviousPageIndex())},b.prototype.redirectToLastVisited=function(a){var b,c;return null==a&&(a={}),c=this.where({lastVisited:!0})[0],b=null!=c?_.indexOf(this.models,c):0,this.redirect(b,a)},b.prototype.redirect=function(a){return this.goToPage(a)},b.prototype.goToPage=function(a){var b;return b=this.getPage(a),this._fireRoute()},b.prototype._currentPageModel=null,b.prototype._currentPageIndex=0,b.prototype._fireRoute=function(){var a;return a=""+this._currentPageIndex,this.publishEvent("!router:route",a)},b.prototype._setPageContext=function(a){var b;return null==a&&(a=null),b=null!=a?a:this.at(this._currentPageIndex),null!=b?(null!=this._currentPageModel&&b.cid!==this._currentPageModel.cid&&(this._currentPageModel.save(),this._currentPageModel.unselect()),this._currentPageModel=b,this._currentPageModel.select(),this._currentPageIndex=_.indexOf(this.models,this._currentPageModel)):void 0},b.prototype._getNextPageIndex=function(){var a;return a=this._currentPageIndex>=this.length?0:this._currentPageIndex+1},b.prototype._getPreviousPageIndex=function(){var a;return a=Math.max(this._currentPageIndex-1,0)},b.prototype._setOnPagePayload=function(a,b){var c;return null==b&&(b={}),c=this.at(a),null!=c?c.setPayloadAttributes(b):void 0},b.prototype._getPagePayload=function(a,b){var c,d;return null==b&&(b=null),d=this.at(a),c=null!=d?d.getEngine().payload:null,null!=b?b(c):void 0},b}(d)}),window.require.register("core/models/page/model",function(a,b,c){var d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/models/base/model"),c.exports=e=function(a){function b(){return this.toManifestJSON=g(this.toManifestJSON,this),this.save=g(this.save,this),f=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this._clearSelectedState()},b.prototype.defaults={visited:!1,instructionsShown:!1,lastVisited:!1},b.prototype.save=function(){var a;return a=this.toManifestJSON(),this.collection.saveManifestPage(a,this.getIndex()),this},b.prototype.setModelDelegate=function(a){return this.modelDelegate&&(this.modelDelegate=null),this.modelDelegate=a,this.listenTo(this.modelDelegate,"all",this.modelDelegateDidEmitEvent),this},b.prototype.modelDelegateDidEmitEvent=function(a,b,c){return null!=a&&"change"===a.split(":")[0]?this.trigger(a,b,c):void 0},b.prototype.toManifestJSON=function(){return null!=this.modelDelegate&&this.setPayloadJSON(this.modelDelegate.save()),this.toJSON()},b.prototype.setPayloadAttributes=function(a){var b,c;return null==a&&(a={}),b=this.getEngine(),c=b.payload,_(c).extend(a),b.payload=c,this.set({engine:b,silent:!0})},b.prototype.setPayloadJSON=function(a){var b;return b=this.getEngine(),b.payload=a,this.set({engine:b},{silent:!0})},b.prototype.setViewDelegate=function(a){return this.viewDelegate&&(this.viewDelegate=null),this.viewDelegate=a,this},b.prototype.canNavigate=function(a){return null!=this.modelDelegate&&"function"==typeof this.modelDelegate._getCanNavigate?this.modelDelegate._getCanNavigate(a):!0},b.prototype.canSave=function(){return null!=this.modelDelegate&&"function"==typeof this.modelDelegate._getCanSave?this.modelDelegate._getCanSave():!0},b.prototype.canShowScore=function(){return null!=this.modelDelegate&&"function"==typeof this.modelDelegate._getCanShowScore?this.modelDelegate._getCanShowScore():!0},b.prototype.getScore=function(){return this.canShowScore()?null!=this.modelDelegate&&"function"==typeof this.modelDelegate.score?this.modelDelegate.score():null:null},b.prototype.shouldShowInstructions=function(){var a,b;return((null!=(a=this.get("instructions"))?null!=(b=a.payload)?b.auto:void 0:void 0)||null!=this.modelDelegate&&this.modelDelegate._getShouldShowInstructions()===!0)&&this.get("instructionsShown")===!1?!0:!1},b.prototype.getInstructions=function(){return this.get("instructions")||null},b.prototype.select=function(){return this._setVisitedState(!0),this._setLastVisitedState(!0),this._setActiveState(!0)},b.prototype.unselect=function(){return this._setActiveState(!1),this._setLastVisitedState(!1),this._releaseDelegates()},b.prototype.setOption=function(a,b){var c;return c=this.get("options"),c[a]=b,this.set({options:c},{silent:!0})},b.prototype.getIndex=function(){return _.indexOf(this.collection.models,this)},b.prototype.getEngine=function(){return this.get("engine")},b.prototype.getTools=function(){return this.get("tools")},b.prototype.getData=function(){return this.get("payload")},b.prototype.getLocals=function(){return this.getData().locals},b.prototype._releaseDelegates=function(){return this.modelDelegate=null,this.viewDelegate=null},b.prototype._clearSelectedState=function(){return this._setActiveState(!1)},b.prototype._setActiveState=function(a){return this.set({active:a},{silent:!0}),this},b.prototype._setVisitedState=function(a){return this.set({visited:a},{silent:!0}),this},b.prototype._setLastVisitedState=function(a){return this.set({lastVisited:a},{silent:!0}),this},b}(d)}),window.require.register("core/models/tool/collection",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/models/base/collection"),f=b("core/models/tool/model"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.model=f,b}(d)}),window.require.register("core/models/tool/model",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/models/base/model"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b}(d)}),window.require.register("core/models/user/model",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/models/base/model"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(a){return null==a&&(a={}),b.__super__.initialize.apply(this,arguments)},b.prototype.getManifestFileName=function(){return(this.get("manifest")||"manifest")+".json"},b.prototype.getLocalStorageName=function(){var a;return a=App.options.name||"interactive",""+a},b}(d)}),window.require.register("core/routes",function(a,b,c){c.exports=function(a){return a(":page","page#show",{name:"page"}),a("*anything","404#index")}}),window.require.register("core/views/base/collection-view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),f=b("core/views/base/view"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.getTemplateFunction=f.prototype.getTemplateFunction,b.prototype.getTemplateData=function(){var a;return null!=(a=this.collection)?a.toJSON():void 0},b}(d.CollectionView)}),window.require.register("core/views/base/view",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),b("core/lib/view-helper"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.getTemplateFunction=function(){return this.template},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments)},b.prototype.getTemplateData=function(){var a;return null!=(a=this.model)?a.toJSON():void 0},b.prototype.afterRender=function(){},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),this.afterRender.toString().length<15?void 0:(console.warn("DEPRECATED: afterRender has been deprecated. Please use attach instead.",this),this.afterRender())},b}(d.View)}),window.require.register("core/views/engine/templates/engine",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){c=c||a.helpers;var g,h,f="",i="function",j=this.escapeExpression;return f+="<h1>",h=c.title,h?g=h.call(b,{hash:{}}):(g=b.title,g=typeof g===i?g():g),f+=j(g)+"</h1>\n<p>",h=c.content,h?g=h.call(b,{hash:{}}):(g=b.content,g=typeof g===i?g():g),f+=j(g)+"</p>\n"})}),window.require.register("core/views/engine/view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),f=b("core/views/engine/templates/engine"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="page",b.prototype.id=function(){return"page-"+this.model.get("index")},b.prototype.template=f,b.prototype.getTemplateData=function(){return JSON.stringify(this.model)},b.prototype.initialize=function(){return this.container="#"+window.PAGE_CONTAINER_ID,b.__super__.initialize.apply(this,arguments)},b.prototype.disposeDom=function(a){var b;return null!=(b=this.$el)?b.on("animationend mozanimationend webkitAnimationEnd oAnimationEnd msanimationend",function(){return a()}):void 0},b.prototype.dispose=function(){return b.__super__.dispose.apply(this,arguments)},b}(e)}),window.require.register("core/views/error/templates/template",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function j(a){var e,f,d="";return d+='\n<div class="modal-lightbox"></div>\n<div class="modal-wrapper">\n  <div class="modal">\n    <div class="modal-header">\n      <i class="icon icon-bolt" style="float:left; opacity: .2;"></i>\n      <i class="icon" style="font-size: 18px; padding: 7px 4px; float:right; opacity: .6;">&times;</i>\n    </div>\n    <div class="modal-body">\n      ',f=c.content,f?e=f.call(a,{hash:{}}):(e=a.content,e=typeof e===h?e():e),(e||0===e)&&(d+=e),d+='\n    </div>\n    <div class="modal-footer">\n    </div>\n  </div>\n</div>\n'}c=c||a.helpers;var g,f="",h="function",i=this;return g=b.content,g=c["if"].call(b,g,{hash:{},inverse:i.noop,fn:i.program(1,j,e)}),(g||0===g)&&(f+=g),f+="\n"})}),window.require.register("core/views/error/view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/modal/view"),f=b("core/views/error/templates/template"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="error",b.prototype.template=f,f=null,b.prototype.initialize=function(a){return this.options=null!=a?a:{},b.__super__.initialize.apply(this,arguments)},b.prototype.getTemplateData=function(){var a;return a="",null!=this.options.text?a=this.options.text:null!=this.options.content&&(a=marked(this.options.content)),{content:a}},b}(e)}),window.require.register("core/views/info/templates/template",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function j(a){var e,f,d="";return d+='\n<div class="modal-lightbox"></div>\n<div class="modal-wrapper">\n  <div class="modal">\n    <div class="modal-header">\n      <i class="icon icon-flag" style="float:left; opacity: .2;"></i>\n      <i class="icon" style="font-size: 18px; padding: 7px 4px; float:right; opacity: .6;">&times;</i>\n    </div>\n    <div class="modal-body">\n      ',f=c.content,f?e=f.call(a,{hash:{}}):(e=a.content,e=typeof e===h?e():e),(e||0===e)&&(d+=e),d+='\n    </div>\n    <div class="modal-footer">\n    </div>\n  </div>\n</div>\n'}c=c||a.helpers;var g,f="",h="function",i=this;return g=b.content,g=c["if"].call(b,g,{hash:{},inverse:i.noop,fn:i.program(1,j,e)}),(g||0===g)&&(f+=g),f+="\n"})}),window.require.register("core/views/info/view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/modal/view"),f=b("core/views/info/templates/template"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="info",b.prototype.template=f,f=null,b.prototype.initialize=function(a){return this.options=null!=a?a:{},b.__super__.initialize.apply(this,arguments)},b.prototype.getTemplateData=function(){var a;return a="",null!=this.options.text?a=this.options.text:null!=this.options.content&&(a=marked(this.options.content)),{content:a}},b}(e)}),window.require.register("core/views/instructions/button-view",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),f=b("core/views/instructions/templates/button"),c.exports=d=function(a){function b(){return this.handlePageChange=h(this.handlePageChange,this),g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.id="instructions-button-container",b.prototype.template=f,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.container="#"+window.MENU_CONTAINER_ID,this.delegate("click","#instructions-button",this.publishShowInstructions),this.subscribeEvent("!page:change",this.handlePageChange)},b.prototype.publishShowInstructions=function(){return this.publishEvent("!instructions:show",this)},b.prototype.toggle=function(){return null!=this.model?null!=this.model.getInstructions()?this.$("#instructions-button").removeClass("inactive"):this.$("#instructions-button").addClass("inactive"):void 0},b.prototype.handlePageChange=function(a){var b=this;return this.model=a,null!=this.model&&this.listenTo(this.model,"change:instructions",this.toggle),this.render(),this.model.shouldShowInstructions()?setTimeout(function(){return b.publishShowInstructions()},500):void 0},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.toggle()},b}(e)}),window.require.register("core/views/instructions/templates/button",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div id="instructions-button">\n  <i class="icons icon-instructions icon-2x"></i>\n</div>\n'})}),window.require.register("core/views/instructions/templates/template",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function j(a){var e,f,d="";return d+='\n<div class="modal-lightbox"></div>\n<div class="modal-wrapper">\n  <div class="modal">\n    <div class="modal-header">\n      <i class="icon icon-instructions" style="float:left; opacity: .2;"></i>\n      <i class="icon icon-emove" style="font-size: 18px; padding: 7px 4px; float:right; opacity: .6;">&times;</i>\n    </div>\n    <div class="modal-body">\n      ',f=c.content,f?e=f.call(a,{hash:{}}):(e=a.content,e=typeof e===h?e():e),(e||0===e)&&(d+=e),d+='\n    </div>\n    <div class="modal-footer">\n    </div>\n  </div>\n</div>\n'}c=c||a.helpers;var g,f="",h="function",i=this;return g=b.content,g=c["if"].call(b,g,{hash:{},inverse:i.noop,fn:i.program(1,j,e)}),(g||0===g)&&(f+=g),f+="\n"})}),window.require.register("core/views/instructions/view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/modal/view"),f=b("core/views/instructions/templates/template"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="instructions",b.prototype.template=f,f=null,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments)},b.prototype.getTemplateData=function(){var a;return this.instructions=this.model.get("instructions"),"markdown"===(null!=(a=this.instructions)?a.module:void 0)?{content:marked(this.instructions.payload.content)}:""},b.prototype.render=function(){var a;return b.__super__.render.apply(this,arguments),"default"===(null!=(a=this.instructions)?a.module:void 0)?this.$el.css({opacity:"1",background:"transparent url("+this.model.get("instructions").payload.images[0]+") no-repeat top left","background-size":"100%"}):this.$el.fadeIn("fast")},b}(e)}),window.require.register("core/views/layout",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("chaplin"),c.exports=e=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(){var a,c,d;return b.__super__.initialize.apply(this,arguments),a=document.createElement("div"),a.id=window.INTERACTIVE_CONTAINER_ID,d=document.createElement("div"),d.id=window.PAGE_CONTAINER_ID,c=document.createElement("div"),c.id=window.MENU_CONTAINER_ID,$(a).append($(d),$(c)),$("body").append($(a)),new FastClick(document.body),this.subscribeEvent("!goToPage:previousPage",function(){return this.direction=0}),this.subscribeEvent("!goToPage:nextPage",function(){return this.direction=0}),this.subscribeEvent("!goToPage:jumpPage",function(){return this.direction=0})},b.prototype.direction=0,b.prototype.slideInRight="animated slideInRight",b.prototype.slideOutRight="animated slideOutRight",b.prototype.slideInLeft="animated slideInLeft",b.prototype.slideOutLeft="animated slideOutLeft",b.prototype.fadeIn="animated fadeIn",b.prototype.fadeOut="animated fadeOut",b.prototype.hideOldView=function(a){var b;return b=a.view,b?b.$el.hide():void 0},b.prototype.showNewView=function(a){var b;return b=a.controller.view,b?this.direction>0?b.$el.addClass(this.slideInLeft):this.direction<0?b.$el.addClass(this.slideInRight):b.$el.addClass(this.fadeIn):void 0},b}(d.Layout)}),window.require.register("core/views/modal/view",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),c.exports=d=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.id="modal-container",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.container="#"+window.INTERACTIVE_CONTAINER_ID,this._delegateModalEvents()},b.prototype._delegateModalEvents=function(){return this.delegate("click",this.publishClose),this.delegate("touchmove",this.publishClose)},b.prototype.publishClose=function(){return this.trigger("!modal:close",this)},b}(e)}),window.require.register("core/views/navigation/collection-view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/views/base/collection-view"),f=b("core/views/navigation/item-view"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.tagName="div",b.prototype.className="navigation-list",b.prototype.itemView=f,b.prototype.autoRender=!0,b.prototype.container="#navigation-list-container",b.prototype.animationDuration=0,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.delegate("click",".navigation-item.visited",this.goToPage)},b.prototype.goToPage=function(a){var b;return b=$(a.currentTarget).attr("data-page"),this.collection.jumpPage(b)},b}(d)}),window.require.register("core/views/navigation/item-view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),f=b("core/views/navigation/templates/navigation-item"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className=function(){return["navigation-item",this.model.get("visited")?"visited":"",this.model.get("active")?"active":""].join(" ")},b.prototype.tagName="div",b.prototype.template=f,b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$el.attr("data-page",this.model.getIndex())},b}(e)}),window.require.register("core/views/navigation/templates/navigation-item",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div class="navigation-dot">\n  <i class="icons icon-navigation-dot"></i>\n</div>\n'})}),window.require.register("core/views/navigation/templates/navigation",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div id="navigation">\n  <div class="navigation-link previous">\n    <div class="navigation-arrow">\n      <i class="icon-chevron-left">&nbsp;</i>\n    </div>\n  </div>\n  <div id="navigation-list-container">\n  </div>\n  <div class="navigation-link next">\n    <div class="navigation-arrow">\n      <i class="icon-chevron-right">&nbsp;</i>\n    </div>\n  </div>\n</div>\n'})}),window.require.register("core/views/navigation/view",function(a,b,c){var d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j={}.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};f=b("core/views/base/view"),d=b("core/views/navigation/collection-view"),g=b("core/views/navigation/templates/navigation"),c.exports=e=function(a){function b(){return this.handlePageChange=i(this.handlePageChange,this),h=b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.id="navigation-container",b.prototype.template=g,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.container="#"+window.MENU_CONTAINER_ID,this.delegate("click",".previous",this.goToPrevious),this.delegate("click",".next",this.goToNext),this.subscribeEvent("!page:change",this.handlePageChange)
},b.prototype.handlePageChange=function(a){return this.model=a,null!=this.model&&this.listenTo(this.model,"change:canNavigate",this.toggle),this.render()},b.prototype.goToNext=function(){return this.collection.goToNextPage()},b.prototype.goToPrevious=function(){return this.collection.goToPreviousPage()},b.prototype.renderSubviews=function(){return this.subview("navigation-list",new d({collection:this.collection})),this.subview("navigation-list").render()},b.prototype.attach=function(){return b.__super__.attach.apply(this,arguments),this.renderSubviews()},b.prototype.render=function(){var a;return(null!=(a=this.collection)?a.length:void 0)>1?(b.__super__.render.apply(this,arguments),this.toggle()):void 0},b.prototype.toggle=function(){return null!=this.model?this.model.canNavigate()?this.$(".navigation-link.next").removeClass("inactive"):this.$(".navigation-link.next").addClass("inactive"):void 0},b}(f)}),window.require.register("core/views/save/button-view",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),f=b("core/views/save/templates/button"),c.exports=d=function(a){function b(){return this.handlePageChange=h(this.handlePageChange,this),g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.id="save-button-container",b.prototype.template=f,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.container="#"+window.MENU_CONTAINER_ID,this.delegate("click","#save-button",this.publishSaveShow),this.subscribeEvent("!page:change",this.handlePageChange)},b.prototype.publishSaveShow=function(){return this.model.canSave()?this.publishEvent("!save:show",this):void 0},b.prototype.toggle=function(){return null!=this.model?this.model.canSave()?this.$("#save-button").removeClass("inactive"):this.$("#save-button").addClass("inactive"):void 0},b.prototype.handlePageChange=function(a){return this.model=a,null!=this.model&&this.listenTo(this.model,"change:canSave",this.toggle),this.render()},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.toggle()},b}(e)}),window.require.register("core/views/save/templates/button",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div id="save-button">\n  <i class="icons icon-save icon-3x"></i>\n</div>\n'})}),window.require.register("core/views/save/templates/template",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div class="modal-lightbox"></div>\n<div class="modal-wrapper">\n  <div class="modal">\n    <div class="modal-message"></div>\n    <div class="modal-header">\n      <i class="icon icon-save" style="float:left; opacity: .2;"></i>\n      <i class="icon close-button" style="font-size: 18px; padding: 7px 4px; float:right; opacity: .6;">&times;</i>\n    </div>\n    <div class="modal-body">\n      <h3>Save your work?</h3>\n      <div class="button-container">\n        <div class="button save-state-button">\n          <i class="icon icon-ok icon-4x"></i>\n          <br>\n          Save\n        </div>\n      </div>\n      <div class="button-container">\n        <div class="button cancel-button">\n          <i class="icon icon-remove icon-4x"></i>\n          <br>\n          Cancel\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n    </div>\n  </div>\n</div>\n'})}),window.require.register("core/views/save/view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/views/modal/view"),f=b("core/views/save/templates/template"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="save",b.prototype.template=f,f=null,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments)},b.prototype.getTemplateData=function(){return{}},b.prototype._delegateModalEvents=function(){return this.delegate("click",".save-canvas-button",this.publishSaveCanvas),this.delegate("click",".save-state-button",this.publishSaveState),this.delegate("click",".close-button",this.publishCancel),this.delegate("click",".cancel-button",this.publishCancel)},b.prototype.publishSaveCanvas=function(a){return null!=a&&a.stopPropagation(),this._subscribeSaveEvents(),this.publishEvent("!save:canvas",this)},b.prototype.publishSaveState=function(a){return null!=a&&a.stopPropagation(),this._subscribeSaveEvents(),this.publishEvent("!save:state",this)},b.prototype.publishCancel=function(a){return null!=a&&a.stopPropagation(),this.publishClose()},b.prototype.saveConfirmed=function(){var a=this;return this.$(".cancel-button").addClass("inactive"),this.$(".save-canvas-button").addClass("inactive"),this.$(".save-state-button").addClass("inactive"),this.$(".modal-message").html("Saved!").show(),setTimeout(function(){return a.publishClose()},1e3),this._unSubscribeSaveEvents()},b.prototype.saveError=function(a){return console.warn("error saving "+a),this._unSubscribeSaveEvents(),this.publishClose()},b.prototype._subscribeSaveEvents=function(){return this.subscribeEvent("!saved:canvas",this.saveConfirmed),this.subscribeEvent("!saved:state",this.saveConfirmed),this.subscribeEvent("!save:canvas:error",this.saveError),this.subscribeEvent("!save:state:error",this.saveError)},b.prototype._unSubscribeSaveEvents=function(){return this.unsubscribeEvent("!saved:canvas",this.saveConfirmed),this.unsubscribeEvent("!saved:state",this.saveConfirmed),this.unsubscribeEvent("!save:canvas:error",this.saveError),this.unsubscribeEvent("!save:state:error",this.saveError)},b}(d)}),window.require.register("core/views/score/button-view",function(a,b,c){var d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),f=b("core/views/score/templates/button"),c.exports=d=function(a){function b(){return this.handlePageChange=h(this.handlePageChange,this),g=b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.id="score-button-container",b.prototype.template=f,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.container="#"+window.MENU_CONTAINER_ID,this.delegate("click","#score-button",this.publishShowScore),this.subscribeEvent("!page:change",this.handlePageChange)},b.prototype.publishShowScore=function(){return this.model.canShowScore()?this.publishEvent("!score:show",this):void 0},b.prototype.toggle=function(){return null!=this.model?this.model.canShowScore()?this.$("#score-button").removeClass("inactive"):this.$("#score-button").addClass("inactive"):void 0},b.prototype.handlePageChange=function(a){return this.model=a,null!=this.model&&this.listenTo(this.model,"change:canShowScore",this.toggle),this.render()},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.toggle()},b}(e)}),window.require.register("core/views/score/templates/button",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div id="score-button">\n  <i class="icons icon-score icon-2x"></i>\n</div>\n'})}),window.require.register("core/views/score/templates/template",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){c=c||a.helpers;var g,f="",h="function",i=this.escapeExpression;return f+='\n<div class="modal-lightbox"></div>\n<div class="modal-wrapper">\n  <div class="modal">\n    <div class="modal-message"></div>\n    <div class="modal-header">\n      <i class="icon icon-score" style="float:left; opacity: .2;"></i>\n      <i class="icon close-button" style="font-size: 18px; padding: 7px 4px; float:right; opacity: .6;">&times;</i>\n    </div>\n    <div class="modal-body">\n      <h2>Your Score</h2>\n      <div class="score-container">\n        <div class="score-box">\n          ',g=b.data,g=null==g||g===!1?g:g.correct,g=typeof g===h?g():g,f+=i(g)+'\n        </div>\n        <div class="score-title">\n          Correct\n        </div>\n      </div>\n      <div class="score-container">\n        <div class="score-box">\n          ',g=b.data,g=null==g||g===!1?g:g.incorrect,g=typeof g===h?g():g,f+=i(g)+'\n        </div>\n        <div class="score-title">\n          Incorrect\n        </div>\n      </div>\n      <div class="score-container">\n        <div class="score-box">\n          ',g=b.data,g=null==g||g===!1?g:g.missed,g=typeof g===h?g():g,f+=i(g)+'\n        </div>\n        <div class="score-title">\n          Missed\n        </div>\n      </div>\n    </div>\n    <div class="modal-footer">\n    </div>\n  </div>\n</div>\n'})}),window.require.register("core/views/score/view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/views/modal/view"),f=b("core/views/score/templates/template"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="score",b.prototype.template=f,f=null,b.prototype.getTemplateData=function(){return{data:this.model.get("score")}},b}(d)}),window.require.register("core/views/tool/collection-view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("core/views/base/collection-view"),f=b("core/views/tool/item-view"),c.exports=e=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.tagName="div",b.prototype.className="tool-list",b.prototype.itemView=f,b.prototype.autoRender=!0,b.prototype.container="#tool-list-container",b.prototype.animationDuration=0,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments)},b}(d)}),window.require.register("core/views/tool/item-view",function(a,b,c){var d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("core/views/base/view"),f=b("core/views/tool/templates/tool-item"),c.exports=d=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className=function(){return["tool-item",this.model.get("active")?"active":""].join(" ")},b.prototype.tagName="div",b.prototype.template=f,b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$el.attr("data-tool","tool-name")},b}(e)}),window.require.register("core/views/tool/templates/tool-item",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){c=c||a.helpers;var g,h,f="",i="function",j=this.escapeExpression;return h=c.name,h?g=h.call(b,{hash:{}}):(g=b.name,g=typeof g===i?g():g),f+=j(g)+"\n"})}),window.require.register("core/views/tool/templates/tools",function(a,b,c){c.exports=Handlebars.template(function(a,b,c){return c=c||a.helpers,'<div id="tools">\n  <div id="tool-toggle">\n    <i class="icons icon-tool-list icon-3x"></i>\n  </div>\n  <div id="tool-list-container" class="slideRight">\n  </div>\n</div>\n'})}),window.require.register("core/views/tool/view",function(a,b,c){var d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k={}.hasOwnProperty,l=function(a,b){function d(){this.constructor=a}for(var c in b)k.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};g=b("core/views/base/view"),d=b("core/models/tool/collection"),e=b("core/views/tool/collection-view"),h=b("core/views/tool/templates/tools"),c.exports=f=function(a){function b(){return this.handlePageChange=j(this.handlePageChange,this),i=b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.id="tools-container",b.prototype.template=h,b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.container="#"+window.MENU_CONTAINER_ID,this.delegate("click","#tool-toggle",this.toggleToolList),this.subscribeEvent("!page:change",this.handlePageChange)},b.prototype.toggleToolList=function(){return this.$("#tool-list-container").toggle()},b.prototype.renderSubviews=function(){return this.subview("tool-list",new e({collection:new d(this.tools)})),this.$("#tool-list-container").hide(),this.subview("tool-list").render()},b.prototype.handlePageChange=function(a){return this.model=a,this.tools=this.model.getTools(),this.render()},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.tools?this.$("#tool-toggle").removeClass("inactive"):this.$("#tool-toggle").addClass("inactive")},b}(g)}),this.Handlebars={},function(a){a.VERSION="1.0.rc.1",a.helpers={},a.partials={},a.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},a.registerPartial=function(a,b){this.partials[a]=b},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new Error("Could not find property '"+a+"'")});var b=Object.prototype.toString,c="[object Function]";a.registerHelper("blockHelperMissing",function(d,e){var f=e.inverse||function(){},g=e.fn,i=b.call(d);return i===c&&(d=d.call(this)),d===!0?g(this):d===!1||null==d?f(this):"[object Array]"===i?d.length>0?a.helpers.each(d,e):f(this):g(d)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.registerHelper("each",function(b,c){var g,d=c.fn,e=c.inverse,f="";if(c.data&&(g=a.createFrame(c.data)),b&&b.length>0)for(var h=0,i=b.length;i>h;h++)g&&(g.index=h),f+=d(b[h],{data:g});else f=e(this);return f}),a.registerHelper("if",function(d,e){var f=b.call(d);return f===c&&(d=d.call(this)),!d||a.Utils.isEmpty(d)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,a.helpers["if"].call(this,b,c)}),a.registerHelper("with",function(a,b){return b.fn(a)}),a.registerHelper("log",function(b){a.log(b)})}(this.Handlebars),Handlebars.Exception=function(){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():null==a||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return"undefined"==typeof a?!0:null===a?!0:a===!1?!0:"[object Array]"===Object.prototype.toString.call(a)&&0===a.length?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:d=this.programs[a]=Handlebars.VM.program(b)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){var g={helpers:d,partials:e,data:f};if(void 0===a)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g);if(Handlebars.compile)return e[b]=Handlebars.compile(a,{data:void 0!==f}),e[b](c,g);throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template;